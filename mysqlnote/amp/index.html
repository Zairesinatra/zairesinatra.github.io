<!DOCTYPE html>
<html ⚡>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <title>MySQL</title>

    <meta name="description" content="MYSQL 基础篇" />
    <link rel="icon" href="../../content/images/size/w256h256/2021/07/ghost-orb.png" type="image/png" />
    <link rel="canonical" href="../index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    
    <meta property="og:site_name" content="zairesinatra" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="MySQL" />
    <meta property="og:description" content="MYSQL 基础篇" />
    <meta property="og:url" content="https://zairesinatra.github.io//mysqlnote/" />
    <meta property="og:image" content="https://zairesinatra.github.io//content/images/2023/03/SwimmingDolphinsNearCoralReef.jpg" />
    <meta property="article:published_time" content="2021-12-22T13:11:00.000Z" />
    <meta property="article:modified_time" content="2023-03-04T17:49:58.000Z" />
    <meta property="article:tag" content="Technology growth" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="MySQL" />
    <meta name="twitter:description" content="MYSQL 基础篇" />
    <meta name="twitter:url" content="https://zairesinatra.github.io//mysqlnote/" />
    <meta name="twitter:image" content="https://zairesinatra.github.io//content/images/2023/03/SwimmingDolphinsNearCoralReef.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Ziyi Xie" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Technology growth" />
    <meta name="twitter:site" content="@xieziyi0422" />
    <meta property="og:image:width" content="1920" />
    <meta property="og:image:height" content="1080" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "zairesinatra",
        "url": "https://zairesinatra.github.io//",
        "logo": {
            "@type": "ImageObject",
            "url": "https://zairesinatra.github.io//content/images/2021/07/zs-1.JPG",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Ziyi Xie",
        "image": {
            "@type": "ImageObject",
            "url": "https://zairesinatra.github.io//content/images/2021/07/zs-2.JPG",
            "width": 1079,
            "height": 1079
        },
        "url": "https://zairesinatra.github.io//author/ziyi/",
        "sameAs": []
    },
    "headline": "MySQL",
    "url": "https://zairesinatra.github.io//mysqlnote/",
    "datePublished": "2021-12-22T13:11:00.000Z",
    "dateModified": "2023-03-04T17:49:58.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://zairesinatra.github.io//content/images/2023/03/SwimmingDolphinsNearCoralReef.jpg",
        "width": 1920,
        "height": 1080
    },
    "keywords": "Technology growth",
    "description": "MYSQL 基础篇",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://zairesinatra.github.io//"
    }
}
    </script>

    <meta name="generator" content="Ghost 5.33" />
    <link rel="alternate" type="application/rss+xml" title="zairesinatra" href="../../rss/index.html" />

    <style amp-custom>
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    html {
        overflow-x: hidden;
        overflow-y: scroll;
        font-size: 62.5%;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }

    body {
        min-height: 100vh;
        margin: 0;
        padding: 0;
        color: #3a4145;
        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;
        font-size: 1.7rem;
        line-height: 1.55em;
        font-weight: 400;
        font-style: normal;
        background: #fff;
        scroll-behavior: smooth;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    p,
    ul,
    ol,
    li,
    dl,
    dd,
    hr,
    pre,
    form,
    table,
    video,
    figure,
    figcaption,
    blockquote {
        margin: 0;
        padding: 0;
    }

    ul[class],
    ol[class] {
        padding: 0;
        list-style: none;
    }

    img {
        display: block;
        max-width: 100%;
    }

    input,
    button,
    select,
    textarea {
        font: inherit;
        -webkit-appearance: none;
    }

    fieldset {
        margin: 0;
        padding: 0;
        border: 0;
    }

    label {
        display: block;
        font-size: 0.9em;
        font-weight: 700;
    }

    hr {
        position: relative;
        display: block;
        width: 100%;
        height: 1px;
        border: 0;
        border-top: 1px solid currentcolor;
        opacity: 0.1;
    }

    ::selection {
        text-shadow: none;
        background: #cbeafb;
    }

    mark {
        background-color: #fdffb6;
    }

    small {
        font-size: 80%;
    }

    sub,
    sup {
        position: relative;
        font-size: 75%;
        line-height: 0;
        vertical-align: baseline;
    }
    sup {
        top: -0.5em;
    }
    sub {
        bottom: -0.25em;
    }

    ul li + li {
        margin-top: 0.6em;
    }

    a {
        color: var(--ghost-accent-color, #1292EE);
        text-decoration-skip-ink: auto;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        margin: 0;
        font-weight: 700;
        color: #121212;
        line-height: 1.4em;
    }

    h1 {
        font-size: 3.4rem;
        line-height: 1.1em;
    }

    h2 {
        font-size: 2.4rem;
        line-height: 1.2em;
    }

    h3 {
        font-size: 1.8rem;
    }

    h4 {
        font-size: 1.7rem;
    }

    h5 {
        font-size: 1.6rem;
    }

    h6 {
        font-size: 1.6rem;
    }

    amp-img {
        height: 100%;
        width: 100%;
        max-width: 100%;
        max-height: 100%;
    }

    amp-img img {
        object-fit: cover;
    }
    
    amp-youtube {
        height: calc(100vw / 1.78);
        width: 100vw;
        position: relative;
    }

    amp-youtube img {
        position: absolute;
    }

    .page-header {
        padding: 50px 5vmin 30px;
        text-align: center;
        font-size: 2rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .page-header a {
        color: #121212;
        font-weight: 700;
        text-decoration: none;
        font-size: 1.6rem;
        letter-spacing: -0.1px;
    }

    .post {
        max-width: 680px;
        margin: 0 auto;
    }

    .post-header {
        margin: 0 5vmin 5vmin;
        text-align: center;
    }

    .post-meta {
        margin: 1rem 0 0 0;
        text-transform: uppercase;
        color: #738a94;
        font-weight: 500;
        font-size: 1.3rem;
    }

    .post-image {
        margin: 0 0 5vmin;
    }

    .post-image img {
        display: block;
        width: 100%;
        height: auto;
    }

    .post-content {
        padding: 0 5vmin;
    }

    .post-content > * + * {
        margin-top: 1.5em;
    }

    .post-content [id]:not(:first-child) {
        margin: 2em 0 0;
    }

    .post-content > [id] + * {
        margin-top: 1rem;
    }

    .post-content [id] + .kg-card,
    .post-content blockquote + .kg-card {
        margin-top: 40px;
    }

    .post-content > ul,
    .post-content > ol,
    .post-content > dl {
        padding-left: 1.9em;
    }

    .post-content hr {
        margin-top: 40px;
    }

    .post .post-content hr + * {
        margin-top: 40px;
    }

    .post-content amp-img {
        background-color: #f8f8f8;
    }

    .post-content blockquote {
        position: relative;
        font-style: italic;
    }

    .post-content blockquote::before {
        content: "";
        position: absolute;
        left: -1.5em;
        top: 0;
        bottom: 0;
        width: 0.3rem;
        background: var(--ghost-accent-color, #1292EE);
    }

    .post-content blockquote.kg-blockquote-alt {
        font-size: 1.2em;
        font-style: italic;
        line-height: 1.6em;
        text-align: center;
        color: #738a94;
        padding: 0.75em 3em 1.25em;
    }

    .post-content blockquote.kg-blockquote-alt::before {
        display: none;
    }

    .post-content :not(.kg-card):not([id]) + .kg-card {
        margin-top: 40px;
    }

    .post-content .kg-card + :not(.kg-card) {
        margin-top: 40px;
    }

    .kg-card figcaption {
        padding: 1.5rem 1.5rem 0;
        text-align: center;
        font-weight: 500;
        font-size: 1.3rem;
        line-height: 1.4em;
        opacity: 0.6;
    }

    .kg-card figcaption strong {
        color: rgba(0,0,0,0.8);
    }

    .post-content :not(pre) code {
        vertical-align: middle;
        padding: 0.15em 0.4em 0.15em;
        border: #e1eaef 1px solid;
        font-weight: 400;
        font-size: 0.9em;
        line-height: 1em;
        color: #15171a;
        background: #f0f6f9;
        border-radius: 0.25em;
    }

    .post-content > pre {
        overflow: scroll;
        padding: 16px 20px;
        color: #fff;
        background: #1F2428;
        border-radius: 5px;
        box-shadow: 0 2px 6px -2px rgba(0,0,0,.1), 0 0 1px rgba(0,0,0,.4);
    }

    .kg-embed-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
    }

    .kg-image-card img {
        margin: auto;
    }

    .kg-gallery-card + .kg-gallery-card {
        margin-top: 0.75em;
    }

    .kg-gallery-container {
        position: relative;
    }

    .kg-gallery-row {
        display: flex;
        flex-direction: row;
        justify-content: center;
    }

    .kg-gallery-image {
        width: 100%;
        height: 100%;
    }

    .kg-gallery-row:not(:first-of-type) {
        margin: 0.75em 0 0 0;
    }

    .kg-gallery-image:not(:first-of-type) {
        margin: 0 0 0 0.75em;
    }

    .kg-bookmark-card,
    .kg-bookmark-publisher {
        position: relative;
    }

    .kg-bookmark-container,
    .kg-bookmark-container:hover {
        display: flex;
        flex-wrap: wrap;
        flex-direction: row-reverse;
        color: currentColor;
        background: rgba(255,255,255,0.6);
        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;
        text-decoration: none;
        border-radius: 3px;
        box-shadow: 0 2px 6px -2px rgba(0, 0, 0, 0.1), 0 0 1px rgba(0, 0, 0, 0.4);
        overflow: hidden;
    }

    .kg-bookmark-content {
        flex-basis: 0;
        flex-grow: 999;
        padding: 20px;
        order: 1;
    }

    .kg-bookmark-title {
        font-weight: 600;
        font-size: 1.5rem;
        line-height: 1.3em;
    }

    .kg-bookmark-description {
        display: -webkit-box;
        max-height: 45px;
        margin: 0.5em 0 0 0;
        font-size: 1.4rem;
        line-height: 1.55em;
        overflow: hidden;
        opacity: 0.8;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }

    .kg-bookmark-metadata {
        margin-top: 20px;
    }

    .kg-bookmark-metadata {
        display: flex;
        align-items: center;
        font-weight: 500;
        font-size: 1.3rem;
        line-height: 1.3em;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .kg-bookmark-description {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
    }

    .kg-bookmark-metadata amp-img {
        width: 18px;
        height: 18px;
        max-width: 18px;
        max-height: 18px;
        margin-right: 10px;
    }

    .kg-bookmark-thumbnail {
        display: flex;
        flex-basis: 20rem;
        flex-grow: 1;
        justify-content: flex-end;
    }

    .kg-bookmark-thumbnail amp-img {
        max-height: 200px;
    }

    .kg-bookmark-author {
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
    }

    .kg-bookmark-publisher::before {
        content: "•";
        margin: 0 .5em;
    }

    .kg-toggle-card-icon {
        display: none;
    }

    .kg-toggle-content {
        margin-top: 0.8rem;
    }

    .kg-product-card-container {
        background: transparent;
        padding: 20px;
        width: 100%;
        border-radius: 5px;
        box-shadow: inset 0 0 0 1px rgb(124 139 154 / 25%);
    }

    .kg-product-card-description p {
        margin-top: 1.5em;
    }

    .kg-product-card-description ul {
        margin-left: 24px;
    }

    .kg-product-card-title {
        font-size: 1.9rem;
        font-weight: 700;
    }

    .kg-product-card-rating-star {
        height: 28px;
        width: 20px;
        margin-right: 2px;
    }

    .kg-product-card-rating-star svg {
    width: 16px;
    height: 16px;
    fill: currentColor;
    opacity: 0.15;
    }

    .kg-product-card-rating-active.kg-product-card-rating-star svg {
    opacity: 1;
    }

    .kg-nft-card-container {
        position: relative;
        display: flex;
        flex: auto;
        flex-direction: column;
        text-decoration: none;
        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;
        font-size: 1.4rem;
        font-weight: 400;
        box-shadow: 0 2px 6px -2px rgb(0 0 0 / 10%), 0 0 1px rgb(0 0 0 / 40%);
        width: 100%;
        max-width: 512px;
        color: #15212A;
        background: #fff;
        border-radius: 5px;
        transition: none;
        margin: 0 auto;
    }

    .kg-nft-metadata {
        padding: 2.0rem;
    }

    .kg-nft-image-container {
        position: relative;
    }

    .kg-nft-image {
        display: flex;
        border-radius: 5px 5px 0 0;
    }

    .kg-nft-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 20px;
    }

    .kg-nft-header h4.kg-nft-title {
        font-size: 1.9rem;
        font-weight: 700;
        margin: 0;
        color: #15212A;
    }

    .kg-nft-header amp-img {
        max-width: 114px;
        max-height: 26px;
    }

    .kg-nft-opensea-logo {
        margin-top: 2px;
        width: 100px;
    }

    .kg-nft-creator {
        font-family: inherit;
        color: #95A1AD;
    }

    .kg-nft-creator span {
        font-weight: 500;
        color: #15212A;
    }

    .kg-nft-card p.kg-nft-description {
        font-size: 1.4rem;
        line-height: 1.4em;
        margin: 2.0rem 0 0;
        color: #222;
    }

    .kg-button-card {
        display: flex;
        position: static;
        align-items: center;
        width: 100%;
        justify-content: center;
    }

    .kg-btn {
        display: flex;
        position: static;
        align-items: center;
        padding: 0 2.0rem;
        height: 4.0rem;
        line-height: 4.0rem;
        font-size: 1.65rem;
        font-weight: 600;
        text-decoration: none;
        border-radius: 5px;
        transition: opacity 0.2s ease-in-out;
    }

    .kg-btn:hover {
        opacity: 0.85;
    }

    .kg-btn-accent {
        background-color: var(--ghost-accent-color, #1292EE);
        color: #fff;
    }

    .kg-callout-card {
        display: flex;
        padding: 20px 28px;
        border-radius: 3px;
    }

    .kg-callout-card-grey {
        background: rgba(124, 139, 154, 0.13);
    }

    .kg-callout-card-white {
        background: transparent;
        box-shadow: inset 0 0 0 1px rgba(124, 139, 154, 0.25);
    }

    .kg-callout-card-blue {
        background: rgba(33, 172, 232, 0.12);
    }

    .kg-callout-card-green {
        background: rgba(52, 183, 67, 0.12);
    }

    .kg-callout-card-yellow {
        background: rgba(240, 165, 15, 0.13);
    }

    .kg-callout-card-red {
        background: rgba(209, 46, 46, 0.11);
    }

    .kg-callout-card-pink {
        background: rgba(225, 71, 174, 0.11);
    }

    .kg-callout-card-purple {
        background: rgba(135, 85, 236, 0.12);
    }

    .kg-callout-card-accent {
        background: var(--ghost-accent-color);
        color: #fff;
    }

    .kg-callout-card-accent a {
        color: #fff;
    }

    .kg-callout-emoji {
        padding-right: 16px;
        line-height: 1.3;
        font-size: 1.25em;
    }

    .kg-header-card {
        padding: 6em 3em;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
    }

    .kg-header-card.kg-size-small {
        padding-top: 4em;
        padding-bottom: 4em;
    }

    .kg-header-card.kg-size-large {
        padding-top: 12em;
        padding-bottom: 12em;
    }

    .kg-header-card.kg-width-full {
        padding-left: 4em;
        padding-right: 4em;
    }

    .kg-header-card.kg-align-left {
        text-align: left;
        align-items: flex-start;
    }

    .kg-header-card.kg-style-dark {
        background: #15171a;
        color: #ffffff;
    }

    .kg-header-card.kg-style-light {
        color: #15171a;
        border: 1px solid rgba(124, 139, 154, 0.25);
        border-width: 1px 0;
    }

    .kg-header-card.kg-style-accent {
        background-color: var(--ghost-accent-color);
    }

    .kg-header-card.kg-style-image {
        background-color: #e7e7eb;
        background-size: cover;
        background-position: center center;
    }

    .kg-header-card h2 {
        font-size: 4em;
        font-weight: 700;
        line-height: 1.1em;
        margin: 0;
    }

    .kg-header-card h2 strong {
        font-weight: 800;
    }

    .kg-header-card.kg-size-small h2 {
        font-size: 3em;
    }

    .kg-header-card.kg-size-large h2 {
        font-size: 5em;
    }

    .kg-header-card h3 {
        font-size: 1.25em;
        font-weight: 500;
        line-height: 1.3em;
        margin: 0;
    }

    .kg-header-card h3 strong {
        font-weight: 600;
    }

    .kg-header-card.kg-size-small h3 {
        font-size: 1em;
    }

    .kg-header-card.kg-size-large h3 {
        font-size: 1.5em;
    }

    .kg-header-card:not(.kg-style-light) h2,
    .kg-header-card:not(.kg-style-light) h3 {
        color: #ffffff;
    }

    .kg-header-card a.kg-header-card-button {
        display: flex;
        position: static;
        align-items: center;
        padding: 0 1.2em;
        height: 2.4em;
        line-height: 1em;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
        font-size: 0.95em;
        font-weight: 600;
        text-decoration: none;
        border-radius: 5px;
        transition: opacity 0.2s ease-in-out;
        background-color: var(--ghost-accent-color);
        color: #ffffff;
        margin: 1.75em 0 0;
    }

    .kg-header-card a.kg-header-card-button:hover {
        opacity: 0.85;
    }

    .kg-header-card.kg-size-large a.kg-header-card-button {
        margin-top: 2em;
    }

    .kg-header-card.kg-size-small a.kg-header-card-button {
        margin-top: 1.5em;
    }

    .kg-header-card.kg-style-image a.kg-header-card-button,
    .kg-header-card.kg-style-dark a.kg-header-card-button {
        background: #ffffff;
        color: #15171a;
    }

    .kg-header-card.kg-style-accent a.kg-header-card-button {
        background: #ffffff;
        color: var(--ghost-accent-color);
    }

    .kg-audio-card {
        display: flex;
        width: 100%;
        box-shadow: inset 0 0 0 1px rgba(124, 139, 154, 0.25);
    }

    .kg-audio-thumbnail {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 80px;
        min-width: 80px;
        height: 80px;
        background: transparent;
        object-fit: cover;
        aspect-ratio: 1/1;
        border-radius: 3px 0 0 3px;
    }

    .kg-audio-thumbnail.placeholder {
        background: var(--ghost-accent-color);
    }

    .kg-audio-thumbnail.placeholder svg {
        width: 24px;
        height: 24px;
        fill: white;
    }

    .kg-audio-player-container {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        width: 100%;
        --seek-before-width: 0%;
        --volume-before-width: 100%;
        --buffered-width: 0%;
    }

    .kg-audio-title {
        width: 100%;
        padding: 8px 12px 0;
        border: none;
        font-family: inherit;
        font-size: 1.1em;
        font-weight: 700;
        background: transparent;
    }

    .kg-audio-player {
        display: none;
    }

    .kg-width-full.kg-card-hascaption {
        display: grid;
        grid-template-columns: inherit;
    }

    .post-content table {
        border-collapse: collapse;
        width: 100%;
    }

    .post-content th {
        padding: 0.5em 0.8em;
        text-align: left;
        font-size: .75em;
        text-transform: uppercase;
    }

    .post-content td {
        padding: 0.4em 0.7em;
    }

    .post-content tbody tr:nth-child(2n + 1) {
        background-color: rgba(0,0,0,0.1);
        padding: 1px;
    }

    .post-content tbody tr:nth-child(2n + 2) td:last-child {
        box-shadow:
            inset 1px 0 rgba(0,0,0,0.1),
            inset -1px 0 rgba(0,0,0,0.1);
    }

    .post-content tbody tr:nth-child(2n + 2) td {
        box-shadow: inset 1px 0 rgba(0,0,0,0.1);
    }

    .post-content tbody tr:last-child {
        border-bottom: 1px solid rgba(0,0,0,.1);
    }

    .page-footer {
        padding: 60px 5vmin;
        margin: 60px auto 0;
        text-align: center;
        background-color: #f8f8f8;
    }

    .page-footer h3 {
        margin: 0.5rem 0 0 0;
    }

    .page-footer p {
        max-width: 500px;
        margin: 1rem auto 1.5rem;
        font-size: 1.7rem;
        line-height: 1.5em;
        color: rgba(0,0,0,0.6)
    }

    .powered {
        display: inline-flex;
        align-items: center;
        margin: 30px 0 0;
        padding: 6px 9px 6px 6px;
        border: rgba(0,0,0,0.1) 1px solid;
        font-size: 12px;
        line-height: 12px;
        letter-spacing: -0.2px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
        font-weight: 500;
        color: #222;
        text-decoration: none;
        background: #fff;
        border-radius: 6px;
    }

    .powered svg {
        height: 16px;
        width: 16px;
        margin: 0 6px 0 0;
    }

    @media (max-width: 600px) {
        body {
            font-size: 1.6rem;
        }
        h1 {
            font-size: 3rem;
        }

        h2 {
            font-size: 2.2rem;
        }
    }

    @media (max-width: 400px) {
        h1 {
            font-size: 2.6rem;
            line-height: 1.15em;
        }
        h2 {
            font-size: 2rem;
            line-height: 1.2em;
        }
        h3 {
            font-size: 1.7rem;
        }
    }

    :root {--ghost-accent-color: #15171A;}
    </style>

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>

    

</head>

<body class="amp-template">
    <header class="page-header">
        <a href="../../index.html">
                <amp-img class="site-icon" src="https://zairesinatra.github.io//content/images/2021/07/ghost-orb.png" width="50" height="50" layout="fixed" alt="zairesinatra"></amp-img>
        </a>
    </header>

    <main class="content" role="main">
        <article class="post">

            <header class="post-header">
                <h1 class="post-title">MySQL</h1>
                <section class="post-meta">
                    Ziyi Xie -
                    <time class="post-date" datetime="2021-12-22">22 Dec 2021</time>
                </section>
            </header>
            <figure class="post-image">
                <amp-img src="https://zairesinatra.github.io//content/images/2023/03/SwimmingDolphinsNearCoralReef.jpg" width="600" height="340" layout="responsive" 
                alt="Swimming Dolphins Near Coral Reef"
                ></amp-img>
            </figure>
            <section class="post-content">

                <h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">快速上手</h2>
<h3 id="quick-start">Quick Start</h3>
<p>数据库是有组织的数据容器。表是存储特定类型数据的结构化文件。模式说明库与表的布局与特性信息。列是表中的一个字段，所有表都由一个或多个列组成。行作为表中的一个记录。唯一标识表中每行的这个列或这组列，称为主键。没有主键则无法安全更新或删除表中的特定行。任何列都可以作为主键，但是需满足任意两行都不具有相同的主键值且每行都必须具有一个非 <code>NULL</code> 的主键值的条件。</p>
<p>默认数据库：</p>
<table>
<thead>
<tr>
<th>数据库</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>infomation_schema</td>
<td>信息数据库，包括 MySQL 在维护的其他数据库、表、列访问权限</td>
</tr>
<tr>
<td>performance_schema</td>
<td>性能数据库，记录 MySQL Server 运行过程中的一些资源消耗相关信息</td>
</tr>
<tr>
<td>mysql</td>
<td>用于存储数据库管理者的用户信息、权限信息以及日志信息</td>
</tr>
<tr>
<td>sys</td>
<td>简易版的 performance_schema，将性能数据库的数据汇总成易理解形式</td>
</tr>
</tbody>
</table>
<p>SELECT 语句完整结构：</p>
<ul>
<li><code>SELECT</code>：要返回的列或者表达式 -&gt; 必须使用</li>
<li><code>FROM</code>：检索数据的表 -&gt; 仅在从表中选择数据时使用</li>
<li><code>WHERE</code>：行级过滤 -&gt; 非必须使用</li>
<li><code>GROUP BY</code>：分组说明 -&gt; 仅在按组计算聚集时使用</li>
<li><code>HAVING</code>：组级过滤 -&gt; 非必须使用</li>
<li><code>ORDER BY</code>：输出排序顺序 -&gt; 非必须使用</li>
<li><code>LIMIT</code>：要检索的行数 -&gt; 非必须使用</li>
</ul>
<pre><code class="language-javascript">// sql92
SELECT ...(聚合函数) FROM ... WHERE 多表连接条件 AND 不包含聚合函数的过滤条件 GROUP BY ... HAVING 包含聚合函数的过滤条件 ORDER BY ...(ASC/DESC) LIMIT ...
// sql99
SELECT ...(聚合函数) FROM ... (LEFT/RIGHT) JOIN ... ON ... (多表的连接条件) (LEFT/RIGHT) JOIN ... ON ... (多表的连接条件) WHERE 不包含聚合函数的过滤条件 GROUP BY ... HAVING 包含聚合函数的过滤条件 ORDER BY ...(ASC/DESC) LIMIT ...
</code></pre>
<h3 id="sql-%E5%BA%95%E5%B1%82%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86%EF%BC%9A%E4%BA%A7%E7%94%9F%E4%B8%80%E7%B3%BB%E5%88%97%E8%99%9A%E6%8B%9F%E8%A1%A8">SQL 底层执行原理：产生一系列虚拟表</h3>
<p>先执行 <code>FROM</code> 关键字，多表联查会通过 <code>CROSS JOIN</code> 求笛卡尔积，将得到的虚拟表进行 <code>ON</code> 筛选，此过程在 VT1-1 的基础上得到 VT1-2。若使用到左、右连接或者全连接，那么会在 VT1-2 的基础上增加外部行产生 VT1-3。</p>
<p>通过 VT1 获取原始数据后进行 <code>WHERE</code> 操作，根据结果筛选过滤得到 VT2。</p>
<p><code>GROUP BY</code> 和 <code>HAVING</code> 对 VT2 进行分组和过滤得到 VT3 和 VT4。</p>
<p><code>SELECT</code> 和 <code>DISTINCT</code> 提取所需字段并过滤掉重复的行得到 VT5-1 和 VT5-2。</p>
<p><code>ORDER BY</code> 和 <code>LIMIT</code> 对指定的字段排序并通过分页取出指定行，得到最终的 VT6 与 VT7。</p>
<pre><code class="language-javascript">// FROM 首先加载、SELECT 视作索引首位处于第二加载、ORDER BY 与 LIMIT 看作索引末尾最后加载
FROM ... 多表联查会先 CROSS JOIN 求笛卡尔积 =&gt; ON 连接条件过滤 =&gt; 关注左右连接 =&gt; WHERE 过滤数据 =&gt; GROUP BY 按要求分组 =&gt; HAVING 聚合条件筛选 =&gt; SELECT =&gt; DISTINCT =&gt; ORDER BY =&gt; LIMIT
</code></pre>
<h3 id="%E5%88%9B%E5%BB%BA%E5%B9%B6%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93">创建并管理数据库</h3>
<p>仅通过 <code>CREATE DATABASE</code> 创建数据库时，字符集会使用数据库的默认设置。</p>
<p>显示指明字符集：<code>CREATE DATABASE 数据库名 CHARACTER SET '字符集';</code>。</p>
<pre><code class="language-sql"># 创建数据库若存在 =&gt; 不成功不报错
CREATE DATABASE IF NOT EXISTS 数据库名 CHARACTER SET '字符集';
</code></pre>
<p>更改现有数据库字符集：<code>ALTER DATABASE 数据库名 CHARACTER SET 字符集;</code>。</p>
<p>区分 <code>SHOW DATABASES;</code> &amp; <code>SELECT DATABASE();</code>：前者查看所有数据库，后者是通过一个全局函数查看当前正在使用的数据库。</p>
<p>查看指定库下的所有表：<code>SHOW TABLES FROM 数据库名;</code>。</p>
<p>查看数据库的创建语句：<code>SHOW CREATE DATABASE 数据库名\G</code>，<code>\G</code> 表示格式化输出信息。</p>
<p>删除数据库时最好能加以限制：<code>DROP DATABASE IF EXISTS 数据库名;</code>。</p>
<p>建表时必须指定表名、字段名、<a href="https://dev.mysql.com/doc/refman/8.0/en/data-types.html">类型</a>和长度，约束条件和默认值的设定不必须。</p>
<pre><code class="language-sql">CREATE TABLE IF NOT EXISTS myempl(id INT,emp_name VARCHAR(15),hire_date DATE);
</code></pre>
<p>表的结构描述：<code>DESC ???;</code>；表的创建语句：<code>SHOW CREATE TABLE ???;</code>。</p>
<p>在现有表的基础上创建新表（选择字段别名作为新表的字段名）常应用于表复制。</p>
<pre><code class="language-sql">CREATE TABLE 新表名 AS SELECT FIELD01 FIELD01ALIAS, FIELD02, ... FROM 现有表;
</code></pre>
<pre><code class="language-sql"># 创建新表 employees_copy 实现对 employees 表复制 =&gt; 包含表数据
CREATE TABLE employees_copy AS SELECT * FROM employees;
# 创建新表 employees_copy 实现对 employees 表复制 =&gt; 不包含表数据 =&gt; 不可能条件
CREATE TABLE employees_copy AS SELECT * FROM employees WHERE department_id &gt; 10000;
CREATE TABLE employees_copy AS SELECT * FROM employees WHERE 1=2;
</code></pre>
<p>修改表 <code>ALTER TABLE ???</code> 后边可以指定具体执行的操作：</p>
<ul>
<li>添加字段：<code>... ADD 字段名 字段类型 [FIRST|AFTER 字段名];</code></li>
<li>修改字段（通常不修改类型）：<code>... MODIFY FIELD TYPE DEFAULT X;</code></li>
<li>重命名字段：<code>... CHANGE old_col_name new_col_name TYPE;</code></li>
<li>删除字段：<code>... DROP COLUMN col_name;</code></li>
</ul>
<p>重命名表：</p>
<ul>
<li><code>RENAME TABLE old_name TO new_name;</code></li>
<li><code>ALTER TABLE old_name RENAME TO new_name;</code></li>
</ul>
<p>删除表数据：</p>
<ul>
<li><code>DROP ???</code>：表的结构和数据都会被删除，且释放空间</li>
<li><code>TRUNCATE ???</code>：仅清空表中的所有数据，表结构会被保留</li>
</ul>
<p>执行 <code>COMMIT</code> 提交的数据会被永久保存，不可回滚，后续修改需提交事务。</p>
<p><code>ROLLBACK</code> 可以使得数据回滚到最近一次 <code>COMMIT</code> 之后：</p>
<ul>
<li>执行过 <code>TRUNCATE</code> 不能回滚</li>
<li>使用 <code>DELETE</code> 语句删除的数据可以回滚</li>
</ul>
<p>DDL 的操作一旦执行就不可回滚，指令 <code>SET autocommit = FALSE</code> 对其失效。</p>
<p>DDL 操作会追加执行 <code>COMMIT</code>。此提交不受 <code>SET autocommit = FALSE</code> 影响。</p>
<p>区分 <code>TRUNCATE</code> 和 <code>DELETE</code>：</p>
<ul>
<li><code>TRUNCATE</code> 在功能上与不带 <code>WHERE</code> 的 <code>DELETE</code> 语句相同</li>
<li>虽然 <code>TRUNCATE</code> 速度更快，且使用的系统和事务日志资源较少，但无事务和不触发 <code>TRIGGER</code> 有可能会造成事故，不建议在开发环境中使用。</li>
</ul>
<h3 id="data-manipulation-language">Data manipulation language</h3>
<p>DML 是一系列描述增删改操作的 SQL 语句。<code>SELECT</code> 有时也会被包括其中。</p>
<pre><code class="language-javascript">INSERT INTO [TABLE_NAME] (字段1, 字段2, ...) SELECT 对应字段1, 对应字段2, ... FROM [TABLE_NAME_other] WHERE ...;
</code></pre>
<blockquote>
<p>DML statements for an InnoDB table operate in the context of a transaction, so their effects can be committed or rolled back as a single unit. <a href="https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_dml">dev.mysql</a></p>
</blockquote>
<p>DML 操作同样默认为执行后不能回滚。若在执行操作前指定 <code>SET autocommit = FALSE</code>，那么执行的 DML 操作依然可回滚。</p>
<h2 id="%E6%9F%A5%E8%AF%A2-%E5%87%BD%E6%95%B0">查询 &amp; 函数</h2>
<h3 id="multi-table-query-core-concepts">Multi-table Query Core Concepts</h3>
<p>多表查询也称为关联查询，是由多个表一起完成的查询操作。多表查询的意义在于减少网络交互次数。通过单条语句完成需要多个简单 SQL 语句才能完成的目的。</p>
<p>多表查询出现笛卡尔乘积的原因可能是关联条件失效，或省略多个表的连接条件。</p>
<pre><code class="language-javascript"># 笛卡尔乘积的错误形式
SELECT employee_id,department_name FROM employees,departments;
SELECT * FROM employees,departments;
SELECT employee_id,department_name FROM employees CROSS JOIN departments;
</code></pre>
<p>从 SQL 优化角度来说，建议多表查询时对每个字段指明其所在的表。</p>
<pre><code class="language-sql"># FROM 语句使用的别名也可以在 SELECT 语句里使用 =&gt; 起了别名就必须用别名
SELECT emp.employee_id,dept.department_name,emp.department_id FROM employees emp,departments dept WHERE emp.department_id = dept.department_id;
</code></pre>
<p>如果有 n 张表要实现多表查询，则至少需要 n-1 个连接条件。</p>
<pre><code class="language-sql">SELECT emp.employee_id,emp.last_name,dept.department_name,emp.department_id,loc.city,loc.location_id FROM employees emp,departments dept,locations loc WHERE emp.department_id = dept.department_id AND dept.location_id = loc.location_id;
</code></pre>
<p>当查询请求涉及到多个表，且连接表的条件为相等时，即<strong>等值连接查询</strong>；由其他的运算符连接就是<strong>非等值查询</strong>。</p>
<pre><code class="language-javascript">SELECT e.last_name,e.salary,j.grade_level FROM employees e, job_grades j WHERE e.salary &gt;= j.lowest_sal AND e.salary &lt;= j.highest_sal;
</code></pre>
<p>不同表之间实现连接操作称为<strong>非自连接</strong>，表自行与自己的连接称为<strong>自连接</strong>。</p>
<pre><code class="language-javascript"># 查询员工id、姓名以及管理者的id、姓名
SELECT emp.employee_id,emp.last_name,mgr.employee_id,mgr.last_name FROM employees emp, employees mgr WHERE emp.manager_id = mgr.employee_id;
</code></pre>
<h3 id="inner-join-outer-join">Inner Join &amp; Outer Join</h3>
<p>The different types of the JOINs in SQL:</p>
<ul>
<li><code>(INNER) JOIN</code>: Returns records that have matching values in both tables</li>
<li><code>LEFT (OUTER) JOIN</code>: Returns all records from the left table, and the matched records from the right table</li>
<li><code>RIGHT (OUTER) JOIN</code>: Returns all records from the right table, and the matched records from the left table</li>
<li><code>FULL (OUTER) JOIN</code>: Returns all records when there is a match in either left or right table</li>
</ul>
<div>
<amp-img src="https://res.cloudinary.com/dzb9ldnvl/image/upload/v1672419528/blog/zsghost/mysql/SQLJOIN_afvffa.jpg" width="966" height="760" layout="responsive"></amp-img></div>
<pre><code class="language-javascript"># 右上图 =&gt; 右外连接
SELECT employee_id,department_name FROM employees e RIGHT JOIN departments d ON e.department_id = d.department_id;
# 左中图
SELECT employee_id,department_name FROM employees e LEFT JOIN departments d ON e.department_id = d.department_id WHERE d.department_id IS NULL;
# 右中图
SELECT employee_id,department_name FROM employees e RIGHT JOIN departments d ON e.department_id = d.department_id WHERE e.department_id IS NULL;
# 左下图 =&gt; 满外连接 =&gt; 左上图 UNION ALL 右中图
SELECT employee_id,department_name FROM employees e LEFT OUTER JOIN departments d ON e.department_id = d.department_id UNION ALL SELECT employee_id,department_name FROM employees e RIGHT JOIN departments d ON e.department_id = d.department_id WHERE e.department_id IS NULL;
# 右下图 =&gt; 左中图 UNION ALL 右中图
SELECT employee_id,department_name FROM employees e LEFT JOIN departments d ON e.department_id = d.department_id WHERE d.department_id IS NULL UNION ALL SELECT employee_id,department_name FROM employees e RIGHT JOIN departments d ON e.department_id = d.department_id WHERE e.department_id IS NULL; 
</code></pre>
<p>MySQL 不支持 SQL92 中以 <code>(+)</code> 标记从表位置的外连接写法。</p>
<pre><code class="language-sql"># SQL92 实现左外连接
SELECT employee_id,department_name FROM employees e,departments d WHERE e.`department_id`=d.`department_id`(+);
</code></pre>
<p>MySQL 不支持全外连接 <code>FULL OUTER JOIN</code> 写法，需要利用 <code>UNION</code> 实现全外连接操作。<code>UNION</code> 可以将多条 <code>SELECT</code> 语句的结果组成单个结果集。</p>
<pre><code class="language-javascript">SELECT column,... FROM table1 UNION [ALL] SELECT column,... FROM table2;
</code></pre>
<p>由于不去重，<code>UNION ALL</code> 执行语句时所需的资源较 <code>UNION</code> 更少。当明确知道合并后结果不存在重复的情况时，使用 <code>UNION ALL</code> 可以提高查询效率。</p>
<h3 id="subquery">Subquery</h3>
<blockquote>
<p>A subquery in MySQL is a query, which is nested into another SQL query and embedded with SELECT, INSERT, UPDATE or DELETE statement along with the various operators.</p>
</blockquote>
<p>子查询 subquery 是可嵌套在查询中的内部查询，从内向外进行处理。</p>
<p>子查询会在主查询执行前完成，其结果会被主查询使用。子查询使用括号包裹，使用时放在比较条件的右侧可读性更高。</p>
<pre><code class="language-sql"># 查找出较 Abel 更高工资的同事并列出薪资
# 方式一
SELECT salary FROM employees WHERE last_name = 'Abel';
SELECT last_name,salary FROM employees WHERE salary &gt; 11000;
# 方式二 =&gt; 自连接
SELECT e2.last_name,e2.salary FROM employees e1,employees e2 WHERE e1.last_name = 'Abel' AND e1.`salary` &lt; e2.`salary`;
# 方式三 =&gt; 子查询
SELECT last_name,salary FROM employees WHERE salary &gt; ( SELECT salary FROM employees WHERE last_name = 'Abel' );
</code></pre>
<p>按内查询结果所返回的记录条目，可将子查询分为单行子查询、多行子查询。按子查询是否被执行多次，可将子查询分为关联子查询和非关联子查询。</p>
<blockquote>
<p>A row subquery is a subquery variant that returns a single row and can thus return more than one column value.</p>
</blockquote>
<p>单行子查询是一种子查询的变体，返回单行，但可以包含多个列值。</p>
<pre><code class="language-sql"># 返回公司工资最少的员工的 last_name、job_id 和 salary
SELECT last_name,job_id,salary FROM employees WHERE salary = ( SELECT MIN(salary) FROM employees );
</code></pre>
<pre><code class="language-sql"># 查询与141号员工的manager_id和department_id相同的其他员工的employee_id,manager_id,department_id
SELECT employee_id, manager_id, department_id FROM employees WHERE manager_id = ( SELECT manager_id FROM employees WHERE employee_id = 141 ) AND department_id = ( SELECT department_id FROM employees WHERE employee_id = 141 ) AND employee_id &lt;&gt; 141;
# 查询与141号或174号员工的manager_id和department_id相同的其他员工的employee_id,manager_id,department_id
SELECT employee_id, manager_id, department_id FROM employees WHERE manager_id IN (SELECT  manager_id FROM employees WHERE employee_id IN (174,141)) AND department_id IN (SELECT  department_id FROM employees WHERE employee_id IN (174,141)) AND employee_id NOT IN(174,141);
</code></pre>
<pre><code class="language-sql"># HAVING 中的子查询
# 查询最低工资大于50号部门最低工资的部门id和其最低工资
SELECT department_id, MIN(salary) AS dept_lowest_salary FROM employees WHERE department_id IS NOT NULL GROUP BY department_id HAVING dept_lowest_salary &gt; ( SELECT MIN(salary) FROM employees WHERE department_id = 50);
# CASE中的子查询
# 显示员工的employee_id,last_name和location.其中,若员工department_id与location_id为1800的department_id相同,则location为'Canada',其余则为'USA'
SELECT employee_id, last_name, ( CASE department_id WHEN ( SELECT department_id FROM departments WHERE location_id = 1800 ) THEN 'Canada' ELSE 'USA' END ) "location" FROM employees;
</code></pre>
<pre><code class="language-sql"># 子查询中的空值问题 =&gt; 内查询空值不报错,仅无结果
SELECT last_name, job_id FROM employees WHERE job_id = ( SELECT job_id FROM employees WHERE last_name = 'Haas' );
# 非法使用子查询 =&gt; ERROR 1242 (21000): Subquery returns more than 1 row
SELECT employee_id, last_name FROM employees WHERE salary = ( SELECT MIN( salary ) FROM employees GROUP BY department_id );
# 非法使用子查询 =&gt; 正解
# 查出哪些员工是等于下面各部门最低工资的人
SELECT employee_id, last_name FROM employees WHERE salary IN ( SELECT MIN( salary ) FROM employees GROUP BY department_id );
</code></pre>
<p>多行子查询可以返回多行的查询结果。因为需要返回多行，所以必须经过一系列的比较运算符（<code>IN、ALL、ANY、SOME</code>）处理。</p>
<pre><code class="language-sql"># 查询平均工资最低的部门 id
SELECT department_id, AVG(salary) FROM employees GROUP BY department_id HAVING AVG(salary) = ( SELECT MIN(avg_salary) FROM ( SELECT AVG(salary) avg_salary FROM employees GROUP BY department_id ) AS avg_salary_table);
SELECT department_id FROM employees GROUP BY department_id HAVING AVG(salary) &lt;= ALL ( SELECT AVG(salary) FROM employees GROUP BY department_id );
</code></pre>
<pre><code class="language-sql"># 返回其它 job_id 中比 job_id 为 'IT_PROG' 部门任一工资低的员工的员工号、姓名、job_id 以及 salary
SELECT employee_id,last_name,job_id,salary FROM employees WHERE job_id &lt;&gt; 'IT_PROG' AND salary &lt; ANY (SELECT salary FROM employees WHERE job_id = 'IT_PROG') AND job_id &lt;&gt; 'IT_PROG';
// 返回其它 job_id 中比 job_id 为 'IT_PROG' 部门所有工资都低的员工的员工号、姓名、job_id 以及 salary
SELECT employee_id,last_name,job_id,salary FROM employees WHERE job_id &lt;&gt; 'IT_PROG' AND salary &lt; ALL (SELECT salary FROM employees WHERE job_id = 'IT_PROG') AND job_id &lt;&gt; 'IT_PROG';
</code></pre>
<p>子查询的执行依赖于外部查询，通常是因为子查询的表用到了外部的表，并存在条件关联。这种情况下，每执行一次外部查询，子查询都需要重新计算，这种形式的子查询称为关联子查询。</p>
<pre><code class="language-javascript">/*
相关子查询 =&gt; 子查询中使用主查询中的列
在SELECT中除了GROUP BY 和 LIMIT之外,其他位置都可以声明子查询
*/
// 查询员工中工资大于公司平均工资的员工的 last_name,salary 和其 department_id
SELECT last_name,salary,department_id FROM employees WHERE salary &gt; ( SELECT AVG(salary) FROM employees);
// 查询员工中工资大于本部门平均工资的员工的 last_name,salary 和其 department_id
// 方式一 =&gt; 相关查询
SELECT last_name,salary,department_id FROM employees e1 WHERE salary &gt; ( SELECT AVG(salary) FROM employees e2 WHERE department_id = e1.department_id);
// 方式二 =&gt; FROM子查询
SELECT e.last_name,e.salary,e.department_id FROM employees e,(SELECT department_id,AVG(salary) avg_sal FROM employees GROUP BY department_id) t_debt_avg_sal WHERE e.department_id = t_debt_avg_sal.department_id AND e.salary &gt; t_debt_avg_sal.avg_sal;
// 查询员工的id,salary,按照department_name 排序
// 方式一 =&gt; 相关子查询
SELECT employee_id, salary FROM employees emp ORDER BY ( SELECT department_name FROM departments dept WHERE emp.department_id = dept.department_id ) ASC;
// 方式二 =&gt; 表连接
SELECT employee_id, salary, department_name FROM employees emp LEFT JOIN departments dept ON emp.department_id = dept.department_id ORDER BY department_name ASC;
// 若employees表中employee_id与job_history表中employee_id相同的数目不小于2则输出这些相同id的员工的employee_id,last_name和其job_id
SELECT e.employee_id,last_name,e.job_id FROM employees e WHERE 2 &lt;= (SELECT COUNT(*) FROM job_history j WHERE e.employee_id = j.employee_id);
</code></pre>
<p>关联子查询通常会搭配 <code>EXISTS</code> 操作符：</p>
<ul>
<li>子查询中存在满足条件的行：返回 <code>TRUE</code>，停止子查询，返回符合的记录</li>
<li>子查询中不存在满足条件的行：返回 <code>FALSE</code>，继续查找</li>
</ul>
<p><code>NOTEXISTS</code> 关键字表示如果不存在某种条件，则返回 <code>TRUE</code>，反之 <code>FALSE</code>。</p>
<pre><code class="language-javascript">// 查询公司管理者的 employee_id, last_name, job_id, department_id 信息
// 方式一 =&gt; 自连接 =&gt; 将同一张表看做两张表进行等值连接
SELECT DISTINCT mgr.employee_id, mgr.last_name, mgr.job_id, mgr.department_id FROM employees emp JOIN employees mgr ON emp.manager_id = mgr.employee_id;
// 方式二 =&gt; 子查询的方式 =&gt; 先将所有的manager_id查出
SELECT employee_id, last_name, job_id, department_id FROM employees WHERE employee_id IN ( SELECT DISTINCT manager_id FROM employees );
// 方式三 =&gt; EXISTS
SELECT employee_id, last_name, job_id, department_id FROM employees e1 WHERE  EXISTS ( SELECT 1 FROM employees e2 WHERE e1.employee_id = e2.manager_id);
</code></pre>
<pre><code class="language-sql"># 查询departments表中不存在于employees表中的部门的department_id和department_name (employees表中部门id为NULL的情况)
# 方式一 =&gt; 右外连接
SELECT dept.department_id, dept.department_name, emp.department_id FROM departments dept LEFT JOIN employees emp USING (department_id) WHERE emp.department_id IS NULL;
# 方式二 =&gt; NOT EXISTS
SELECT department_id, department_name FROM departments d WHERE NOT EXISTS (SELECT * FROM employees emp WHERE emp.department_id = d.department_id);
</code></pre>
<p>在多数的数据库中，自连接的处理速度要比子查询快得多：子查询是先对未知表进行查询，再使用条件来判断；自连接是对已知的数据表进行条件判断。</p>
<h3 id="built-in-functions">Built-in Functions</h3>
<p>SQL 在不同 DBMS 间的差异性很大，远大于 SQL 不同版本之间的差异。</p>
<p>拼接符：多数 DBMS 使用 <code>||</code> 或 <code>+</code>，MySQL 字符串拼接函数为 <code>concat()</code>。</p>
<p></p>
<p>单行函数是指返回单行结果的函数。聚合函数是对一组数据进行汇总的函数。输入一组数据的集合，输出单个值。聚合函数不能嵌套调用。</p>
<p>常见聚合函数：</p>
<ul>
<li><code>AVG</code>、<code>SUM</code>、<code>MAX/MIN</code>、<code>COUNT</code>...</li>
<li><code>GROUP BY</code>：通常与聚合函数一起使用，对结果集进行分组</li>
<li><code>HAVING</code>：根据指定的条件过滤分组</li>
</ul>
<p>区分 <code>count(*)</code>、<code>count(1)</code> 和 <code>count(列名)</code> 的使用：</p>
<ul>
<li>三者都是获取指定字段的出现个数</li>
<li><code>count(col_name)</code> 检索字段时，会忽略 <code>NULL</code></li>
</ul>
<p><code>SELECT</code> 指定的非聚合函数字段必须在 <code>GROUP BY</code> 中出现。</p>
<p><code>GROUP BY</code> 中出现的字段不一定要在 <code>SELECT</code> 中有声明。</p>
<pre><code class="language-sql">// 查询各个department_id,job_id的平均工资
SELECT department_id,job_id,AVG(salary) FROM employees GROUP BY department_id,job_id;
SELECT job_id,department_id,AVG(salary) FROM employees GROUP BY job_id,department_id;
// 错误形式 job_id 未出现在 GROUP BY 中 =&gt; 一个部门不一定只有一个工种
SELECT department_id,job_id,AVG(salary) FROM employees GROUP BY department_id;
</code></pre>
<p><code>ROLLUP</code> 是 <code>GROUP BY</code> 子句的扩展，该选项将在结果集中添加一个额外的行以显示总计。</p>
<p><code>HAVING</code> 子句通常与 <code>GROUP BY</code> 一起使用，若省略 <code>GROUP BY</code>，则 <code>HAVING</code> 子句的行为与 <code>WHERE</code> 子句类似。</p>
<p><code>HAVING</code> 或者 <code>WHERE</code> 的选择：过滤条件中有聚合函数时须声明在 <code>HAVING</code> 内。</p>
<p>查询语法结构中，<code>WHERE</code> 在 <code>GROUP BY</code> 之前，所以无法对分组结果进行筛选。</p>
<p>此外，<code>WHERE</code> 排除的记录不再包括在分组中。</p>
<pre><code class="language-sql">// 查询各部门最高工资较10000高的部门
// 错误写法 =&gt; ERROR 1111 (HY000): Invalid use of group function
SELECT department_id,MAX(salary) FROM employees WHERE MAX(salary) &gt; 10000 GROUP BY department_id;
// 正确写法
SELECT department_id,MAX(salary) FROM employees GROUP BY department_id HAVING MAX(salary) &gt; 10000;
</code></pre>
<pre><code class="language-sql">// 查询部门 id 为 10-40 四个部门中最高工资高于 10000 的部门信息
// 方式一 =&gt; 推荐 =&gt; 执行效率高
SELECT department_id, MAX(salary) FROM employees WHERE department_id IN (10,20,30,40) GROUP BY department_id HAVING MAX(salary) &gt; 10000;
// 方式二
SELECT department_id, MAX(salary) FROM employees GROUP BY department_id HAVING MAX(salary) &gt; 10000 AND department_id IN (10,20,30,40);
</code></pre>
<p>关联表数据需要连接时，<code>WHERE</code> 是先筛选后连接，<code>HAVING</code> 是先连接后筛选：</p>
<p>在关联查询中，前者比后者更高效。因为前者可以先筛选，用一个筛选后的较小数据集和关联表进行连接，占用的资源会比较少；后者需要先将结果集准备好，也就是用未被筛选的数据集进行关联，然后再对这个数据集进行筛选，这样所占用的资源就会比较多，执行效率也就较低。</p>
<h2 id="%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">数据类型</h2>
<h3 id="%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B">整数类型</h3>
<p>超出设置的整数类型范围：<code>Out of range value for column '?' at ...</code>。</p>
<table>
<thead>
<tr>
<th>整数类型</th>
<th>字节</th>
<th>有符号数取值范围</th>
<th>无符号数取值范围 (UNSIGNED)</th>
</tr>
</thead>
<tbody>
<tr>
<td>TINYINT</td>
<td>1</td>
<td>-128~127</td>
<td>0~255</td>
</tr>
<tr>
<td>SMALLINT</td>
<td>2</td>
<td>-32768~32767</td>
<td>0~65535</td>
</tr>
<tr>
<td>MEDIUMINT</td>
<td>3</td>
<td>-8388608~8388607</td>
<td>0~16777215</td>
</tr>
<tr>
<td>INT、INTEGER</td>
<td>4</td>
<td>-2147483648~2147483647</td>
<td>0~4294967295</td>
</tr>
<tr>
<td>BIGINT</td>
<td>8</td>
<td>-9223372036854775808~9223372036854775807</td>
<td>0~18446744073709551615</td>
</tr>
</tbody>
</table>
<p>MySQL 8.0.17：整数数据类型不推荐使用显示宽度属性：</p>
<p>整型数据类型可以在定义表结构时指定所需显示宽度，如果不指定，则系统会为每一种类型指定默认的宽度值。</p>
<p>所有整数类型都有一个可选的 <code>UNSIGNED</code> 无符号属性：</p>
<blockquote>
<p><code>UNSIGNED</code> 是在 MySQL 中用來設定數值只能是正的屬性，比如 <code>tinyint</code> 原本的範圍是 -128~128，加了 <code>UNSIGNED</code> 的屬性後，範圍就會變成從 0~255 這樣，對於一些欄位如果確定不會有負數，可以設定這個屬性增加資料長度。</p>
</blockquote>
<pre><code class="language-sql">mysql&gt; CREATE TABLE test_int3(f1 INT UNSIGNED);
mysql&gt; desc test_int3;
mysql&gt; INSERT INTO test_int3 VALUES(4294967295);
mysql&gt; INSERT INTO test_int3 VALUES(4294967296);
mysql&gt; SELECT * FROm test_int3;
+------------+
| f1         |
+------------+
| 4294967295 |
+------------+
</code></pre>
<ul>
<li><code>TINYINT</code>：一般用于枚举数据（范围很小且固定）</li>
<li><code>SMALLINT</code>：用于较小范围的统计数据（统计固定资产库存数量）</li>
<li><code>MEDIUMINT</code>：用于较大整数的计算（机场每日的客流量）</li>
<li><code>INT、INTEGER</code>：范围足够，一般情况不用考虑超限问题（商品编号）</li>
<li><code>BIGINT</code>：处理巨大的整数（网站点击量、双十一的交易量、产品持仓）</li>
</ul>
<h3 id="%E6%B5%AE%E7%82%B9%E7%B1%BB%E5%9E%8B">浮点类型</h3>
<p>浮点数类型的无符号数取值范围，只相当于有符号数取值范围的一半：不论有无符号，浮点数都会存储表示符号的部分。因此无符号数的取值范围，其实就是有符号数取值范围大于等于零的部分。</p>
<p>浮点类型单精度值使用 4 个字节，双精度值使用 8 个字节。</p>
<p>自 MySQL 8.0.17 开始，<code>浮点类型(M,D)</code> 的用法不再推荐使用：</p>
<p><code>FLOAT(M,D)</code> or <code>DOUBLE(M,D)</code>：<code>M</code> = 整数位 + 小数，<code>D</code> = 小数位。<code>D</code> &lt;= <code>M</code> &lt;= 255，0 &lt;= <code>D</code> &lt;= 30。<code>FLOAT(5,2)</code> 可以显示 -999.99-999.99。</p>
<h3 id="%E5%AE%9A%E7%82%B9%E6%95%B0%E7%B1%BB%E5%9E%8B">定点数类型</h3>
<p>定点数在数据库内部以字符串的形式进行存储。</p>
<p>定点数 <code>DECIMAL(M,D)</code> 中 <code>M</code> 表示精度，<code>D</code> 表示标度。</p>
<p>默认 <code>DECIMAL(10,0)</code>，当精度超出时会进行四舍五入处理。</p>
<p><code>DECIMAL</code> 的存储空间不固定，由 <code>M</code> 决定，总占用的存储空间是 <code>M+2</code> 个字节。</p>
<p>浮点数与定点数的区别：</p>
<ul>
<li>长度一定时，浮点类型的可取值范围更大，但是不精准</li>
<li>定点数类型的取值范围虽然相对较小，但是精准</li>
</ul>
<h3 id="%E4%BD%8D%E7%B1%BB%E5%9E%8B">位类型</h3>
<p><code>BIT</code> 类型中存储二进制值。没有指定二进制的位数 <code>M</code> 时，默认是 1 位。</p>
<p>位数最小值为 1，最大值为 64。</p>
<pre><code class="language-sql">mysql&gt; CREATE TABLE test_bit1(f1 BIT, f2 BIT(5), f3 BIT(64));
mysql&gt; INSERT INTO test_bit1(f1,f2) VALUES (1,23);
mysql&gt; SELECT * FROM test_bit1;
+------------+------------+------------+
| f1         | f2         | f3         |
+------------+------------+------------+
| 0x01       | 0x17       | NULL       |
+------------+------------+------------+
mysql&gt; INSERT INTO test_bit1 (f1) VALUES (2);
ERROR 1406 (22001): Data too long for column 'f1' at row 1
</code></pre>
<h3 id="%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B">日期时间类型</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
<th>字节</th>
<th>日期格式</th>
<th>最小值</th>
<th>最大值</th>
</tr>
</thead>
<tbody>
<tr>
<td>YEAR</td>
<td>年</td>
<td>1</td>
<td>YYYY或YY</td>
<td>1901</td>
<td>2155</td>
</tr>
<tr>
<td>TIME</td>
<td>时间</td>
<td>3</td>
<td>HH:MM:SS</td>
<td>-838:59:59</td>
<td>838:59:59</td>
</tr>
<tr>
<td>DATE</td>
<td>日期</td>
<td>3</td>
<td>YYYY-MM-DD</td>
<td>1000-01-01</td>
<td>9999-12-03</td>
</tr>
<tr>
<td>DATETIME</td>
<td>日期时间</td>
<td>8</td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>1000-01-01 00:00:00</td>
<td>9999-12-31 23:59:59</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>日期时间</td>
<td>4</td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>1970-01-01 00:00:00 UTC</td>
<td>2038-01-19 03:14:07UTC</td>
</tr>
</tbody>
</table>
<p><code>YEAR</code> 类型表示年份，存储空间 1 字节，是所有日期时间类型中占空间最小的。</p>
<p>4 位字符串或数字表示的 <code>YEAR</code> 类型，最小值为 1901，最大值为 2155。</p>
<p>2 位字符串格式表示的 <code>YEAR</code> 类型，最小值为 00，最大值为 99：</p>
<ul>
<li>01-69 表示 2001 到 2069</li>
<li>70-99 表示 1970 到 1999</li>
<li>取值整数的 0 或 00 表示 0000 年</li>
<li>取值是日期/字符串的 '0' 表示 2000 年</li>
</ul>
<p><code>YYYY-MM-DD</code> 的 <code>DATE</code> 类型表示日期，无时间部分。需要 3 个字节的存储空间。</p>
<p>在向 <code>DATE</code> 类型的字段插入数据时，需要满足一定的格式条件：</p>
<ul>
<li><code>YYYY-MM-DD/YYYYMMDD</code> 最小取值 1000-01-01，最大取值 9999-12-03</li>
<li><code>YY-MM-DD/YYMMDD</code> 转化方式同两位的 <code>YEAR</code></li>
<li><code>CURRENT_DATE()</code> 或 <code>NOW()</code> 函数会插入当前系统的日期</li>
</ul>
<p><code>TIME</code> 类型表示不包含日期部分的时间，也是需要 3 个字节的存储空间。</p>
<p>在向 <code>TIME</code> 类型的字段插入数据时，需要满足一定的格式条件：</p>
<ul>
<li>带有冒号的字符串：<code>D</code> 表示天，会被转化为小时</li>
<li>不带有冒号的字符串或者数字：转化为 <code>HH:MM:SS</code> 进行存储</li>
</ul>
<p><code>DATETIME</code> 类型的格式为 <code>DATE</code> 和 <code>TIME</code> 结合，即 <code>YYYY-MM-DD HH:MM:SS</code>。</p>
<p><code>DATETIME</code> 类型需要 8 个字节的存储空间，在所有的日期时间类型中是最多的。</p>
<p>在向 <code>DATETIME</code> 类型的字段插入数据时，需要满足一定的格式条件：</p>
<ul>
<li><code>YYYY-MM-DD HH:MM:SS</code> 或 <code>YYYYMMDDHHMMSS</code> 格式的字符串</li>
<li><code>YYYYMMDDHHMMSS</code> 格式的数字</li>
<li><code>YY-MM-DD HH:MM:SS</code> 或 <code>YYMMDDHHMMSS</code> 字符串：年符合 <code>YEAR</code> 规则</li>
<li><code>CURRENT_TIMESTAMP()</code>、<code>NOW()</code>、<code>SYSDATE()</code> 函数</li>
</ul>
<p><code>TIMESTAMP</code> 显示格式与 <code>DATETIME</code> 相同，但只需要 4 个字节的存储空间。</p>
<blockquote>
<p><code>TIMESTAMP</code> has a range of '1970-01-01 00:00:01' UTC to '2038-01-19 03:14:07' UTC. UTC Coordinated Universal Time 世界协调时间，也称作世界标准时间。</p>
</blockquote>
<p><code>TIMESTAMP</code> 存储的值会进行时区转换，即「当前时间」和 UTC 时间互相转换。</p>
<p><code>TIMESTAMP</code> 和 <code>DATETIME</code> 的区别：</p>
<ul>
<li><code>TIMESTAMP</code> 存储空间较小，表示的时间范围也较小；</li>
<li><code>TIMESTAMP</code> 底层选择的是毫秒值存储，表示距 '1970-1-1 0:0:0' 的时间</li>
<li>在比较大小或日期计算时，<code>TIMESTAMP</code> 更方便、更快；</li>
<li><code>TIMESTAMP</code> 和时区有关，会根据用户的时区不同，显示不同的结果</li>
<li><code>DATETIME</code> 只能反映出插入的时间，与时区无关</li>
</ul>
<pre><code class="language-sql">mysql&gt; CREATE TABLE temp_time(d1 DATETIME,d2 TIMESTAMP);
mysql&gt; INSERT INTO temp_time VALUES('2021-4-22 16:18:52','2021-4-22 16:18:52');
mysql&gt; INSERT INTO temp_time VALUES(NOW(),NOW());
mysql&gt; SELECT * FROM temp_time;
# 修改当前的时区
SET time_zone = '+9:00';
mysql&gt; SELECT * FROM temp_time;
</code></pre>
<p>开发中用得最多的日期时间类型，就是 <code>DATETIME</code>，因为这个数据类型包括了完整的日期和时间信息，取值范围也最大，使用起来比较方便。</p>
<p>但是对于注册时间、商品发布时间等，不建议使用 <code>DATETIME</code> 存储，而是使用时间戳，因为 <code>DATETIME</code> 不便于计算。</p>
<pre><code class="language-sql">mysql&gt; SELECT UNIX_TIMESTAMP();
</code></pre>
<h3 id="%E6%96%87%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B">文本字符串类型</h3>
<p><code>CHAR(M)</code> 类型在不指定 <code>M</code> 时，默认是 1 个字符长度。</p>
<p><code>CHAR</code> 类型字段在定义时所声明的字段长度即为该字段占的存储空间字节数。</p>
<p>保存数据的实际长度比声明小：</p>
<ul>
<li>存储数据时，右侧填充空格以达到指定的长度</li>
<li>检索数据时，其字段会去除尾部空格</li>
</ul>
<p><code>VARCHAR(M)</code> 在定义时必须指定长度 <code>M</code>。</p>
<p><code>VARCHAR</code> 在不同 MySQL 版本：</p>
<ul>
<li>低于 4.0：<code>varchar(20)</code> 指 20 个字节。只能存 6 个 UTF8 汉字</li>
<li>高于 5.0：<code>varchar(20)</code> 指 20 个字符。</li>
</ul>
<p>在检索 <code>VARCHAR</code> 类型的字段数据时，会保留数据尾部的空格。<code>VARCHAR</code> 类型字段所占用的存储空间为字符串实际长度加 1 个字节。</p>
<p><code>CHAR</code> 和 <code>VARCHAR</code> 的选择：</p>
<ul>
<li><code>CHAR</code> 适合存储较短的固定长度数据：门派号码、uuid</li>
<li><code>VARCHAR</code> 具有动态长度的特性，适合频繁改动的信息</li>
<li>根据存储引擎：
<ul>
<li>MyISAM 最好使用固定长度的数据列代替可变长度的数据列</li>
<li>MEMORY 目前都使用固定长度的数据行存储</li>
<li>InnoDB 建议使用 <code>varchar</code> 类型。</li>
</ul>
</li>
</ul>
<p>对于 InnoDB 数据表，其内部的存储格式并没有区分固定长度和可变长度列，所有的数据行都使用头指针指向数据列，主要影响其性能是数据行使用的存储总量。</p>
<p><code>TEXT</code> 用于保存文本类型的字符串，不需要预先定义长度，不允许做主键。</p>
<table>
<thead>
<tr>
<th>文本字符串类型</th>
<th>特点</th>
<th>长度</th>
<th>长度范围</th>
<th>占用的存储空间</th>
<th>最大值</th>
</tr>
</thead>
<tbody>
<tr>
<td>TINYTEXT</td>
<td>小文本、可变长度</td>
<td>L</td>
<td>0 &lt;= L &lt;= 255</td>
<td>L + 2 个字节</td>
<td>2155</td>
</tr>
<tr>
<td>TEXT</td>
<td>文本、可变长度</td>
<td>L</td>
<td>0 &lt;= L &lt;= 65535</td>
<td>L + 2 个字节</td>
<td>838:59:59</td>
</tr>
<tr>
<td>MEDIUMTEXT</td>
<td>中等文本、可变长度</td>
<td>L</td>
<td>0 &lt;= L &lt;= 16777215</td>
<td>L + 3 个字节</td>
<td>9999-12-03</td>
</tr>
<tr>
<td>LONGTEXT</td>
<td>大文本、可变长度</td>
<td>L</td>
<td>0 &lt;= L&lt;= 4294967295（相当于4GB）</td>
<td>L + 4 个字节</td>
<td>9999-12-31 23:59:59</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>日期时间</td>
<td>4</td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>1970-01-01 00:00:00 UTC</td>
<td>2038-01-19 03:14:07UTC</td>
</tr>
</tbody>
</table>
<p><code>TEXT</code> 文本类型适合存储较大的文本段，不需要设置默认值。</p>
<p><code>TEXT</code> 和 <code>BLOB</code> 类型的数据在删除后容易导致空洞（文件碎片多）。</p>
<p>对于频繁使用的表不建议包含 <code>TEXT</code> 类型字段，建议分表存储。</p>
<p>枚举类型 <code>ENUM</code> 的取值范围需要在定义字段时指定。</p>
<p><code>ENUM</code> 类型只允许从已有的成员中选取单个值，且一次不能选取多个值。</p>
<p>其存储空间由定义 <code>ENUM</code> 类型时所指定的成员个数决定。</p>
<table>
<thead>
<tr>
<th>文本字符串类型</th>
<th>长度</th>
<th>长度范围</th>
<th>占用的存储空间</th>
</tr>
</thead>
<tbody>
<tr>
<td>ENUM</td>
<td>L</td>
<td>1 &lt;= L &lt;= 65535</td>
<td>1或2个字节</td>
</tr>
</tbody>
</table>
<p><code>ENUM</code> 所需要的字节存储空间：</p>
<ul>
<li>1～255 个成员需要 1 个字节的存储空间</li>
<li>256～65535 个成员需要 2 个字节的存储空间</li>
<li>上限最多为 65535 个字节的存储空间</li>
</ul>
<p><code>SET</code> 表示字符串对象，可以包含 0 个或多个成员，上限为 64。</p>
<p><code>SET</code> 类型所占的存储空间取决于包含成员的个数。与 <code>ENUM</code> 不同，<code>SET</code> 在选取成员时，可以同时选择多个成员。对 <code>SET</code> 插入重复的成员时，重复的成员会被自动删除。</p>
<h3 id="%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B">二进制字符串类型</h3>
<p><code>BINARY</code> 和 <code>VARBINARY</code> 类似于 <code>CHAR</code> 和 <code>VARCHAR</code>，用于存储二进制字符串。</p>
<p><code>BINARY(M)</code> 可以设置固定长度的二进制字符串，<code>M</code> 表示最多能存储的字节数。</p>
<p>可变长度的二进制字符串 <code>VARBINARY(M)</code> 中，<code>M</code> 必须设置（存储上限）。</p>
<table>
<thead>
<tr>
<th>二进制字符串类型</th>
<th>特点</th>
<th>值的长度</th>
<th>占用空间(字节)</th>
</tr>
</thead>
<tbody>
<tr>
<td>BINARY(M)</td>
<td>固定长度</td>
<td>M （0 &lt;= M &lt;= 255）</td>
<td>M个字节</td>
</tr>
<tr>
<td>VARBINARY(M)</td>
<td>可变长度</td>
<td>M（0 &lt;= M &lt;= 65535）</td>
<td>M+1个字节</td>
</tr>
</tbody>
</table>
<p><code>BLOB</code> 类型适合存储一个二进制的大对象，常用于图片、音频和视频等。</p>
<p>实际开发中往往不会在数据库里直接存储较大的数据，而是将这些数据存储在服务器的磁盘目录，然后将这些数据的访问路径存储到数据库中。</p>
<table>
<thead>
<tr>
<th>二进制字符串类型</th>
<th>值的长度</th>
<th>长度范围</th>
<th>占用空间</th>
</tr>
</thead>
<tbody>
<tr>
<td>TINYBLOB</td>
<td>L</td>
<td>0 &lt;= L &lt;= 255</td>
<td>L + 1 个字节</td>
</tr>
<tr>
<td>BLOB</td>
<td>L</td>
<td>0 &lt;= L &lt;= 65535（相当于64KB）</td>
<td>L + 2 个字节</td>
</tr>
<tr>
<td>MEDIUMBLOB</td>
<td>L</td>
<td>0 &lt;= L &lt;= 16777215 （相当于16MB）</td>
<td>L + 3 个字节</td>
</tr>
<tr>
<td>LONGBLOB</td>
<td>L</td>
<td>0 &lt;= L &lt;= 4294967295（相当于4GB）</td>
<td>L + 4 个字节</td>
</tr>
</tbody>
</table>
<p>对 <code>TEXT</code> 和 <code>BLOB</code> 执行删除或更新操作后，可能会在表中留下空洞。建议定期使用 <code>OPTIMIZE TABLE</code> 命令进行碎片整理。</p>
<p>在开发中最好将这类数据分表管理，减少主表中的碎片，保持住固定长度数据行的性能优势，避免大量的值传输。</p>
<blockquote>
<p>阿里巴巴《Java开发手册》之 MySQL 数据库：</p>
<ul>
<li>任何字段如果为非负数，必须是 <code>UNSIGNED</code>
<ul>
<li>【强制】小数类型为 <code>DECIMAL</code>，禁止使用 <code>FLOAT</code> 和 <code>DOUBLE</code>。
<ul>
<li>说明：在存储的时候，<code>FLOAT</code> 和 <code>DOUBLE</code> 都存在精度损失的问题，很可能在比较值的时候，得到不正确的结果。如果存储的数据范围超过 <code>DECIMAL</code> 的范围，建议将数据拆成整数和小数并分开存储。</li>
</ul>
</li>
<li>【强制】如果存储的字符串长度几乎相等，使用 <code>CHAR</code> 定长字符串类型。</li>
<li>【强制】<code>VARCHAR</code> 是可变长字符串，不预先分配存储空间，长度不要超过 5000。如果存储长度大于此值，定义字段类型为 <code>TEXT</code>，独立出来一张表，用主键来对应，避免影响其它字段索引效率。</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="%E7%BA%A6%E6%9D%9F">约束</h2>
<p>约束即对表中字段的限制，目的是保证数据的完整性。完整性又可以分为实体完整性、域完整性、引用完整性以及自定义完整性。</p>
<blockquote>
<p>information_schema 系统库；table_constraints 专门存储各个表的约束的表</p>
</blockquote>
<pre><code class="language-sql"># 查看某个表已有的约束
SELECT * FROM information_schema.table_constraints WHERE table_name = '表名称';
</code></pre>
<h3 id="not-null-constraint">NOT NULL Constraint</h3>
<p>默认情况下，列可以包含 <code>NULL</code> 值。</p>
<p>空字符串 <code>' '</code> 不等于 <code>NULL</code>，0 也不等于 <code>NULL</code>。</p>
<p>非空约束强制列不接受 <code>NULL</code> 值。</p>
<pre><code class="language-sql"># 建表时添加非空约束
CREATE TABLE 表名称(...,字段名 数据类型 NOT NULL,...);
</code></pre>
<pre><code class="language-sql"># 建表后添加非空约束
ALTER TABLE 表名称 MODIFY 字段名 数据类型 NOT NULL;
</code></pre>
<pre><code class="language-sql"># 删除非空约束
ALTER TABLE 表名 MODIFY 字段名 数据类型 NULL;
ALTER TABLE 表名 MODIFY 字段名 数据类型;
</code></pre>
<h3 id="unique-constraint">UNIQUE Constraint</h3>
<p>唯一约束可以确保列中的所有值都是不同的。唯一性约束允许列值为 <code>NULL</code>。</p>
<p>每个表可以有多个 UNIQUE 约束，但每个表只能有一个 PRIMARY KEY 约束。</p>
<p>当创建唯一约束时未给一约束命名，那么默认和列名相同。</p>
<pre><code class="language-sql"># 建表时添加唯一性约束
CREATE TABLE test2(id INT UNIQUE,last_name VARCHAR(15),email VARCHAR(25),salary DECIMAL(10,2),CONSTRAINT uni_test2_email UNIQUE(email));
DESC test2;
+-----------+---------------+------+-----+---------+-------+
| Field     | Type          | Null | Key | Default | Extra |
+-----------+---------------+------+-----+---------+-------+
| id        | int           | YES  | UNI | NULL    |       |
| last_name | varchar(15)   | YES  |     | NULL    |       |
| email     | varchar(25)   | YES  | UNI | NULL    |       |
| salary    | decimal(10,2) | YES  |     | NULL    |       |
+-----------+---------------+------+-----+---------+-------+
SELECT * FROM information_schema.table_constraints WHERE table_name = 'test2';
+--------------------+-------------------+-----------------+--------------+------------+-----------------+----------+
| CONSTRAINT_CATALOG | CONSTRAINT_SCHEMA | CONSTRAINT_NAME | TABLE_SCHEMA | TABLE_NAME | CONSTRAINT_TYPE | ENFORCED |
+--------------------+-------------------+-----------------+--------------+------------+-----------------+----------+
| def                | dbtest13          | id              | dbtest13     | test2      | UNIQUE          | YES      |
| def                | dbtest13          | uni_test2_email | dbtest13     | test2      | UNIQUE          | YES      |
+--------------------+-------------------+-----------------+--------------+------------+-----------------+----------+
</code></pre>
<pre><code class="language-sql"># 可以向 unique 标识的字段添加 null 值
INSERT INTO test2 (id,last_name,email,salary) VALUES (2,'gz',NULL,99998);
INSERT INTO test2 (id,last_name,email,salary) VALUES (3,'hz',NULL,99997);
</code></pre>
<pre><code class="language-sql"># 创建表后添加约束
ALTER TABLE 表名 ADD UNIQUE key(字段列表);
ALTER TABLE 表名 MODIFY 字段名 字段类型 UNIQUE;
</code></pre>
<pre><code class="language-sql"># 若已存在列中数据相等的情况 =&gt; 需要修改后才可设置
mysql&gt; ALTER TABLE test2 ADD CONSTRAINT uni_test2_sal UNIQUE (salary);
mysql&gt; ALTER TABLE test2 MODIFY last_name VARCHAR(15) UNIQUE;
</code></pre>
<pre><code class="language-sql"># 复合的唯一性约束 + 表级约束
mysql&gt; CREATE TABLE USER(id INT,`name` VARCHAR(15), `password` VARCHAR(25), CONSTRAINT uni_user_name_pwd UNIQUE (`name`,`password`));
mysql&gt; INSERT INTO USER VALUES (1, 'zs', 'abc');
# 复合约束存在一个字段有区别即可
mysql&gt; INSERT INTO USER VALUES (1, 'zscopy', 'abc');
</code></pre>
<p>添加唯一约束的列上会自动创建唯一索引。删除唯一约束只能通过删除唯一索引的方式。删除时需要指定唯一索引名（唯一索引名和唯一约束名相同）。</p>
<p>创建唯一约束时未指定名称：</p>
<ul>
<li>单列默认和列名相同</li>
<li>组合列默认和括号中的首个列名相同</li>
<li>可以自定义唯一约束名</li>
</ul>
<pre><code class="language-sql">mysql&gt; ALTER TABLE test2 DROP INDEX last_name;
mysql&gt; ALTER TABLE test2 DROP INDEX uni_test2_sal;
mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = 'test2';
mysql&gt; DESC test2;
</code></pre>
<h3 id="primary-key-constraint">PRIMARY KEY Constraint</h3>
<blockquote>
<p><strong>Entity integrity</strong> is concerned with ensuring that each row of a table has a unique and non-null primary key value; this is the same as saying that each row in a table represents a single instance of the entity type modelled by the table. <a href="https://en.wikipedia.org/wiki/Entity_integrity">wiki</a></p>
</blockquote>
<p>主键约束用来唯一标识表中的每条记录。主键约束相当于唯一约束与非空约束的组合，主键约束列不允许重复，也不允许出现空值。</p>
<p>一张表最多只能有一个主键约束，主键约束可以在列级创建，也可以在表级创建。</p>
<p>主键约束对应着表中的一列或者多列（复合主键）。如果是多列组合的复合主键约束，那么这些列都不允许为空值，并且组合的值不允许重复。</p>
<p>自行命名的主键约束名无效。当创建主键约束时，系统会默认在指定列或列组合上建立对应的主键索引。</p>
<p>主键约束删除时，主键约束所对应的索引也会自动删除。注意：修改主键字段的值有可能会破坏数据的完整性。</p>
<pre><code class="language-sql"># 创建表时添加约束
# 列级约束
mysql&gt; CREATE TABLE test3 (id INT PRIMARY KEY,last_name VARCHAR(15),salary DECIMAL(10,2),email VARCHAR(25));
# 表级约束 =&gt; 没有必要起名
mysql&gt; CREATE TABLE test4 (id INT,last_name VARCHAR(15),salary DECIMAL(10,2),email VARCHAR(25),CONSTRAINT pk_test4_id PRIMARY KEY(id));
mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = 'test4';
mysql&gt; INSERT INTO test4 VALUES(1,'zs',99999,'zs@mail.com');
mysql&gt; INSERT INTO test4 VALUES(1,'zscopy',99999,'zscopy@mail.com');
ERROR 1062 (23000): Duplicate entry '1' for key 'test4.PRIMARY'
mysql&gt; INSERT INTO test4 VALUES(NULL,'zscopy',99999,'zscopy@mail.com');
ERROR 1048 (23000): Column 'id' cannot be null
</code></pre>
<pre><code class="language-sql"># 复合主键约束
mysql&gt; CREATE TABLE test5(id INT,`name` VARCHAR(15),`password` VARCHAR(25),PRIMARY KEY (`name`,`password`));
mysql&gt; INSERT INTO test5 VALUES (1,'zs','abc');
mysql&gt; INSERT INTO test5 VALUES (1,'zscopy','abc');
# 多列组合的复合主键约束都不可以为NULL
mysql&gt; INSERT INTO test5 VALUES (1,NULL,'abc');
ERROR 1048 (23000): Column 'name' cannot be null
</code></pre>
<pre><code class="language-sql">/* 创建表后添加约束 */
mysql&gt; CREATE TABLE test6(id INT,`name` VARCHAR(15),`password` VARCHAR(25));
mysql&gt; ALTER table test6 ADD PRIMARY KEY (id);
mysql&gt; DESC test6;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| id       | int         | NO   | PRI | NULL    |       |
| name     | varchar(15) | YES  |     | NULL    |       |
| password | varchar(25) | YES  |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
</code></pre>
<pre><code class="language-sql"># 删除主键约束 =&gt; 实际开发根本不会去做
ALTER TABLE 表名称 DROP PRIMARY KEY;
</code></pre>
<h3 id="autoincrement">AUTO_INCREMENT</h3>
<p>自增特性可以让某个字段的后续插入值自增。</p>
<p>若对主键设置自增，后续写 SQL 时就不需要再标记出主键列了。</p>
<p>一张表最多只能有一个自增列。当需要唯一标识或顺序时，可以设置自增。</p>
<p>自增约束的列必须是键：主键或者唯一键。</p>
<p>自增约束的列数据类型必须是整数类型：</p>
<ul>
<li>若自增列指定了 0 和 null：在当前最大值的基础上自增</li>
<li>若自增列指定了具体值：直接赋值为具体值</li>
</ul>
<pre><code class="language-sql"># 创建表时自增
mysql&gt; CREATE TABLE test7 (id INT PRIMARY KEY AUTO_INCREMENT, last_name VARCHAR(15));
mysql&gt; INSERT INTO test7(last_name) VALUES ('zs');
mysql&gt; SELECT * FROM test7;
+----+-----------+
| id | last_name |
+----+-----------+
|  1 | zs        |
+----+-----------+
</code></pre>
<pre><code class="language-sql"># 创建表后自增
alter table 表名称 modify 字段名 数据类型 auto_increment;
mysql&gt; CREATE TABLE test8 (id INT PRIMARY KEY, last_name VARCHAR(15));
mysql&gt; ALTER TABLE TEST8 MODIFY ID INT AUTO_INCREMENT;
</code></pre>
<pre><code class="language-sql"># 删除自增
alter table 表名称 modify 字段名 数据类型;
mysql&gt; ALTER TABLE test8 MODIFY id INT;
</code></pre>
<p>MySQL 8.0 新特性：自增变量的持久化</p>
<p>MySQL 8.0 之前，InnoDB 不能恢复重启前的自增列。</p>
<pre><code class="language-sql"># MySQL 5.7
mysql&gt; CREATE TABLE test9(id INT PRIMARY KEY AUTO_INCREMENT);
mysql&gt; INSERT INTO test9 VALUES (0),(0),(0),(0);
mysql&gt; SELECT * FROM test9;
mysql&gt; DELETE FROM test9 WHERE id = 4;
mysql&gt; INSERT INTO test9 VALUES(0);
mysql&gt; SELECT * FROM test9;
mysql&gt; DELETE FROM test9 where id=5;
# --- 此时重启数据库 ---
# --- 新插入一个空值 ---
mysql&gt; INSERT INTO test1 values(0);
# 新插入的 0 值分配的自增主键值是 4 =&gt; 按重启前的操作逻辑应该分配 6
mysql&gt; SELECT * FROM test1;
+----+
| id |
+----+
|  1 |
|  2 |
|  3 |
|  4 |
+----+
</code></pre>
<p>MySQL 5.7 中自增主键的分配取决于 InnoDB 数据字典内部的一个计数器：</p>
<p>该计数器只在内存中维护，并不会持久化到磁盘。当数据库重启时，该计数器会被初始化。</p>
<p>MySQL 8.0 后，自增主键的计数器会持久化到重做日志中：</p>
<p>每次计数器发生改变，都会将改变写入重做日志。数据库重启时，InnoDB 会根据重做日志所保存的信息来初始化计数器的内存值。</p>
<h3 id="foreign-key-constraint">FOREIGN KEY Constraint</h3>
<blockquote>
<p>MySQL supports foreign keys, which permit cross-referencing related data across tables, and foreign key constraints, which help keep the related data consistent. <a href="https://dev.mysql.com/doc/refman/5.6/en/create-table-foreign-keys.html">dev.mysql</a><br />
A foreign key relationship involves a parent table that holds the initial column values, and a child table with column values that reference the parent column values. A foreign key constraint is defined on the child table.</p>
</blockquote>
<p>外键是一张表中的某个字段或某些字段集合，这些字段其实是其他表中的主键。</p>
<p>主表即父表，是被引用参考的表；从表即子表，是引用别人的表。</p>
<p>从表的外键列，必须引用主表的主键或者唯一约束的列，因为被依赖的值必须是唯一的。</p>
<p>在创建外键约束时，若不给外键约束命名，默认名不是列名，而是自动产生的一个外键名。</p>
<p>创建表时就指定外键约束的话，应该先创建主表，再创建从表。在删除表时，应该先删除从表或者先删除外键约束，再删除主表。</p>
<p>一个表可以建立多个外键约束。</p>
<p>从表的外键列与主表的被参照列名字可以不相同，但是数据类型必须一样。如果类型不一样，创建子表时，就会出现错误 "ERROR 1005 (HY000)"。</p>
<p>设置外键约束时，系统会默认建立对应的普通索引，索引名是外键的约束名。删除外键约束后，必须手动删除对应的索引。</p>
<pre><code class="language-sql">/* 在创建表时添加 */
# 创建主表与从表 -- 表级约束
mysql&gt; CREATE TABLE dept1(dept_id INT,dept_name VARCHAR(15));
mysql&gt; CREATE TABLE emp1(emp_id INT PRIMARY KEY AUTO_INCREMENT,emp_name VARCHAR(15),department_id INT,CONSTRAINT fk_emp1_dept_id FOREIGN KEY (department_id) REFERENCES dept1(dept_id)); # ERROR 1822 (HY000): Failed to add the foreign key constraint. Missing index for constraint 'fk_emp1_dept_id' in the referenced table 'dept1'
# 报错原因是主表没有主键约束 =&gt; 完成主键添加后再进行从表创建
mysql&gt; ALTER TABLE dept1 ADD PRIMARY KEY (dept_id);
</code></pre>
<pre><code class="language-sql"># 不能添加主表中没有的字段值 =&gt; 先向主表添加再向从表添加
mysql&gt; INSERT INTO emp1 VALUES (1001,'zs',10); # ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`dbtest13`.`emp1`, CONSTRAINT `fk_emp1_dept_id` FOREIGN KEY (`department_id`) REFERENCES `dept1` (`dept_id`))
mysql&gt; INSERT INTO dept1 VALUES (10, 'IT');
</code></pre>
<pre><code class="language-sql"># 删除、更新失败 =&gt; 外键约束起作用
mysql&gt; DELETE FROM dept1 WHERE dept_id = 10; # ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`dbtest13`.`emp1`, CONSTRAINT `fk_emp1_dept_id` FOREIGN KEY (`department_id`) REFERENCES `dept1` (`dept_id`))
mysql&gt; UPDATE dept1 SET dept_id = 20 WHERE dept_id = 10; # ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`dbtest13`.`emp1`, CONSTRAINT `fk_emp1_dept_id` FOREIGN KEY (`department_id`) REFERENCES `dept1` (`dept_id`))
</code></pre>
<pre><code class="language-sql"># 在创建表后添加外键约束
mysql&gt; CREATE TABLE dept2(dept_id INT PRIMARY KEY,dept_name VARCHAR(15));
mysql&gt; CREATE TABLE emp2(emp_id INT PRIMARY KEY AUTO_INCREMENT,emp_name VARCHAR(15),department_id INT);
mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = 'emp2';
mysql&gt; ALTER TABLE emp2 ADD CONSTRAINT fk_emp2_dept2_id FOREIGN KEY (department_id) REFERENCES dept2(dept_id);
mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = 'emp2';
</code></pre>
<p>删除外键约束：</p>
<ol>
<li>查看约束名 + 删除外键约束</li>
<li>查看索引名 + 删除索引</li>
</ol>
<pre><code class="language-sql">SELECT * FROM information_schema.table_constraints WHERE table_name = '表名称'; # 查看某个表的约束名
ALTER TABLE 从表名 DROP FOREIGN KEY 外键约束名;
SHOW INDEX FROM 表名称; # 查看某个表的索引名
ALTER TABLE 从表名 DROP INDEX 索引名;
</code></pre>
<pre><code class="language-sql">mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = 'emp1';
mysql&gt; ALTER TABLE emp1 DROP FOREIGN KEY fk_emp1_dept_id; # 删除外键约束
mysql&gt; ALTER TABLE emp1 DROP INDEX fk_emp1_dept_id; # 删除外键约束对应普通索引
</code></pre>
<p>约束等级：</p>
<ol>
<li>Cascade：父表上更新、删除时，子表同步操作匹配记录</li>
<li>Set null：父表上更新、删除记录时，子表上匹配记录的列设为 null</li>
<li>No action：若子表中有匹配的记录，则不允许对父表相关键操作</li>
<li>Restrict：同 no action，立即检查外键约束</li>
<li>Set default：父表变更时，子表将外键列设置成默认的值（Innodb 不识）</li>
<li>没有指定等级相当于 Restrict</li>
<li>外键约束最好采用 ON UPDATE CASCADE ON DELETE RESTRICT</li>
</ol>
<blockquote>
<p>在 MySQL 里，外键约束是有成本的，需要消耗系统资源。对于大并发的 SQL 操作，有可能会不适合。比如大型网站的中央数据库，可能会因为外键约束的系统开销而变得非常慢。所以， MySQL 允许不使用系统自带的外键约束，在应用层面完成检查数据一致性的逻辑。也就是说，即使不用外键约束，也要想办法通过应用层面的附加逻辑，来实现外键约束的功能，确保数据的一致性。</p>
<p>《阿里开发规范》<br />
【强制】不得使用外键与级联，一切外键概念必须在应用层解决。</p>
<p>说明：（概念解释）学生表中的 student_id 是主键，那么成绩表中的 student_id 则为外键。如果更新学生表中的 student_id，同时触发成绩表中的 student_id 更新，即为级联更新。外键与级联更新适用于单机低并发，不适合分布式、高并发集群；级联更新是强阻塞，存在数据库更新风暴的风险；外键影响数据库的插入速度。</p>
</blockquote>
<h3 id="check-constraint">CHECK Constraint</h3>
<p>CHECK 约束用于检查某个字段的值是否符合要求，一般是指值的范围。</p>
<p>MySQL 5.7 中 CHECK Constraint 无效（没有错误或警告提示）。</p>
<pre><code class="language-sql">mysql&gt; CREATE TABLE test10(id INT,last_name VARCHAR(15), salary DECIMAL(10,2) CHECK(salary &gt; 3000));
mysql&gt; INSERT INTO test10 VALUES(1,'hz',3500);
# 添加失败
mysql&gt; INSERT INTO test10 VALUES(2,'hzcopy',1500); # ERROR 3819 (HY000): Check constraint 'test10_chk_1' is violated.
</code></pre>
<h3 id="default-constraint">DEFAULT Constraint</h3>
<p>DEFAULT 约束用于为列设置默认值。</p>
<p>若插入数据时未显示赋值，那么默认值将会被添加。</p>
<pre><code class="language-sql"># 在创建表时添加默认值
CREATE TABLE 表名(字段 类型 DEFAULT 默认值);
</code></pre>
<pre><code class="language-sql"># 在创建表后添加默认值
ALTER TABLE 表名 MODIFY 字段名 字段类型 DEFAULT 默认值;
</code></pre>
<pre><code class="language-sql"># 删除默认值
mysql&gt; ALTER TABLE test12 MODIFY salary DECIMAL (10,2);
</code></pre>
<h2 id="%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1">其他数据库对象</h2>
<table>
<thead>
<tr>
<th>常见的数据库对象</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>表 TABLE</td>
<td>存储数据的逻辑单元，以行和列的形式存在，列就是字段，行就是记录</td>
</tr>
<tr>
<td>数据字典</td>
<td>存放数据库相关信息的系统表 =&gt; 系统表的数据通常由数据库系统维护，程序员通常不应该修改，只可查看</td>
</tr>
<tr>
<td>约束 CONSTRAINT</td>
<td>执行数据校验的规则，用于保证数据完整性的规则</td>
</tr>
<tr>
<td>视图 VIEW</td>
<td>一个或者多个数据表里数据的逻辑显示；视图并不存储数据</td>
</tr>
<tr>
<td>索引 INDEX</td>
<td>用于提高查询性能，相当于书的目录</td>
</tr>
<tr>
<td>存储过程 PROCEDURE</td>
<td>用于完成一次完整的业务处理，没有返回值，但可通过传出参数将多个值传给调用环境</td>
</tr>
<tr>
<td>存储函数 FUNCTION</td>
<td>用于完成一次特定的计算，具有一个返回值</td>
</tr>
<tr>
<td>触发器 TRIGGER</td>
<td>相当于一个事件监听器，当数据库发生特定事件后，触发器被触发，完成相应的处理</td>
</tr>
</tbody>
</table>
<h3 id="%E8%A7%86%E5%9B%BE">视图</h3>
<p>视图可以使用表的一部分，也可以针对不同需求制定不同的查询视图，即针对指定的人员只展示部分的数据。本质是一段存储起来的 SELECT。</p>
<p>视图建立在已有表（基表）的基础上，可以看作是虚拟表，本身不具有数据，占用很少的内存空间。视图的创建和删除只影响视图本身，不影响对应的基表。但是当对视图中的数据进行增删改操作时，数据表中的数据会发生相应变化，反之亦然。</p>
<ul>
<li>创建视图</li>
</ul>
<pre><code class="language-sql"># 在 CREATE VIEW 语句中嵌入子查询
CREATE [OR REPLACE] [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}] VIEW 视图名称 [(字段列表)] AS 查询语句 [WITH [CASCADED|LOCAL] CHECK OPTION]
</code></pre>
<h2 id="%E7%BB%93%E6%9D%9F">结束</h2>
<p>本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>协议，转载请注明出处！</p>


            </section>

        </article>
    </main>
    <footer class="page-footer">
            <amp-img class="site-icon" src="https://zairesinatra.github.io//content/images/2021/07/ghost-orb.png" width="50" height="50" layout="fixed" alt="zairesinatra"></amp-img>
        <h3>zairesinatra</h3>
            <p>The best time to recognize yourself is ten years ago, followed by now.</p>
        <p><a href="../../index.html">Read more posts →</a></p>
        <a class="powered" href="https://ghost.org" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 156 156"><g fill="none" fill-rule="evenodd"><rect fill="#15212B" width="156" height="156" rx="27"/><g transform="translate(36 36)" fill="#F6F8FA"><path d="M0 71.007A4.004 4.004 0 014 67h26a4 4 0 014 4.007v8.986A4.004 4.004 0 0130 84H4a4 4 0 01-4-4.007v-8.986zM50 71.007A4.004 4.004 0 0154 67h26a4 4 0 014 4.007v8.986A4.004 4.004 0 0180 84H54a4 4 0 01-4-4.007v-8.986z"/><rect y="34" width="84" height="17" rx="4"/><path d="M0 4.007A4.007 4.007 0 014.007 0h41.986A4.003 4.003 0 0150 4.007v8.986A4.007 4.007 0 0145.993 17H4.007A4.003 4.003 0 010 12.993V4.007z"/><rect x="67" width="17" height="17" rx="4"/></g></g></svg> Published with Ghost</a>
    </footer>
    
</body>
</html>
