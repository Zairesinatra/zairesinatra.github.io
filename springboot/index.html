<!DOCTYPE html>
<html lang="en">
<head>

    <title>SpringBoot</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css%3Fv=7d64696598.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css%3Fv=7d64696598.css" />
    <meta name="description" content="Spring 技术栈的一站式框架 &#x3D;&gt; SpringBoot" />
    <link rel="icon" href="../content/images/size/w256h256/2021/07/ghost-orb.png" type="image/png" />
    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp/index.html" />
    
    <meta property="og:site_name" content="zairesinatra" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="SpringBoot" />
    <meta property="og:description" content="Spring 技术栈的一站式框架 &#x3D;&gt; SpringBoot" />
    <meta property="og:url" content="https://zairesinatra.github.io//springboot/" />
    <meta property="og:image" content="https://zairesinatra.github.io//content/images/2022/06/springboot.jpeg" />
    <meta property="article:published_time" content="2020-01-02T13:57:00.000Z" />
    <meta property="article:modified_time" content="2023-01-24T13:42:55.000Z" />
    <meta property="article:tag" content="Technology growth" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="SpringBoot" />
    <meta name="twitter:description" content="Spring 技术栈的一站式框架 &#x3D;&gt; SpringBoot" />
    <meta name="twitter:url" content="https://zairesinatra.github.io//springboot/" />
    <meta name="twitter:image" content="https://zairesinatra.github.io//content/images/2022/06/springboot.jpeg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Ziyi Xie" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Technology growth" />
    <meta name="twitter:site" content="@xieziyi0422" />
    <meta property="og:image:width" content="1920" />
    <meta property="og:image:height" content="1080" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "zairesinatra",
        "url": "https://zairesinatra.github.io//",
        "logo": {
            "@type": "ImageObject",
            "url": "https://zairesinatra.github.io//content/images/2021/07/zs-1.JPG",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Ziyi Xie",
        "image": {
            "@type": "ImageObject",
            "url": "https://zairesinatra.github.io//content/images/2021/07/zs-2.JPG",
            "width": 1079,
            "height": 1079
        },
        "url": "https://zairesinatra.github.io//author/ziyi/",
        "sameAs": []
    },
    "headline": "SpringBoot",
    "url": "https://zairesinatra.github.io//springboot/",
    "datePublished": "2020-01-02T13:57:00.000Z",
    "dateModified": "2023-01-24T13:42:55.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://zairesinatra.github.io//content/images/2022/06/springboot.jpeg",
        "width": 1920,
        "height": 1080
    },
    "keywords": "Technology growth",
    "description": "Spring 技术栈的一站式框架 &#x3D;&gt; SpringBoot",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://zairesinatra.github.io//"
    }
}
    </script>

    <meta name="generator" content="Ghost 5.33" />
    <link rel="alternate" type="application/rss+xml" title="zairesinatra" href="../rss/index.html" />
    <script defer src="https://cdn.jsdelivr.net/ghost/portal@~2.24/umd/portal.min.js" data-ghost="https://zairesinatra.github.io//" data-key="f5d74add11f1d16d3e59c12945" data-api="https://zairesinatra.github.io//ghost/api/content/" crossorigin="anonymous"></script><style id="gh-members-styles">.gh-post-upgrade-cta-content,
.gh-post-upgrade-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    text-align: center;
    width: 100%;
    color: #ffffff;
    font-size: 16px;
}

.gh-post-upgrade-cta-content {
    border-radius: 8px;
    padding: 40px 4vw;
}

.gh-post-upgrade-cta h2 {
    color: #ffffff;
    font-size: 28px;
    letter-spacing: -0.2px;
    margin: 0;
    padding: 0;
}

.gh-post-upgrade-cta p {
    margin: 20px 0 0;
    padding: 0;
}

.gh-post-upgrade-cta small {
    font-size: 16px;
    letter-spacing: -0.2px;
}

.gh-post-upgrade-cta a {
    color: #ffffff;
    cursor: pointer;
    font-weight: 500;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a:hover {
    color: #ffffff;
    opacity: 0.8;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a.gh-btn {
    display: block;
    background: #ffffff;
    text-decoration: none;
    margin: 28px 0 0;
    padding: 8px 18px;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 600;
}

.gh-post-upgrade-cta a.gh-btn:hover {
    opacity: 0.92;
}</style>
    <script defer src="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/sodo-search.min.js" data-key="f5d74add11f1d16d3e59c12945" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/main.css" data-sodo-search="https://zairesinatra.github.io//" crossorigin="anonymous"></script>
    <link href="https://zairesinatra.github.io//webmentions/receive/" rel="webmention" />
    <script defer src="../public/cards.min.js%3Fv=7d64696598"></script>
    <link rel="stylesheet" type="text/css" href="../public/cards.min.css%3Fv=7d64696598.css">
    <script defer src="../public/member-attribution.min.js%3Fv=7d64696598"></script>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NXZH6Q3K52"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NXZH6Q3K52');
</script>
<!-- Ghost Init -->
<style>
.post-template .gh-head,
.page-template .gh-head {
  background: #000000 !important;
}
.site-footer {
  background: #000000 !important;
}
.post-card-tags {
  color: var(--color-secondary-text) !important;
}
.gh-portal-triggerbtn-container.with-label::before {
  display: none !important;
}
/* 需提前，否则闪烁 */
.footer-cta,
a.gh-head-button {
  display: none;
}
.algoliaouterwrapper i svg {
  width: 0;
}
/* 更多内容去除外边距 */
.footer-cta + .read-more-wrap {
  margin-top: unset;
}
</style>

<!-- 2023 => prismjs -->
<script src="https://res.cloudinary.com/dzb9ldnvl/raw/upload/v1679662056/Ghost/prism_i9a8up.js"></script>
<link rel="stylesheet" href="https://res.cloudinary.com/dzb9ldnvl/raw/upload/v1679662068/Ghost/prism_mdfwkg.css"/>
<!-- Patch: additional supported languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-vim.min.js" integrity="sha512-P1MRK1H11qw68MAfAYVyjumLuurOQKO4wwcx4S2Nbbae9CndG92dkIXq34lsOeMFlWZoT7nVPgsOy3gepk93Bg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Activate Line Numbers in PrismJS -->
<script>
	window.addEventListener('DOMContentLoaded', (event) => {      
		document.querySelectorAll('pre[class*=language-]').forEach(function(node) {
			node.classList.add('line-numbers');
            node.style.border = 'solid #FFFFFF 1px'
		});
		Prism.highlightAll();
	});
</script>
<!-- Resize Pre Area in PrismJS -->
<style>
    pre[class*="language-"].line-numbers{
		font-size: 0.8em;
        background-color: #202324;
    }
    code[class*="language-"] {
        background-color: transparent !important;
    }
</style>

<!-- TOC -->
<style>
    .toc > .toc-list li:first-child {
      margin-top: 8px;
    }
    .toc-list a {
      color: #000000 !important;
      text-decoration: none;
      word-break: break-word;
    }
    .toc > ol, .toc > li{
      font-size: 1.4rem;
    }
    
    .toc.active > .toc-list li:first-child {
      margin-top: 8px;
    }
    .toc.active .toc-list a {
      color: #FFFFFF !important;
      text-decoration: none;
      word-break: break-word;
    }
    .toc.active > ol, .toc.active > li{
      font-size: 1.4rem;
    }
</style>

<!-- ghost style by wkzs -->
<style>
.gh-content > [id] + * {
  margin-top: 2.5rem !important;
}
.gh-content > [id]:not(:first-child) {
  margin: 1.5em 0 0;
}
.gh-content > hr + *, .gh-content > blockquote + * {
  margin-top: max(1.1rem, 16px) !important;
}
.gh-content > [id]:not(:first-child) {
  margin: 1em 0 0;
}
.gh-content > * + * {
  margin-top: max(1.6vmin, 16px);
  margin-bottom: 0;
}
.gh-content > blockquote:not([class]), .gh-content > ol, .gh-content > ul, .gh-content > dl, .gh-content > p {
    font-family: var(--font-serif);
    font-weight: 400;
    font-size: 1.6rem;
    line-height: 1.6em;
    margin-top: 1.6rem;
}
</style>

<!-- Theme Change -->
<style>
@keyframes slideUp {
  from {
    bottom: 100px;
    opacity: 0;
  }
  to {
    bottom: 0;
    opacity: 1;
  }
}
.theme-switcher-wrap {
  width: 42px;
  height: 24px;
  text-align: right;
}
@media (max-width: 767px) {
  .gh-head-open .theme-switcher-wrap {
    width: 42px;
    height: 24px;
    text-align: right;
    animation: slideUp 1s ease-in-out forwards;
  }
}
.theme-switcher {
  display: inline-block;
  cursor: pointer;
}
.switch-path {
  width: 42px;
  height: 24px;
  border-radius: 10px;
  background-color: #f2f2f2;
  border: #dddfe6 1px solid;
}
.switch-path > .switch-handle {
  background-color: #ffffff;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  transition: all 0.3s ease-in-out;
}
.switch-handle .dark-icon {
  visibility: hidden;
  display: none;
}
.theme-switcher.active .switch-path {
  background-color: #555;
}
.theme-switcher.active .switch-handle {
  transform: translateX(20px);
  background-color: #101115;
}
.theme-switcher.active .switch-handle .light-icon {
  visibility: hidden;
}
.theme-switcher.active .switch-handle .dark-icon {
  visibility: visible;
  display: block;
}
</style>

<!-- Drak Theme Ghost CSS -->
<style>
.dark-mode .gh-content > blockquote:not([class])::before {
  background: #FFFFFF !important;
}
</style>

<!-- Arrow up -->
<style>
    .arrowup {
    	position: fixed;
        width: 50px;
        height: 50px;
        left: 35px;
        bottom: 3.1rem;
        z-index: 99;
        background-color: #15171A;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 10px;
        cursor: pointer;
        opacity: 1;
  		transition: opacity 0.3s ease-in-out;
    }
    .arrowup svg {
    	fill: #FFFFFF;
    }
    .arrowup:hover {
      opacity: 0.8;
    }
</style><style>:root {--ghost-accent-color: #15171A;}</style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/></pre></li>
</head>
<body class="post-template tag-technology-growth is-head-left-logo has-cover">
<div class="viewport">
    <header id="gh-head" class="gh-head outer">
        <div class="gh-head-inner inner">
            <div class="gh-head-brand">
                <a class="gh-head-logo" href="../index.html">
                        <img src="../content/images/2021/07/zs-1.JPG" alt="zairesinatra">
                </a>
                <button class="gh-search gh-icon-btn" onclick="docSearchFuncMobile()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button>
                <button class="gh-burger"></button>
            </div>

            <nav class="gh-head-menu">
                <ul class="nav">
    <li class="nav-home"><a href="../index.html">Home</a></li>
    <li class="nav-welcome"><a href="../welcome/index.html">Welcome</a></li>
    <li class="nav-author"><a href="../selfintro/index.html">Author</a></li>
    <li class="nav-tags"><a href="../tags/index.html">Tags</a></li>
</ul>

            </nav>

            <div class="gh-head-actions">
                <div class="theme-switcher-wrap">
                    <div class="theme-switcher" onclick="switchTheme()">
                    <div class="switch-path">
                        <div class="switch-handle">
                        <svg viewBox="0 0 24 24" class="dark-icon">
                            <path
                            d="M11.01 3.05C6.51 3.54 3 7.36 3 12a9 9 0 0 0 9 9c4.63 0 8.45-3.5 8.95-8c.09-.79-.78-1.42-1.54-.95A5.403 5.403 0 0 1 11.1 7.5c0-1.06.31-2.06.84-2.89c.45-.67-.04-1.63-.93-1.56z"
                            fill="#CFD3DC"
                            ></path>
                        </svg>
                        <svg viewBox="0 0 24 24" class="light-icon">
                            <path
                            d="M6.05 4.14l-.39-.39a.993.993 0 0 0-1.4 0l-.01.01a.984.984 0 0 0 0 1.4l.39.39c.39.39 1.01.39 1.4 0l.01-.01a.984.984 0 0 0 0-1.4zM3.01 10.5H1.99c-.55 0-.99.44-.99.99v.01c0 .55.44.99.99.99H3c.56.01 1-.43 1-.98v-.01c0-.56-.44-1-.99-1zm9-9.95H12c-.56 0-1 .44-1 .99v.96c0 .55.44.99.99.99H12c.56.01 1-.43 1-.98v-.97c0-.55-.44-.99-.99-.99zm7.74 3.21c-.39-.39-1.02-.39-1.41-.01l-.39.39a.984.984 0 0 0 0 1.4l.01.01c.39.39 1.02.39 1.4 0l.39-.39a.984.984 0 0 0 0-1.4zm-1.81 15.1l.39.39a.996.996 0 1 0 1.41-1.41l-.39-.39a.993.993 0 0 0-1.4 0c-.4.4-.4 1.02-.01 1.41zM20 11.49v.01c0 .55.44.99.99.99H22c.55 0 .99-.44.99-.99v-.01c0-.55-.44-.99-.99-.99h-1.01c-.55 0-.99.44-.99.99zM12 5.5c-3.31 0-6 2.69-6 6s2.69 6 6 6s6-2.69 6-6s-2.69-6-6-6zm-.01 16.95H12c.55 0 .99-.44.99-.99v-.96c0-.55-.44-.99-.99-.99h-.01c-.55 0-.99.44-.99.99v.96c0 .55.44.99.99.99zm-7.74-3.21c.39.39 1.02.39 1.41 0l.39-.39a.993.993 0 0 0 0-1.4l-.01-.01a.996.996 0 0 0-1.41 0l-.39.39c-.38.4-.38 1.02.01 1.41z"
                            fill="#606266"
                            ></path>
                        </svg>
                        </div>
                    </div>
                    </div>
                </div>
                    <button class="gh-search gh-icon-btn" onclick="docSearchFuncMobile()"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button>
                    <div class="gh-head-members">
                                <a class="gh-head-link" href="index.html#/portal/signin" data-portal="signin">Sign in</a>
                                <a class="gh-head-button" href="index.html#/portal/signup" data-portal="signup">Subscribe</a>
                    </div>
            </div>
        </div>
    </header>

    <div class="site-content">
      <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
        



<main id="site-main" class="site-main">
<article class="article post tag-technology-growth ">

    <header class="article-header gh-canvas">

        <div class="article-tag post-card-tags">
                <span class="post-card-primary-tag">
                    <a href="../tag/technology-growth/index.html">Technology growth</a>
                </span>
        </div>

        <h1 class="article-title">SpringBoot</h1>

            <p class="article-excerpt">Spring 技术栈的一站式框架 &#x3D;&gt; SpringBoot</p>

        <div class="article-byline">
        <section class="article-byline-content">

            <ul class="author-list">
                <li class="author-list-item">
                    <a href="../author/ziyi/index.html" class="author-avatar">
                        <img class="author-profile-image" src="../content/images/size/w100/2021/07/zs-2.JPG" alt="Ziyi Xie" />
                    </a>
                </li>
            </ul>

            <div class="article-byline-meta">
                <h4 class="author-name"><a href="../author/ziyi/index.html">Ziyi Xie</a></h4>
                <div class="byline-meta-content">
                    <time class="byline-meta-date" datetime="2020-01-02">Jan 2, 2020</time>
                        <span class="byline-reading-time"><span class="bull">&bull;</span> 27 min read</span>
                </div>
            </div>

        </section>
        </div>

            <figure class="article-image">
                <img
                    srcset="../content/images/size/w1000/2022/06/springboot.jpeg 1000w"
                    sizes="(min-width: 1400px) 1400px, 92vw"
                    src="../content/images/size/w2000/2022/06/springboot.jpeg"
                    alt="springboot"
                />
                    <figcaption>springboot</figcaption>
            </figure>

    </header>

    <section class="gh-content gh-canvas">
    <aside class="toc-container">
        <div class="toc"></div>
    </aside>
    <!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">快速上手</h2>
<blockquote>
<p>General Availability (GA) is the release of a product to the general public.</p>
</blockquote>
<p>开发中尽可能的选择 SpringBoot General Availability 正式发布版。</p>
<h3 id="helloworld"><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started">HelloWorld</a></h3>
<blockquote>
<p>The <code>@SpringBootApplication</code> annotation is equivalent to using <code>@Configuration</code>, <code>@EnableAutoConfiguration</code>, and <code>@ComponentScan</code> with their default attributes.</p>
</blockquote>
<pre><code class="language-java">@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(excludeFilters = { @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
		@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })
public @interface SpringBootApplication { ... }
</code></pre>
<blockquote>
<p><code>@ComponentScan</code> without arguments tells Spring to scan the current package and all of its sub-packages.</p>
</blockquote>
<p><code>@ComponentScan</code> 通常与 <code>@Configuration</code> 注解一起使用：</p>
<p><code>@component</code> 注解在 xml 文件中使用标签的方式为指定类创建 bean。</p>
<p>此处 <code>@ComponentScan</code> 的作用是：扫描 <code>@SpringBootApplication</code> 所在的 Application 类（即 spring-boot 项目的入口类）所在的包 basepackage 下所有的 <code>@component</code> 注解（或拓展了 <code>@component</code> 的注解）标记的 bean，并注册到容器中。</p>
<blockquote>
<p>Indicates the contexts in which an annotation type is applicable. The declaration contexts and type contexts in which an annotation type may be applicable are specified in JLS 9.6.4.1, and denoted in source code by enum constants of java.lang.annotation.ElementType.</p>
</blockquote>
<p><code>@Target</code> 注解说明 Annotation 所修饰的对象范围，Annotation 可被用于类、接口、枚举和 Annotation 类型、类型成员（方法、构造方法、成员变量、枚举值）、方法参数和本地变量（如循环变量、catch参数）。在Annotation类型的声明中使用了target可更加明晰其修饰的目标。</p>
<pre><code class="language-java">/* 主程序类 =&gt; springboot 应用入口 */
@SpringBootApplication
public class MainApplication {
    public static void main(String[] args) {
        SpringApplication.run(MainApplication.class,args);
    }
}
</code></pre>
<ul>
<li>控制器 =&gt; 处理交互</li>
</ul>
<pre><code class="language-java">// @ResponseBody
// @Controller
@RestController // @Controller + @ResponseBody
public class HelloController {
    @RequestMapping(&quot;/hello&quot;)
    public String handle01(){
        return &quot;Hello SpringBoot By zs&quot;;
    }
}
</code></pre>
<ul>
<li>Maven 配置文件</li>
</ul>
<blockquote>
<p>The Spring Boot Maven Plugin provides Spring Boot support in Apache Maven. It allows you to package executable jar or war archives, run Spring Boot applications, generate build information and start your Spring Boot application prior to running integration tests.<br>
Spring Boot Maven 插件在 Apache Maven 中提供 Spring Boot 支持。允许打包可执行 jar 或 war 档案、运行 Spring Boot 应用程序、生成构建信息并在运行集成测试之前启动 Spring Boot 应用程序。</p>
</blockquote>
<p>这里说明一下 springboot-maven-plugin 这个插件。虽可直接使用 maven 打包或 IntelliJ Idea 自带的打包，但此插件打包出来的 jar 可作为一个独立的服务直接启动，而 maven 自带的插件打包，大部分场景是作为一个被使用的依赖方法库，不作为可启动的独立的服务。</p>
<pre><code class="language-xml">&lt;!-- pom.xml --&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.zszy&lt;/groupId&gt;
    &lt;artifactId&gt;boot-01-helloworld&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;properties&gt;
        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;
    &lt;/properties&gt;
    &lt;!-- 作为父级项目为基于 spring 的应用程序提供默认配置 --&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.7.0&lt;/version&gt;
    &lt;/parent&gt;
    &lt;!-- 获取与Web开发相关的所有依赖关系 --&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;!-- Maven 中提供 Spring Boot 支持 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${project.parent.version}&lt;/version&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<ul>
<li>
<p>resources 中 application.properties 用于配置属性，查阅<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties">点此</a></p>
</li>
<li>
<p>打包后终端运行测试</p>
</li>
</ul>
<pre><code class="language-shell"># 默认已执行打包操作
# 具备 tomcat 依赖的打包, 可以做 web 项目直接运行
$ cd /Users/&lt;zszy&gt;/.../boot-01-helloworld/target
$ java -jar boot-01-helloworld-1.0-SNAPSHOT.jar
</code></pre>
<h3 id="%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">自动配置原理</h3>
<ul>
<li>依赖管理与版本仲裁</li>
</ul>
<p>父项目做依赖管理，其内可能声明较多的依赖。子项目在继承父项目后可不必纠结于依赖版本。</p>
<p>spring-boot-dependencies 声明了开发中常用的依赖版本。若需修改其他版本，可于项目 pom.xml 中增加 &lt;properties&gt; 标签指明。自定义修改版本号的前提是查看规定的当前依赖以及重写配置。</p>
<pre><code class="language-xml">&lt;!-- pom.xml --&gt;
...
&lt;properties&gt;
    &lt;mysql.version&gt;5.1.43&lt;/mysql.version&gt;
&lt;/properties&gt;
</code></pre>
<p>开发中所导入的 <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters">starter</a> 场景启动器，即是一组依赖的集合描述。</p>
<p>spring-boot-starter-* 中的 * 指某具体场景。只要引入 starter，这个场景中所有的常规依赖都将自动引入。 *-spring-boot-starter 是第三方提供的简化开发的场景启动器。</p>
<ul>
<li>自动配置</li>
</ul>
<p>SpringBoot 会自动引入并配置所需资源。</p>
<p>主程序所在包及其下边所有子包内的组件都会被默认扫描。若需改变扫描路径，应在 <code>@SpringBootApplication</code> 的 <code>scanBasePackages</code> 属性中指定。</p>
<pre><code class="language-java">@SpringBootApplication(scanBasePackages=&quot;com.zszy&quot;)
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%BA%95%E5%B1%82%E6%B3%A8%E8%A7%A3">底层注解</h2>
<h3 id="configuration">@Configuration</h3>
<p><code>@Configuration</code> 在类上标注，表示这是配置类，同时也是一个组件。配置类中可使用 <code>@Bean</code> 标注在方法上给容器注册组件，默认为单实例。</p>
<ul>
<li>配置类组件之间无依赖关系，可用 Lite 模式加速容器的启动，减少判断。</li>
<li>配置类组件之间有依赖关系，用默认的 Full 模式，方法会被调用得到之前单实例组件。</li>
</ul>
<pre><code class="language-java">@Configuration(proxyBeanMethods = true) // 通知 SpringBoot 这是配置类
/*
    Full(proxyBeanMethods = true) =&gt; 保证每个 @Bean 方法被调用多少次返回的组件都是单实例的 =&gt; 默认
    Lite(proxyBeanMethods = false) =&gt; 每个 @Bean 方法被调用多少次返回的组件都是新创建的
*/
public class MyConfig {
    @Bean // 给容器添加组件 =&gt; 以方法名作为组件的 id; 返回类型就是组件类型; 返回的值就是组件在容器中保存的实例
    public User user01(){
        User zs = new User(&quot;zs&quot;,19,&quot;male&quot;);
        // User 组件依赖于 Pet 组件
        zs.setPet(pet01());
        return zs;
    }
    @Bean
    public Pet pet01(){
        return new Pet(&quot;cat&quot;);
    }
}
</code></pre>
<pre><code class="language-java">/* 主程序类 =&gt; 这是一个 springboot 应用 */
@SpringBootApplication
public class MainApplication {
    public static void main(String[] args) {
        // 返回 ioc 容器
        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);
        // 查看容器组件
        String[] beanDefinitionNames = run.getBeanDefinitionNames();
        for(String name : beanDefinitionNames){
            System.out.println(name); // myConfig、helloController、user01、pet01
        }
        // 从容器中获得组件是单实例的
        User user01 = run.getBean(&quot;user01&quot;, User.class);
        Pet pet01 = run.getBean(&quot;pet01&quot;, Pet.class);
        System.out.println(user01.getPet() == pet01); // proxyBeanMethods = true =&gt; user 中的 pet 是容器的 pet
        // 配置类也是组件
        MyConfig bean = run.getBean(MyConfig.class);
        System.out.println(bean); // com.zszy.boot.config.MyConfig$$EnhancerBySpringCGLIB$$1fc234a8@736ac09a
    }
}
</code></pre>
<h3 id="import-%E5%AF%BC%E5%85%A5%E7%BB%84%E4%BB%B6">@Import 导入组件</h3>
<p><code>@Import</code> 的作用是通过导入组件的无参构造器，在容器中自动创建导入的组件对象。此方式默认导入组件名为全类名，和通过 <code>@Bean</code> 导入的名称不一样。</p>
<pre><code class="language-java">@Import(User.class) // 导入组件名称是全类名
@Configuration(proxyBeanMethods = true) // 通知 SpringBoot 这是配置类
public class MyConfig {...}
</code></pre>
<pre><code class="language-java">@SpringBootApplication
public class MainApplication {
    public static void main(String[] args) {
        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);
        ...
        // 测试不同方式存在于容器的组件名
        String[] beanNamesForType = run.getBeanNamesForType(User.class);
        for(String bNameFType : beanNamesForType){
            System.out.println(bNameFType); // com.zszy.boot.bean.User、user01
        }
    }
</code></pre>
<h3 id="conditional-%E6%9D%A1%E4%BB%B6%E8%A3%85%E9%85%8D">@Conditional 条件装配</h3>
<p>条件装配是需满足 Conditional 指定的条件，则进行组件注入的操作。</p>
<pre><code class="language-java">@Import(User.class) // 导入组件名称是全类名
@Configuration(proxyBeanMethods = true) // 通知 SpringBoot 这是配置类
@ConditionalOnMissingBean(name = &quot;ok&quot;) // 没有 ok 名字的 Bean 时，MyConfig 类的 Bean 才能生效
public class MyConfig {}
</code></pre>
<pre><code class="language-java">// 测试组件是否根据条件被成功注入 =&gt; Conditional =&gt; ConditionalOnBean
System.out.println(run.containsBean(&quot;user01&quot;));
</code></pre>
<h3 id="importresource-%E5%AF%BC%E5%85%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">@ImportResource 导入配置文件</h3>
<p>祖传代码很可能仍使用 bean.xml 文件生成配置 bean，若想复用 bean.xml，可通过 <code>@ImportResource</code> 引入 Spring 配置文件。</p>
<pre><code class="language-java">@ImportResource(&quot;classpath:beans.xml&quot;)
public class MyConfig { ... }
</code></pre>
<h3 id="configurationproperties-%E9%85%8D%E7%BD%AE%E7%BB%91%E5%AE%9A">@ConfigurationProperties 配置绑定</h3>
<p>在已存在于容器中的组件，通过使用 Java 读取到 properties 文件内容，并且将其封装到 JavaBean。</p>
<ul>
<li>@Component + @ConfigurationProperties</li>
</ul>
<p><code>@ConfigurationProperties</code> 的 <code>prefix</code> 表示类中属性和配置文件具体前缀下的所有属性一一绑定。</p>
<pre><code class="language-xml">&lt;!-- application.properties --&gt;
...
mycar.brand=Audi
mycar.price=500000
</code></pre>
<pre><code class="language-java">@Component
@ConfigurationProperties(prefix=&quot;mycar&quot;)
public class Car {...}
</code></pre>
<pre><code class="language-java">@RestController // @Controller + @ResponseBody
public class HelloController {
    ...
    @Autowired
    Car car;
    @RequestMapping(&quot;/car&quot;)
    public Car showCar(){
        return car;
    }
}
</code></pre>
<ul>
<li>@EnableConfigurationProperties + @ConfigurationProperties</li>
</ul>
<p>因省略 @Component 注解，Spring 不会自动检测定义的 bean，故此方式需在配置类添加，因配置类是容器中的组件。通过 @EnableConfigurationProperties 激活属性配置功能，并指定开启具体类的属性配置。通常用于不修改第三方包。</p>
<pre><code class="language-java">@Configuration(proxyBeanMethods = true) // 通知 SpringBoot 这是配置类
...
@EnableConfigurationProperties(Car.class) // 开启 Car 配置绑定功能并将 Car 组件自动注入容器
public class MyConfig { ... }
</code></pre>
<pre><code class="language-java">// @Component
@ConfigurationProperties(prefix=&quot;mycar&quot;)
public class Car { ... }
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E9%85%8D%E7%BD%AE%E5%A2%9E%E5%BC%BA">配置增强</h2>
<h3 id="lombok">Lombok</h3>
<p><a href="https://projectlombok.org/features/all">Lombok</a> 是一个库，通过标签方式代替构造器、getter/setter、toString 等方法。</p>
<ul>
<li>spring boot 已管理 Lombok</li>
</ul>
<pre><code class="language-xml">&lt;dependency&gt;
     &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
     &lt;artifactId&gt;lombok&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>File -&gt; Settings -&gt; Plugins 搜索安装 Lombok 插件</li>
</ul>
<pre><code class="language-java">@NoArgsConstructor
@Data
@ToString
@EqualsAndHashCode
public class &lt;class&gt; {}
// ------
@Slf4j
@RestController
public class HelloController {
    @RequestMapping(&quot;/hello&quot;)
    public String handle01(@RequestParam(&quot;name&quot;) String name){
        log.info(&quot;log info ...&quot;);
        return &quot;Hello SpringBoot By zs&quot;+name;
    }
}
</code></pre>
<h3 id="developer-tools">Developer Tools</h3>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.devtools">Developer Tools</a> 是在修改代码或者页面后，免去重复启动项目的 Auto restart。</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre>
<p>更新代码后通过 cmd + f9 进行编译即可看见反馈。mac m1 芯片需唤醒。</p>
<p>注意此方式外接键盘 =&gt; fn + cmd + f9。</p>
<h3 id="yamlyml-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">yaml|yml 配置文件</h3>
<p><a href="https://www.runoob.com/w3cnote/yaml-intro.html">yaml</a> 是一种标记语言，适合做以数据为中心的配置文件。properties 和 yaml|yml 配置文件生效有先后顺序，前者优先级更高。</p>
<blockquote>
<p>基本语法 =&gt; 大小写敏感、缩进表示层级、缩进不允许使用tab，只允许空格、缩进的空格数不重要，只要相同层级的元素左对齐即可、'#'表示注释</p>
</blockquote>
<p>注意其他场景中单引号会将转义字符作为字符串输出，双引号会将转义字符转义输出。但是在配置文件是否加单双引号效果一样。</p>
<ul>
<li>配置提示依赖</li>
</ul>
<pre><code class="language-xml">&lt;!-- 注释处理器 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>springboot 打包插件避免打包配置处理器</li>
</ul>
<pre><code class="language-xml">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;!-- 工程打包时不将 spring-boot-configuration-processor 打进包内; 只在编码时候起作用 --&gt;
            &lt;configuration&gt;
                &lt;excludes&gt;
                    &lt;exclude&gt;
                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
                     &lt;/exclude&gt;
                &lt;/excludes&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="web">web</h2>
<blockquote>
<p>Spring Boot provides auto-configuration for Spring MVC that works well with most applications. <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.servlet.spring-mvc">click me</a>.</p>
</blockquote>
<h3 id="%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90">静态资源</h3>
<ul>
<li>静态资源目录</li>
</ul>
<p>Spring Boot 项目类路径 classpath 指的是 resources 文件夹。静态资源能识别放在类路径下的 /static、/public、/resources、/META-INF/resources 目录。</p>
<p>静态资源可通过当前项目根路径分隔静态资源名访问，但需要注意是否与控制器中映射处理方法的路径重名。这是由于请求进来首先会去找控制器进行处理，若不能处理才会将请求交给静态资源处理器。</p>
<p>通常静态资源访问会采取改变默认静态资源路径或增加访问前缀的方式。前者会使默认访问路径失效，后者则是需要拼接指定前缀才可正常访问。</p>
<pre><code class="language-yml"># 改变默认静态资源路径
resources:
  static-locations: [classpath:/changedPath/]
# 增加访问前缀
spring:
  mvc:
    static-path-pattern: /prefixRes/**
</code></pre>
<ul>
<li>WebJars 原理</li>
</ul>
<p>原始 Web 开发时，一般都是将静态资源文件放置在 webapp 目录；在 Spring Boot 里，一般是将资源放在 src/main/resources/static 目录；Servlet3 中，允许直接访问 WEB-INF/lib 下 jar 包中的 /META-INF/resources 目录资源。WebJars 就是利用此特性，将所有前端静态文件打成 Jar 包，此方式的引入就会和普通 Jar 引入一致，也能更好的对前端静态资源进行管理。</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.webjars&lt;/groupId&gt;
    &lt;artifactId&gt;jquery&lt;/artifactId&gt;
    &lt;version&gt;3.6.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>jQuery 可通过 <a href="http://localhost:8080/webjars/jquery/3.6.0/jquery.js">http://localhost:8080/webjars/jquery/3.6.0/jquery.js</a> 访问。</p>
<ul>
<li>WelcomePage 欢迎页</li>
</ul>
<p>欢迎页支持静态资源路径下的 index.html。可以配置静态资源路径，但不可以配置静态资源的访问前缀，否则可能导致不能被默认访问。在静态资源目录下设置 favicon.ico 后不能及时更新的原因可能在于此图标是在整个 session 中共享。</p>
<h3 id="%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86">请求处理</h3>
<ul>
<li>@PathVariable =&gt; 处理路径映射中以占位符表示的路径变量</li>
<li>@RequestHeader =&gt; 获取请求头（可通过参数指定获取）</li>
<li>@RequestParam =&gt; 获取请求参数（指问号后的参数，url?a=1&amp;b=2）</li>
<li>@CookieValue =&gt; 获取 Cookie 值（可通过参数指定获取）</li>
<li>@RequestAttribute =&gt; 获取 request 域属性（页面转发取出数据）</li>
<li>@RequestBody =&gt; 获取 POST 中的请求体</li>
<li>@MatrixVariable =&gt; 矩阵变量（绑定在路径变量中）</li>
</ul>
<p>查询字符串的请求形式通常根据 @RequestParam 获取；在路径变量的大括号里以分号区别的请求形式，称为矩阵变量形式，可通过 @MatrixVariable 获取。</p>
<p>SpringMVC 禁用矩阵变量时，则需手动开启。</p>
<pre><code class="language-java">// 矩阵变量形式 =&gt; 禁用 Cookie 时, 操作 Session 中内容的方法
/xxx/{path;param1=value1,param2=value2a,value2b,value2c}
</code></pre>
<pre><code class="language-java">@Configuration(proxyBeanMethods = false)
public class WebConfig implements WebMvcConfigurer {
    // 创建返回WebMvcConfigurerBean
    @Bean
    public WebMvcConfigurer webMvcConfigurer(){
        return new WebMvcConfigurer() {
            @Override
            public void configurePathMatch(PathMatchConfigurer configurer) {
                UrlPathHelper urlPathHelper = new UrlPathHelper();
                // 不移除；后面的内容。矩阵变量功能就可以生效
                urlPathHelper.setRemoveSemicolonContent(false);
                configurer.setUrlPathHelper(urlPathHelper);
            }
        };
    }
//    实现WebMvcConfigurer接口
//    @Override
//    public void configurePathMatch(PathMatchConfigurer configurer) {
//        UrlPathHelper urlPathHelper = new UrlPathHelper();
//        // 不移除；后面的内容。矩阵变量功能就可以生效
//        urlPathHelper.setRemoveSemicolonContent(false);
//        configurer.setUrlPathHelper(urlPathHelper);
//    }
}
</code></pre>
<pre><code class="language-html">&lt;h1&gt;Welcome&lt;/h1&gt;
&lt;h3&gt;测试基本注解&lt;/h3&gt;
&lt;a href=&quot;/car/3/owner/zs?param1=param1&amp;param2=param2&amp;age=21&amp;paramList=guitar&amp;paramList=code&quot;&gt;常用参数注解测试&lt;/a&gt;
&lt;br /&gt;
&lt;form action=&quot;/inputPost&quot; method=&quot;post&quot;&gt;
    &lt;span&gt;测试@RequestBody获取数据&lt;/span&gt;&lt;br /&gt;
    用户名：&lt;input name=&quot;userName&quot; /&gt;&lt;br /&gt;
    邮箱：&lt;input name=&quot;email&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;submit&quot;&gt;
&lt;/form&gt;
&lt;a href=&quot;/cars/sell;lowestPrice=50;brand=bmw,audi,benz&quot;&gt;测试矩阵变量1&lt;/a&gt;
&lt;a href=&quot;/boss/1;age=22/2;age=23&quot;&gt;测试矩阵变量2&lt;/a&gt;
</code></pre>
<pre><code class="language-java">@RestController
public class ParameterTestController {
    // 常用参数注解测试
    @GetMapping(&quot;/car/{id}/owner/{username}&quot;)
    public Map&lt;String,Object&gt; getCar(@PathVariable(&quot;id&quot;) Integer id,
                                     @PathVariable(&quot;username&quot;) String name,
                                     @PathVariable Map&lt;String,String&gt; pv,
                                     @RequestHeader(&quot;User-Agent&quot;) String userAgent,
                                     @RequestHeader Map&lt;String,String&gt; header,
                                     @RequestParam Map&lt;String,String&gt; params,
                                     @RequestParam(&quot;age&quot;) Integer age,
                                     @RequestParam(&quot;paramList&quot;) List&lt;String&gt; paramList,
                                     @CookieValue(&quot;_ga&quot;) String _ga,
                                     @CookieValue(&quot;_ga&quot;) Cookie cookie
                                     ){
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;id&quot;,id);
        map.put(&quot;name&quot;,name);
        map.put(&quot;pv&quot;,pv);
        map.put(&quot;userAgent&quot;,userAgent);
        map.put(&quot;headers&quot;,header);
        map.put(&quot;age&quot;,age);
        map.put(&quot;paramList&quot;,paramList);
        map.put(&quot;params&quot;,params);
        map.put(&quot;_ga&quot;,_ga);
        System.out.println(cookie.getName()+&quot;===&gt;&quot;+cookie.getValue());
        return map;
    }
    // 测试@RequestBody获取数据
    @PostMapping(&quot;/inputPost&quot;)
    public Map postMethod(@RequestBody String content){
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;content&quot;,content);
        return map;
    }
    // 测试矩阵变量
    @GetMapping(&quot;/cars/{path}&quot;)
    public Map carsSell(@MatrixVariable(&quot;lowestPrice&quot;) Integer lowestPrice,
                        @MatrixVariable(&quot;brand&quot;) List&lt;String&gt; brand,
                        @PathVariable(&quot;path&quot;) String path){
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();

        map.put(&quot;lowestPrice&quot;,lowestPrice);
        map.put(&quot;brand&quot;,brand);
        map.put(&quot;path&quot;,path);
        return map;
    }
    // 矩阵变量存在同名情况
    @GetMapping(&quot;/boss/{bossId}/{empId}&quot;)
    public Map boss(@MatrixVariable(value = &quot;age&quot;,pathVar = &quot;bossId&quot;) Integer bossAge,
                    @MatrixVariable(value = &quot;age&quot;,pathVar = &quot;empId&quot;) Integer empAge){
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;bossAge&quot;,bossAge);
        map.put(&quot;empAge&quot;,empAge);
        return map;
    }
}
</code></pre>
<h3 id="%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90">视图解析</h3>
<p>由于 JSP 不支持压缩包内编译的方式，而 Spring Boot 默认打包方式为 Jar 包，故不支持 JSP。推荐的第三方模板引擎技术<a href="https://docs.spring.io/spring-boot/docs/2.7.0/reference/html/using.html#using.build-systems.starters">点此</a>。</p>
<ul>
<li>thymeleaf</li>
</ul>
<p><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">thymeleaf</a> 语法简单，贴近 JSP，但并不是高性能模板引擎，适用于单体用户。</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>Thymeleaf 配置位于 ThymeleafProperties，新建页面放在 templates 文件夹中。</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE">数据访问</h2>
<h3 id="%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9C%BA%E6%99%AF%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%95%B4%E5%90%88">数据库场景配置与整合</h3>
<p>spring-boot-starter-data-* 都是底层整合数据访问相关的。</p>
<ul>
<li>引入 jdbc 场景</li>
</ul>
<p>spring-data-jdbc 进行 jdbc 相关操作，spring-boot-starter-jdbc 中导入数据库连接池 HikariCP。</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>HikariCP =&gt; 数据库连接池<br>
spring-jdbc =&gt; jdbc 操作<br>
spring-tx =&gt; 事务操作</p>
<p>由于不能确定使用何种数据库，故官方不会将数据库驱动自动导入。</p>
<ul>
<li>配置项</li>
</ul>
<pre><code class="language-yaml">spring:
  datasource:
    url: jdbc:mysql://localhost:3306/user_db?serverTimezone=UTC&amp;characterEncoding=utf-8
    username: root
    password: admin123
    driver-class-name: com.mysql.cj.jdbc.Driver
</code></pre>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;1.2.9&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="%E6%95%B4%E5%90%88-mybatis">整合 MyBatis</h3>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;2.2.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>需要注意的是，若在 application.yaml 指明 MyBatis 的配置文件位置，就不应该在 configuration 选项中再次指定具体配置，否则会出现 IllegalStateException。</p>
<p>导入MyBatis官方Starter。<br>
编写Mapper接口，需@Mapper注解才会被扫描。<br>
编写SQL映射文件并绑定Mapper接口。<br>
在application.yaml中指定Mapper配置文件的所处位置，以及指定全局配置文件的信息 （建议：配置在mybatis.configuration）。</p>
<p>整合MyBatis-注解配置混合版</p>
<pre><code class="language-sql">CREATE TABLE `user_db`.`city` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `state` VARCHAR(45) NULL,
  `country` VARCHAR(45) NULL,
  PRIMARY KEY (`id`));
</code></pre>
<p><a href="https://github.com/mybatis/spring-boot-starter/wiki/Quick-Start">https://github.com/mybatis/spring-boot-starter/wiki/Quick-Start</a></p>
<p>既可以在 Mapper 中以注解标注某个方法，也可将方法配置在配置文件中。</p>
<p>一个一个扫描 Mapper 较繁琐可以在主程序为 @MapperScan 添加指定的扫描包，即包中全是 mapper。</p>
<h3 id="mybatisplus">mybatisplus</h3>
<p>MybatisPlusAutoConfiguration配置类，MybatisPlusProperties配置项绑定。</p>
<p>SqlSessionFactory自动配置好，底层是容器中默认的数据源 ConditionalOnMissingBean。</p>
<p>mapperLocations自动配置好的，有默认值classpath*:/mapper/**/*.xml，这表示任意包的类路径下的所有mapper文件夹下任意路径下的所有xml都是sql映射文件。 建议以后sql映射文件放在 mapper下。</p>
<p>容器中也自动配置好了SqlSessionTemplate。</p>
<p>由于 registerBeanDefinitions 方法，@Mapper 标注的接口也会被自动扫描，建议直接 @MapperScan(&quot;com.lun.boot.mapper&quot;)批量扫描。</p>
<p>MyBatisPlus优点之一：只需要我们的Mapper继承MyBatisPlus的BaseMapper 就可以拥有CRUD能力，减轻开发工作。</p>
<h3 id="%E6%95%B4%E5%90%88-redis">整合 redis</h3>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>官方整合的自动配置包都在原生的 spring-boot-autoconfigure 中。</p>
<pre><code class="language-shell">/usr/local/Cellar/maven/3.8.5/libexec/repository/org/springframework/boot/spring-boot-autoconfigure/2.7.0/spring-boot-autoconfigure-2.7.0.jar!/org/springframework/boot/autoconfigure/data/redis
</code></pre>
<p>RedisAutoConfiguration 自动配置类。RedisProperties 属性类 --&gt; spring.redis.xxx是对redis的配置。</p>
<p>连接工厂 LettuceConnectionConfiguration、JedisConnectionConfiguration 分别对应新生与经典两种客户端。xxxTemplate 就是用于操作 xxx 的。</p>
<p>redis 经典数据结构就是 kv 类型，RedisTemplate&lt;Object, Object&gt; 对应 kv 都可是 object；StringRedisTemplate，key，value都是String。</p>
<pre><code class="language-java">@AutoConfiguration
@ConditionalOnClass({RedisOperations.class})
@EnableConfigurationProperties({RedisProperties.class})
@Import({LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class})
public class RedisAutoConfiguration {
    public RedisAutoConfiguration() {
    }

    @Bean
    @ConditionalOnMissingBean(
        name = {&quot;redisTemplate&quot;}
    )
    @ConditionalOnSingleCandidate(RedisConnectionFactory.class)
    public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {
        RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate();
        template.setConnectionFactory(redisConnectionFactory);
        return template;
    }

    @Bean
    @ConditionalOnMissingBean
    @ConditionalOnSingleCandidate(RedisConnectionFactory.class)
    public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory redisConnectionFactory) {
        return new StringRedisTemplate(redisConnectionFactory);
    }
}
</code></pre>
<h3 id="%E6%95%B4%E5%90%88-junit5">整合 JUnit5</h3>
<ul>
<li>JUnit 5 组成 =&gt; JUnit Platform、JUnit Jupiter、JUnit Vintage</li>
</ul>
<blockquote>
<p>JUnit 平台是在 JVM 上启动测试框架的基础，支持其他测试引擎的接入。<br>
JUnit Jupiter 是 JUnit5 新特性的核心测试引擎，用于在 Junit Platform 上运行。<br>
JUnit Vintage 提供兼容 JUnit4.x、JUnit3.x 的测试引擎。</p>
</blockquote>
<p>Spring Boot 2.4 以上版本移除了默认 Vintage 的依赖，spring-boot-starter-test 没有了相应 Vintage 包。如果需要兼容 JUnit4 应自行引入相关依赖。</p>
<p>Spring 中 JUnit5 的基本单元测试模板使用 @SpringBootTest 注解，在 JUnit4 中是 @SpringBootTest+@RunWith(SpringRunner.class)。</p>
<ul>
<li>依赖注入</li>
</ul>
<pre><code class="language-xml">&lt;!-- JUnit Vintage =&gt; 兼容 JUnit4 =&gt; 可选 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;
    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;
            &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;
</code></pre>
<pre><code class="language-xml">&lt;!-- JUnit5 对应的 starter =&gt; 必须 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li><a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations">常用测试注解</a>、<a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions">断言机制</a>、<a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-assumptions">前置条件</a>、<a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests">参数化测试</a></li>
</ul>
<h3 id="%E6%8C%87%E6%A0%87%E7%9B%91%E6%8E%A7-actuator"><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator">指标监控 Actuator</a></h3>
<p>大型应用常拆分成微服务进行开发，当把这些微服务部署上线时，需要全天候的监控这些微服务的运行状况信息。Actuator 是 Spring-Boot 为简化指标监控和减少冗余代码所抽取的专门模块。此外也可以使用 <a href="https://github.com/codecentric/spring-boot-admin">spring-boot-admin</a>。</p>
<ul>
<li>依赖注入</li>
</ul>
<pre><code class="language-xml">&lt;!-- 在微服务中引入 spring-boot-starter-actuator 依赖 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>在 actuator 依赖注入后会被动引入用于自动配置指标监控的 autoconfigure 以及底层框架 micrometer（用于自定义指标监控）。</p>
<p>在引入场景成功后可通过 <a href="http://localhost:8080/actuator/%5BEndPoint%5D">http://localhost:8080/actuator/[EndPoint]</a> 查看具体监控端点的信息 =&gt; Metrics 运行时指标、Health 健康状况指标...</p>
<ul>
<li>暴露 <a href="https://docs.spring.io/spring-boot/docs/2.1.7.RELEASE/reference/html/production-ready-endpoints.html">Endpoints</a></li>
</ul>
<p>支持的暴露方式有 HTTP（默认只暴露 health 和 info Endpoint）以及 JMX（默认暴露所有Endpoint）。JMX 方式暴露可以在 jconsole 控制台的 MBean 查看。</p>
<p>若有监控大面板的需求，常要将每个监控端点模式暴露成 HTTP，这里需要有前端的配合，通过前端发送请求，指定展示具体的监控内容。后端在配置文件将端点以 Web 方式进行暴露。</p>
<pre><code class="language-yml">management: # 所有监控有关配置 =&gt; actuator
  endpoints:
    enabled-by-default: true # 默认开启所有监控端点
    web: # 以 web 方式暴露
      exposure:
        include: '*' # 暴露所有端点 =&gt; http://localhost:8080/actuator/[Endpoint]/detailPath
</code></pre>
<ul>
<li>具体端点信息</li>
</ul>
<p>健康检查端点一般用于云平台定时的检查应用健康状况，需要返回当前应用的一系列状况集合。</p>
<pre><code class="language-yml">management:
  ...
  endpoint:
    health:
      show-details: always
</code></pre>
<p>Metrics Endpoint 提供详细且有层级的空间指标信息，这些信息能以主动推送 pull 或者被动获取 push 的方式获得。</p>
<pre><code class="language-yml">management:
  endpoints:
    enabled-by-default: false # 默认关闭所有监控端点 =&gt; 没有开启不准访问
    web:
      exposure:
        include: '*'
  endpoint:
    health:
      show-details: always
      enabled: true # 端点开放
    info:
      enabled: true
    beans:
      enabled: true
</code></pre>
<ul>
<li>定制端点信息 =&gt; 通常用于对项目中额外引用组件的状态检查</li>
</ul>
<p>定制 EndPoint 信息主要是以实现 [EndPoint]Indicator 接口或继承其 Indicator 的抽象类来完成相关需求。</p>
<pre><code class="language-java">@Component // 将此组件放入容器
public class MyComHealthIndicator extends AbstractHealthIndicator {
    /**
     * mongodb 获取连接测试
     * @param builder
     * @throws Exception
     */
    @Override
    protected void doHealthCheck(Health.Builder builder) throws Exception {
        // 作为细节信息的容器
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        // 模拟检查过程
        if(1 == 2){
        // 模拟处理方式 =&gt; builder.up() -&gt; 健康返回|builder.down() -&gt; 不健康返回
            builder.status(Status.UP);
            map.put(&quot;count&quot;,1);
            map.put(&quot;ms&quot;,100);
        } else {
            builder.status(Status.OUT_OF_SERVICE);
            map.put(&quot;err&quot;,&quot;连接超时&quot;);
            map.put(&quot;ms&quot;,3000);
        }
        // 附带业务状态码等信息...
        builder.withDetail(&quot;code&quot;,100).withDetails(map);
    }
}
</code></pre>
<pre><code class="language-yml"># 这种方式失效建议使用下一种
info:
  appName: boot-admin
  version: 1.0.1
  mavenProjectName: @project.artifactId@ # 使用@@可以获取 maven 的 pom 文件值
  mavenProjectVersion: @project.version@
</code></pre>
<pre><code class="language-java">@Component
public class MyInfoContributor implements InfoContributor {
    @Override
    public void contribute(Info.Builder builder) {
        builder.withDetail(&quot;MyInfo&quot;, Collections.singletonMap(&quot;user&quot;, &quot;zs&quot;));
    }
}
</code></pre>
<p>在自定义增强 Metrics 监控时，可以使用构造器注入的方式让有参构造器的参数标识为 MeterRegistry 注册中心，通过 MeterRegistry 类型的形参调用不同的度量指标完成注册，最后只需要在待监控的位置进行监控操作即可。</p>
<pre><code class="language-java">// 方式一
class MyService{
    Counter counter;
    public MyService(MeterRegistry meterRegistry){
         counter = meterRegistry.counter(&quot;myservice.method.running.counter&quot;); // 指标名
    }
    public void hello() {
        counter.increment();
    }
}
// 方式二
@Bean
MeterBinder queueSize(Queue queue) {
    return (registry) -&gt; Gauge.builder(&quot;queueSize&quot;, queue::size).register(registry);
}
</code></pre>
<p>除了在已有端点进行拓展外，当官方给出的监控端点不能满足需求时，应自定义监控端点。</p>
<pre><code class="language-java">@Component // 放入容器
@Endpoint(id = &quot;myDocker&quot;) // 表示自定义的监控端点
public class DockerEndpoint {
    @ReadOperation // 端点读操作
    public Map getDockerInfo(){
        return Collections.singletonMap(&quot;info&quot;,&quot;docker started...&quot;);
    }
    @WriteOperation // 端点写操作
    private void restartDocker(){
        System.out.println(&quot;docker restarted....&quot;);
    }
}
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%85%B6%E4%BB%96%E5%8A%9F%E8%83%BD">其他功能</h2>
<h3 id="profile">Profile</h3>
<p>配置文件是框架的核心，Profile 功能增强多环境适配。</p>
<ul>
<li>application-profile</li>
</ul>
<p>application.yaml =&gt; 默认加载的配置文件<br>
application-prod|test|dev.yaml =&gt; 根据激活环境加载不同的配置文件</p>
<p>因为默认配置文件在任何时候都会加载，所以适合指定激活的环境。当配置环境成功后，项目会同时加载默认配置文件以及激活的环境配置文件。当这两个文件出现同名配置，以环境标识的配置文件优先。注意激活的方式除了配置文件，也可以通过命令行完成。命令行激活的方式优先级高于配置项。</p>
<pre><code class="language-yml"># application.yaml
spring.profile.active=dev|test|prod # 指定激活的环境
</code></pre>
<pre><code class="language-shell"># 通常用于项目打包后激活指定方式的 jar 包
java -jar xxx-SNAPSHOT.jar --spring.profiles.active=prod --person.name=zs
</code></pre>
<ul>
<li>@Profile 条件装配</li>
</ul>
<p>当类或者方法上添加了注解 @Profile(&quot;dev|test|prod&quot;)，那么只有在指定的环境中才会激活组件或装配方法。</p>
<pre><code class="language-java">@Component
@Profile(&quot;dev&quot;)
@ConfigurationProperties(&quot;ZSDevDatasource&quot;)
@Data
public class ZSDevDatasourceConfig{}
</code></pre>
<pre><code class="language-yml"># application-dev.yaml
ZSDevDatasource: 
  name: dev-zs
server:
  port: 7000
</code></pre>
<ul>
<li>Profile 分组 =&gt; 自定义的组下可以加载多个配置的环境</li>
</ul>
<pre><code class="language-yml">spring.profiles.active=myprod # 两个环境 proddb 与 prodbean 都会加载进去
spring.profiles.group.myprod[0]=proddb
spring.profiles.group.myprod[1]=prodbean
spring.profiles.group.mytest[0]=testdb
spring.profiles.group.mytest[1]=testbean
</code></pre>
<h3 id="%E5%A4%96%E9%83%A8%E5%8C%96%E9%85%8D%E7%BD%AE"><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config">外部化配置</a></h3>
<p>外部化配置是将信息抽取成文件放在外部进行集中管理。需要重点关注的是外部配置源、查找位置以及加载顺序。</p>
<ul>
<li>外部配置源 =&gt; Java 属性文件、YAML 文件、环境变量、命令行参数...</li>
<li>查找位置 =&gt; classpath 根路径、classpath 根路径下 config 目录、jar 包当前目录、jar包当前目录的 config 目录以及 /config 子目录的直接子目录</li>
<li>加载顺序 =&gt; 指定环境优先，外部优先
<ul>
<li>当前 jar 包内部的 application.properties 和 application.yml</li>
<li>当前 jar 包内部的 application-{profile}.properties 和 application-{profile}.yml</li>
<li>引用的外部 jar 包的 application.properties 和 application.yml</li>
<li>引用的外部 jar 包的 application-{profile}.properties 和 application-{profile}.yml</li>
</ul>
</li>
</ul>
<h3 id="%E8%87%AA%E5%AE%9A%E4%B9%89-starter">自定义 starter</h3>
<p>Spring-Boot 为简化开发已经抽取了许多<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters">常用场景的启动器</a>，但是依然不能满足所有的开发需求。</p>
<p>xxx-starter 是普通的 Maven 工程，用于指向依赖；具体要加载的依赖 xxx-starter-autoconfigure，是需要用到 Spring Initializr 创建的 Maven 工程。</p>
<ul>
<li>
<p>若要项目在启动时加载指定的自动配置类，应在后者包中配置 META-INF/spring.factories 里 EnableAutoConfiguration 的值</p>
</li>
<li>
<p>详细步骤移步 springboot-customer-starter。</p>
</li>
</ul>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="bugs-%E8%A7%A3%E5%86%B3">Bugs 解决</h2>
<ul>
<li>导入 spring-boot-maven-plugin 持续飘红</li>
</ul>
<pre><code>Plugin 'org.springframework.boot:spring-boot-maven-plugin:' not found
</code></pre>
<p>解决方式参考 <a href="https://stackoverflow.com/questions/64639836/plugin-org-springframework-bootspring-boot-maven-plugin-not-found">SOF</a>，在 pom.xml 中添加插件版本。</p>
<pre><code class="language-xml">&lt;plugin&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${project.parent.version}&lt;/version&gt;
&lt;/plugin&gt;
</code></pre>
<ul>
<li>通过注解 @Autowired 注入 Jdbctemplate 飘红</li>
</ul>
<p>将 @Autowired 转换为 @Resource。</p>
<ul>
<li>配置 druid monitor 时数据源页面出现 (*) property for user to setup</li>
</ul>
<p>因 Spring Boot 在启动时并不会初始化数据源，只有在真正使用数据源的时候才会初始化，可通过日志来观察。</p>
<p>解决方法是在执行过 sql 语句后，再查看数据源页面，即可恢复正常。</p>
<ul>
<li>启动 SpringBoot 后出现 Whitelabel Error Page</li>
</ul>
<pre><code>Whitelabel Error Page =&gt; This application has no explicit mapping for /error, so you are seeing this as a fallback.
</code></pre>
<p>主因是 IntelliJ Idea 目录结构的 Application 启动类的位置不对，应将 Application 类放在最外侧，包含所有子包。</p>
<p>本人将 controller 目录放置在与 Application 目录同级处，所以导致了该问题。</p>
<p>此外可以通过在启动类中，添加 scanBasePackages 属性指定 controller 的位置。</p>
<pre><code class="language-java">@SpringBootApplication(scanBasePackages=&quot;controller&quot;) // scanBasePackages 注解属性默认会扫描该类所在的包下所有的配置类
public class BootHelloTestApplication {
    public static void main(String[] args) {
        SpringApplication.run(BootHelloTestApplication.class, args);
    }
}
</code></pre>
<ul>
<li>@Autowired is not applicable to local variable</li>
</ul>
<p>自动注入 @Autowired 不能应用于局部变量的意思就是别在方法体里面用。</p>
<ul>
<li>spring.factories 没有叶子</li>
</ul>
<p>看看是不是把 META-INF 写成了 META_INF...</p>
<ul>
<li>Could not find or load main class com.xxx...</li>
</ul>
<p>版本更新所导致项目重构时找不到模块，可以先删除整个 .idea 目录，然后重启再次导入项目。</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">结束</h2>
<p>本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>协议，转载请注明出处！</p>
<!--kg-card-end: markdown-->
    </section>

    <section class="article-comments gh-canvas">
        
        <script src="https://utteranc.es/client.js"
        repo="Zairesinatra/comments-by-utterances"
        issue-term="pathname"
        theme="photon-dark"
        crossorigin="anonymous"
        async>
        </script>
    </section>

</article>
</main>

    <section class="footer-cta outer">
        <div class="inner">
            <h2 class="footer-cta-title">Sign up for more like this.</h2>
            <a class="footer-cta-button" href="index.html#/portal" data-portal>
                <div class="footer-cta-input">Enter your email</div>
                <span>Subscribe</span>
            </a>
        </div>
    </section>



            <aside class="read-more-wrap outer">
                <div class="read-more inner">
                        
<article class="post-card post">

    <a class="post-card-image-link" href="../vim-neovim/index.html">

        <img class="post-card-image"
            srcset="../content/images/size/w1000/2023/03/ScenicViewOfBeachDuringDaytime.jpg 1000w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../content/images/size/w600/2023/03/ScenicViewOfBeachDuringDaytime.jpg"
            alt="Scenic View Of Beach During Daytime"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../vim-neovim/index.html">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    Vim &amp; Neovim
                </h2>
            </header>
                <div class="post-card-excerpt">Vim ninjas count every keystroke!</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2022-12-12">Dec 12, 2022</time>
                <span class="post-card-meta-length">19 min read</span>
        </footer>

    </div>

</article>
                        
<article class="post-card post">

    <a class="post-card-image-link" href="../design-patterns/index.html">

        <img class="post-card-image"
            srcset="../content/images/size/w1000/2023/03/SixHalogenBulbs.jpg 1000w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../content/images/size/w600/2023/03/SixHalogenBulbs.jpg"
            alt="Six Halogen Bulbs"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../design-patterns/index.html">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    Design Patterns And ...
                </h2>
            </header>
                <div class="post-card-excerpt">"A good programmer is someone who always looks both ways before crossing a one-way street." - Doug Linder</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2022-08-08">Aug 8, 2022</time>
                <span class="post-card-meta-length">35 min read</span>
        </footer>

    </div>

</article>
                        
<article class="post-card post">

    <a class="post-card-image-link" href="../g-toc-css/index.html">

        <img class="post-card-image"
            srcset="../content/images/size/w1000/2023/03/GlassBottleFilledWithBlackStrawonBrownWoodenTable.jpg 1000w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../content/images/size/w600/2023/03/GlassBottleFilledWithBlackStrawonBrownWoodenTable.jpg"
            alt="Glass Bottle Filled With Black Straw on Brown Wooden Table"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../g-toc-css/index.html">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    G&amp;TOC&amp;CSS
                </h2>
            </header>
                <div class="post-card-excerpt">TOC 的需求实现以及相关的思考总结。</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2022-05-01">May 1, 2022</time>
                <span class="post-card-meta-length">6 min read</span>
        </footer>

    </div>

</article>
                </div>
            </aside>



    </div>
    <div class="docsearchwrapper"><div id="docsearch"></div></div>
    <div class="arrowup">
      <svg
        version="1.1"
        id="Layer_1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        x="0px"
        y="0px"
        width="20px"
        height="20px"
        viewBox="0 0 122.883 122.882"
        enable-background="new 0 0 20 20"
        xml:space="preserve"
      >
        <g>
          <path
            d="M0,61.441L0,61.441h0.018c0,16.976,6.872,32.335,17.98,43.443c11.108,11.107,26.467,17.979,43.441,17.979v0.018h0.001 h0.001v-0.018c16.974,0,32.335-6.872,43.443-17.98s17.98-26.467,17.98-43.441h0.018v-0.001V61.44h-0.018 c0-16.975-6.873-32.334-17.98-43.443C93.775,6.89,78.418,0.018,61.443,0.018V0h-0.002l0,0v0.018 c-16.975,0-32.335,6.872-43.443,17.98C6.89,29.106,0.018,44.465,0.018,61.439H0V61.441L0,61.441z M42.48,71.7 c-1.962,1.908-5.101,1.865-7.009-0.098c-1.909-1.962-1.865-5.101,0.097-7.009l22.521-21.839l3.456,3.553l-3.46-3.569 c1.971-1.911,5.117-1.862,7.029,0.108c0.055,0.058,0.109,0.115,0.16,0.175L87.33,64.594c1.963,1.908,2.006,5.047,0.098,7.009 c-1.908,1.963-5.047,2.006-7.01,0.098L61.53,53.227L42.48,71.7L42.48,71.7z"
          />
        </g>
      </svg>
    </div>
    <footer class="site-footer outer">
        <div class="inner">
            <section class="copyright"><a href="../index.html">zairesinatra</a> &copy; 2023</section>
            <nav class="site-footer-nav">
                
            </nav>
            <div><a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a></div>
        </div>
    </footer>
</div>


<script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous">
</script>
<script src="../assets/built/casper.js%3Fv=7d64696598"></script>
<script>
$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.min.js"></script>
<script>
  tocbot.init({
    tocSelector: '.toc',
    contentSelector: '.gh-content',
    hasInnerContainers: true
  });
  var tc = document.querySelector(".toc-container");
  if(tc){
    var tch = tc.clientHeight;
    var ah = document.querySelector(".article-header");
    var ahh = ah.clientHeight;
    window.addEventListener("scroll", function () {
    if(document.body.clientWidth > 1170){
      var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
      var ihh = window.innerHeight;
      if(scrollY >= ihh + tch + ahh){
        var ctc = document.querySelector(".toc-container");
        ctc.style.position="sticky";
        ctc.style.position="-webkit-sticky";
        ctc.style.top = "120px";
        ctc.style.marginLeft = "800px";
        ctc.style.minWidth= "260px";
      }
      if(scrollY < tch + ahh -10){
        var ctc = document.querySelector(".toc-container");
        ctc.style.position="";
        ctc.style.top = "";
        ctc.style.marginLeft = "";
      }
    }})
  }
</script>

<script>
  function docSearchFuncMobile(){
    const DocSearchElement = document.querySelector(".DocSearch");
    DocSearchElement.click();
  }
</script>


<!-- searchinghost-easy -->
<!--
<script src="https://cdn.jsdelivr.net/gh/gmfmi/searchinghost-easy@latest/dist/searchinghost-easy-basic.js"></script>
<script>
    new SearchinGhostEasy({
        contentApiKey: 'e93d8b3520ae46be52c9a4b140'
    });
</script>
-->

<!-- Theme Mode -->
<script>
    let currentTheme = localStorage.getItem("theme-color");
    const switchTheme = function () {
        const storedTheme = localStorage.getItem("theme-color") || "theme-light";
        if (
            storedTheme === "theme-dark" &&
            document.getElementsByTagName("html")[0].className !== ""
        ) {
            localStorage.setItem("theme-color", "theme-light");
            currentTheme = localStorage.getItem("theme-color");
            if (currentTheme === "theme-light") {
            document.getElementsByTagName("html")[0].classList.remove("dark-mode");
            document
                .getElementsByClassName("theme-switcher")[0]
                ?.classList.remove("active");
            document
                .getElementsByClassName("toc")[0]
                ?.classList.remove("active");
            }
        } else {
            localStorage.setItem("theme-color", "theme-dark");
            currentTheme = localStorage.getItem("theme-color");
            if (currentTheme === "theme-dark") {
            // console.log(document.getElementById("app"));
            document.getElementsByTagName("html")[0].classList.add("dark-mode");
            document
                .getElementsByClassName("theme-switcher")[0]
                ?.classList.add("active");
            document
                .getElementsByClassName("toc")[0]
                ?.classList.add("active");
            }
        }
    };
    const initTheme = function () {
    const storedTheme = localStorage.getItem("theme-color") || "theme-light";
    if (storedTheme === "theme-dark") {
        document
        .getElementsByClassName("theme-switcher")[0]
        ?.classList.add("active");
        document
        .getElementsByClassName("toc")[0]
        ?.classList.add("active");
        document.getElementsByTagName("html")[0].classList.add("dark-mode");
    }
    };
    initTheme()
</script>

<!-- Arrow up -->
<script>
const arrowup = document.querySelector(".arrowup");
arrowup.addEventListener("click", function() {
  const scrollDuration = 1500; // 滚动持续时间，单位毫秒
    const start = window.pageYOffset; // 当前滚动位置
    const end = 0; // 滚动结束位置
    const distance = end - start; // 滚动距离
    const startTime = performance.now(); // 动画开始时间

    function easeInOutCubic(t) {
      return t < 0.5
        ? 4 * t ** 3
        : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;
    }

    function scrollToTopSmooth(timestamp) {
      const currentTime = timestamp - startTime; // 已经经过的时间
      const progress = currentTime / scrollDuration; // 滚动进度
      const position =
        start + distance * easeInOutCubic(Math.min(progress, 1)); // 当前滚动位置
      window.scrollTo(0, position); // 滚动到新位置

      if (currentTime < scrollDuration) {
        // 如果滚动还未结束，则继续执行动画
        requestAnimationFrame(scrollToTopSmooth);
      }
    }

    requestAnimationFrame(scrollToTopSmooth);
});
</script>

<!-- Algolia DocSearch -->
<style>
.docsearchwrapper{
  display: none;
}
.DocSearch-Container{
  z-index: 9999999;
}
</style>

<script type="text/javascript">
  docsearch({
    appId: "722DYFSYDR",
    apiKey: "5b7d4a36b43ac3d135ca6b83ac715f7e",
    indexName: "zairesinatraio",
    container: document.querySelector("#docsearch"),
    debug: false // Set debug to true if you want to inspect the modal
  });
</script>

</body>
</html>
