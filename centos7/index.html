<!DOCTYPE html>
<html lang="en">
<head>

    <title>CentOS7</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css%3Fv=69401cbc3d.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css%3Fv=69401cbc3d.css" />
    <meta name="description" content="ssh root@???" />
    <link rel="icon" href="../content/images/size/w256h256/2021/07/ghost-orb.png" type="image/png" />
    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp/index.html" />
    
    <meta property="og:site_name" content="zairesinatra" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="CentOS7" />
    <meta property="og:description" content="ssh root@???" />
    <meta property="og:url" content="yourdomain.com/centos7/" />
    <meta property="og:image" content="yourdomain.com/content/images/2021/10/penguinCentOS.jpg" />
    <meta property="article:published_time" content="2019-07-16T12:23:00.000Z" />
    <meta property="article:modified_time" content="2022-10-08T07:25:01.000Z" />
    <meta property="article:tag" content="Technology growth" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="CentOS7" />
    <meta name="twitter:description" content="ssh root@???" />
    <meta name="twitter:url" content="yourdomain.com/centos7/" />
    <meta name="twitter:image" content="yourdomain.com/content/images/2021/10/penguinCentOS.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Ziyi Xie" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Technology growth" />
    <meta name="twitter:site" content="@xieziyi0422" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="800" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "zairesinatra",
        "url": "yourdomain.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "yourdomain.com/content/images/2021/07/zs-1.JPG",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Ziyi Xie",
        "image": {
            "@type": "ImageObject",
            "url": "yourdomain.com/content/images/2021/07/zs-2.JPG",
            "width": 1079,
            "height": 1079
        },
        "url": "yourdomain.com/author/ziyi/",
        "sameAs": []
    },
    "headline": "CentOS7",
    "url": "yourdomain.com/centos7/",
    "datePublished": "2019-07-16T12:23:00.000Z",
    "dateModified": "2022-10-08T07:25:01.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "yourdomain.com/content/images/2021/10/penguinCentOS.jpg",
        "width": 1280,
        "height": 800
    },
    "keywords": "Technology growth",
    "description": "ssh root@???",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "yourdomain.com/"
    }
}
    </script>

    <meta name="generator" content="Ghost 5.25" />
    <link rel="alternate" type="application/rss+xml" title="zairesinatra" href="../rss/index.html" />
    <script defer src="https://cdn.jsdelivr.net/ghost/portal@~2.20/umd/portal.min.js" data-ghost="yourdomain.com/" data-key="f5d74add11f1d16d3e59c12945" data-api="yourdomain.com/ghost/api/content/" crossorigin="anonymous"></script><style id="gh-members-styles">.gh-post-upgrade-cta-content,
.gh-post-upgrade-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    text-align: center;
    width: 100%;
    color: #ffffff;
    font-size: 16px;
}

.gh-post-upgrade-cta-content {
    border-radius: 8px;
    padding: 40px 4vw;
}

.gh-post-upgrade-cta h2 {
    color: #ffffff;
    font-size: 28px;
    letter-spacing: -0.2px;
    margin: 0;
    padding: 0;
}

.gh-post-upgrade-cta p {
    margin: 20px 0 0;
    padding: 0;
}

.gh-post-upgrade-cta small {
    font-size: 16px;
    letter-spacing: -0.2px;
}

.gh-post-upgrade-cta a {
    color: #ffffff;
    cursor: pointer;
    font-weight: 500;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a:hover {
    color: #ffffff;
    opacity: 0.8;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a.gh-btn {
    display: block;
    background: #ffffff;
    text-decoration: none;
    margin: 28px 0 0;
    padding: 8px 18px;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 600;
}

.gh-post-upgrade-cta a.gh-btn:hover {
    opacity: 0.92;
}</style>
    <script defer src="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/sodo-search.min.js" data-key="f5d74add11f1d16d3e59c12945" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/main.css" data-sodo-search="yourdomain.com/" crossorigin="anonymous"></script>
    <script defer src="../public/cards.min.js%3Fv=69401cbc3d"></script>
    <link rel="stylesheet" type="text/css" href="../public/cards.min.css%3Fv=69401cbc3d.css">
    <script defer src="../public/member-attribution.min.js%3Fv=69401cbc3d"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q4HQV7NBSG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-Q4HQV7NBSG');
</script>

<!-- 2022 prismjs update -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism-tomorrow.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet">

<script>
window.addEventListener('DOMContentLoaded', (event) => {      
    document.querySelectorAll('pre[class*=language-]').forEach(function(node) {
        node.classList.add('line-numbers');
	});
    Prism.highlightAll();
});
</script>

<!-- prism -->
<style>
pre[class*="language-"] {
    margin: 0 0 1.5em !important;
}
pre[class*="line-numbers"]>code {
    padding: 0 ;
}
code {
    text-shadow: none !important;
}
.token.operator {
    background: none !important;
}

:not(pre)>code[class*="language-"],
pre[class*="language-"] {
    background: #202124 !important;
}
</style>

<!-- customer theme by zs -->
<style>
/* Generated with http://k88hudson.github.io/syntax-highlighting-theme-generator/www */
/* http://k88hudson.github.io/react-markdocs */
/**
 * @author k88hudson
 *
 * Based on prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */
/*********************************************************
* General
*/
/* Generated with http://k88hudson.github.io/syntax-highlighting-theme-generator/www */
/* http://k88hudson.github.io/react-markdocs */
/**
 * @author k88hudson
 *
 * Based on prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */
/*********************************************************
* General
*/
pre[class*="language-"],
code[class*="language-"] {
  color: #b0bec5;
  font-size: 13px;
  text-shadow: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  direction: ltr;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  line-height: 1.5;
  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;
  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}
pre[class*="language-"]::selection,
code[class*="language-"]::selection,
pre[class*="language-"]::mozselection,
code[class*="language-"]::mozselection {
  text-shadow: none;
  background: #b3d4fc;
}
@media print {
  pre[class*="language-"],
  code[class*="language-"] {
    text-shadow: none;
  }
}
pre[class*="language-"] {
  padding: 1em;
  margin: .5em 0;
  overflow: auto;
  background: #202124;
}
:not(pre) > code[class*="language-"] {
  padding: .1em .3em;
  border-radius: .3em;
  color: #db4c69;
  background: #f9f2f4;
}
/*********************************************************
* Tokens
*/
.namespace {
  opacity: .7;
}
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #93a1a1;
}
.token.punctuation {
  color: #f3f3f3;
}
.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: #88deff;
}
.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: #e3f2fd;
}
.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: #f3f3f3;
  background: #202124;
}
.token.atrule,
.token.attr-value,
.token.keyword {
  color: #06b4fe;
}
.token.function {
  color: #ff7043;
}
.token.regex,
.token.important,
.token.variable {
  color: #ff7043;
}
.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}
.token.entity {
  cursor: help;
}
/*********************************************************
* Line highlighting
*/
pre[data-line] {
  position: relative;
}
pre[class*="language-"] > code[class*="language-"] {
  position: relative;
  z-index: 1;
}
.line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: #202124;
  box-shadow: inset 5px 0 0 #202124;
  z-index: 0;
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}
</style>

<!-- 音乐播放器 -->
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><style>:root {--ghost-accent-color: #15171A;}</style>

</head>
<body class="post-template tag-technology-growth is-head-left-logo has-cover">
<div class="viewport">

    <header id="gh-head" class="gh-head outer">
        <div class="gh-head-inner inner">
            <div class="gh-head-brand">
                <a class="gh-head-logo" href="../index.html">
                        <img src="../content/images/2021/07/zs-1.JPG" alt="zairesinatra">
                </a>
                <button class="gh-search gh-icon-btn" data-ghost-search><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button>
                <button class="gh-burger"></button>
            </div>

            <nav class="gh-head-menu">
                <ul class="nav">
    <li class="nav-home"><a href="../index.html">Home</a></li>
    <li class="nav-welcome"><a href="../welcome/index.html">Welcome</a></li>
    <li class="nav-author"><a href="../selfintro/index.html">Author</a></li>
    <li class="nav-tags"><a href="../tags/index.html">Tags</a></li>
    <li class="nav-search"><a href="../index.html#searchinghost-easy">Search</a></li>
</ul>

            </nav>

            <div class="gh-head-actions">
                    <button class="gh-search gh-icon-btn" data-ghost-search><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button>
                            <a class="gh-head-button" href="index.html#/portal/signup" data-portal="signup">Subscribe</a>
            </div>
        </div>
    </header>

    <div class="site-content">
        



<main id="site-main" class="site-main">
<article class="article post tag-technology-growth ">

    <header class="article-header gh-canvas">

        <div class="article-tag post-card-tags">
                <span class="post-card-primary-tag">
                    <a href="../tag/technology-growth/index.html">Technology growth</a>
                </span>
        </div>

        <h1 class="article-title">CentOS7</h1>

            <p class="article-excerpt">ssh root@???</p>

        <div class="article-byline">
        <section class="article-byline-content">

            <ul class="author-list">
                <li class="author-list-item">
                    <a href="../author/ziyi/index.html" class="author-avatar">
                        <img class="author-profile-image" src="../content/images/size/w100/2021/07/zs-2.JPG" alt="Ziyi Xie" />
                    </a>
                </li>
            </ul>

            <div class="article-byline-meta">
                <h4 class="author-name"><a href="../author/ziyi/index.html">Ziyi Xie</a></h4>
                <div class="byline-meta-content">
                    <time class="byline-meta-date" datetime="2019-07-16">Jul 16, 2019</time>
                        <span class="byline-reading-time"><span class="bull">&bull;</span> 16 min read</span>
                </div>
            </div>

        </section>
        </div>

            <figure class="article-image">
                <img
                    srcset="../content/images/size/w2000/2021/10/penguinCentOS.jpg 2000w"
                    sizes="(min-width: 1400px) 1400px, 92vw"
                    src="../content/images/size/w2000/2021/10/penguinCentOS.jpg"
                    alt="centOS7"
                />
                    <figcaption>centOS7</figcaption>
            </figure>

    </header>

    <section class="gh-content gh-canvas">
        <aside class="toc-container">
            <div class="toc"></div>
        </aside>
        <p>CentOS Community Enterprise Operating System 社区企业操作系统，和收费版本 RHEL Red Hat Enterprise Linux 同属 Red Hat 公司。</p><p>区别于 Debian 衍生的 Ubuntu，在包管理上并非 apt-get 和 dpkg，而是 RPM 与 YUM 的集成。</p><!--kg-card-begin: markdown--><h2 id="mac-%E8%BF%9E%E6%8E%A5">Mac 连接</h2>
<p>CentOS 远程服务器在重装系统后会出现 Mac 无法正常连接的问题，常伴随终端提示 &quot;REMOTE HOST IDENTIFICATION HAS CHANGED&quot;。此时需要删除本地保存的相关文件并在服务器完成指定配置后才能重新连接成功。</p>
<pre><code class="language-shell"># 报错信息
$ ssh root@ip
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the RSA key sent by the remote host is ...
Please contact your system administrator.
Add correct host key in /home/hostname /.ssh/known_hosts to get rid of this message.
Offending RSA key in /var/lib/sss/pubconf/known_hosts:4
RSA host key for pong has changed and you have requested strict checking.
Host key verification failed.
</code></pre>
<pre><code class="language-shell"># 本地操作 =&gt; 删除对应远程ip的信息
~/.ssh/known_hosts
</code></pre>
<pre><code class="language-shell"># centOS
vim /etc/ssh/sshd_config
# PasswordAuthentication yes
# PermitRootLogin yes
</code></pre>
<pre><code class="language-shell"># 重新启动远程服务器 sshd 服务
# Ubuntu 或 Debian Linux
sudo systemctl restart ssh.service
# RHEL/CentOS Linux
sudo systemctl restart sshd.service
</code></pre>
<p>出现 &quot;Permission denied (publickey,gssapi-keyex,gssapi-with-mic)&quot; 的拒绝，也应同样进行上述操作更改，最后重启服务即可。</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4%E8%BF%AD%E4%BB%A3">系统服务管理命令迭代</h2>
<ul>
<li><code>service</code> 仅适用于对 CentOS v4.x/5.x/6.x 的系统服务进行管理。</li>
</ul>
<pre><code class="language-shell">$ service
Usage: service &lt; option &gt; | --status-all | [ service_name [ command | --full-restart ] ]
$ service -help
The service command supports only basic LSB actions (start, stop, restart, try-restart, reload, force-reload, status). For other actions, please try to use systemctl.
</code></pre>
<ul>
<li><code>chkconfig</code> 适用于在 CentOS v4.x/5.x/6.x 中更新和查询系统服务的运行等级信息，经典场景莫过于自启动。当不加任何参数单独运行此命令时，会显示服务的使用信息。与 /etc/rc[0~6].d 文件夹之间紧密相联。</li>
</ul>
<pre><code class="language-shell">$ chkconfig
Note: This output shows SysV services only and does not include native
      systemd services. SysV configuration data might be overridden by native
      systemd configuration.

      If you want to list systemd services use 'systemctl list-unit-files'.
      To see services enabled on particular target use
      'systemctl list-dependencies [target]'.

netconsole     	0:off	1:off	2:off	3:off	4:off	5:off	6:off
network        	0:off	1:off	2:on	3:on	4:on	5:on	6:off
$ chkconfig --help
chkconfig version 1.7.6 - Copyright (C) 1997-2000 Red Hat, Inc.
This may be freely redistributed under the terms of the GNU Public License.

usage:   chkconfig [--list] [--type &lt;type&gt;] [name]
         chkconfig --add &lt;name&gt;
         chkconfig --del &lt;name&gt;
         chkconfig --override &lt;name&gt;
         chkconfig [--level &lt;levels&gt;] [--type &lt;type&gt;] &lt;name&gt; &lt;on|off|reset|resetpriorities&gt;
</code></pre>
<ul>
<li><code>systemctl</code> 仅在 CentOS v7.x/8.x 或更高版本上进行管理和启动/停止/重启服务，是 service 和 chkconfig 命令的集合与代替。</li>
</ul>
<pre><code class="language-shell">$ systemctl --help
systemctl [OPTIONS...] {COMMAND} ...
Query or send control commands to the systemd manager.
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">快速上手</h2>
<h3 id="%E8%B5%B7%E6%89%8B%E5%BC%8F">起手式</h3>
<ul>
<li><a href="https://github.com/Zairesinatra/Advanced-Frontend/blob/main/lib/Linux/01.md">仓库</a>指令 &amp; Shell 命令行快速操作</li>
</ul>
<pre><code class="language-shell">Ctrl + a =&gt; 移到命令行首 &amp; Ctrl + e =&gt; 移到命令行尾
Ctrl + f =&gt; 按字符右移 &amp; Ctrl + b =&gt; 按字符左移
Alt + f =&gt; 按单词右移 &amp; Alt + b =&gt; 按单词左移
Ctrl + k =&gt; 从光标处删除至命令行尾 &amp; Ctrl + w =&gt; 从光标处删除至字首
Ctrl + p =&gt; 历史中的上一条命令 &amp; Ctrl + n =&gt; 历史中的下一条命令
</code></pre>
<ul>
<li>切换成 root 用户 &amp; 退出 root 用户并切换回普通用户</li>
</ul>
<pre><code class="language-shell">$ sudo su -
$ exit
</code></pre>
<ul>
<li>~ 表示在 home 目录；切换为 / 根目录</li>
</ul>
<pre><code class="language-shell"># home 目录切换为 / 根目录
[root@VM-4-17-centos ~]# cd /
# / 根目录
[root@VM-4-17-centos /]# ls -l
total 72
lrwxrwxrwx.   1 root root     7 Mar  7  2019 bin -&gt; usr/bin # 系统预设执行文件目录(ls)
drwxr-xr-x.  98 root root 12288 Oct  1 00:14 etc # 系统配置文件(更改可导致系统不能重启)
...
lrwxrwxrwx.   1 root root     8 Mar  7  2019 sbin -&gt; usr/sbin # 系统预设执行文件目录
...
drwxr-xr-x.  14 root root  4096 Jan  8  2021 usr # 系统预设执行文件目录
drwxr-xr-x.  20 root root  4096 Jan  8  2021 var # /var/log程序运行日志的存放目录
</code></pre>
<h3 id="su%E3%80%81su-%E3%80%81sudo">su、su-、sudo</h3>
<ul>
<li>su、sudo</li>
</ul>
<p><code>su</code> 和 <code>su -</code> 都是需要输入目标用户的密码以切换到另外的 shell 实例。那么很明显的，由于登录 root 用户就需要 root 身份密码，在多用户服务器中通过 <code>su</code>、<code>su -</code> 进行 root 访问权限意味着 root 用户密码隐私性欠佳。</p>
<p><code>sudo</code> (superuser-do助记符) 的使用原理与上述是南辕北辙的。即通过一个配置文件(/etc/sudoers) 列出每个用户的特定操作权限。当调用时，要求验证配置文件中的用户身份密码来允许提升权限运行单个命令且不会启动一个新的 shell。</p>
<p>通常在 Linux 系统中非 root 用户运行sudo命令，会提示以下信息</p>
<pre><code class="language-shell"># xxx 当前用户无法执行 sudo 命令
$ xxx is not in the sudoers file.  This incident will be reported. 
</code></pre>
<p>那么就需要 <code>su -</code> 进入超级用户后给配置文件 <code>/etc/sudoers</code> 添加添加 xxx 权限。这里注意编辑配置文件可能操作会因权限问题被阻止，可以使用 <code>chmod u+w /etc/sudoers</code> 加写权利。在 <code>nvim /etc/sudoers</code> 完成添加 <code>xxx ALL=(ALL)ALL</code> 后撤销文件的写权利 <code>chmod u-w /etc/sudoers</code>。</p>
<ul>
<li>su 与 su -</li>
</ul>
<p>这里有个问题，上文中使用 <code>su -i</code> 是什么意思，和直接 <code>su</code> 有什么区别？</p>
<p>首先能确定的是 <code>su</code> 和 <code>su -</code> 都会切换到 root 用户。但是就环境来说，<code>su</code> 切换到 root 的同时，当前目录保持普通用户的不变。而 <code>su -</code> 可以看成用户和环境一起切为 root 身份。</p>
<pre><code class="language-shell">newghostzs@VM-4-10-ubuntu:~$ pwd
/home/newghostzs
newghostzs@VM-4-10-ubuntu:~$ su
Password:....
root@VM-4-10-ubuntu:/home/newghostzs# pwd
/home/newghostzs
# ----
newghostzs@VM-4-10-ubuntu:~$ su -
Password: 
root@VM-4-10-ubuntu:~# pwd
/root
</code></pre>
<ul>
<li>sudo -s 与 sudo -i</li>
</ul>
<p>和 <code>sudo</code> 允许以自己的用戶账户以 root 权限运行命令又不同。<code>sudo -s</code> 以 root 权限运行一个 shell 。而 <code>sudo -i</code> 不但以 root 权限运行一个 shell，还会获取 root 用户的环境。更直观来说前者在用户环境中保留 <code>~/.bashrc</code> 后者在根环境忽略 <code>~/.bashrc</code>。</p>
<h3 id="scp">scp</h3>
<p>scp 即 secure copy，是一个用于在 Linux(MAC) 环境下进行远程加密传输文件（目录）的命令。类似的有仅在本机进行拷贝的 cp。</p>
<pre><code class="language-shell"># 大写 P 为端口参数，2368 表示更改后的 SSH 端口，如果未更改 SSH 端口则不必添加。
# -r 参数表示递归复制（即复制该目录下面的文件和目录）；
scp -P 2368 -r /Users/zszs/.../images root@x.xx.xx.xxx:/var/www/.../content
</code></pre>
<p>若传输目录未使用 -r 修饰则会出现 'Error using SCP: &quot;not a regular file&quot;' 的报错。</p>
<h3 id="find">find</h3>
<ul>
<li>语法</li>
</ul>
<pre><code class="language-shell">find [where to start searching from] [expression determines what to find] [-options] [what to find]
</code></pre>
<ul>
<li>完全语法操作 =&gt; <a href="https://explainshell.com/explain?cmd=find+.%2F+-iname+%22--2021-08-06*%22+-ok+rm+%7B%7D+%5C%3B">解释</a></li>
</ul>
<pre><code class="language-shell">root@VM-8-3-ubuntu:/var/www/zsghost/.../w600# find ./ -iname &quot;--2019-08-06*&quot; -ok rm {} \;
&lt; rm ... ./2019/08/--2019-08-06---4.50.33-1.png &gt; ? yes
</code></pre>
<h3 id="rmrf">rm -rf</h3>
<ul>
<li>处理包含空格和特殊字符的文件名</li>
</ul>
<pre><code class="language-shell"># 异常复现
root@VM-8-3-ubuntu:/...# rm -rf --2019-08-06---4.50.33-1.png
rm: unrecognized option '--2019-08-06---4.50.33-1.png'
Try 'rm ./--2019-08-06---4.50.33-1.png' to remove the file '--2019-08-06---4.50.33-1.png'.
Try 'rm --help' for more information.
</code></pre>
<p>错误原因 =&gt; shell 将破折号 <code>-</code> 之后的内容解释为参数，但是明显没有这样的参数存在，所以出现报错。</p>
<p>解决方式 =&gt; 在以 <code>-</code> 开头的文件或目录前追加 <code>./</code>；在操作命令与带操作文件之间加上 <code>--</code>。</p>
<pre><code class="language-shell"># 测试特殊字符文件操作
$ touch -- -abc.txt
$ vim -abc.txt # 报错 =&gt; Unknown option argument: &quot;-abc.txt&quot;
$ vim -- -abc.txt # 成功
</code></pre>
<h3 id="curl-wget">cURL &amp; Wget</h3>
<blockquote>
<p>cURL 是一个开源项目，主要的产品是 curl（命令行工具）和 libcurl（C 语言的 API 库），两者功能均是：基于网络协议，对指定 URL 进行数据传输。</p>
</blockquote>
<blockquote>
<p>GNU Wget，通常称为 Wget，是一个免费的命令行实用程序，用于使用 HTTP、HTTPS、FTP 传输文件。</p>
</blockquote>
<ul>
<li>安装 curl 和 wget</li>
</ul>
<p>APT Advanced Package Tool 充当 Debian 的默认包管理器，可扩展为基于 Debian 的 Linux 发行版。典型的 Ubuntu 中 APT 尤其适用于 DEB 包格式。</p>
<p>DNF Dandified Yum 是 Fedora 和基于 Fedora 发行版的默认包管理器。DNF 使用 RPM 包格式。</p>
<p>Yum Yellow dog Updater, Modified 本身是对 Yellow Dog Linux 开发的 Yellowdog UPdater 或 YUP 的重写。</p>
<pre><code class="language-shell"># Debian/Ubuntu
$ sudo apt-get install curl # 安装 curl
$ sudo apt-get install wget # 安装 wget
</code></pre>
<pre><code class="language-shell"># REHL/CentOS/Fedora
sudo yum install curl # 安装 curl
sudo dnf install curl
sudo yum install wget # 安装 wget
sudo dnf install wget
</code></pre>
<p>从用途方面，wget 倾向于网络文件下载，而 curl 倾向于网络接口调试。</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="nodejs">NodeJS</h2>
<ul>
<li><a href="https://nodejs.org/download/release/">官方编译的安装包</a></li>
</ul>
<pre><code class="language-shell"># 官网发行版下载安装包
$ wget https://nodejs.org/download/release/v14.17.1/node-v14.17.1-linux-x64.tar.gz
# 将安装包解压缩至 /usr/local 目录并安装
$ tar --strip-components 1 -xzvf node-v* -C /usr/local
# 查看版本
$ node -v &amp;&amp; npm -v
v14.17.1
6.14.13
</code></pre>
<ul>
<li>使用 EPEL —— Linux 的额外软件包</li>
</ul>
<pre><code class="language-shell"># 由于 CentOS yum 预设并没有提供 Node.js，须通过 EPEL 安装
$ yum install epel-release
# 查看仓库源
$ yum repolist
Loaded plugins: fastestmirror, langpacks
Repository epel is listed more than once in the configuration
Loading mirror speeds from cached hostfile
repo id                                          repo name                                                status
docker-ce-stable/7/x86_64                        Docker CE Stable - x86_64                                     122
epel/7/x86_64                                    EPEL for redhat/centos 7 - x86_64                          13,674
extras/7/x86_64                                  Qcloud centos extras - x86_64                                 500
os/7/x86_64                                      Qcloud centos os - x86_64                                10,070+2
updates/7/x86_64                                 Qcloud centos updates - x86_64                              2,751
repolist: 27,117
# 查看 yum 能提供的软件包的全部版本,此方式安装的 node 版本较旧
$ yum list nodejs  --showduplicates| sort -r
Loaded plugins: fastestmirror, langpacks
Repository epel is listed more than once in the configuration
Loading mirror speeds from cached hostfile
Available Packages
nodejs.x86_64                        1:6.17.1-1.el7
# EPEL 安装完成直接使用 yum 來安装 Node.js：
$ yum install nodejs
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="nginx">Nginx</h2>
<p>Nginx 相关配置文件位于 /etc/nginx/ 目录。sites-available 不论当前是否已启用，存储所有虚拟主机配置。sites-enabled 文件夹包含着来自 sites-available 文件夹中的软链接，可以选择性地移除软链接来禁用虚拟主机。conf.d 也可以完成配置工作，但是当需要禁用某些设置时，必须将某些内容移出文件夹，或删除或更改。sites-* 文件夹可以让配置更有条理，更方便的抽离脚本或管理内容。</p>
<pre><code class="language-shell"># 将要部署的代码文件一般推荐存放位
/home/&lt;user_name&gt;/&lt;site_name&gt;
/var/www/&lt;site_name&gt;
/var/www/html/&lt;site_name&gt;
/opt/&lt;site_name&gt;
/usr/share/nginx/html
# Nginx 日志文件(access.log 和 error.log)
/var/log/nginx/
# 复用配置代码文件
/etc/nginx/snippets
# 相关的配置文件
/etc/nginx/
# 主配置文件
/etc/nginx/nginx.conf
</code></pre>
<pre><code class="language-shell"># 安装 Nginx
sudo yum install nginx
# 设置开机启动|关闭
sudo systemctl enable|disable nginx # 运行此命令以后,会输出软连接关联信息
# 启动关闭重启 —— systemctl - Control the systemd system and service manager
sudo systemctl start|stop|restart nginx
# 查看运行状态
sudo systemctl status nginx
# 查看80口是否被占用
sudo lsof -i :80 # 查看80的nginx -&gt; sudo lsof -i :80 | grep nginx
# 杀死端口
lsof -P | grep ':80' | awk '{print $2}' | xargs kill
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="tomcat">Tomcat</h2>
<ul>
<li>安装配置</li>
</ul>
<p>详见本人 tomcat 博文。</p>
<ul>
<li>tomcat 启动成功外网无法访问</li>
</ul>
<p>部署的服务器没有将处于过滤状态的 8080 端口放通，所以 tomcat 无法从外部进行访问。需从控制台进入云服务器对防火墙规则进行配置。局域网没有固定的公网 IP，所以不能将局域网的 IP (192.168.124.2) 设置为安全组。被 NAT 转换的公网 IP 可以通过<a href="http://ip138.com">国内</a>或<a href="http://ifconfig.me">国外</a>的网站进行查询检测。</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="mongodb"><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/">Mongodb</a></h2>
<ul>
<li>配置包管理系统</li>
</ul>
<pre><code class="language-shell">vim /etc/yum.repos.d/mongodb-org-5.0.repo
</code></pre>
<pre><code class="language-shell"># mongodb-org-5.0.repo
[mongodb-org-5.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/5.0/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-5.0.asc
</code></pre>
<ul>
<li>安装 MongoDB 包</li>
</ul>
<pre><code class="language-shell">sudo yum install -y mongodb-org
</code></pre>
<p>默认情况下，包管理器在安装期间创建默认目录。所有者和组名是 mongod。MongoDB 使用 mongod 用户帐户运行并使用以下默认目录。</p>
<pre><code class="language-shell">/var/lib/mongo （数据目录）
/var/log/mongodb （日志目录）
</code></pre>
<ul>
<li>启动 mongodb</li>
</ul>
<pre><code class="language-shell"># 启动、停止与重启
sudo systemctl start|stop|restart mongod
# 如果在启动时收到类似于以下内容的错误
# Failed to start mongod.service: Unit mongod.service not found.
# 需要先运行以下命令
sudo systemctl daemon-reload
# 验证 MongoDB 是否已成功启动
sudo systemctl status mongod
# 确保 MongoDB 在系统重新启动后启动
sudo systemctl enable mongod
# 开始连接 - 27017
mongosh
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E9%98%B2%E7%81%AB%E5%A2%99">防火墙</h2>
<p>CentOS7 默认使用 firewall 作为防火墙，而 CentOS6 及以下使用 iptables。</p>
<ul>
<li>firewall</li>
</ul>
<pre><code class="language-shell"># 查看状态
systemctl status firewalld # 或 firewall-cmd --state
# 启动|禁用防火墙
systemctl start|stop firewalld
# 重启防火墙
firewall-cmd --reload
# 设置开机启动|停止并禁用开机启动
systemctl enable|disable firewalld
...
</code></pre>
<ul>
<li>iptables</li>
</ul>
<pre><code class="language-shell"># 开启防火墙(重启后永久生效)
chkconfig iptables on
# 关闭防火墙(重启后永久生效)
chkconfig iptables off
# 开启防火墙(即时生效，重启后失效)
service iptables start
# 关闭防火墙(即时生效，重启后失效)
service iptables stop
# 重启防火墙
service iptables restartd
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="java-%E7%8E%AF%E5%A2%83">Java 环境</h2>
<h3 id="%E5%AE%89%E8%A3%85-openjdk">安装 OpenJDK</h3>
<p>默认 CentOS7 存储库包含最新的两个主要 Java LTS 版本，Java8 和 Java11，可以使用 yum 软件包管理器安装。</p>
<pre><code class="language-shell"># =&gt; 以 root 或具有 sudo 权限的用户运行
# 安装 OpenJDK11
$ sudo yum install java-11-openjdk-devel
# CentOS7 支持 openjdk-headless 即适合于服务器应用程序的最小 Java 运行时
# 安装 OpenJDK headless =&gt; 现已包含在 java-11-openjdk-devel 依赖安装中
$ sudo yum install java-11-openjdk-headless
# 安装OpenJDK 8
$ sudo yum install java-1.8.0-openjdk-devel
# 检查 Java 版本验证安装
$ java -version
openjdk version &quot;1.8.0_332&quot;
OpenJDK Runtime Environment (build 1.8.0_332-b09)
OpenJDK 64-Bit Server VM (build 25.332-b09, mixed mode)
</code></pre>
<h3 id="%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%89%88%E6%9C%AC">设置默认版本</h3>
<p>CentOS 系统上安装了多个 Java 版本，可以通过 <code>alternatives</code> 命令来设置终端默认版本。在改变 Java 版本的同时记得要改变 Java 编译的版本。</p>
<pre><code class="language-shell"># 查看 Java 默认版本
$ java -version
# 更改默认版本 =&gt; alternatives =&gt; 输入用作默认版本的数字
$ sudo alternatives --config java
There are 2 programs which provide 'java'.
  Selection    Command
-----------------------------------------------
*+ 1           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.332.b09-1.el7_9.x86_64/jre/bin/java)
   2           java-11-openjdk.x86_64 (/usr/lib/jvm/java-11-openjdk-11.0.15.0.9-2.el7_9.x86_64/bin/java)
Enter to keep the current selection[+], or type selection number: 1
# 更改默认的 javac 版本，运行 alternatives 命令更改Java的编译器javac版本
sudo alternatives --config javac
</code></pre>
<h3 id="javahome-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">JAVA_HOME 环境变量</h3>
<p>Java 应用程序根据 <code>JAVA_HOME</code> 环境变量来确定 Java 的安装位置，并选择指定的版本来运行该程序。</p>
<ul>
<li>针对当前用户配置 JAVA_HOME 环境变量</li>
</ul>
<pre><code class="language-shell">echo 'export JAVA_HOME=&quot;/usr/lib/jvm/java-1.8.0-openjdk&quot;' &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<ul>
<li>为所有用户配置 JAVA_HOME 环境变量/系统范围</li>
</ul>
<pre><code class="language-shell">echo 'export JAVA_HOME=&quot;/usr/lib/jvm/java-1.8.0-openjdk&quot;' | sudo tee /etc/profile.d/java.sh
source /etc/profile.d/java.sh
# 验证是否正确设置 JAVA_HOME 环境变量
echo $JAVA_HOME
/usr/lib/jvm/java-1.8.0-openjdk
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="initd-%E4%B8%8E-rcd-%E6%96%87%E4%BB%B6%E5%A4%B9%E8%AF%B4%E6%98%8E">init.d 与 rc.d 文件夹说明</h2>
<p>/etc 目录下的 init 目录里存放配置文件，而 init.d 目录中存在各样的可执行文件，换句话说 init.d 目录是 rc.d/init.d 目录的软连接。当 Linux 启动时会寻找 /etc/init.d 目录中的服务脚本，并根据脚本的运行级别确定不同的启动级别。</p>
<p>/etc/rc[0-6].d 是 /etc/rc.d/rc[0-6].d 的软连接，这时为了保持和 Unix 的兼容，即保持同一种服务在 CentOS 和 Ubuntu 使用的统一。值得注意的，CentOS 和 Ubuntu 中除了服务脚本放置的目录是相同的，服务脚本的编写及服务配置都是不同的。CentOS 和 Ubuntu 分别可使用 chkconfig 和 sysv-rc-conf 进行配置。</p>
<p>在 /etc/rc.d/rc[0-6].d 的文件，以 Kxx 开头的代表 kill 杀死进程，都以 stop 为参数来调用；凡是以 Sxx 开头的代表开始进程，都以 start 为参数来调用。调用的顺序按 xx 从小到大来执行。</p>
<p>许多程序需要开机启动，在 Windows 叫做服务 service，在 Linux 就叫做守护进程 daemon。init 进程的任务就是去运行这些开机启动的程序。Linux 允许为不同的场合，分配不同的开机启动程序，这就叫做运行级别 runlevel。也就是说，启动时根据运行级别，确定要运行哪些程序。</p>
<table>
<thead>
<tr>
<th>runlevel</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>运行级别0</td>
<td>系统停机状态，系统默认运行级别不能设为0，否则不能正常启动</td>
</tr>
<tr>
<td>运行级别1</td>
<td>单用户工作状态，root权限，用于系统维护，禁止远程登陆</td>
</tr>
<tr>
<td>运行级别2</td>
<td>多用户状态(没有NFS)</td>
</tr>
<tr>
<td>运行级别3</td>
<td>完全的多用户状态(有NFS)，登陆后进入控制台命令行模式</td>
</tr>
<tr>
<td>运行级别4</td>
<td>系统未使用，保留</td>
</tr>
<tr>
<td>运行级别5</td>
<td>X11控制台，登陆后进入图形GUI模式</td>
</tr>
<tr>
<td>运行级别6</td>
<td>系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动</td>
</tr>
</tbody>
</table>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">结束</h2>
<p>本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>协议。转载请注明出处！</p>
<!--kg-card-end: markdown-->
    </section>


    <section class="article-comments gh-canvas">
        
        <div id="disqus_thread"></div>
        <script>
            var disqus_config = function () {
                this.page.url = "yourdomain.com/centos7/";
                this.page.identifier = "ghost-6155e4888a69a4110a92e5ff"
            };
            (function() {
            var d = document, s = d.createElement('script');
            s.src = 'https://zsxzy.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
        </script>
    </section>
</article>
</main>

    <section class="footer-cta outer">
        <div class="inner">
            <h2 class="footer-cta-title">Sign up for more like this.</h2>
            <a class="footer-cta-button" href="index.html#/portal" data-portal>
                <div class="footer-cta-input">Enter your email</div>
                <span>Subscribe</span>
            </a>
        </div>
    </section>



            <aside class="read-more-wrap outer">
                <div class="read-more inner">
                        
<article class="post-card post">

    <a class="post-card-image-link" href="../g-toc-css/index.html">

        <img class="post-card-image"
            srcset="../content/images/size/w600/2022/04/SLAMDUNK.png 600w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../content/images/size/w600/2022/04/SLAMDUNK.png"
            alt="SLAM DUNK"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../g-toc-css/index.html">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    G&amp;TOC&amp;CSS
                </h2>
            </header>
                <div class="post-card-excerpt">TOC 的需求实现以及相关的思考总结。</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2022-05-01">May 1, 2022</time>
                <span class="post-card-meta-length">6 min read</span>
        </footer>

    </div>

</article>
                        
<article class="post-card post">

    <a class="post-card-image-link" href="../mysqlnote/index.html">

        <img class="post-card-image"
            srcset="../content/images/size/w600/2022/04/cloud.jpg 600w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../content/images/size/w600/2022/04/cloud.jpg"
            alt="mysql"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../mysqlnote/index.html">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    MySQL
                </h2>
            </header>
                <div class="post-card-excerpt">MYSQL 基础篇</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2021-12-22">Dec 22, 2021</time>
                <span class="post-card-meta-length">42 min read</span>
        </footer>

    </div>

</article>
                        
<article class="post-card post">

    <a class="post-card-image-link" href="../zu-jian-tong-xun/index.html">

        <img class="post-card-image"
            srcset="../content/images/size/w600/2022/04/treecommunicate.jpg 600w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../content/images/size/w600/2022/04/treecommunicate.jpg"
            alt="Component communication"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../zu-jian-tong-xun/index.html">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    组件通讯
                </h2>
            </header>
                <div class="post-card-excerpt">Vuex|Redux|Pinia</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2021-10-01">Oct 1, 2021</time>
                <span class="post-card-meta-length">25 min read</span>
        </footer>

    </div>

</article>
                </div>
            </aside>



    </div>

    <footer class="site-footer outer">
        <div class="inner">
            <section class="copyright"><a href="../index.html">zairesinatra</a> &copy; 2023</section>
            <nav class="site-footer-nav">
                <ul><a href="https://beian.miit.gov.cn/" target="_blank">湘ICP备2021003061号-1</a></ul>
                
            </nav>
            <div><a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a></div>
        </div>
    </footer>

</div>


<script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous">
</script>
<script src="../assets/built/casper.js%3Fv=69401cbc3d"></script>
<script>
$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});
</script>

<!-- 2022 prismjs update -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/autoloader/prism-autoloader.min.js" onload="Prism.plugins.autoloader.languages_path='https://cdn.bootcss.com/prism/1.19.0/components/'"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-javascript.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-powershell.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-sql.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-jsx.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-java.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-less.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-sass.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-scss.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/toolbar/prism-toolbar.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script defer src="https://cdn.bootcss.com/prism/1.19.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>



<!-- music -->
<script src="http://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
<script src="http://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script>
<script>
	var meting_api='http://api.mizore.cn/meting/api.php?server=:server&type=:type&id=:id'
		$('.carousel').carousel({
			interval: 3000
		})
</script>
<!-- music -->
<!-- <div class="aplayer" data-id="7260570761" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-volume="0.6" lrc-type="0"></div> -->
<!-- <a href="https://beian.miit.gov.cn/" target="_blank">湘ICP备2021003061号-1</a> -->

<!-- searchinghost-easy -->
<script src="https://cdn.jsdelivr.net/gh/gmfmi/searchinghost-easy@latest/dist/searchinghost-easy-basic.js"></script>
<script>
    new SearchinGhostEasy({
        contentApiKey: 'e93d8b3520ae46be52c9a4b140'
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.min.js"></script>
<script>
  tocbot.init({
    tocSelector: '.toc',
    contentSelector: '.gh-content',
    hasInnerContainers: true
  });
  var tc = document.querySelector(".toc-container");
var tch = tc.clientHeight;
var ah = document.querySelector(".article-header");
var ahh = ah.clientHeight;
window.addEventListener("scroll", function () {
if(document.body.clientWidth > 1170){
  var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
  var ihh = window.innerHeight;
  if(scrollY >= ihh + tch + ahh){
    var ctc = document.querySelector(".toc-container");
    ctc.style.position="sticky";
    ctc.style.position="-webkit-sticky";
    ctc.style.top = "120px";
    ctc.style.marginLeft = "800px";
    ctc.style.minWidth= "260px";
  }
  if(scrollY < tch + ahh -10){
    var ctc = document.querySelector(".toc-container");
    ctc.style.position="";
    ctc.style.top = "";
    ctc.style.marginLeft = "";
    console.log("zszszs")
  }
}})
</script>
</body>
</html>
