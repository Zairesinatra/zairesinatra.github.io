<!DOCTYPE html>
<html lang="en">
<head>

    <title>CentOS7</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css%3Fv=ab47967965.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css%3Fv=ab47967965.css" />
    <meta name="description" content="ssh root@???" />
    <link rel="icon" href="../content/images/size/w256h256/2021/07/ghost-orb.png" type="image/png" />
    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp/index.html" />
    
    <meta property="og:site_name" content="zairesinatra" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="CentOS7" />
    <meta property="og:description" content="ssh root@???" />
    <meta property="og:url" content="yourdomain.com/centos7/" />
    <meta property="og:image" content="yourdomain.com/content/images/2021/10/penguinCentOS.jpg" />
    <meta property="article:published_time" content="2019-07-16T12:23:00.000Z" />
    <meta property="article:modified_time" content="2022-06-16T13:04:41.000Z" />
    <meta property="article:tag" content="Technology growth" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="CentOS7" />
    <meta name="twitter:description" content="ssh root@???" />
    <meta name="twitter:url" content="yourdomain.com/centos7/" />
    <meta name="twitter:image" content="yourdomain.com/content/images/2021/10/penguinCentOS.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Ziyi Xie" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Technology growth" />
    <meta name="twitter:site" content="@xieziyi0422" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="800" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "zairesinatra",
        "url": "yourdomain.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "yourdomain.com/content/images/2021/07/zs-1.JPG",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Ziyi Xie",
        "image": {
            "@type": "ImageObject",
            "url": "yourdomain.com/content/images/2021/07/zs-2.JPG",
            "width": 1079,
            "height": 1079
        },
        "url": "yourdomain.com/author/ziyi/",
        "sameAs": []
    },
    "headline": "CentOS7",
    "url": "yourdomain.com/centos7/",
    "datePublished": "2019-07-16T12:23:00.000Z",
    "dateModified": "2022-06-16T13:04:41.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "yourdomain.com/content/images/2021/10/penguinCentOS.jpg",
        "width": 1280,
        "height": 800
    },
    "keywords": "Technology growth",
    "description": "ssh root@???",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "yourdomain.com/"
    }
}
    </script>

    <meta name="generator" content="Ghost 5.2" />
    <link rel="alternate" type="application/rss+xml" title="zairesinatra" href="../rss/index.html" />
    <script defer src="https://unpkg.com/@tryghost/portal@~2.2.0/umd/portal.min.js" data-ghost="yourdomain.com/" data-key="f5d74add11f1d16d3e59c12945" data-api="yourdomain.com/ghost/api/content/" crossorigin="anonymous"></script><style id="gh-members-styles">.gh-post-upgrade-cta-content,
.gh-post-upgrade-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    text-align: center;
    width: 100%;
    color: #ffffff;
    font-size: 16px;
}

.gh-post-upgrade-cta-content {
    border-radius: 8px;
    padding: 40px 4vw;
}

.gh-post-upgrade-cta h2 {
    color: #ffffff;
    font-size: 28px;
    letter-spacing: -0.2px;
    margin: 0;
    padding: 0;
}

.gh-post-upgrade-cta p {
    margin: 20px 0 0;
    padding: 0;
}

.gh-post-upgrade-cta small {
    font-size: 16px;
    letter-spacing: -0.2px;
}

.gh-post-upgrade-cta a {
    color: #ffffff;
    cursor: pointer;
    font-weight: 500;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a:hover {
    color: #ffffff;
    opacity: 0.8;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a.gh-btn {
    display: block;
    background: #ffffff;
    text-decoration: none;
    margin: 28px 0 0;
    padding: 8px 18px;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 600;
}

.gh-post-upgrade-cta a.gh-btn:hover {
    opacity: 0.92;
}</style>
    <script defer src="../public/cards.min.js%3Fv=ab47967965"></script>
    <link rel="stylesheet" type="text/css" href="../public/cards.min.css%3Fv=ab47967965.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q4HQV7NBSG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-Q4HQV7NBSG');
</script>

<!-- 2022 prismjs update -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism-tomorrow.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet">

<script>
window.addEventListener('DOMContentLoaded', (event) => {      
    document.querySelectorAll('pre[class*=language-]').forEach(function(node) {
        node.classList.add('line-numbers');
	});
    Prism.highlightAll();
});
</script>

<!-- prism -->
<style>
pre[class*="language-"] {
    margin: 0 0 1.5em !important;
}
pre[class*="line-numbers"]>code {
    padding: 0 ;
}
code {
    text-shadow: none !important;
}
.token.operator {
    background: none !important;
}

:not(pre)>code[class*="language-"],
pre[class*="language-"] {
    background: #202124 !important;
}
</style>

<!-- customer theme by zs -->
<style>
/* Generated with http://k88hudson.github.io/syntax-highlighting-theme-generator/www */
/* http://k88hudson.github.io/react-markdocs */
/**
 * @author k88hudson
 *
 * Based on prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */
/*********************************************************
* General
*/
pre[class*="language-"],
code[class*="language-"] {
  color: #d98e73;
  font-size: 13px;
  text-shadow: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  direction: ltr;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  line-height: 1.5;
  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;
  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}
pre[class*="language-"]::selection,
code[class*="language-"]::selection,
pre[class*="language-"]::mozselection,
code[class*="language-"]::mozselection {
  text-shadow: none;
  background: #b3d4fc;
}
@media print {
  pre[class*="language-"],
  code[class*="language-"] {
    text-shadow: none;
  }
}
pre[class*="language-"] {
  padding: 1em;
  margin: .5em 0;
  overflow: auto;
  background: #1e1e1f;
}
:not(pre) > code[class*="language-"] {
  padding: .1em .3em;
  border-radius: .3em;
  color: #db4c69;
  background: #f9f2f4;
}
/*********************************************************
* Tokens
*/
.namespace {
  opacity: .7;
}
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #93a1a1;
}
.token.punctuation {
  color: #f3f3f3;
}
.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: #88deff;
}
.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: #ddb974;
}
.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: #f3f3f3;
  background: #1e1e1f;
}
.token.atrule,
.token.attr-value,
.token.keyword {
  color: #06b4fe;
}
.token.function {
  color: #80caf1;
}
.token.regex,
.token.important,
.token.variable {
  color: #ee9900;
}
.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}
.token.entity {
  cursor: help;
}
/*********************************************************
* Line highlighting
*/
pre[data-line] {
  position: relative;
}
pre[class*="language-"] > code[class*="language-"] {
  position: relative;
  z-index: 1;
}
.line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: #1e1e1f;
  box-shadow: inset 5px 0 0 #1e1e1f;
  z-index: 0;
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}
</style>

<!-- 音乐播放器 -->
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><style>:root {--ghost-accent-color: #15171A;}</style>

</head>
<body class="post-template tag-technology-growth has-cover">
<div class="viewport">

    <header id="gh-head" class="gh-head outer">
        <nav class="gh-head-inner inner">

            <div class="gh-head-brand">
                <a class="gh-head-logo" href="../index.html">
                        <img src="../content/images/2021/07/zs-1.JPG" alt="zairesinatra" />
                </a>
                <a class="gh-burger" role="button">
                    <div class="gh-burger-box">
                        <div class="gh-burger-inner"></div>
                    </div>
                </a>
            </div>
            <div class="gh-head-menu">
                <ul class="nav">
    <li class="nav-home"><a href="../index.html">Home</a></li>
    <li class="nav-welcome"><a href="../welcome/index.html">Welcome</a></li>
    <li class="nav-author"><a href="../selfintro/index.html">Author</a></li>
    <li class="nav-tag"><a href="../tag/index.html">Tag</a></li>
    <li class="nav-links"><a href="http://nav.zairesinatra.com/">Links</a></li>
</ul>

            </div>
            <div class="gh-head-actions">
                <div class="gh-social">
                        <a class="gh-social-link gh-social-twitter" href="https://twitter.com/xieziyi0422" title="Twitter" target="_blank" rel="noopener"><svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg></a>
                </div>
                        <a class="gh-head-button" href="index.html#/portal/signup" data-portal="signup">Subscribe</a>
            </div>
        </nav>
    </header>

    <div class="site-content">
        



<main id="site-main" class="site-main">
<article class="article post tag-technology-growth ">

    <header class="article-header gh-canvas">

        <div class="article-tag post-card-tags">
                <span class="post-card-primary-tag">
                    <a href="../tag/technology-growth/index.html">Technology growth</a>
                </span>
        </div>

        <h1 class="article-title">CentOS7</h1>

            <p class="article-excerpt">ssh root@???</p>

        <div class="article-byline">
        <section class="article-byline-content">

            <ul class="author-list">
                <li class="author-list-item">
                    <a href="../author/ziyi/index.html" class="author-avatar">
                        <img class="author-profile-image" src="../content/images/size/w100/2021/07/zs-2.JPG" alt="Ziyi Xie" />
                    </a>
                </li>
            </ul>

            <div class="article-byline-meta">
                <h4 class="author-name"><a href="../author/ziyi/index.html">Ziyi Xie</a></h4>
                <div class="byline-meta-content">
                    <time class="byline-meta-date" datetime="2019-07-16">Jul 16, 2019</time>
                        <span class="byline-reading-time"><span class="bull">&bull;</span> 11 min read</span>
                </div>
            </div>

        </section>
        </div>

            <figure class="article-image">
                <img
                    srcset="../content/images/size/w2000/2021/10/penguinCentOS.jpg 2000w"
                    sizes="(min-width: 1400px) 1400px, 92vw"
                    src="../content/images/size/w2000/2021/10/penguinCentOS.jpg"
                    alt="centOS7"
                />
                    <figcaption>centOS7</figcaption>
            </figure>

    </header>

    <section class="gh-content gh-canvas">
        <aside class="toc-container">
            <div class="toc"></div>
        </aside>
        <p>CentOS Community Enterprise Operating System 社区企业操作系统，和收费版本 RHEL Red Hat Enterprise Linux 同属 Red Hat 公司。</p><p>区别于 Debian 衍生的 Ubuntu，在包管理上并非 apt-get 和 dpkg，而是 RPM 与 YUM 的集成。</p><!--kg-card-begin: markdown--><h2 id="mac-%E8%BF%9E%E6%8E%A5">Mac 连接</h2>
<p>CentOS 远程服务器在重装系统后会出现 Mac 无法正常连接的问题，常伴随终端提示 &quot;REMOTE HOST IDENTIFICATION HAS CHANGED&quot;。此时需要删除本地保存的相关文件并在服务器完成指定配置后才能重新连接成功。</p>
<pre><code class="language-shell"># 报错信息
$ ssh root@ip
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the RSA key sent by the remote host is ...
Please contact your system administrator.
Add correct host key in /home/hostname /.ssh/known_hosts to get rid of this message.
Offending RSA key in /var/lib/sss/pubconf/known_hosts:4
RSA host key for pong has changed and you have requested strict checking.
Host key verification failed.
</code></pre>
<pre><code class="language-shell"># 本地操作 =&gt; 删除对应远程ip的信息
~/.ssh/known_hosts
</code></pre>
<pre><code class="language-shell"># centOS
vim /etc/ssh/sshd_config
# PasswordAuthentication yes
# PermitRootLogin yes
</code></pre>
<pre><code class="language-shell"># 重新启动远程服务器 sshd 服务
# Ubuntu 或 Debian Linux
sudo systemctl restart ssh.service
# RHEL/CentOS Linux
sudo systemctl restart sshd.service
</code></pre>
<p>出现 &quot;Permission denied (publickey,gssapi-keyex,gssapi-with-mic)&quot; 的拒绝，也应同样进行上述操作更改，最后重启服务即可。</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4%E8%BF%AD%E4%BB%A3">系统服务管理命令迭代</h2>
<ul>
<li><code>service</code> 仅适用于对 CentOS v4.x/5.x/6.x 的系统服务进行管理。</li>
</ul>
<pre><code class="language-shell">$ service
Usage: service &lt; option &gt; | --status-all | [ service_name [ command | --full-restart ] ]
$ service -help
The service command supports only basic LSB actions (start, stop, restart, try-restart, reload, force-reload, status). For other actions, please try to use systemctl.
</code></pre>
<ul>
<li><code>chkconfig</code> 适用于在 CentOS v4.x/5.x/6.x 中更新和查询系统服务的运行等级信息，经典场景莫过于自启动。当不加任何参数单独运行此命令时，会显示服务的使用信息。与 /etc/rc[0~6].d 文件夹之间紧密相联。</li>
</ul>
<pre><code class="language-shell">$ chkconfig
Note: This output shows SysV services only and does not include native
      systemd services. SysV configuration data might be overridden by native
      systemd configuration.

      If you want to list systemd services use 'systemctl list-unit-files'.
      To see services enabled on particular target use
      'systemctl list-dependencies [target]'.

netconsole     	0:off	1:off	2:off	3:off	4:off	5:off	6:off
network        	0:off	1:off	2:on	3:on	4:on	5:on	6:off
$ chkconfig --help
chkconfig version 1.7.6 - Copyright (C) 1997-2000 Red Hat, Inc.
This may be freely redistributed under the terms of the GNU Public License.

usage:   chkconfig [--list] [--type &lt;type&gt;] [name]
         chkconfig --add &lt;name&gt;
         chkconfig --del &lt;name&gt;
         chkconfig --override &lt;name&gt;
         chkconfig [--level &lt;levels&gt;] [--type &lt;type&gt;] &lt;name&gt; &lt;on|off|reset|resetpriorities&gt;
</code></pre>
<ul>
<li><code>systemctl</code> 仅在 CentOS v7.x/8.x 或更高版本上进行管理和启动/停止/重启服务，是 service 和 chkconfig 命令的集合与代替。</li>
</ul>
<pre><code class="language-shell">$ systemctl --help
systemctl [OPTIONS...] {COMMAND} ...
Query or send control commands to the systemd manager.
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">快速上手</h2>
<p>可在<a href="https://github.com/Zairesinatra/Advanced-Frontend/blob/main/lib/Linux/01.md">仓库</a>查看具体指令。</p>
<pre><code class="language-shell"># 切换成 root 用户
[lighthouse@VM-4-17-centos ~]$ sudo su -
# 退出 root 用户并切换回普通用户
[root@VM-4-17-centos ~]# exit
# ~ 表示在 home 目录,切换为 / 根目录
[root@VM-4-17-centos ~]# cd /
# 切换为 / 根目录
[root@VM-4-17-centos /]# ls -l
total 72
lrwxrwxrwx.   1 root root     7 Mar  7  2019 bin -&gt; usr/bin # 系统预设执行文件目录(ls)
drwxr-xr-x.  98 root root 12288 Oct  1 00:14 etc # 系统配置文件(更改可导致系统不能重启)
...
lrwxrwxrwx.   1 root root     8 Mar  7  2019 sbin -&gt; usr/sbin # 系统预设执行文件目录
...
drwxr-xr-x.  14 root root  4096 Jan  8  2021 usr # 系统预设执行文件目录
drwxr-xr-x.  20 root root  4096 Jan  8  2021 var # /var/log程序运行日志的存放目录
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="nodejs">NodeJS</h2>
<ul>
<li><a href="https://nodejs.org/download/release/">官方编译的安装包</a></li>
</ul>
<pre><code class="language-shell"># 官网发行版下载安装包
$ wget https://nodejs.org/download/release/v14.17.1/node-v14.17.1-linux-x64.tar.gz
# 将安装包解压缩至 /usr/local 目录并安装
$ tar --strip-components 1 -xzvf node-v* -C /usr/local
# 查看版本
$ node -v &amp;&amp; npm -v
v14.17.1
6.14.13
</code></pre>
<ul>
<li>使用 EPEL —— Linux 的额外软件包</li>
</ul>
<pre><code class="language-shell"># 由于 CentOS yum 预设并没有提供 Node.js，须通过 EPEL 安装
$ yum install epel-release
# 查看仓库源
$ yum repolist
Loaded plugins: fastestmirror, langpacks
Repository epel is listed more than once in the configuration
Loading mirror speeds from cached hostfile
repo id                                          repo name                                                status
docker-ce-stable/7/x86_64                        Docker CE Stable - x86_64                                     122
epel/7/x86_64                                    EPEL for redhat/centos 7 - x86_64                          13,674
extras/7/x86_64                                  Qcloud centos extras - x86_64                                 500
os/7/x86_64                                      Qcloud centos os - x86_64                                10,070+2
updates/7/x86_64                                 Qcloud centos updates - x86_64                              2,751
repolist: 27,117
# 查看 yum 能提供的软件包的全部版本,此方式安装的 node 版本较旧
$ yum list nodejs  --showduplicates| sort -r
Loaded plugins: fastestmirror, langpacks
Repository epel is listed more than once in the configuration
Loading mirror speeds from cached hostfile
Available Packages
nodejs.x86_64                        1:6.17.1-1.el7
# EPEL 安装完成直接使用 yum 來安装 Node.js：
$ yum install nodejs
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="nginx">Nginx</h2>
<p>Nginx 相关配置文件位于 /etc/nginx/ 目录。sites-available 不论当前是否已启用，存储所有虚拟主机配置。sites-enabled 文件夹包含着来自 sites-available 文件夹中的软链接，可以选择性地移除软链接来禁用虚拟主机。conf.d 也可以完成配置工作，但是当需要禁用某些设置时，必须将某些内容移出文件夹，或删除或更改。sites-* 文件夹可以让配置更有条理，更方便的抽离脚本或管理内容。</p>
<pre><code class="language-shell"># 将要部署的代码文件一般推荐存放位
/home/&lt;user_name&gt;/&lt;site_name&gt;
/var/www/&lt;site_name&gt;
/var/www/html/&lt;site_name&gt;
/opt/&lt;site_name&gt;
/usr/share/nginx/html
# Nginx 日志文件(access.log 和 error.log)
/var/log/nginx/
# 复用配置代码文件
/etc/nginx/snippets
# 相关的配置文件
/etc/nginx/
# 主配置文件
/etc/nginx/nginx.conf
</code></pre>
<pre><code class="language-shell"># 安装 Nginx
sudo yum install nginx
# 设置开机启动|关闭
sudo systemctl enable|disable nginx # 运行此命令以后,会输出软连接关联信息
# 启动关闭重启 —— systemctl - Control the systemd system and service manager
sudo systemctl start|stop|restart nginx
# 查看运行状态
sudo systemctl status nginx
# 查看80口是否被占用
sudo lsof -i :80 # 查看80的nginx -&gt; sudo lsof -i :80 | grep nginx
# 杀死端口
lsof -P | grep ':80' | awk '{print $2}' | xargs kill
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="tomcat">Tomcat</h2>
<ul>
<li>安装配置</li>
</ul>
<p>详见本人 tomcat 博文。</p>
<ul>
<li>tomcat 启动成功外网无法访问</li>
</ul>
<p>部署的服务器没有将处于过滤状态的 8080 端口放通，所以 tomcat 无法从外部进行访问。需从控制台进入云服务器对防火墙规则进行配置。局域网没有固定的公网 IP，所以不能将局域网的 IP (192.168.124.2) 设置为安全组。被 NAT 转换的公网 IP 可以通过<a href="http://ip138.com">国内</a>或<a href="http://ifconfig.me">国外</a>的网站进行查询检测。</p>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="mongodb"><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/">Mongodb</a></h2>
<ul>
<li>配置包管理系统</li>
</ul>
<pre><code class="language-shell">vim /etc/yum.repos.d/mongodb-org-5.0.repo
</code></pre>
<pre><code class="language-shell"># mongodb-org-5.0.repo
[mongodb-org-5.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/5.0/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-5.0.asc
</code></pre>
<ul>
<li>安装 MongoDB 包</li>
</ul>
<pre><code class="language-shell">sudo yum install -y mongodb-org
</code></pre>
<p>默认情况下，包管理器在安装期间创建默认目录。所有者和组名是 mongod。MongoDB 使用 mongod 用户帐户运行并使用以下默认目录。</p>
<pre><code class="language-shell">/var/lib/mongo （数据目录）
/var/log/mongodb （日志目录）
</code></pre>
<ul>
<li>启动 mongodb</li>
</ul>
<pre><code class="language-shell"># 启动、停止与重启
sudo systemctl start|stop|restart mongod
# 如果在启动时收到类似于以下内容的错误
# Failed to start mongod.service: Unit mongod.service not found.
# 需要先运行以下命令
sudo systemctl daemon-reload
# 验证 MongoDB 是否已成功启动
sudo systemctl status mongod
# 确保 MongoDB 在系统重新启动后启动
sudo systemctl enable mongod
# 开始连接 - 27017
mongosh
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E9%98%B2%E7%81%AB%E5%A2%99">防火墙</h2>
<p>CentOS7 默认使用 firewall 作为防火墙，而 CentOS6 及以下使用 iptables。</p>
<ul>
<li>firewall</li>
</ul>
<pre><code class="language-shell"># 查看状态
systemctl status firewalld # 或 firewall-cmd --state
# 启动|禁用防火墙
systemctl start|stop firewalld
# 重启防火墙
firewall-cmd --reload
# 设置开机启动|停止并禁用开机启动
systemctl enable|disable firewalld
...
</code></pre>
<ul>
<li>iptables</li>
</ul>
<pre><code class="language-shell"># 开启防火墙(重启后永久生效)
chkconfig iptables on
# 关闭防火墙(重启后永久生效)
chkconfig iptables off
# 开启防火墙(即时生效，重启后失效)
service iptables start
# 关闭防火墙(即时生效，重启后失效)
service iptables stop
# 重启防火墙
service iptables restartd
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="java-%E7%8E%AF%E5%A2%83">Java 环境</h2>
<h3 id="%E5%AE%89%E8%A3%85-openjdk">安装 OpenJDK</h3>
<p>默认 CentOS7 存储库包含最新的两个主要 Java LTS 版本，Java8 和 Java11，可以使用 yum 软件包管理器安装。</p>
<pre><code class="language-shell"># =&gt; 以 root 或具有 sudo 权限的用户运行
# 安装 OpenJDK11
$ sudo yum install java-11-openjdk-devel
# CentOS7 支持 openjdk-headless 即适合于服务器应用程序的最小 Java 运行时
# 安装 OpenJDK headless =&gt; 现已包含在 java-11-openjdk-devel 依赖安装中
$ sudo yum install java-11-openjdk-headless
# 安装OpenJDK 8
$ sudo yum install java-1.8.0-openjdk-devel
# 检查 Java 版本验证安装
$ java -version
openjdk version &quot;1.8.0_332&quot;
OpenJDK Runtime Environment (build 1.8.0_332-b09)
OpenJDK 64-Bit Server VM (build 25.332-b09, mixed mode)
</code></pre>
<h3 id="%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%89%88%E6%9C%AC">设置默认版本</h3>
<p>CentOS 系统上安装了多个 Java 版本，可以通过 <code>alternatives</code> 命令来设置终端默认版本。在改变 Java 版本的同时记得要改变 Java 编译的版本。</p>
<pre><code class="language-shell"># 查看 Java 默认版本
$ java -version
# 更改默认版本 =&gt; alternatives =&gt; 输入用作默认版本的数字
$ sudo alternatives --config java
There are 2 programs which provide 'java'.
  Selection    Command
-----------------------------------------------
*+ 1           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.332.b09-1.el7_9.x86_64/jre/bin/java)
   2           java-11-openjdk.x86_64 (/usr/lib/jvm/java-11-openjdk-11.0.15.0.9-2.el7_9.x86_64/bin/java)
Enter to keep the current selection[+], or type selection number: 1
# 更改默认的 javac 版本，运行 alternatives 命令更改Java的编译器javac版本
sudo alternatives --config javac
</code></pre>
<h3 id="javahome-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">JAVA_HOME 环境变量</h3>
<p>Java 应用程序根据 <code>JAVA_HOME</code> 环境变量来确定 Java 的安装位置，并选择指定的版本来运行该程序。</p>
<ul>
<li>针对当前用户配置 JAVA_HOME 环境变量</li>
</ul>
<pre><code class="language-shell">echo 'export JAVA_HOME=&quot;/usr/lib/jvm/java-1.8.0-openjdk&quot;' &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<ul>
<li>为所有用户配置 JAVA_HOME 环境变量/系统范围</li>
</ul>
<pre><code class="language-shell">echo 'export JAVA_HOME=&quot;/usr/lib/jvm/java-1.8.0-openjdk&quot;' | sudo tee /etc/profile.d/java.sh
source /etc/profile.d/java.sh
# 验证是否正确设置 JAVA_HOME 环境变量
echo $JAVA_HOME
/usr/lib/jvm/java-1.8.0-openjdk
</code></pre>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="initd-%E4%B8%8E-rcd-%E6%96%87%E4%BB%B6%E5%A4%B9%E8%AF%B4%E6%98%8E">init.d 与 rc.d 文件夹说明</h2>
<p>/etc 目录下的 init 目录里存放配置文件，而 init.d 目录中存在各样的可执行文件，换句话说 init.d 目录是 rc.d/init.d 目录的软连接。当 Linux 启动时会寻找 /etc/init.d 目录中的服务脚本，并根据脚本的运行级别确定不同的启动级别。</p>
<p>/etc/rc[0-6].d 是 /etc/rc.d/rc[0-6].d 的软连接，这时为了保持和 Unix 的兼容，即保持同一种服务在 CentOS 和 Ubuntu 使用的统一。值得注意的，CentOS 和 Ubuntu 中除了服务脚本放置的目录是相同的，服务脚本的编写及服务配置都是不同的。CentOS 和 Ubuntu 分别可使用 chkconfig 和 sysv-rc-conf 进行配置。</p>
<p>在 /etc/rc.d/rc[0-6].d 的文件，以 Kxx 开头的代表 kill 杀死进程，都以 stop 为参数来调用；凡是以 Sxx 开头的代表开始进程，都以 start 为参数来调用。调用的顺序按 xx 从小到大来执行。</p>
<p>许多程序需要开机启动，在 Windows 叫做服务 service，在 Linux 就叫做守护进程 daemon。init 进程的任务就是去运行这些开机启动的程序。Linux 允许为不同的场合，分配不同的开机启动程序，这就叫做运行级别 runlevel。也就是说，启动时根据运行级别，确定要运行哪些程序。</p>
<table>
<thead>
<tr>
<th>runlevel</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>运行级别0</td>
<td>系统停机状态，系统默认运行级别不能设为0，否则不能正常启动</td>
</tr>
<tr>
<td>运行级别1</td>
<td>单用户工作状态，root权限，用于系统维护，禁止远程登陆</td>
</tr>
<tr>
<td>运行级别2</td>
<td>多用户状态(没有NFS)</td>
</tr>
<tr>
<td>运行级别3</td>
<td>完全的多用户状态(有NFS)，登陆后进入控制台命令行模式</td>
</tr>
<tr>
<td>运行级别4</td>
<td>系统未使用，保留</td>
</tr>
<tr>
<td>运行级别5</td>
<td>X11控制台，登陆后进入图形GUI模式</td>
</tr>
<tr>
<td>运行级别6</td>
<td>系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动</td>
</tr>
</tbody>
</table>
<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><h2 id="%E7%BB%93%E6%9D%9F">结束</h2>
<p>本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"> CC BY-SA 4.0 </a>协议。转载请注明出处！</p>
<!--kg-card-end: markdown-->
    </section>


    
    <section class="article-comments gh-canvas">
        <div id="disqus_thread"></div>
        <script>
            var disqus_config = function () {
                this.page.url = "yourdomain.com/centos7/";
                this.page.identifier = "ghost-6155e4888a69a4110a92e5ff"
            };
            (function() {
            var d = document, s = d.createElement('script');
            s.src = 'https://zsxzy.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
        </script>
    </section>
   

</article>
</main>

    <section class="footer-cta outer">
        <div class="inner">
            <h2 class="footer-cta-title">Sign up for more like this.</h2>
            <a class="footer-cta-button" href="index.html#/portal" data-portal>
                <div class="footer-cta-input">Enter your email</div>
                <span>Subscribe</span>
            </a>
        </div>
    </section>



            <aside class="read-more-wrap outer">
                <div class="read-more inner">
                        
<article class="post-card post">

    <a class="post-card-image-link" href="../g-toc-css/index.html">

        <img class="post-card-image"
            srcset="../content/images/size/w600/2022/04/SLAMDUNK.png 600w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../content/images/size/w600/2022/04/SLAMDUNK.png"
            alt="SLAM DUNK"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../g-toc-css/index.html">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    G&amp;TOC&amp;CSS
                </h2>
            </header>
                <div class="post-card-excerpt">TOC 的需求实现以及相关的思考总结。</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2022-05-01">May 1, 2022</time>
                <span class="sep">—</span>
                <span class="post-card-meta-length">6 min read</span>
        </footer>

    </div>

</article>
                        
<article class="post-card post">

    <a class="post-card-image-link" href="../mybatis/index.html">

        <img class="post-card-image"
            srcset="../content/images/size/w600/2022/07/GreenTreesUnderBlueSky.jpg 600w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../content/images/size/w600/2022/07/GreenTreesUnderBlueSky.jpg"
            alt="Green Trees Under Blue Sky"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../mybatis/index.html">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    MyBatis
                </h2>
            </header>
                <div class="post-card-excerpt">半自动 ORM Object Relation Mapping 持久层框架 MyBatis</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2022-02-02">Feb 2, 2022</time>
                <span class="sep">—</span>
                <span class="post-card-meta-length">44 min read</span>
        </footer>

    </div>

</article>
                        
<article class="post-card post">

    <a class="post-card-image-link" href="../mysqlnote/index.html">

        <img class="post-card-image"
            srcset="../content/images/size/w600/2022/04/cloud.jpg 600w"
            sizes="(max-width: 1000px) 400px, 800px"
            src="../content/images/size/w600/2022/04/cloud.jpg"
            alt="mysql"
            loading="lazy"
        />


    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../mysqlnote/index.html">
            <header class="post-card-header">
                <div class="post-card-tags">
                </div>
                <h2 class="post-card-title">
                    MySQL 笔记
                </h2>
            </header>
                <div class="post-card-excerpt">MYSQL 基础篇</div>
        </a>

        <footer class="post-card-meta">
            <time class="post-card-meta-date" datetime="2021-12-22">Dec 22, 2021</time>
                <span class="sep">—</span>
                <span class="post-card-meta-length">82 min read</span>
        </footer>

    </div>

</article>
                </div>
            </aside>



    </div>

    <footer class="site-footer outer">
        <div class="inner">
            <section class="copyright"><a href="../index.html">zairesinatra</a> &copy; 2022</section>
            <nav class="site-footer-nav">
                
            </nav>
            <div><a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a></div>
        </div>
    </footer>

</div>


<script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous">
</script>
<script src="../assets/built/casper.js%3Fv=ab47967965"></script>
<script>
$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});
</script>

<!-- 2022 prismjs update -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/autoloader/prism-autoloader.min.js" onload="Prism.plugins.autoloader.languages_path='https://cdn.bootcss.com/prism/1.19.0/components/'"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-javascript.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-powershell.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-sql.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-jsx.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-java.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/toolbar/prism-toolbar.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script defer src="https://cdn.bootcss.com/prism/1.19.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>



<!-- music -->
<script src="http://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
<script src="http://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script>
<script>
	var meting_api='http://api.mizore.cn/meting/api.php?server=:server&type=:type&id=:id'
		$('.carousel').carousel({
			interval: 3000
		})
</script>
<!-- music -->
<div class="aplayer" data-id="7260570761" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-volume="0.6" lrc-type="0"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        tocSelector: '.toc',
        contentSelector: '.gh-content',
        hasInnerContainers: true
    });
    var tc = document.querySelector(".toc-container");
    var tch = tc.clientHeight;
    var ah = document.querySelector(".article-header");
    var ahh = ah.clientHeight;
    window.addEventListener("scroll", function () {
    if(document.body.clientWidth > 1170){
        var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
        var ihh = window.innerHeight;
        if(scrollY >= ihh + tch + ahh){
            var ctc = document.querySelector(".toc-container");
            ctc.style.position="sticky";
            ctc.style.position="-webkit-sticky";
            ctc.style.top = "120px";
            ctc.style.marginLeft = "800px";
            ctc.style.minWidth= "260px";
        }
        if(scrollY < tch + ahh -10){
            var ctc = document.querySelector(".toc-container");
            ctc.style.position="";
            ctc.style.top = "";
            ctc.style.marginLeft = "";
            console.log("zszszs")
        }
    }
    })
</script>
</body>
</html>
